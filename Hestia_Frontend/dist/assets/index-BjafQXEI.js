function yX(e,t){for(var g=0;g<t.length;g++){const n=t[g];if(typeof n!="string"&&!Array.isArray(n)){for(const l in n)if(l!=="default"&&!(l in e)){const r=Object.getOwnPropertyDescriptor(n,l);r&&Object.defineProperty(e,l,r.get?r:{enumerable:!0,get:()=>n[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function g(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(l){if(l.ep)return;l.ep=!0;const r=g(l);fetch(l.href,r)}})();function Ou(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tA={exports:{}},Xr={},gA={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fZ;function GX(){if(fZ)return Ue;fZ=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),r=Symbol.for("react.provider"),i=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),a=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),m=Symbol.iterator;function p(F){return F===null||typeof F!="object"?null:(F=m&&F[m]||F["@@iterator"],typeof F=="function"?F:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,y={};function S(F,M,ne){this.props=F,this.context=M,this.refs=y,this.updater=ne||B}S.prototype.isReactComponent={},S.prototype.setState=function(F,M){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,M,"setState")},S.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function V(){}V.prototype=S.prototype;function v(F,M,ne){this.props=F,this.context=M,this.refs=y,this.updater=ne||B}var R=v.prototype=new V;R.constructor=v,G(R,S.prototype),R.isPureReactComponent=!0;var k=Array.isArray,J=Object.prototype.hasOwnProperty,N={current:null},K={key:!0,ref:!0,__self:!0,__source:!0};function X(F,M,ne){var re,oe={},ce=null,ae=null;if(M!=null)for(re in M.ref!==void 0&&(ae=M.ref),M.key!==void 0&&(ce=""+M.key),M)J.call(M,re)&&!K.hasOwnProperty(re)&&(oe[re]=M[re]);var Ge=arguments.length-2;if(Ge===1)oe.children=ne;else if(1<Ge){for(var me=Array(Ge),ue=0;ue<Ge;ue++)me[ue]=arguments[ue+2];oe.children=me}if(F&&F.defaultProps)for(re in Ge=F.defaultProps,Ge)oe[re]===void 0&&(oe[re]=Ge[re]);return{$$typeof:e,type:F,key:ce,ref:ae,props:oe,_owner:N.current}}function w(F,M){return{$$typeof:e,type:F.type,key:M,ref:F.ref,props:F.props,_owner:F._owner}}function h(F){return typeof F=="object"&&F!==null&&F.$$typeof===e}function Y(F){var M={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ne){return M[ne]})}var z=/\/+/g;function T(F,M){return typeof F=="object"&&F!==null&&F.key!=null?Y(""+F.key):M.toString(36)}function U(F,M,ne,re,oe){var ce=typeof F;(ce==="undefined"||ce==="boolean")&&(F=null);var ae=!1;if(F===null)ae=!0;else switch(ce){case"string":case"number":ae=!0;break;case"object":switch(F.$$typeof){case e:case t:ae=!0}}if(ae)return ae=F,oe=oe(ae),F=re===""?"."+T(ae,0):re,k(oe)?(ne="",F!=null&&(ne=F.replace(z,"$&/")+"/"),U(oe,M,ne,"",function(ue){return ue})):oe!=null&&(h(oe)&&(oe=w(oe,ne+(!oe.key||ae&&ae.key===oe.key?"":(""+oe.key).replace(z,"$&/")+"/")+F)),M.push(oe)),1;if(ae=0,re=re===""?".":re+":",k(F))for(var Ge=0;Ge<F.length;Ge++){ce=F[Ge];var me=re+T(ce,Ge);ae+=U(ce,M,ne,me,oe)}else if(me=p(F),typeof me=="function")for(F=me.call(F),Ge=0;!(ce=F.next()).done;)ce=ce.value,me=re+T(ce,Ge++),ae+=U(ce,M,ne,me,oe);else if(ce==="object")throw M=String(F),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return ae}function P(F,M,ne){if(F==null)return F;var re=[],oe=0;return U(F,re,"","",function(ce){return M.call(ne,ce,oe++)}),re}function O(F){if(F._status===-1){var M=F._result;M=M(),M.then(function(ne){(F._status===0||F._status===-1)&&(F._status=1,F._result=ne)},function(ne){(F._status===0||F._status===-1)&&(F._status=2,F._result=ne)}),F._status===-1&&(F._status=0,F._result=M)}if(F._status===1)return F._result.default;throw F._result}var _={current:null},j={transition:null},Q={ReactCurrentDispatcher:_,ReactCurrentBatchConfig:j,ReactCurrentOwner:N};function $(){throw Error("act(...) is not supported in production builds of React.")}return Ue.Children={map:P,forEach:function(F,M,ne){P(F,function(){M.apply(this,arguments)},ne)},count:function(F){var M=0;return P(F,function(){M++}),M},toArray:function(F){return P(F,function(M){return M})||[]},only:function(F){if(!h(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Ue.Component=S,Ue.Fragment=g,Ue.Profiler=l,Ue.PureComponent=v,Ue.StrictMode=n,Ue.Suspense=a,Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,Ue.act=$,Ue.cloneElement=function(F,M,ne){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var re=G({},F.props),oe=F.key,ce=F.ref,ae=F._owner;if(M!=null){if(M.ref!==void 0&&(ce=M.ref,ae=N.current),M.key!==void 0&&(oe=""+M.key),F.type&&F.type.defaultProps)var Ge=F.type.defaultProps;for(me in M)J.call(M,me)&&!K.hasOwnProperty(me)&&(re[me]=M[me]===void 0&&Ge!==void 0?Ge[me]:M[me])}var me=arguments.length-2;if(me===1)re.children=ne;else if(1<me){Ge=Array(me);for(var ue=0;ue<me;ue++)Ge[ue]=arguments[ue+2];re.children=Ge}return{$$typeof:e,type:F.type,key:oe,ref:ce,props:re,_owner:ae}},Ue.createContext=function(F){return F={$$typeof:i,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:r,_context:F},F.Consumer=F},Ue.createElement=X,Ue.createFactory=function(F){var M=X.bind(null,F);return M.type=F,M},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(F){return{$$typeof:C,render:F}},Ue.isValidElement=h,Ue.lazy=function(F){return{$$typeof:A,_payload:{_status:-1,_result:F},_init:O}},Ue.memo=function(F,M){return{$$typeof:d,type:F,compare:M===void 0?null:M}},Ue.startTransition=function(F){var M=j.transition;j.transition={};try{F()}finally{j.transition=M}},Ue.unstable_act=$,Ue.useCallback=function(F,M){return _.current.useCallback(F,M)},Ue.useContext=function(F){return _.current.useContext(F)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(F){return _.current.useDeferredValue(F)},Ue.useEffect=function(F,M){return _.current.useEffect(F,M)},Ue.useId=function(){return _.current.useId()},Ue.useImperativeHandle=function(F,M,ne){return _.current.useImperativeHandle(F,M,ne)},Ue.useInsertionEffect=function(F,M){return _.current.useInsertionEffect(F,M)},Ue.useLayoutEffect=function(F,M){return _.current.useLayoutEffect(F,M)},Ue.useMemo=function(F,M){return _.current.useMemo(F,M)},Ue.useReducer=function(F,M,ne){return _.current.useReducer(F,M,ne)},Ue.useRef=function(F){return _.current.useRef(F)},Ue.useState=function(F){return _.current.useState(F)},Ue.useSyncExternalStore=function(F,M,ne){return _.current.useSyncExternalStore(F,M,ne)},Ue.useTransition=function(){return _.current.useTransition()},Ue.version="18.3.1",Ue}var BZ;function da(){return BZ||(BZ=1,gA.exports=GX()),gA.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SZ;function fX(){if(SZ)return Xr;SZ=1;var e=da(),t=Symbol.for("react.element"),g=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,l=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function i(C,a,d){var A,m={},p=null,B=null;d!==void 0&&(p=""+d),a.key!==void 0&&(p=""+a.key),a.ref!==void 0&&(B=a.ref);for(A in a)n.call(a,A)&&!r.hasOwnProperty(A)&&(m[A]=a[A]);if(C&&C.defaultProps)for(A in a=C.defaultProps,a)m[A]===void 0&&(m[A]=a[A]);return{$$typeof:t,type:C,key:p,ref:B,props:m,_owner:l.current}}return Xr.Fragment=g,Xr.jsx=i,Xr.jsxs=i,Xr}var VZ;function BX(){return VZ||(VZ=1,tA.exports=fX()),tA.exports}var Z=BX(),f=da();const Sn=Ou(f),ii=yX({__proto__:null,default:Sn},[f]);var oC={},nA={exports:{}},Xg={},oA={exports:{}},lA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WZ;function SX(){return WZ||(WZ=1,function(e){function t(j,Q){var $=j.length;j.push(Q);e:for(;0<$;){var F=$-1>>>1,M=j[F];if(0<l(M,Q))j[F]=Q,j[$]=M,$=F;else break e}}function g(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var Q=j[0],$=j.pop();if($!==Q){j[0]=$;e:for(var F=0,M=j.length,ne=M>>>1;F<ne;){var re=2*(F+1)-1,oe=j[re],ce=re+1,ae=j[ce];if(0>l(oe,$))ce<M&&0>l(ae,oe)?(j[F]=ae,j[ce]=$,F=ce):(j[F]=oe,j[re]=$,F=re);else if(ce<M&&0>l(ae,$))j[F]=ae,j[ce]=$,F=ce;else break e}}return Q}function l(j,Q){var $=j.sortIndex-Q.sortIndex;return $!==0?$:j.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var i=Date,C=i.now();e.unstable_now=function(){return i.now()-C}}var a=[],d=[],A=1,m=null,p=3,B=!1,G=!1,y=!1,S=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(j){for(var Q=g(d);Q!==null;){if(Q.callback===null)n(d);else if(Q.startTime<=j)n(d),Q.sortIndex=Q.expirationTime,t(a,Q);else break;Q=g(d)}}function k(j){if(y=!1,R(j),!G)if(g(a)!==null)G=!0,O(J);else{var Q=g(d);Q!==null&&_(k,Q.startTime-j)}}function J(j,Q){G=!1,y&&(y=!1,V(X),X=-1),B=!0;var $=p;try{for(R(Q),m=g(a);m!==null&&(!(m.expirationTime>Q)||j&&!Y());){var F=m.callback;if(typeof F=="function"){m.callback=null,p=m.priorityLevel;var M=F(m.expirationTime<=Q);Q=e.unstable_now(),typeof M=="function"?m.callback=M:m===g(a)&&n(a),R(Q)}else n(a);m=g(a)}if(m!==null)var ne=!0;else{var re=g(d);re!==null&&_(k,re.startTime-Q),ne=!1}return ne}finally{m=null,p=$,B=!1}}var N=!1,K=null,X=-1,w=5,h=-1;function Y(){return!(e.unstable_now()-h<w)}function z(){if(K!==null){var j=e.unstable_now();h=j;var Q=!0;try{Q=K(!0,j)}finally{Q?T():(N=!1,K=null)}}else N=!1}var T;if(typeof v=="function")T=function(){v(z)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,P=U.port2;U.port1.onmessage=z,T=function(){P.postMessage(null)}}else T=function(){S(z,0)};function O(j){K=j,N||(N=!0,T())}function _(j,Q){X=S(function(){j(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){G||B||(G=!0,O(J))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return g(a)},e.unstable_next=function(j){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var $=p;p=Q;try{return j()}finally{p=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,Q){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var $=p;p=j;try{return Q()}finally{p=$}},e.unstable_scheduleCallback=function(j,Q,$){var F=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?F+$:F):$=F,j){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=$+M,j={id:A++,callback:Q,priorityLevel:j,startTime:$,expirationTime:M,sortIndex:-1},$>F?(j.sortIndex=$,t(d,j),g(a)===null&&j===g(d)&&(y?(V(X),X=-1):y=!0,_(k,$-F))):(j.sortIndex=M,t(a,j),G||B||(G=!0,O(J))),j},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(j){var Q=p;return function(){var $=p;p=Q;try{return j.apply(this,arguments)}finally{p=$}}}}(lA)),lA}var RZ;function VX(){return RZ||(RZ=1,oA.exports=SX()),oA.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XZ;function WX(){if(XZ)return Xg;XZ=1;var e=da(),t=VX();function g(o){for(var I="https://reactjs.org/docs/error-decoder.html?invariant="+o,s=1;s<arguments.length;s++)I+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+o+"; visit "+I+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,l={};function r(o,I){i(o,I),i(o+"Capture",I)}function i(o,I){for(l[o]=I,o=0;o<I.length;o++)n.add(I[o])}var C=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),a=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A={},m={};function p(o){return a.call(m,o)?!0:a.call(A,o)?!1:d.test(o)?m[o]=!0:(A[o]=!0,!1)}function B(o,I,s,c){if(s!==null&&s.type===0)return!1;switch(typeof I){case"function":case"symbol":return!0;case"boolean":return c?!1:s!==null?!s.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function G(o,I,s,c){if(I===null||typeof I>"u"||B(o,I,s,c))return!0;if(c)return!1;if(s!==null)switch(s.type){case 3:return!I;case 4:return I===!1;case 5:return isNaN(I);case 6:return isNaN(I)||1>I}return!1}function y(o,I,s,c,u,b,W){this.acceptsBooleans=I===2||I===3||I===4,this.attributeName=c,this.attributeNamespace=u,this.mustUseProperty=s,this.propertyName=o,this.type=I,this.sanitizeURL=b,this.removeEmptyString=W}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){S[o]=new y(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var I=o[0];S[I]=new y(I,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){S[o]=new y(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){S[o]=new y(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){S[o]=new y(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){S[o]=new y(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){S[o]=new y(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){S[o]=new y(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){S[o]=new y(o,5,!1,o.toLowerCase(),null,!1,!1)});var V=/[\-:]([a-z])/g;function v(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var I=o.replace(V,v);S[I]=new y(I,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var I=o.replace(V,v);S[I]=new y(I,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var I=o.replace(V,v);S[I]=new y(I,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){S[o]=new y(o,1,!1,o.toLowerCase(),null,!1,!1)}),S.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){S[o]=new y(o,1,!1,o.toLowerCase(),null,!0,!0)});function R(o,I,s,c){var u=S.hasOwnProperty(I)?S[I]:null;(u!==null?u.type!==0:c||!(2<I.length)||I[0]!=="o"&&I[0]!=="O"||I[1]!=="n"&&I[1]!=="N")&&(G(I,s,u,c)&&(s=null),c||u===null?p(I)&&(s===null?o.removeAttribute(I):o.setAttribute(I,""+s)):u.mustUseProperty?o[u.propertyName]=s===null?u.type===3?!1:"":s:(I=u.attributeName,c=u.attributeNamespace,s===null?o.removeAttribute(I):(u=u.type,s=u===3||u===4&&s===!0?"":""+s,c?o.setAttributeNS(c,I,s):o.setAttribute(I,s))))}var k=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,J=Symbol.for("react.element"),N=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),Y=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),_=Symbol.for("react.offscreen"),j=Symbol.iterator;function Q(o){return o===null||typeof o!="object"?null:(o=j&&o[j]||o["@@iterator"],typeof o=="function"?o:null)}var $=Object.assign,F;function M(o){if(F===void 0)try{throw Error()}catch(s){var I=s.stack.trim().match(/\n( *(at )?)/);F=I&&I[1]||""}return`
`+F+o}var ne=!1;function re(o,I){if(!o||ne)return"";ne=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(I)if(I=function(){throw Error()},Object.defineProperty(I.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(I,[])}catch(q){var c=q}Reflect.construct(o,[],I)}else{try{I.call()}catch(q){c=q}o.call(I.prototype)}else{try{throw Error()}catch(q){c=q}o()}}catch(q){if(q&&c&&typeof q.stack=="string"){for(var u=q.stack.split(`
`),b=c.stack.split(`
`),W=u.length-1,H=b.length-1;1<=W&&0<=H&&u[W]!==b[H];)H--;for(;1<=W&&0<=H;W--,H--)if(u[W]!==b[H]){if(W!==1||H!==1)do if(W--,H--,0>H||u[W]!==b[H]){var x=`
`+u[W].replace(" at new "," at ");return o.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",o.displayName)),x}while(1<=W&&0<=H);break}}}finally{ne=!1,Error.prepareStackTrace=s}return(o=o?o.displayName||o.name:"")?M(o):""}function oe(o){switch(o.tag){case 5:return M(o.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return o=re(o.type,!1),o;case 11:return o=re(o.type.render,!1),o;case 1:return o=re(o.type,!0),o;default:return""}}function ce(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case K:return"Fragment";case N:return"Portal";case w:return"Profiler";case X:return"StrictMode";case T:return"Suspense";case U:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case Y:return(o.displayName||"Context")+".Consumer";case h:return(o._context.displayName||"Context")+".Provider";case z:var I=o.render;return o=o.displayName,o||(o=I.displayName||I.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case P:return I=o.displayName||null,I!==null?I:ce(o.type)||"Memo";case O:I=o._payload,o=o._init;try{return ce(o(I))}catch{}}return null}function ae(o){var I=o.type;switch(o.tag){case 24:return"Cache";case 9:return(I.displayName||"Context")+".Consumer";case 10:return(I._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=I.render,o=o.displayName||o.name||"",I.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return I;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(I);case 8:return I===X?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof I=="function")return I.displayName||I.name||null;if(typeof I=="string")return I}return null}function Ge(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function me(o){var I=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(I==="checkbox"||I==="radio")}function ue(o){var I=me(o)?"checked":"value",s=Object.getOwnPropertyDescriptor(o.constructor.prototype,I),c=""+o[I];if(!o.hasOwnProperty(I)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var u=s.get,b=s.set;return Object.defineProperty(o,I,{configurable:!0,get:function(){return u.call(this)},set:function(W){c=""+W,b.call(this,W)}}),Object.defineProperty(o,I,{enumerable:s.enumerable}),{getValue:function(){return c},setValue:function(W){c=""+W},stopTracking:function(){o._valueTracker=null,delete o[I]}}}}function de(o){o._valueTracker||(o._valueTracker=ue(o))}function he(o){if(!o)return!1;var I=o._valueTracker;if(!I)return!0;var s=I.getValue(),c="";return o&&(c=me(o)?o.checked?"true":"false":o.value),o=c,o!==s?(I.setValue(o),!0):!1}function Ke(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function He(o,I){var s=I.checked;return $({},I,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??o._wrapperState.initialChecked})}function xe(o,I){var s=I.defaultValue==null?"":I.defaultValue,c=I.checked!=null?I.checked:I.defaultChecked;s=Ge(I.value!=null?I.value:s),o._wrapperState={initialChecked:c,initialValue:s,controlled:I.type==="checkbox"||I.type==="radio"?I.checked!=null:I.value!=null}}function je(o,I){I=I.checked,I!=null&&R(o,"checked",I,!1)}function fe(o,I){je(o,I);var s=Ge(I.value),c=I.type;if(s!=null)c==="number"?(s===0&&o.value===""||o.value!=s)&&(o.value=""+s):o.value!==""+s&&(o.value=""+s);else if(c==="submit"||c==="reset"){o.removeAttribute("value");return}I.hasOwnProperty("value")?ye(o,I.type,s):I.hasOwnProperty("defaultValue")&&ye(o,I.type,Ge(I.defaultValue)),I.checked==null&&I.defaultChecked!=null&&(o.defaultChecked=!!I.defaultChecked)}function pe(o,I,s){if(I.hasOwnProperty("value")||I.hasOwnProperty("defaultValue")){var c=I.type;if(!(c!=="submit"&&c!=="reset"||I.value!==void 0&&I.value!==null))return;I=""+o._wrapperState.initialValue,s||I===o.value||(o.value=I),o.defaultValue=I}s=o.name,s!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,s!==""&&(o.name=s)}function ye(o,I,s){(I!=="number"||Ke(o.ownerDocument)!==o)&&(s==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+s&&(o.defaultValue=""+s))}var Ce=Array.isArray;function be(o,I,s,c){if(o=o.options,I){I={};for(var u=0;u<s.length;u++)I["$"+s[u]]=!0;for(s=0;s<o.length;s++)u=I.hasOwnProperty("$"+o[s].value),o[s].selected!==u&&(o[s].selected=u),u&&c&&(o[s].defaultSelected=!0)}else{for(s=""+Ge(s),I=null,u=0;u<o.length;u++){if(o[u].value===s){o[u].selected=!0,c&&(o[u].defaultSelected=!0);return}I!==null||o[u].disabled||(I=o[u])}I!==null&&(I.selected=!0)}}function le(o,I){if(I.dangerouslySetInnerHTML!=null)throw Error(g(91));return $({},I,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function ke(o,I){var s=I.value;if(s==null){if(s=I.children,I=I.defaultValue,s!=null){if(I!=null)throw Error(g(92));if(Ce(s)){if(1<s.length)throw Error(g(93));s=s[0]}I=s}I==null&&(I=""),s=I}o._wrapperState={initialValue:Ge(s)}}function we(o,I){var s=Ge(I.value),c=Ge(I.defaultValue);s!=null&&(s=""+s,s!==o.value&&(o.value=s),I.defaultValue==null&&o.defaultValue!==s&&(o.defaultValue=s)),c!=null&&(o.defaultValue=""+c)}function Te(o){var I=o.textContent;I===o._wrapperState.initialValue&&I!==""&&I!==null&&(o.value=I)}function ot(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tt(o,I){return o==null||o==="http://www.w3.org/1999/xhtml"?ot(I):o==="http://www.w3.org/2000/svg"&&I==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Ig,fg=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(I,s,c,u){MSApp.execUnsafeLocalFunction(function(){return o(I,s,c,u)})}:o}(function(o,I){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=I;else{for(Ig=Ig||document.createElement("div"),Ig.innerHTML="<svg>"+I.valueOf().toString()+"</svg>",I=Ig.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;I.firstChild;)o.appendChild(I.firstChild)}});function Zt(o,I){if(I){var s=o.firstChild;if(s&&s===o.lastChild&&s.nodeType===3){s.nodeValue=I;return}}o.textContent=I}var Pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mt=["Webkit","ms","Moz","O"];Object.keys(Pe).forEach(function(o){mt.forEach(function(I){I=I+o.charAt(0).toUpperCase()+o.substring(1),Pe[I]=Pe[o]})});function An(o,I,s){return I==null||typeof I=="boolean"||I===""?"":s||typeof I!="number"||I===0||Pe.hasOwnProperty(o)&&Pe[o]?(""+I).trim():I+"px"}function Je(o,I){o=o.style;for(var s in I)if(I.hasOwnProperty(s)){var c=s.indexOf("--")===0,u=An(s,I[s],c);s==="float"&&(s="cssFloat"),c?o.setProperty(s,u):o[s]=u}}var Qe=$({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yt(o,I){if(I){if(Qe[o]&&(I.children!=null||I.dangerouslySetInnerHTML!=null))throw Error(g(137,o));if(I.dangerouslySetInnerHTML!=null){if(I.children!=null)throw Error(g(60));if(typeof I.dangerouslySetInnerHTML!="object"||!("__html"in I.dangerouslySetInnerHTML))throw Error(g(61))}if(I.style!=null&&typeof I.style!="object")throw Error(g(62))}}function jg(o,I){if(o.indexOf("-")===-1)return typeof I.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vl=null;function mc(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var hc=null,Yl=null,Hl=null;function Eh(o){if(o=Ar(o)){if(typeof hc!="function")throw Error(g(280));var I=o.stateNode;I&&(I=bs(I),hc(o.stateNode,o.type,I))}}function zh(o){Yl?Hl?Hl.push(o):Hl=[o]:Yl=o}function Mh(){if(Yl){var o=Yl,I=Hl;if(Hl=Yl=null,Eh(o),I)for(o=0;o<I.length;o++)Eh(I[o])}}function Th(o,I){return o(I)}function Uh(){}var pc=!1;function Lh(o,I,s){if(pc)return o(I,s);pc=!0;try{return Th(o,I,s)}finally{pc=!1,(Yl!==null||Hl!==null)&&(Uh(),Mh())}}function DI(o,I){var s=o.stateNode;if(s===null)return null;var c=bs(s);if(c===null)return null;s=c[I];e:switch(I){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(o=o.type,c=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!c;break e;default:o=!1}if(o)return null;if(s&&typeof s!="function")throw Error(g(231,I,typeof s));return s}var bc=!1;if(C)try{var jI={};Object.defineProperty(jI,"passive",{get:function(){bc=!0}}),window.addEventListener("test",jI,jI),window.removeEventListener("test",jI,jI)}catch{bc=!1}function WW(o,I,s,c,u,b,W,H,x){var q=Array.prototype.slice.call(arguments,3);try{I.apply(s,q)}catch(ie){this.onError(ie)}}var PI=!1,qi=null,$i=!1,Zc=null,RW={onError:function(o){PI=!0,qi=o}};function XW(o,I,s,c,u,b,W,H,x){PI=!1,qi=null,WW.apply(RW,arguments)}function kW(o,I,s,c,u,b,W,H,x){if(XW.apply(this,arguments),PI){if(PI){var q=qi;PI=!1,qi=null}else throw Error(g(198));$i||($i=!0,Zc=q)}}function Oo(o){var I=o,s=o;if(o.alternate)for(;I.return;)I=I.return;else{o=I;do I=o,(I.flags&4098)!==0&&(s=I.return),o=I.return;while(o)}return I.tag===3?s:null}function Qh(o){if(o.tag===13){var I=o.memoizedState;if(I===null&&(o=o.alternate,o!==null&&(I=o.memoizedState)),I!==null)return I.dehydrated}return null}function Dh(o){if(Oo(o)!==o)throw Error(g(188))}function JW(o){var I=o.alternate;if(!I){if(I=Oo(o),I===null)throw Error(g(188));return I!==o?null:o}for(var s=o,c=I;;){var u=s.return;if(u===null)break;var b=u.alternate;if(b===null){if(c=u.return,c!==null){s=c;continue}break}if(u.child===b.child){for(b=u.child;b;){if(b===s)return Dh(u),o;if(b===c)return Dh(u),I;b=b.sibling}throw Error(g(188))}if(s.return!==c.return)s=u,c=b;else{for(var W=!1,H=u.child;H;){if(H===s){W=!0,s=u,c=b;break}if(H===c){W=!0,c=u,s=b;break}H=H.sibling}if(!W){for(H=b.child;H;){if(H===s){W=!0,s=b,c=u;break}if(H===c){W=!0,c=b,s=u;break}H=H.sibling}if(!W)throw Error(g(189))}}if(s.alternate!==c)throw Error(g(190))}if(s.tag!==3)throw Error(g(188));return s.stateNode.current===s?o:I}function jh(o){return o=JW(o),o!==null?Ph(o):null}function Ph(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var I=Ph(o);if(I!==null)return I;o=o.sibling}return null}var Oh=t.unstable_scheduleCallback,qh=t.unstable_cancelCallback,vW=t.unstable_shouldYield,YW=t.unstable_requestPaint,Nt=t.unstable_now,HW=t.unstable_getCurrentPriorityLevel,yc=t.unstable_ImmediatePriority,$h=t.unstable_UserBlockingPriority,_i=t.unstable_NormalPriority,wW=t.unstable_LowPriority,_h=t.unstable_IdlePriority,es=null,Rn=null;function FW(o){if(Rn&&typeof Rn.onCommitFiberRoot=="function")try{Rn.onCommitFiberRoot(es,o,void 0,(o.current.flags&128)===128)}catch{}}var un=Math.clz32?Math.clz32:xW,NW=Math.log,KW=Math.LN2;function xW(o){return o>>>=0,o===0?32:31-(NW(o)/KW|0)|0}var ts=64,gs=4194304;function OI(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function ns(o,I){var s=o.pendingLanes;if(s===0)return 0;var c=0,u=o.suspendedLanes,b=o.pingedLanes,W=s&268435455;if(W!==0){var H=W&~u;H!==0?c=OI(H):(b&=W,b!==0&&(c=OI(b)))}else W=s&~u,W!==0?c=OI(W):b!==0&&(c=OI(b));if(c===0)return 0;if(I!==0&&I!==c&&(I&u)===0&&(u=c&-c,b=I&-I,u>=b||u===16&&(b&4194240)!==0))return I;if((c&4)!==0&&(c|=s&16),I=o.entangledLanes,I!==0)for(o=o.entanglements,I&=c;0<I;)s=31-un(I),u=1<<s,c|=o[s],I&=~u;return c}function EW(o,I){switch(o){case 1:case 2:case 4:return I+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return I+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zW(o,I){for(var s=o.suspendedLanes,c=o.pingedLanes,u=o.expirationTimes,b=o.pendingLanes;0<b;){var W=31-un(b),H=1<<W,x=u[W];x===-1?((H&s)===0||(H&c)!==0)&&(u[W]=EW(H,I)):x<=I&&(o.expiredLanes|=H),b&=~H}}function Gc(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function ep(){var o=ts;return ts<<=1,(ts&4194240)===0&&(ts=64),o}function fc(o){for(var I=[],s=0;31>s;s++)I.push(o);return I}function qI(o,I,s){o.pendingLanes|=I,I!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,I=31-un(I),o[I]=s}function MW(o,I){var s=o.pendingLanes&~I;o.pendingLanes=I,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=I,o.mutableReadLanes&=I,o.entangledLanes&=I,I=o.entanglements;var c=o.eventTimes;for(o=o.expirationTimes;0<s;){var u=31-un(s),b=1<<u;I[u]=0,c[u]=-1,o[u]=-1,s&=~b}}function Bc(o,I){var s=o.entangledLanes|=I;for(o=o.entanglements;s;){var c=31-un(s),u=1<<c;u&I|o[c]&I&&(o[c]|=I),s&=~u}}var lt=0;function tp(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var gp,Sc,np,op,lp,Vc=!1,os=[],yo=null,Go=null,fo=null,$I=new Map,_I=new Map,Bo=[],TW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ip(o,I){switch(o){case"focusin":case"focusout":yo=null;break;case"dragenter":case"dragleave":Go=null;break;case"mouseover":case"mouseout":fo=null;break;case"pointerover":case"pointerout":$I.delete(I.pointerId);break;case"gotpointercapture":case"lostpointercapture":_I.delete(I.pointerId)}}function er(o,I,s,c,u,b){return o===null||o.nativeEvent!==b?(o={blockedOn:I,domEventName:s,eventSystemFlags:c,nativeEvent:b,targetContainers:[u]},I!==null&&(I=Ar(I),I!==null&&Sc(I)),o):(o.eventSystemFlags|=c,I=o.targetContainers,u!==null&&I.indexOf(u)===-1&&I.push(u),o)}function UW(o,I,s,c,u){switch(I){case"focusin":return yo=er(yo,o,I,s,c,u),!0;case"dragenter":return Go=er(Go,o,I,s,c,u),!0;case"mouseover":return fo=er(fo,o,I,s,c,u),!0;case"pointerover":var b=u.pointerId;return $I.set(b,er($I.get(b)||null,o,I,s,c,u)),!0;case"gotpointercapture":return b=u.pointerId,_I.set(b,er(_I.get(b)||null,o,I,s,c,u)),!0}return!1}function rp(o){var I=qo(o.target);if(I!==null){var s=Oo(I);if(s!==null){if(I=s.tag,I===13){if(I=Qh(s),I!==null){o.blockedOn=I,lp(o.priority,function(){np(s)});return}}else if(I===3&&s.stateNode.current.memoizedState.isDehydrated){o.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}o.blockedOn=null}function ls(o){if(o.blockedOn!==null)return!1;for(var I=o.targetContainers;0<I.length;){var s=Rc(o.domEventName,o.eventSystemFlags,I[0],o.nativeEvent);if(s===null){s=o.nativeEvent;var c=new s.constructor(s.type,s);vl=c,s.target.dispatchEvent(c),vl=null}else return I=Ar(s),I!==null&&Sc(I),o.blockedOn=s,!1;I.shift()}return!0}function ip(o,I,s){ls(o)&&s.delete(I)}function LW(){Vc=!1,yo!==null&&ls(yo)&&(yo=null),Go!==null&&ls(Go)&&(Go=null),fo!==null&&ls(fo)&&(fo=null),$I.forEach(ip),_I.forEach(ip)}function tr(o,I){o.blockedOn===I&&(o.blockedOn=null,Vc||(Vc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,LW)))}function gr(o){function I(u){return tr(u,o)}if(0<os.length){tr(os[0],o);for(var s=1;s<os.length;s++){var c=os[s];c.blockedOn===o&&(c.blockedOn=null)}}for(yo!==null&&tr(yo,o),Go!==null&&tr(Go,o),fo!==null&&tr(fo,o),$I.forEach(I),_I.forEach(I),s=0;s<Bo.length;s++)c=Bo[s],c.blockedOn===o&&(c.blockedOn=null);for(;0<Bo.length&&(s=Bo[0],s.blockedOn===null);)rp(s),s.blockedOn===null&&Bo.shift()}var wl=k.ReactCurrentBatchConfig,Is=!0;function QW(o,I,s,c){var u=lt,b=wl.transition;wl.transition=null;try{lt=1,Wc(o,I,s,c)}finally{lt=u,wl.transition=b}}function DW(o,I,s,c){var u=lt,b=wl.transition;wl.transition=null;try{lt=4,Wc(o,I,s,c)}finally{lt=u,wl.transition=b}}function Wc(o,I,s,c){if(Is){var u=Rc(o,I,s,c);if(u===null)Lc(o,I,c,rs,s),Ip(o,c);else if(UW(u,o,I,s,c))c.stopPropagation();else if(Ip(o,c),I&4&&-1<TW.indexOf(o)){for(;u!==null;){var b=Ar(u);if(b!==null&&gp(b),b=Rc(o,I,s,c),b===null&&Lc(o,I,c,rs,s),b===u)break;u=b}u!==null&&c.stopPropagation()}else Lc(o,I,c,null,s)}}var rs=null;function Rc(o,I,s,c){if(rs=null,o=mc(c),o=qo(o),o!==null)if(I=Oo(o),I===null)o=null;else if(s=I.tag,s===13){if(o=Qh(I),o!==null)return o;o=null}else if(s===3){if(I.stateNode.current.memoizedState.isDehydrated)return I.tag===3?I.stateNode.containerInfo:null;o=null}else I!==o&&(o=null);return rs=o,null}function sp(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HW()){case yc:return 1;case $h:return 4;case _i:case wW:return 16;case _h:return 536870912;default:return 16}default:return 16}}var So=null,Xc=null,is=null;function Cp(){if(is)return is;var o,I=Xc,s=I.length,c,u="value"in So?So.value:So.textContent,b=u.length;for(o=0;o<s&&I[o]===u[o];o++);var W=s-o;for(c=1;c<=W&&I[s-c]===u[b-c];c++);return is=u.slice(o,1<c?1-c:void 0)}function ss(o){var I=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&I===13&&(o=13)):o=I,o===10&&(o=13),32<=o||o===13?o:0}function Cs(){return!0}function ap(){return!1}function Ng(o){function I(s,c,u,b,W){this._reactName=s,this._targetInst=u,this.type=c,this.nativeEvent=b,this.target=W,this.currentTarget=null;for(var H in o)o.hasOwnProperty(H)&&(s=o[H],this[H]=s?s(b):b[H]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Cs:ap,this.isPropagationStopped=ap,this}return $(I.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Cs)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Cs)},persist:function(){},isPersistent:Cs}),I}var Fl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kc=Ng(Fl),nr=$({},Fl,{view:0,detail:0}),jW=Ng(nr),Jc,vc,or,as=$({},nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hc,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==or&&(or&&o.type==="mousemove"?(Jc=o.screenX-or.screenX,vc=o.screenY-or.screenY):vc=Jc=0,or=o),Jc)},movementY:function(o){return"movementY"in o?o.movementY:vc}}),cp=Ng(as),PW=$({},as,{dataTransfer:0}),OW=Ng(PW),qW=$({},nr,{relatedTarget:0}),Yc=Ng(qW),$W=$({},Fl,{animationName:0,elapsedTime:0,pseudoElement:0}),_W=Ng($W),eR=$({},Fl,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),tR=Ng(eR),gR=$({},Fl,{data:0}),dp=Ng(gR),nR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IR(o){var I=this.nativeEvent;return I.getModifierState?I.getModifierState(o):(o=lR[o])?!!I[o]:!1}function Hc(){return IR}var rR=$({},nr,{key:function(o){if(o.key){var I=nR[o.key]||o.key;if(I!=="Unidentified")return I}return o.type==="keypress"?(o=ss(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?oR[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hc,charCode:function(o){return o.type==="keypress"?ss(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?ss(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),iR=Ng(rR),sR=$({},as,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ap=Ng(sR),CR=$({},nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hc}),aR=Ng(CR),cR=$({},Fl,{propertyName:0,elapsedTime:0,pseudoElement:0}),dR=Ng(cR),AR=$({},as,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),uR=Ng(AR),mR=[9,13,27,32],wc=C&&"CompositionEvent"in window,lr=null;C&&"documentMode"in document&&(lr=document.documentMode);var hR=C&&"TextEvent"in window&&!lr,up=C&&(!wc||lr&&8<lr&&11>=lr),mp=" ",hp=!1;function pp(o,I){switch(o){case"keyup":return mR.indexOf(I.keyCode)!==-1;case"keydown":return I.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bp(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Nl=!1;function pR(o,I){switch(o){case"compositionend":return bp(I);case"keypress":return I.which!==32?null:(hp=!0,mp);case"textInput":return o=I.data,o===mp&&hp?null:o;default:return null}}function bR(o,I){if(Nl)return o==="compositionend"||!wc&&pp(o,I)?(o=Cp(),is=Xc=So=null,Nl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(I.ctrlKey||I.altKey||I.metaKey)||I.ctrlKey&&I.altKey){if(I.char&&1<I.char.length)return I.char;if(I.which)return String.fromCharCode(I.which)}return null;case"compositionend":return up&&I.locale!=="ko"?null:I.data;default:return null}}var ZR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zp(o){var I=o&&o.nodeName&&o.nodeName.toLowerCase();return I==="input"?!!ZR[o.type]:I==="textarea"}function yp(o,I,s,c){zh(c),I=ms(I,"onChange"),0<I.length&&(s=new kc("onChange","change",null,s,c),o.push({event:s,listeners:I}))}var Ir=null,rr=null;function yR(o){xp(o,0)}function cs(o){var I=Ml(o);if(he(I))return o}function GR(o,I){if(o==="change")return I}var Gp=!1;if(C){var Fc;if(C){var Nc="oninput"in document;if(!Nc){var fp=document.createElement("div");fp.setAttribute("oninput","return;"),Nc=typeof fp.oninput=="function"}Fc=Nc}else Fc=!1;Gp=Fc&&(!document.documentMode||9<document.documentMode)}function Bp(){Ir&&(Ir.detachEvent("onpropertychange",Sp),rr=Ir=null)}function Sp(o){if(o.propertyName==="value"&&cs(rr)){var I=[];yp(I,rr,o,mc(o)),Lh(yR,I)}}function fR(o,I,s){o==="focusin"?(Bp(),Ir=I,rr=s,Ir.attachEvent("onpropertychange",Sp)):o==="focusout"&&Bp()}function BR(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return cs(rr)}function SR(o,I){if(o==="click")return cs(I)}function VR(o,I){if(o==="input"||o==="change")return cs(I)}function WR(o,I){return o===I&&(o!==0||1/o===1/I)||o!==o&&I!==I}var mn=typeof Object.is=="function"?Object.is:WR;function ir(o,I){if(mn(o,I))return!0;if(typeof o!="object"||o===null||typeof I!="object"||I===null)return!1;var s=Object.keys(o),c=Object.keys(I);if(s.length!==c.length)return!1;for(c=0;c<s.length;c++){var u=s[c];if(!a.call(I,u)||!mn(o[u],I[u]))return!1}return!0}function Vp(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Wp(o,I){var s=Vp(o);o=0;for(var c;s;){if(s.nodeType===3){if(c=o+s.textContent.length,o<=I&&c>=I)return{node:s,offset:I-o};o=c}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Vp(s)}}function Rp(o,I){return o&&I?o===I?!0:o&&o.nodeType===3?!1:I&&I.nodeType===3?Rp(o,I.parentNode):"contains"in o?o.contains(I):o.compareDocumentPosition?!!(o.compareDocumentPosition(I)&16):!1:!1}function Xp(){for(var o=window,I=Ke();I instanceof o.HTMLIFrameElement;){try{var s=typeof I.contentWindow.location.href=="string"}catch{s=!1}if(s)o=I.contentWindow;else break;I=Ke(o.document)}return I}function Kc(o){var I=o&&o.nodeName&&o.nodeName.toLowerCase();return I&&(I==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||I==="textarea"||o.contentEditable==="true")}function RR(o){var I=Xp(),s=o.focusedElem,c=o.selectionRange;if(I!==s&&s&&s.ownerDocument&&Rp(s.ownerDocument.documentElement,s)){if(c!==null&&Kc(s)){if(I=c.start,o=c.end,o===void 0&&(o=I),"selectionStart"in s)s.selectionStart=I,s.selectionEnd=Math.min(o,s.value.length);else if(o=(I=s.ownerDocument||document)&&I.defaultView||window,o.getSelection){o=o.getSelection();var u=s.textContent.length,b=Math.min(c.start,u);c=c.end===void 0?b:Math.min(c.end,u),!o.extend&&b>c&&(u=c,c=b,b=u),u=Wp(s,b);var W=Wp(s,c);u&&W&&(o.rangeCount!==1||o.anchorNode!==u.node||o.anchorOffset!==u.offset||o.focusNode!==W.node||o.focusOffset!==W.offset)&&(I=I.createRange(),I.setStart(u.node,u.offset),o.removeAllRanges(),b>c?(o.addRange(I),o.extend(W.node,W.offset)):(I.setEnd(W.node,W.offset),o.addRange(I)))}}for(I=[],o=s;o=o.parentNode;)o.nodeType===1&&I.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<I.length;s++)o=I[s],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var XR=C&&"documentMode"in document&&11>=document.documentMode,Kl=null,xc=null,sr=null,Ec=!1;function kp(o,I,s){var c=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Ec||Kl==null||Kl!==Ke(c)||(c=Kl,"selectionStart"in c&&Kc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),sr&&ir(sr,c)||(sr=c,c=ms(xc,"onSelect"),0<c.length&&(I=new kc("onSelect","select",null,I,s),o.push({event:I,listeners:c}),I.target=Kl)))}function ds(o,I){var s={};return s[o.toLowerCase()]=I.toLowerCase(),s["Webkit"+o]="webkit"+I,s["Moz"+o]="moz"+I,s}var xl={animationend:ds("Animation","AnimationEnd"),animationiteration:ds("Animation","AnimationIteration"),animationstart:ds("Animation","AnimationStart"),transitionend:ds("Transition","TransitionEnd")},zc={},Jp={};C&&(Jp=document.createElement("div").style,"AnimationEvent"in window||(delete xl.animationend.animation,delete xl.animationiteration.animation,delete xl.animationstart.animation),"TransitionEvent"in window||delete xl.transitionend.transition);function As(o){if(zc[o])return zc[o];if(!xl[o])return o;var I=xl[o],s;for(s in I)if(I.hasOwnProperty(s)&&s in Jp)return zc[o]=I[s];return o}var vp=As("animationend"),Yp=As("animationiteration"),Hp=As("animationstart"),wp=As("transitionend"),Fp=new Map,Np="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vo(o,I){Fp.set(o,I),r(I,[o])}for(var Mc=0;Mc<Np.length;Mc++){var Tc=Np[Mc],kR=Tc.toLowerCase(),JR=Tc[0].toUpperCase()+Tc.slice(1);Vo(kR,"on"+JR)}Vo(vp,"onAnimationEnd"),Vo(Yp,"onAnimationIteration"),Vo(Hp,"onAnimationStart"),Vo("dblclick","onDoubleClick"),Vo("focusin","onFocus"),Vo("focusout","onBlur"),Vo(wp,"onTransitionEnd"),i("onMouseEnter",["mouseout","mouseover"]),i("onMouseLeave",["mouseout","mouseover"]),i("onPointerEnter",["pointerout","pointerover"]),i("onPointerLeave",["pointerout","pointerover"]),r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),r("onBeforeInput",["compositionend","keypress","textInput","paste"]),r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cr));function Kp(o,I,s){var c=o.type||"unknown-event";o.currentTarget=s,kW(c,I,void 0,o),o.currentTarget=null}function xp(o,I){I=(I&4)!==0;for(var s=0;s<o.length;s++){var c=o[s],u=c.event;c=c.listeners;e:{var b=void 0;if(I)for(var W=c.length-1;0<=W;W--){var H=c[W],x=H.instance,q=H.currentTarget;if(H=H.listener,x!==b&&u.isPropagationStopped())break e;Kp(u,H,q),b=x}else for(W=0;W<c.length;W++){if(H=c[W],x=H.instance,q=H.currentTarget,H=H.listener,x!==b&&u.isPropagationStopped())break e;Kp(u,H,q),b=x}}}if($i)throw o=Zc,$i=!1,Zc=null,o}function pt(o,I){var s=I[qc];s===void 0&&(s=I[qc]=new Set);var c=o+"__bubble";s.has(c)||(Ep(I,o,2,!1),s.add(c))}function Uc(o,I,s){var c=0;I&&(c|=4),Ep(s,o,c,I)}var us="_reactListening"+Math.random().toString(36).slice(2);function ar(o){if(!o[us]){o[us]=!0,n.forEach(function(s){s!=="selectionchange"&&(vR.has(s)||Uc(s,!1,o),Uc(s,!0,o))});var I=o.nodeType===9?o:o.ownerDocument;I===null||I[us]||(I[us]=!0,Uc("selectionchange",!1,I))}}function Ep(o,I,s,c){switch(sp(I)){case 1:var u=QW;break;case 4:u=DW;break;default:u=Wc}s=u.bind(null,I,s,o),u=void 0,!bc||I!=="touchstart"&&I!=="touchmove"&&I!=="wheel"||(u=!0),c?u!==void 0?o.addEventListener(I,s,{capture:!0,passive:u}):o.addEventListener(I,s,!0):u!==void 0?o.addEventListener(I,s,{passive:u}):o.addEventListener(I,s,!1)}function Lc(o,I,s,c,u){var b=c;if((I&1)===0&&(I&2)===0&&c!==null)e:for(;;){if(c===null)return;var W=c.tag;if(W===3||W===4){var H=c.stateNode.containerInfo;if(H===u||H.nodeType===8&&H.parentNode===u)break;if(W===4)for(W=c.return;W!==null;){var x=W.tag;if((x===3||x===4)&&(x=W.stateNode.containerInfo,x===u||x.nodeType===8&&x.parentNode===u))return;W=W.return}for(;H!==null;){if(W=qo(H),W===null)return;if(x=W.tag,x===5||x===6){c=b=W;continue e}H=H.parentNode}}c=c.return}Lh(function(){var q=b,ie=mc(s),se=[];e:{var Ie=Fp.get(o);if(Ie!==void 0){var Ze=kc,Se=o;switch(o){case"keypress":if(ss(s)===0)break e;case"keydown":case"keyup":Ze=iR;break;case"focusin":Se="focus",Ze=Yc;break;case"focusout":Se="blur",Ze=Yc;break;case"beforeblur":case"afterblur":Ze=Yc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ze=cp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ze=OW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ze=aR;break;case vp:case Yp:case Hp:Ze=_W;break;case wp:Ze=dR;break;case"scroll":Ze=jW;break;case"wheel":Ze=uR;break;case"copy":case"cut":case"paste":Ze=tR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ze=Ap}var Ve=(I&4)!==0,Kt=!Ve&&o==="scroll",L=Ve?Ie!==null?Ie+"Capture":null:Ie;Ve=[];for(var E=q,D;E!==null;){D=E;var Ae=D.stateNode;if(D.tag===5&&Ae!==null&&(D=Ae,L!==null&&(Ae=DI(E,L),Ae!=null&&Ve.push(cr(E,Ae,D)))),Kt)break;E=E.return}0<Ve.length&&(Ie=new Ze(Ie,Se,null,s,ie),se.push({event:Ie,listeners:Ve}))}}if((I&7)===0){e:{if(Ie=o==="mouseover"||o==="pointerover",Ze=o==="mouseout"||o==="pointerout",Ie&&s!==vl&&(Se=s.relatedTarget||s.fromElement)&&(qo(Se)||Se[$n]))break e;if((Ze||Ie)&&(Ie=ie.window===ie?ie:(Ie=ie.ownerDocument)?Ie.defaultView||Ie.parentWindow:window,Ze?(Se=s.relatedTarget||s.toElement,Ze=q,Se=Se?qo(Se):null,Se!==null&&(Kt=Oo(Se),Se!==Kt||Se.tag!==5&&Se.tag!==6)&&(Se=null)):(Ze=null,Se=q),Ze!==Se)){if(Ve=cp,Ae="onMouseLeave",L="onMouseEnter",E="mouse",(o==="pointerout"||o==="pointerover")&&(Ve=Ap,Ae="onPointerLeave",L="onPointerEnter",E="pointer"),Kt=Ze==null?Ie:Ml(Ze),D=Se==null?Ie:Ml(Se),Ie=new Ve(Ae,E+"leave",Ze,s,ie),Ie.target=Kt,Ie.relatedTarget=D,Ae=null,qo(ie)===q&&(Ve=new Ve(L,E+"enter",Se,s,ie),Ve.target=D,Ve.relatedTarget=Kt,Ae=Ve),Kt=Ae,Ze&&Se)t:{for(Ve=Ze,L=Se,E=0,D=Ve;D;D=El(D))E++;for(D=0,Ae=L;Ae;Ae=El(Ae))D++;for(;0<E-D;)Ve=El(Ve),E--;for(;0<D-E;)L=El(L),D--;for(;E--;){if(Ve===L||L!==null&&Ve===L.alternate)break t;Ve=El(Ve),L=El(L)}Ve=null}else Ve=null;Ze!==null&&zp(se,Ie,Ze,Ve,!1),Se!==null&&Kt!==null&&zp(se,Kt,Se,Ve,!0)}}e:{if(Ie=q?Ml(q):window,Ze=Ie.nodeName&&Ie.nodeName.toLowerCase(),Ze==="select"||Ze==="input"&&Ie.type==="file")var We=GR;else if(Zp(Ie))if(Gp)We=VR;else{We=BR;var ve=fR}else(Ze=Ie.nodeName)&&Ze.toLowerCase()==="input"&&(Ie.type==="checkbox"||Ie.type==="radio")&&(We=SR);if(We&&(We=We(o,q))){yp(se,We,s,ie);break e}ve&&ve(o,Ie,q),o==="focusout"&&(ve=Ie._wrapperState)&&ve.controlled&&Ie.type==="number"&&ye(Ie,"number",Ie.value)}switch(ve=q?Ml(q):window,o){case"focusin":(Zp(ve)||ve.contentEditable==="true")&&(Kl=ve,xc=q,sr=null);break;case"focusout":sr=xc=Kl=null;break;case"mousedown":Ec=!0;break;case"contextmenu":case"mouseup":case"dragend":Ec=!1,kp(se,s,ie);break;case"selectionchange":if(XR)break;case"keydown":case"keyup":kp(se,s,ie)}var Ye;if(wc)e:{switch(o){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else Nl?pp(o,s)&&(Ne="onCompositionEnd"):o==="keydown"&&s.keyCode===229&&(Ne="onCompositionStart");Ne&&(up&&s.locale!=="ko"&&(Nl||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&Nl&&(Ye=Cp()):(So=ie,Xc="value"in So?So.value:So.textContent,Nl=!0)),ve=ms(q,Ne),0<ve.length&&(Ne=new dp(Ne,o,null,s,ie),se.push({event:Ne,listeners:ve}),Ye?Ne.data=Ye:(Ye=bp(s),Ye!==null&&(Ne.data=Ye)))),(Ye=hR?pR(o,s):bR(o,s))&&(q=ms(q,"onBeforeInput"),0<q.length&&(ie=new dp("onBeforeInput","beforeinput",null,s,ie),se.push({event:ie,listeners:q}),ie.data=Ye))}xp(se,I)})}function cr(o,I,s){return{instance:o,listener:I,currentTarget:s}}function ms(o,I){for(var s=I+"Capture",c=[];o!==null;){var u=o,b=u.stateNode;u.tag===5&&b!==null&&(u=b,b=DI(o,s),b!=null&&c.unshift(cr(o,b,u)),b=DI(o,I),b!=null&&c.push(cr(o,b,u))),o=o.return}return c}function El(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function zp(o,I,s,c,u){for(var b=I._reactName,W=[];s!==null&&s!==c;){var H=s,x=H.alternate,q=H.stateNode;if(x!==null&&x===c)break;H.tag===5&&q!==null&&(H=q,u?(x=DI(s,b),x!=null&&W.unshift(cr(s,x,H))):u||(x=DI(s,b),x!=null&&W.push(cr(s,x,H)))),s=s.return}W.length!==0&&o.push({event:I,listeners:W})}var YR=/\r\n?/g,HR=/\u0000|\uFFFD/g;function Mp(o){return(typeof o=="string"?o:""+o).replace(YR,`
`).replace(HR,"")}function hs(o,I,s){if(I=Mp(I),Mp(o)!==I&&s)throw Error(g(425))}function ps(){}var Qc=null,Dc=null;function jc(o,I){return o==="textarea"||o==="noscript"||typeof I.children=="string"||typeof I.children=="number"||typeof I.dangerouslySetInnerHTML=="object"&&I.dangerouslySetInnerHTML!==null&&I.dangerouslySetInnerHTML.__html!=null}var Pc=typeof setTimeout=="function"?setTimeout:void 0,wR=typeof clearTimeout=="function"?clearTimeout:void 0,Tp=typeof Promise=="function"?Promise:void 0,FR=typeof queueMicrotask=="function"?queueMicrotask:typeof Tp<"u"?function(o){return Tp.resolve(null).then(o).catch(NR)}:Pc;function NR(o){setTimeout(function(){throw o})}function Oc(o,I){var s=I,c=0;do{var u=s.nextSibling;if(o.removeChild(s),u&&u.nodeType===8)if(s=u.data,s==="/$"){if(c===0){o.removeChild(u),gr(I);return}c--}else s!=="$"&&s!=="$?"&&s!=="$!"||c++;s=u}while(s);gr(I)}function Wo(o){for(;o!=null;o=o.nextSibling){var I=o.nodeType;if(I===1||I===3)break;if(I===8){if(I=o.data,I==="$"||I==="$!"||I==="$?")break;if(I==="/$")return null}}return o}function Up(o){o=o.previousSibling;for(var I=0;o;){if(o.nodeType===8){var s=o.data;if(s==="$"||s==="$!"||s==="$?"){if(I===0)return o;I--}else s==="/$"&&I++}o=o.previousSibling}return null}var zl=Math.random().toString(36).slice(2),Xn="__reactFiber$"+zl,dr="__reactProps$"+zl,$n="__reactContainer$"+zl,qc="__reactEvents$"+zl,KR="__reactListeners$"+zl,xR="__reactHandles$"+zl;function qo(o){var I=o[Xn];if(I)return I;for(var s=o.parentNode;s;){if(I=s[$n]||s[Xn]){if(s=I.alternate,I.child!==null||s!==null&&s.child!==null)for(o=Up(o);o!==null;){if(s=o[Xn])return s;o=Up(o)}return I}o=s,s=o.parentNode}return null}function Ar(o){return o=o[Xn]||o[$n],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Ml(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(g(33))}function bs(o){return o[dr]||null}var $c=[],Tl=-1;function Ro(o){return{current:o}}function bt(o){0>Tl||(o.current=$c[Tl],$c[Tl]=null,Tl--)}function ht(o,I){Tl++,$c[Tl]=o.current,o.current=I}var Xo={},rg=Ro(Xo),Bg=Ro(!1),$o=Xo;function Ul(o,I){var s=o.type.contextTypes;if(!s)return Xo;var c=o.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===I)return c.__reactInternalMemoizedMaskedChildContext;var u={},b;for(b in s)u[b]=I[b];return c&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=I,o.__reactInternalMemoizedMaskedChildContext=u),u}function Sg(o){return o=o.childContextTypes,o!=null}function Zs(){bt(Bg),bt(rg)}function Lp(o,I,s){if(rg.current!==Xo)throw Error(g(168));ht(rg,I),ht(Bg,s)}function Qp(o,I,s){var c=o.stateNode;if(I=I.childContextTypes,typeof c.getChildContext!="function")return s;c=c.getChildContext();for(var u in c)if(!(u in I))throw Error(g(108,ae(o)||"Unknown",u));return $({},s,c)}function ys(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Xo,$o=rg.current,ht(rg,o),ht(Bg,Bg.current),!0}function Dp(o,I,s){var c=o.stateNode;if(!c)throw Error(g(169));s?(o=Qp(o,I,$o),c.__reactInternalMemoizedMergedChildContext=o,bt(Bg),bt(rg),ht(rg,o)):bt(Bg),ht(Bg,s)}var _n=null,Gs=!1,_c=!1;function jp(o){_n===null?_n=[o]:_n.push(o)}function ER(o){Gs=!0,jp(o)}function ko(){if(!_c&&_n!==null){_c=!0;var o=0,I=lt;try{var s=_n;for(lt=1;o<s.length;o++){var c=s[o];do c=c(!0);while(c!==null)}_n=null,Gs=!1}catch(u){throw _n!==null&&(_n=_n.slice(o+1)),Oh(yc,ko),u}finally{lt=I,_c=!1}}return null}var Ll=[],Ql=0,fs=null,Bs=0,Pg=[],Og=0,_o=null,eo=1,to="";function el(o,I){Ll[Ql++]=Bs,Ll[Ql++]=fs,fs=o,Bs=I}function Pp(o,I,s){Pg[Og++]=eo,Pg[Og++]=to,Pg[Og++]=_o,_o=o;var c=eo;o=to;var u=32-un(c)-1;c&=~(1<<u),s+=1;var b=32-un(I)+u;if(30<b){var W=u-u%5;b=(c&(1<<W)-1).toString(32),c>>=W,u-=W,eo=1<<32-un(I)+u|s<<u|c,to=b+o}else eo=1<<b|s<<u|c,to=o}function ed(o){o.return!==null&&(el(o,1),Pp(o,1,0))}function td(o){for(;o===fs;)fs=Ll[--Ql],Ll[Ql]=null,Bs=Ll[--Ql],Ll[Ql]=null;for(;o===_o;)_o=Pg[--Og],Pg[Og]=null,to=Pg[--Og],Pg[Og]=null,eo=Pg[--Og],Pg[Og]=null}var Kg=null,xg=null,Gt=!1,hn=null;function Op(o,I){var s=en(5,null,null,0);s.elementType="DELETED",s.stateNode=I,s.return=o,I=o.deletions,I===null?(o.deletions=[s],o.flags|=16):I.push(s)}function qp(o,I){switch(o.tag){case 5:var s=o.type;return I=I.nodeType!==1||s.toLowerCase()!==I.nodeName.toLowerCase()?null:I,I!==null?(o.stateNode=I,Kg=o,xg=Wo(I.firstChild),!0):!1;case 6:return I=o.pendingProps===""||I.nodeType!==3?null:I,I!==null?(o.stateNode=I,Kg=o,xg=null,!0):!1;case 13:return I=I.nodeType!==8?null:I,I!==null?(s=_o!==null?{id:eo,overflow:to}:null,o.memoizedState={dehydrated:I,treeContext:s,retryLane:1073741824},s=en(18,null,null,0),s.stateNode=I,s.return=o,o.child=s,Kg=o,xg=null,!0):!1;default:return!1}}function gd(o){return(o.mode&1)!==0&&(o.flags&128)===0}function nd(o){if(Gt){var I=xg;if(I){var s=I;if(!qp(o,I)){if(gd(o))throw Error(g(418));I=Wo(s.nextSibling);var c=Kg;I&&qp(o,I)?Op(c,s):(o.flags=o.flags&-4097|2,Gt=!1,Kg=o)}}else{if(gd(o))throw Error(g(418));o.flags=o.flags&-4097|2,Gt=!1,Kg=o}}}function $p(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Kg=o}function Ss(o){if(o!==Kg)return!1;if(!Gt)return $p(o),Gt=!0,!1;var I;if((I=o.tag!==3)&&!(I=o.tag!==5)&&(I=o.type,I=I!=="head"&&I!=="body"&&!jc(o.type,o.memoizedProps)),I&&(I=xg)){if(gd(o))throw _p(),Error(g(418));for(;I;)Op(o,I),I=Wo(I.nextSibling)}if($p(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(g(317));e:{for(o=o.nextSibling,I=0;o;){if(o.nodeType===8){var s=o.data;if(s==="/$"){if(I===0){xg=Wo(o.nextSibling);break e}I--}else s!=="$"&&s!=="$!"&&s!=="$?"||I++}o=o.nextSibling}xg=null}}else xg=Kg?Wo(o.stateNode.nextSibling):null;return!0}function _p(){for(var o=xg;o;)o=Wo(o.nextSibling)}function Dl(){xg=Kg=null,Gt=!1}function od(o){hn===null?hn=[o]:hn.push(o)}var zR=k.ReactCurrentBatchConfig;function ur(o,I,s){if(o=s.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(g(309));var c=s.stateNode}if(!c)throw Error(g(147,o));var u=c,b=""+o;return I!==null&&I.ref!==null&&typeof I.ref=="function"&&I.ref._stringRef===b?I.ref:(I=function(W){var H=u.refs;W===null?delete H[b]:H[b]=W},I._stringRef=b,I)}if(typeof o!="string")throw Error(g(284));if(!s._owner)throw Error(g(290,o))}return o}function Vs(o,I){throw o=Object.prototype.toString.call(I),Error(g(31,o==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":o))}function eb(o){var I=o._init;return I(o._payload)}function tb(o){function I(L,E){if(o){var D=L.deletions;D===null?(L.deletions=[E],L.flags|=16):D.push(E)}}function s(L,E){if(!o)return null;for(;E!==null;)I(L,E),E=E.sibling;return null}function c(L,E){for(L=new Map;E!==null;)E.key!==null?L.set(E.key,E):L.set(E.index,E),E=E.sibling;return L}function u(L,E){return L=Ko(L,E),L.index=0,L.sibling=null,L}function b(L,E,D){return L.index=D,o?(D=L.alternate,D!==null?(D=D.index,D<E?(L.flags|=2,E):D):(L.flags|=2,E)):(L.flags|=1048576,E)}function W(L){return o&&L.alternate===null&&(L.flags|=2),L}function H(L,E,D,Ae){return E===null||E.tag!==6?(E=Pd(D,L.mode,Ae),E.return=L,E):(E=u(E,D),E.return=L,E)}function x(L,E,D,Ae){var We=D.type;return We===K?ie(L,E,D.props.children,Ae,D.key):E!==null&&(E.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===O&&eb(We)===E.type)?(Ae=u(E,D.props),Ae.ref=ur(L,E,D),Ae.return=L,Ae):(Ae=Os(D.type,D.key,D.props,null,L.mode,Ae),Ae.ref=ur(L,E,D),Ae.return=L,Ae)}function q(L,E,D,Ae){return E===null||E.tag!==4||E.stateNode.containerInfo!==D.containerInfo||E.stateNode.implementation!==D.implementation?(E=Od(D,L.mode,Ae),E.return=L,E):(E=u(E,D.children||[]),E.return=L,E)}function ie(L,E,D,Ae,We){return E===null||E.tag!==7?(E=il(D,L.mode,Ae,We),E.return=L,E):(E=u(E,D),E.return=L,E)}function se(L,E,D){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Pd(""+E,L.mode,D),E.return=L,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case J:return D=Os(E.type,E.key,E.props,null,L.mode,D),D.ref=ur(L,null,E),D.return=L,D;case N:return E=Od(E,L.mode,D),E.return=L,E;case O:var Ae=E._init;return se(L,Ae(E._payload),D)}if(Ce(E)||Q(E))return E=il(E,L.mode,D,null),E.return=L,E;Vs(L,E)}return null}function Ie(L,E,D,Ae){var We=E!==null?E.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return We!==null?null:H(L,E,""+D,Ae);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case J:return D.key===We?x(L,E,D,Ae):null;case N:return D.key===We?q(L,E,D,Ae):null;case O:return We=D._init,Ie(L,E,We(D._payload),Ae)}if(Ce(D)||Q(D))return We!==null?null:ie(L,E,D,Ae,null);Vs(L,D)}return null}function Ze(L,E,D,Ae,We){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return L=L.get(D)||null,H(E,L,""+Ae,We);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case J:return L=L.get(Ae.key===null?D:Ae.key)||null,x(E,L,Ae,We);case N:return L=L.get(Ae.key===null?D:Ae.key)||null,q(E,L,Ae,We);case O:var ve=Ae._init;return Ze(L,E,D,ve(Ae._payload),We)}if(Ce(Ae)||Q(Ae))return L=L.get(D)||null,ie(E,L,Ae,We,null);Vs(E,Ae)}return null}function Se(L,E,D,Ae){for(var We=null,ve=null,Ye=E,Ne=E=0,_t=null;Ye!==null&&Ne<D.length;Ne++){Ye.index>Ne?(_t=Ye,Ye=null):_t=Ye.sibling;var Oe=Ie(L,Ye,D[Ne],Ae);if(Oe===null){Ye===null&&(Ye=_t);break}o&&Ye&&Oe.alternate===null&&I(L,Ye),E=b(Oe,E,Ne),ve===null?We=Oe:ve.sibling=Oe,ve=Oe,Ye=_t}if(Ne===D.length)return s(L,Ye),Gt&&el(L,Ne),We;if(Ye===null){for(;Ne<D.length;Ne++)Ye=se(L,D[Ne],Ae),Ye!==null&&(E=b(Ye,E,Ne),ve===null?We=Ye:ve.sibling=Ye,ve=Ye);return Gt&&el(L,Ne),We}for(Ye=c(L,Ye);Ne<D.length;Ne++)_t=Ze(Ye,L,Ne,D[Ne],Ae),_t!==null&&(o&&_t.alternate!==null&&Ye.delete(_t.key===null?Ne:_t.key),E=b(_t,E,Ne),ve===null?We=_t:ve.sibling=_t,ve=_t);return o&&Ye.forEach(function(xo){return I(L,xo)}),Gt&&el(L,Ne),We}function Ve(L,E,D,Ae){var We=Q(D);if(typeof We!="function")throw Error(g(150));if(D=We.call(D),D==null)throw Error(g(151));for(var ve=We=null,Ye=E,Ne=E=0,_t=null,Oe=D.next();Ye!==null&&!Oe.done;Ne++,Oe=D.next()){Ye.index>Ne?(_t=Ye,Ye=null):_t=Ye.sibling;var xo=Ie(L,Ye,Oe.value,Ae);if(xo===null){Ye===null&&(Ye=_t);break}o&&Ye&&xo.alternate===null&&I(L,Ye),E=b(xo,E,Ne),ve===null?We=xo:ve.sibling=xo,ve=xo,Ye=_t}if(Oe.done)return s(L,Ye),Gt&&el(L,Ne),We;if(Ye===null){for(;!Oe.done;Ne++,Oe=D.next())Oe=se(L,Oe.value,Ae),Oe!==null&&(E=b(Oe,E,Ne),ve===null?We=Oe:ve.sibling=Oe,ve=Oe);return Gt&&el(L,Ne),We}for(Ye=c(L,Ye);!Oe.done;Ne++,Oe=D.next())Oe=Ze(Ye,L,Ne,Oe.value,Ae),Oe!==null&&(o&&Oe.alternate!==null&&Ye.delete(Oe.key===null?Ne:Oe.key),E=b(Oe,E,Ne),ve===null?We=Oe:ve.sibling=Oe,ve=Oe);return o&&Ye.forEach(function(ZX){return I(L,ZX)}),Gt&&el(L,Ne),We}function Kt(L,E,D,Ae){if(typeof D=="object"&&D!==null&&D.type===K&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case J:e:{for(var We=D.key,ve=E;ve!==null;){if(ve.key===We){if(We=D.type,We===K){if(ve.tag===7){s(L,ve.sibling),E=u(ve,D.props.children),E.return=L,L=E;break e}}else if(ve.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===O&&eb(We)===ve.type){s(L,ve.sibling),E=u(ve,D.props),E.ref=ur(L,ve,D),E.return=L,L=E;break e}s(L,ve);break}else I(L,ve);ve=ve.sibling}D.type===K?(E=il(D.props.children,L.mode,Ae,D.key),E.return=L,L=E):(Ae=Os(D.type,D.key,D.props,null,L.mode,Ae),Ae.ref=ur(L,E,D),Ae.return=L,L=Ae)}return W(L);case N:e:{for(ve=D.key;E!==null;){if(E.key===ve)if(E.tag===4&&E.stateNode.containerInfo===D.containerInfo&&E.stateNode.implementation===D.implementation){s(L,E.sibling),E=u(E,D.children||[]),E.return=L,L=E;break e}else{s(L,E);break}else I(L,E);E=E.sibling}E=Od(D,L.mode,Ae),E.return=L,L=E}return W(L);case O:return ve=D._init,Kt(L,E,ve(D._payload),Ae)}if(Ce(D))return Se(L,E,D,Ae);if(Q(D))return Ve(L,E,D,Ae);Vs(L,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,E!==null&&E.tag===6?(s(L,E.sibling),E=u(E,D),E.return=L,L=E):(s(L,E),E=Pd(D,L.mode,Ae),E.return=L,L=E),W(L)):s(L,E)}return Kt}var jl=tb(!0),gb=tb(!1),Ws=Ro(null),Rs=null,Pl=null,ld=null;function Id(){ld=Pl=Rs=null}function rd(o){var I=Ws.current;bt(Ws),o._currentValue=I}function id(o,I,s){for(;o!==null;){var c=o.alternate;if((o.childLanes&I)!==I?(o.childLanes|=I,c!==null&&(c.childLanes|=I)):c!==null&&(c.childLanes&I)!==I&&(c.childLanes|=I),o===s)break;o=o.return}}function Ol(o,I){Rs=o,ld=Pl=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&I)!==0&&(Vg=!0),o.firstContext=null)}function qg(o){var I=o._currentValue;if(ld!==o)if(o={context:o,memoizedValue:I,next:null},Pl===null){if(Rs===null)throw Error(g(308));Pl=o,Rs.dependencies={lanes:0,firstContext:o}}else Pl=Pl.next=o;return I}var tl=null;function sd(o){tl===null?tl=[o]:tl.push(o)}function nb(o,I,s,c){var u=I.interleaved;return u===null?(s.next=s,sd(I)):(s.next=u.next,u.next=s),I.interleaved=s,go(o,c)}function go(o,I){o.lanes|=I;var s=o.alternate;for(s!==null&&(s.lanes|=I),s=o,o=o.return;o!==null;)o.childLanes|=I,s=o.alternate,s!==null&&(s.childLanes|=I),s=o,o=o.return;return s.tag===3?s.stateNode:null}var Jo=!1;function Cd(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ob(o,I){o=o.updateQueue,I.updateQueue===o&&(I.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function no(o,I){return{eventTime:o,lane:I,tag:0,payload:null,callback:null,next:null}}function vo(o,I,s){var c=o.updateQueue;if(c===null)return null;if(c=c.shared,(De&2)!==0){var u=c.pending;return u===null?I.next=I:(I.next=u.next,u.next=I),c.pending=I,go(o,s)}return u=c.interleaved,u===null?(I.next=I,sd(c)):(I.next=u.next,u.next=I),c.interleaved=I,go(o,s)}function Xs(o,I,s){if(I=I.updateQueue,I!==null&&(I=I.shared,(s&4194240)!==0)){var c=I.lanes;c&=o.pendingLanes,s|=c,I.lanes=s,Bc(o,s)}}function lb(o,I){var s=o.updateQueue,c=o.alternate;if(c!==null&&(c=c.updateQueue,s===c)){var u=null,b=null;if(s=s.firstBaseUpdate,s!==null){do{var W={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};b===null?u=b=W:b=b.next=W,s=s.next}while(s!==null);b===null?u=b=I:b=b.next=I}else u=b=I;s={baseState:c.baseState,firstBaseUpdate:u,lastBaseUpdate:b,shared:c.shared,effects:c.effects},o.updateQueue=s;return}o=s.lastBaseUpdate,o===null?s.firstBaseUpdate=I:o.next=I,s.lastBaseUpdate=I}function ks(o,I,s,c){var u=o.updateQueue;Jo=!1;var b=u.firstBaseUpdate,W=u.lastBaseUpdate,H=u.shared.pending;if(H!==null){u.shared.pending=null;var x=H,q=x.next;x.next=null,W===null?b=q:W.next=q,W=x;var ie=o.alternate;ie!==null&&(ie=ie.updateQueue,H=ie.lastBaseUpdate,H!==W&&(H===null?ie.firstBaseUpdate=q:H.next=q,ie.lastBaseUpdate=x))}if(b!==null){var se=u.baseState;W=0,ie=q=x=null,H=b;do{var Ie=H.lane,Ze=H.eventTime;if((c&Ie)===Ie){ie!==null&&(ie=ie.next={eventTime:Ze,lane:0,tag:H.tag,payload:H.payload,callback:H.callback,next:null});e:{var Se=o,Ve=H;switch(Ie=I,Ze=s,Ve.tag){case 1:if(Se=Ve.payload,typeof Se=="function"){se=Se.call(Ze,se,Ie);break e}se=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ve.payload,Ie=typeof Se=="function"?Se.call(Ze,se,Ie):Se,Ie==null)break e;se=$({},se,Ie);break e;case 2:Jo=!0}}H.callback!==null&&H.lane!==0&&(o.flags|=64,Ie=u.effects,Ie===null?u.effects=[H]:Ie.push(H))}else Ze={eventTime:Ze,lane:Ie,tag:H.tag,payload:H.payload,callback:H.callback,next:null},ie===null?(q=ie=Ze,x=se):ie=ie.next=Ze,W|=Ie;if(H=H.next,H===null){if(H=u.shared.pending,H===null)break;Ie=H,H=Ie.next,Ie.next=null,u.lastBaseUpdate=Ie,u.shared.pending=null}}while(!0);if(ie===null&&(x=se),u.baseState=x,u.firstBaseUpdate=q,u.lastBaseUpdate=ie,I=u.shared.interleaved,I!==null){u=I;do W|=u.lane,u=u.next;while(u!==I)}else b===null&&(u.shared.lanes=0);ol|=W,o.lanes=W,o.memoizedState=se}}function Ib(o,I,s){if(o=I.effects,I.effects=null,o!==null)for(I=0;I<o.length;I++){var c=o[I],u=c.callback;if(u!==null){if(c.callback=null,c=s,typeof u!="function")throw Error(g(191,u));u.call(c)}}}var mr={},kn=Ro(mr),hr=Ro(mr),pr=Ro(mr);function gl(o){if(o===mr)throw Error(g(174));return o}function ad(o,I){switch(ht(pr,I),ht(hr,o),ht(kn,mr),o=I.nodeType,o){case 9:case 11:I=(I=I.documentElement)?I.namespaceURI:Tt(null,"");break;default:o=o===8?I.parentNode:I,I=o.namespaceURI||null,o=o.tagName,I=Tt(I,o)}bt(kn),ht(kn,I)}function ql(){bt(kn),bt(hr),bt(pr)}function rb(o){gl(pr.current);var I=gl(kn.current),s=Tt(I,o.type);I!==s&&(ht(hr,o),ht(kn,s))}function cd(o){hr.current===o&&(bt(kn),bt(hr))}var Vt=Ro(0);function Js(o){for(var I=o;I!==null;){if(I.tag===13){var s=I.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return I}else if(I.tag===19&&I.memoizedProps.revealOrder!==void 0){if((I.flags&128)!==0)return I}else if(I.child!==null){I.child.return=I,I=I.child;continue}if(I===o)break;for(;I.sibling===null;){if(I.return===null||I.return===o)return null;I=I.return}I.sibling.return=I.return,I=I.sibling}return null}var dd=[];function Ad(){for(var o=0;o<dd.length;o++)dd[o]._workInProgressVersionPrimary=null;dd.length=0}var vs=k.ReactCurrentDispatcher,ud=k.ReactCurrentBatchConfig,nl=0,Wt=null,Pt=null,qt=null,Ys=!1,br=!1,Zr=0,MR=0;function ig(){throw Error(g(321))}function md(o,I){if(I===null)return!1;for(var s=0;s<I.length&&s<o.length;s++)if(!mn(o[s],I[s]))return!1;return!0}function hd(o,I,s,c,u,b){if(nl=b,Wt=I,I.memoizedState=null,I.updateQueue=null,I.lanes=0,vs.current=o===null||o.memoizedState===null?QR:DR,o=s(c,u),br){b=0;do{if(br=!1,Zr=0,25<=b)throw Error(g(301));b+=1,qt=Pt=null,I.updateQueue=null,vs.current=jR,o=s(c,u)}while(br)}if(vs.current=Fs,I=Pt!==null&&Pt.next!==null,nl=0,qt=Pt=Wt=null,Ys=!1,I)throw Error(g(300));return o}function pd(){var o=Zr!==0;return Zr=0,o}function Jn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?Wt.memoizedState=qt=o:qt=qt.next=o,qt}function $g(){if(Pt===null){var o=Wt.alternate;o=o!==null?o.memoizedState:null}else o=Pt.next;var I=qt===null?Wt.memoizedState:qt.next;if(I!==null)qt=I,Pt=o;else{if(o===null)throw Error(g(310));Pt=o,o={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},qt===null?Wt.memoizedState=qt=o:qt=qt.next=o}return qt}function yr(o,I){return typeof I=="function"?I(o):I}function bd(o){var I=$g(),s=I.queue;if(s===null)throw Error(g(311));s.lastRenderedReducer=o;var c=Pt,u=c.baseQueue,b=s.pending;if(b!==null){if(u!==null){var W=u.next;u.next=b.next,b.next=W}c.baseQueue=u=b,s.pending=null}if(u!==null){b=u.next,c=c.baseState;var H=W=null,x=null,q=b;do{var ie=q.lane;if((nl&ie)===ie)x!==null&&(x=x.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),c=q.hasEagerState?q.eagerState:o(c,q.action);else{var se={lane:ie,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};x===null?(H=x=se,W=c):x=x.next=se,Wt.lanes|=ie,ol|=ie}q=q.next}while(q!==null&&q!==b);x===null?W=c:x.next=H,mn(c,I.memoizedState)||(Vg=!0),I.memoizedState=c,I.baseState=W,I.baseQueue=x,s.lastRenderedState=c}if(o=s.interleaved,o!==null){u=o;do b=u.lane,Wt.lanes|=b,ol|=b,u=u.next;while(u!==o)}else u===null&&(s.lanes=0);return[I.memoizedState,s.dispatch]}function Zd(o){var I=$g(),s=I.queue;if(s===null)throw Error(g(311));s.lastRenderedReducer=o;var c=s.dispatch,u=s.pending,b=I.memoizedState;if(u!==null){s.pending=null;var W=u=u.next;do b=o(b,W.action),W=W.next;while(W!==u);mn(b,I.memoizedState)||(Vg=!0),I.memoizedState=b,I.baseQueue===null&&(I.baseState=b),s.lastRenderedState=b}return[b,c]}function ib(){}function sb(o,I){var s=Wt,c=$g(),u=I(),b=!mn(c.memoizedState,u);if(b&&(c.memoizedState=u,Vg=!0),c=c.queue,yd(cb.bind(null,s,c,o),[o]),c.getSnapshot!==I||b||qt!==null&&qt.memoizedState.tag&1){if(s.flags|=2048,Gr(9,ab.bind(null,s,c,u,I),void 0,null),$t===null)throw Error(g(349));(nl&30)!==0||Cb(s,I,u)}return u}function Cb(o,I,s){o.flags|=16384,o={getSnapshot:I,value:s},I=Wt.updateQueue,I===null?(I={lastEffect:null,stores:null},Wt.updateQueue=I,I.stores=[o]):(s=I.stores,s===null?I.stores=[o]:s.push(o))}function ab(o,I,s,c){I.value=s,I.getSnapshot=c,db(I)&&Ab(o)}function cb(o,I,s){return s(function(){db(I)&&Ab(o)})}function db(o){var I=o.getSnapshot;o=o.value;try{var s=I();return!mn(o,s)}catch{return!0}}function Ab(o){var I=go(o,1);I!==null&&yn(I,o,1,-1)}function ub(o){var I=Jn();return typeof o=="function"&&(o=o()),I.memoizedState=I.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yr,lastRenderedState:o},I.queue=o,o=o.dispatch=LR.bind(null,Wt,o),[I.memoizedState,o]}function Gr(o,I,s,c){return o={tag:o,create:I,destroy:s,deps:c,next:null},I=Wt.updateQueue,I===null?(I={lastEffect:null,stores:null},Wt.updateQueue=I,I.lastEffect=o.next=o):(s=I.lastEffect,s===null?I.lastEffect=o.next=o:(c=s.next,s.next=o,o.next=c,I.lastEffect=o)),o}function mb(){return $g().memoizedState}function Hs(o,I,s,c){var u=Jn();Wt.flags|=o,u.memoizedState=Gr(1|I,s,void 0,c===void 0?null:c)}function ws(o,I,s,c){var u=$g();c=c===void 0?null:c;var b=void 0;if(Pt!==null){var W=Pt.memoizedState;if(b=W.destroy,c!==null&&md(c,W.deps)){u.memoizedState=Gr(I,s,b,c);return}}Wt.flags|=o,u.memoizedState=Gr(1|I,s,b,c)}function hb(o,I){return Hs(8390656,8,o,I)}function yd(o,I){return ws(2048,8,o,I)}function pb(o,I){return ws(4,2,o,I)}function bb(o,I){return ws(4,4,o,I)}function Zb(o,I){if(typeof I=="function")return o=o(),I(o),function(){I(null)};if(I!=null)return o=o(),I.current=o,function(){I.current=null}}function yb(o,I,s){return s=s!=null?s.concat([o]):null,ws(4,4,Zb.bind(null,I,o),s)}function Gd(){}function Gb(o,I){var s=$g();I=I===void 0?null:I;var c=s.memoizedState;return c!==null&&I!==null&&md(I,c[1])?c[0]:(s.memoizedState=[o,I],o)}function fb(o,I){var s=$g();I=I===void 0?null:I;var c=s.memoizedState;return c!==null&&I!==null&&md(I,c[1])?c[0]:(o=o(),s.memoizedState=[o,I],o)}function Bb(o,I,s){return(nl&21)===0?(o.baseState&&(o.baseState=!1,Vg=!0),o.memoizedState=s):(mn(s,I)||(s=ep(),Wt.lanes|=s,ol|=s,o.baseState=!0),I)}function TR(o,I){var s=lt;lt=s!==0&&4>s?s:4,o(!0);var c=ud.transition;ud.transition={};try{o(!1),I()}finally{lt=s,ud.transition=c}}function Sb(){return $g().memoizedState}function UR(o,I,s){var c=Fo(o);if(s={lane:c,action:s,hasEagerState:!1,eagerState:null,next:null},Vb(o))Wb(I,s);else if(s=nb(o,I,s,c),s!==null){var u=pg();yn(s,o,c,u),Rb(s,I,c)}}function LR(o,I,s){var c=Fo(o),u={lane:c,action:s,hasEagerState:!1,eagerState:null,next:null};if(Vb(o))Wb(I,u);else{var b=o.alternate;if(o.lanes===0&&(b===null||b.lanes===0)&&(b=I.lastRenderedReducer,b!==null))try{var W=I.lastRenderedState,H=b(W,s);if(u.hasEagerState=!0,u.eagerState=H,mn(H,W)){var x=I.interleaved;x===null?(u.next=u,sd(I)):(u.next=x.next,x.next=u),I.interleaved=u;return}}catch{}finally{}s=nb(o,I,u,c),s!==null&&(u=pg(),yn(s,o,c,u),Rb(s,I,c))}}function Vb(o){var I=o.alternate;return o===Wt||I!==null&&I===Wt}function Wb(o,I){br=Ys=!0;var s=o.pending;s===null?I.next=I:(I.next=s.next,s.next=I),o.pending=I}function Rb(o,I,s){if((s&4194240)!==0){var c=I.lanes;c&=o.pendingLanes,s|=c,I.lanes=s,Bc(o,s)}}var Fs={readContext:qg,useCallback:ig,useContext:ig,useEffect:ig,useImperativeHandle:ig,useInsertionEffect:ig,useLayoutEffect:ig,useMemo:ig,useReducer:ig,useRef:ig,useState:ig,useDebugValue:ig,useDeferredValue:ig,useTransition:ig,useMutableSource:ig,useSyncExternalStore:ig,useId:ig,unstable_isNewReconciler:!1},QR={readContext:qg,useCallback:function(o,I){return Jn().memoizedState=[o,I===void 0?null:I],o},useContext:qg,useEffect:hb,useImperativeHandle:function(o,I,s){return s=s!=null?s.concat([o]):null,Hs(4194308,4,Zb.bind(null,I,o),s)},useLayoutEffect:function(o,I){return Hs(4194308,4,o,I)},useInsertionEffect:function(o,I){return Hs(4,2,o,I)},useMemo:function(o,I){var s=Jn();return I=I===void 0?null:I,o=o(),s.memoizedState=[o,I],o},useReducer:function(o,I,s){var c=Jn();return I=s!==void 0?s(I):I,c.memoizedState=c.baseState=I,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:I},c.queue=o,o=o.dispatch=UR.bind(null,Wt,o),[c.memoizedState,o]},useRef:function(o){var I=Jn();return o={current:o},I.memoizedState=o},useState:ub,useDebugValue:Gd,useDeferredValue:function(o){return Jn().memoizedState=o},useTransition:function(){var o=ub(!1),I=o[0];return o=TR.bind(null,o[1]),Jn().memoizedState=o,[I,o]},useMutableSource:function(){},useSyncExternalStore:function(o,I,s){var c=Wt,u=Jn();if(Gt){if(s===void 0)throw Error(g(407));s=s()}else{if(s=I(),$t===null)throw Error(g(349));(nl&30)!==0||Cb(c,I,s)}u.memoizedState=s;var b={value:s,getSnapshot:I};return u.queue=b,hb(cb.bind(null,c,b,o),[o]),c.flags|=2048,Gr(9,ab.bind(null,c,b,s,I),void 0,null),s},useId:function(){var o=Jn(),I=$t.identifierPrefix;if(Gt){var s=to,c=eo;s=(c&~(1<<32-un(c)-1)).toString(32)+s,I=":"+I+"R"+s,s=Zr++,0<s&&(I+="H"+s.toString(32)),I+=":"}else s=MR++,I=":"+I+"r"+s.toString(32)+":";return o.memoizedState=I},unstable_isNewReconciler:!1},DR={readContext:qg,useCallback:Gb,useContext:qg,useEffect:yd,useImperativeHandle:yb,useInsertionEffect:pb,useLayoutEffect:bb,useMemo:fb,useReducer:bd,useRef:mb,useState:function(){return bd(yr)},useDebugValue:Gd,useDeferredValue:function(o){var I=$g();return Bb(I,Pt.memoizedState,o)},useTransition:function(){var o=bd(yr)[0],I=$g().memoizedState;return[o,I]},useMutableSource:ib,useSyncExternalStore:sb,useId:Sb,unstable_isNewReconciler:!1},jR={readContext:qg,useCallback:Gb,useContext:qg,useEffect:yd,useImperativeHandle:yb,useInsertionEffect:pb,useLayoutEffect:bb,useMemo:fb,useReducer:Zd,useRef:mb,useState:function(){return Zd(yr)},useDebugValue:Gd,useDeferredValue:function(o){var I=$g();return Pt===null?I.memoizedState=o:Bb(I,Pt.memoizedState,o)},useTransition:function(){var o=Zd(yr)[0],I=$g().memoizedState;return[o,I]},useMutableSource:ib,useSyncExternalStore:sb,useId:Sb,unstable_isNewReconciler:!1};function pn(o,I){if(o&&o.defaultProps){I=$({},I),o=o.defaultProps;for(var s in o)I[s]===void 0&&(I[s]=o[s]);return I}return I}function fd(o,I,s,c){I=o.memoizedState,s=s(c,I),s=s==null?I:$({},I,s),o.memoizedState=s,o.lanes===0&&(o.updateQueue.baseState=s)}var Ns={isMounted:function(o){return(o=o._reactInternals)?Oo(o)===o:!1},enqueueSetState:function(o,I,s){o=o._reactInternals;var c=pg(),u=Fo(o),b=no(c,u);b.payload=I,s!=null&&(b.callback=s),I=vo(o,b,u),I!==null&&(yn(I,o,u,c),Xs(I,o,u))},enqueueReplaceState:function(o,I,s){o=o._reactInternals;var c=pg(),u=Fo(o),b=no(c,u);b.tag=1,b.payload=I,s!=null&&(b.callback=s),I=vo(o,b,u),I!==null&&(yn(I,o,u,c),Xs(I,o,u))},enqueueForceUpdate:function(o,I){o=o._reactInternals;var s=pg(),c=Fo(o),u=no(s,c);u.tag=2,I!=null&&(u.callback=I),I=vo(o,u,c),I!==null&&(yn(I,o,c,s),Xs(I,o,c))}};function Xb(o,I,s,c,u,b,W){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(c,b,W):I.prototype&&I.prototype.isPureReactComponent?!ir(s,c)||!ir(u,b):!0}function kb(o,I,s){var c=!1,u=Xo,b=I.contextType;return typeof b=="object"&&b!==null?b=qg(b):(u=Sg(I)?$o:rg.current,c=I.contextTypes,b=(c=c!=null)?Ul(o,u):Xo),I=new I(s,b),o.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,I.updater=Ns,o.stateNode=I,I._reactInternals=o,c&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=u,o.__reactInternalMemoizedMaskedChildContext=b),I}function Jb(o,I,s,c){o=I.state,typeof I.componentWillReceiveProps=="function"&&I.componentWillReceiveProps(s,c),typeof I.UNSAFE_componentWillReceiveProps=="function"&&I.UNSAFE_componentWillReceiveProps(s,c),I.state!==o&&Ns.enqueueReplaceState(I,I.state,null)}function Bd(o,I,s,c){var u=o.stateNode;u.props=s,u.state=o.memoizedState,u.refs={},Cd(o);var b=I.contextType;typeof b=="object"&&b!==null?u.context=qg(b):(b=Sg(I)?$o:rg.current,u.context=Ul(o,b)),u.state=o.memoizedState,b=I.getDerivedStateFromProps,typeof b=="function"&&(fd(o,I,b,s),u.state=o.memoizedState),typeof I.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(I=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),I!==u.state&&Ns.enqueueReplaceState(u,u.state,null),ks(o,s,u,c),u.state=o.memoizedState),typeof u.componentDidMount=="function"&&(o.flags|=4194308)}function $l(o,I){try{var s="",c=I;do s+=oe(c),c=c.return;while(c);var u=s}catch(b){u=`
Error generating stack: `+b.message+`
`+b.stack}return{value:o,source:I,stack:u,digest:null}}function Sd(o,I,s){return{value:o,source:null,stack:s??null,digest:I??null}}function Vd(o,I){try{console.error(I.value)}catch(s){setTimeout(function(){throw s})}}var PR=typeof WeakMap=="function"?WeakMap:Map;function vb(o,I,s){s=no(-1,s),s.tag=3,s.payload={element:null};var c=I.value;return s.callback=function(){Us||(Us=!0,zd=c),Vd(o,I)},s}function Yb(o,I,s){s=no(-1,s),s.tag=3;var c=o.type.getDerivedStateFromError;if(typeof c=="function"){var u=I.value;s.payload=function(){return c(u)},s.callback=function(){Vd(o,I)}}var b=o.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(s.callback=function(){Vd(o,I),typeof c!="function"&&(Ho===null?Ho=new Set([this]):Ho.add(this));var W=I.stack;this.componentDidCatch(I.value,{componentStack:W!==null?W:""})}),s}function Hb(o,I,s){var c=o.pingCache;if(c===null){c=o.pingCache=new PR;var u=new Set;c.set(I,u)}else u=c.get(I),u===void 0&&(u=new Set,c.set(I,u));u.has(s)||(u.add(s),o=sX.bind(null,o,I,s),I.then(o,o))}function wb(o){do{var I;if((I=o.tag===13)&&(I=o.memoizedState,I=I!==null?I.dehydrated!==null:!0),I)return o;o=o.return}while(o!==null);return null}function Fb(o,I,s,c,u){return(o.mode&1)===0?(o===I?o.flags|=65536:(o.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(I=no(-1,1),I.tag=2,vo(s,I,1))),s.lanes|=1),o):(o.flags|=65536,o.lanes=u,o)}var OR=k.ReactCurrentOwner,Vg=!1;function hg(o,I,s,c){I.child=o===null?gb(I,null,s,c):jl(I,o.child,s,c)}function Nb(o,I,s,c,u){s=s.render;var b=I.ref;return Ol(I,u),c=hd(o,I,s,c,b,u),s=pd(),o!==null&&!Vg?(I.updateQueue=o.updateQueue,I.flags&=-2053,o.lanes&=~u,oo(o,I,u)):(Gt&&s&&ed(I),I.flags|=1,hg(o,I,c,u),I.child)}function Kb(o,I,s,c,u){if(o===null){var b=s.type;return typeof b=="function"&&!jd(b)&&b.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(I.tag=15,I.type=b,xb(o,I,b,c,u)):(o=Os(s.type,null,c,I,I.mode,u),o.ref=I.ref,o.return=I,I.child=o)}if(b=o.child,(o.lanes&u)===0){var W=b.memoizedProps;if(s=s.compare,s=s!==null?s:ir,s(W,c)&&o.ref===I.ref)return oo(o,I,u)}return I.flags|=1,o=Ko(b,c),o.ref=I.ref,o.return=I,I.child=o}function xb(o,I,s,c,u){if(o!==null){var b=o.memoizedProps;if(ir(b,c)&&o.ref===I.ref)if(Vg=!1,I.pendingProps=c=b,(o.lanes&u)!==0)(o.flags&131072)!==0&&(Vg=!0);else return I.lanes=o.lanes,oo(o,I,u)}return Wd(o,I,s,c,u)}function Eb(o,I,s){var c=I.pendingProps,u=c.children,b=o!==null?o.memoizedState:null;if(c.mode==="hidden")if((I.mode&1)===0)I.memoizedState={baseLanes:0,cachePool:null,transitions:null},ht(eI,Eg),Eg|=s;else{if((s&1073741824)===0)return o=b!==null?b.baseLanes|s:s,I.lanes=I.childLanes=1073741824,I.memoizedState={baseLanes:o,cachePool:null,transitions:null},I.updateQueue=null,ht(eI,Eg),Eg|=o,null;I.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=b!==null?b.baseLanes:s,ht(eI,Eg),Eg|=c}else b!==null?(c=b.baseLanes|s,I.memoizedState=null):c=s,ht(eI,Eg),Eg|=c;return hg(o,I,u,s),I.child}function zb(o,I){var s=I.ref;(o===null&&s!==null||o!==null&&o.ref!==s)&&(I.flags|=512,I.flags|=2097152)}function Wd(o,I,s,c,u){var b=Sg(s)?$o:rg.current;return b=Ul(I,b),Ol(I,u),s=hd(o,I,s,c,b,u),c=pd(),o!==null&&!Vg?(I.updateQueue=o.updateQueue,I.flags&=-2053,o.lanes&=~u,oo(o,I,u)):(Gt&&c&&ed(I),I.flags|=1,hg(o,I,s,u),I.child)}function Mb(o,I,s,c,u){if(Sg(s)){var b=!0;ys(I)}else b=!1;if(Ol(I,u),I.stateNode===null)xs(o,I),kb(I,s,c),Bd(I,s,c,u),c=!0;else if(o===null){var W=I.stateNode,H=I.memoizedProps;W.props=H;var x=W.context,q=s.contextType;typeof q=="object"&&q!==null?q=qg(q):(q=Sg(s)?$o:rg.current,q=Ul(I,q));var ie=s.getDerivedStateFromProps,se=typeof ie=="function"||typeof W.getSnapshotBeforeUpdate=="function";se||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(H!==c||x!==q)&&Jb(I,W,c,q),Jo=!1;var Ie=I.memoizedState;W.state=Ie,ks(I,c,W,u),x=I.memoizedState,H!==c||Ie!==x||Bg.current||Jo?(typeof ie=="function"&&(fd(I,s,ie,c),x=I.memoizedState),(H=Jo||Xb(I,s,H,c,Ie,x,q))?(se||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(I.flags|=4194308)):(typeof W.componentDidMount=="function"&&(I.flags|=4194308),I.memoizedProps=c,I.memoizedState=x),W.props=c,W.state=x,W.context=q,c=H):(typeof W.componentDidMount=="function"&&(I.flags|=4194308),c=!1)}else{W=I.stateNode,ob(o,I),H=I.memoizedProps,q=I.type===I.elementType?H:pn(I.type,H),W.props=q,se=I.pendingProps,Ie=W.context,x=s.contextType,typeof x=="object"&&x!==null?x=qg(x):(x=Sg(s)?$o:rg.current,x=Ul(I,x));var Ze=s.getDerivedStateFromProps;(ie=typeof Ze=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(H!==se||Ie!==x)&&Jb(I,W,c,x),Jo=!1,Ie=I.memoizedState,W.state=Ie,ks(I,c,W,u);var Se=I.memoizedState;H!==se||Ie!==Se||Bg.current||Jo?(typeof Ze=="function"&&(fd(I,s,Ze,c),Se=I.memoizedState),(q=Jo||Xb(I,s,q,c,Ie,Se,x)||!1)?(ie||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(c,Se,x),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(c,Se,x)),typeof W.componentDidUpdate=="function"&&(I.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(I.flags|=1024)):(typeof W.componentDidUpdate!="function"||H===o.memoizedProps&&Ie===o.memoizedState||(I.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||H===o.memoizedProps&&Ie===o.memoizedState||(I.flags|=1024),I.memoizedProps=c,I.memoizedState=Se),W.props=c,W.state=Se,W.context=x,c=q):(typeof W.componentDidUpdate!="function"||H===o.memoizedProps&&Ie===o.memoizedState||(I.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||H===o.memoizedProps&&Ie===o.memoizedState||(I.flags|=1024),c=!1)}return Rd(o,I,s,c,b,u)}function Rd(o,I,s,c,u,b){zb(o,I);var W=(I.flags&128)!==0;if(!c&&!W)return u&&Dp(I,s,!1),oo(o,I,b);c=I.stateNode,OR.current=I;var H=W&&typeof s.getDerivedStateFromError!="function"?null:c.render();return I.flags|=1,o!==null&&W?(I.child=jl(I,o.child,null,b),I.child=jl(I,null,H,b)):hg(o,I,H,b),I.memoizedState=c.state,u&&Dp(I,s,!0),I.child}function Tb(o){var I=o.stateNode;I.pendingContext?Lp(o,I.pendingContext,I.pendingContext!==I.context):I.context&&Lp(o,I.context,!1),ad(o,I.containerInfo)}function Ub(o,I,s,c,u){return Dl(),od(u),I.flags|=256,hg(o,I,s,c),I.child}var Xd={dehydrated:null,treeContext:null,retryLane:0};function kd(o){return{baseLanes:o,cachePool:null,transitions:null}}function Lb(o,I,s){var c=I.pendingProps,u=Vt.current,b=!1,W=(I.flags&128)!==0,H;if((H=W)||(H=o!==null&&o.memoizedState===null?!1:(u&2)!==0),H?(b=!0,I.flags&=-129):(o===null||o.memoizedState!==null)&&(u|=1),ht(Vt,u&1),o===null)return nd(I),o=I.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((I.mode&1)===0?I.lanes=1:o.data==="$!"?I.lanes=8:I.lanes=1073741824,null):(W=c.children,o=c.fallback,b?(c=I.mode,b=I.child,W={mode:"hidden",children:W},(c&1)===0&&b!==null?(b.childLanes=0,b.pendingProps=W):b=qs(W,c,0,null),o=il(o,c,s,null),b.return=I,o.return=I,b.sibling=o,I.child=b,I.child.memoizedState=kd(s),I.memoizedState=Xd,o):Jd(I,W));if(u=o.memoizedState,u!==null&&(H=u.dehydrated,H!==null))return qR(o,I,W,c,H,u,s);if(b){b=c.fallback,W=I.mode,u=o.child,H=u.sibling;var x={mode:"hidden",children:c.children};return(W&1)===0&&I.child!==u?(c=I.child,c.childLanes=0,c.pendingProps=x,I.deletions=null):(c=Ko(u,x),c.subtreeFlags=u.subtreeFlags&14680064),H!==null?b=Ko(H,b):(b=il(b,W,s,null),b.flags|=2),b.return=I,c.return=I,c.sibling=b,I.child=c,c=b,b=I.child,W=o.child.memoizedState,W=W===null?kd(s):{baseLanes:W.baseLanes|s,cachePool:null,transitions:W.transitions},b.memoizedState=W,b.childLanes=o.childLanes&~s,I.memoizedState=Xd,c}return b=o.child,o=b.sibling,c=Ko(b,{mode:"visible",children:c.children}),(I.mode&1)===0&&(c.lanes=s),c.return=I,c.sibling=null,o!==null&&(s=I.deletions,s===null?(I.deletions=[o],I.flags|=16):s.push(o)),I.child=c,I.memoizedState=null,c}function Jd(o,I){return I=qs({mode:"visible",children:I},o.mode,0,null),I.return=o,o.child=I}function Ks(o,I,s,c){return c!==null&&od(c),jl(I,o.child,null,s),o=Jd(I,I.pendingProps.children),o.flags|=2,I.memoizedState=null,o}function qR(o,I,s,c,u,b,W){if(s)return I.flags&256?(I.flags&=-257,c=Sd(Error(g(422))),Ks(o,I,W,c)):I.memoizedState!==null?(I.child=o.child,I.flags|=128,null):(b=c.fallback,u=I.mode,c=qs({mode:"visible",children:c.children},u,0,null),b=il(b,u,W,null),b.flags|=2,c.return=I,b.return=I,c.sibling=b,I.child=c,(I.mode&1)!==0&&jl(I,o.child,null,W),I.child.memoizedState=kd(W),I.memoizedState=Xd,b);if((I.mode&1)===0)return Ks(o,I,W,null);if(u.data==="$!"){if(c=u.nextSibling&&u.nextSibling.dataset,c)var H=c.dgst;return c=H,b=Error(g(419)),c=Sd(b,c,void 0),Ks(o,I,W,c)}if(H=(W&o.childLanes)!==0,Vg||H){if(c=$t,c!==null){switch(W&-W){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=(u&(c.suspendedLanes|W))!==0?0:u,u!==0&&u!==b.retryLane&&(b.retryLane=u,go(o,u),yn(c,o,u,-1))}return Dd(),c=Sd(Error(g(421))),Ks(o,I,W,c)}return u.data==="$?"?(I.flags|=128,I.child=o.child,I=CX.bind(null,o),u._reactRetry=I,null):(o=b.treeContext,xg=Wo(u.nextSibling),Kg=I,Gt=!0,hn=null,o!==null&&(Pg[Og++]=eo,Pg[Og++]=to,Pg[Og++]=_o,eo=o.id,to=o.overflow,_o=I),I=Jd(I,c.children),I.flags|=4096,I)}function Qb(o,I,s){o.lanes|=I;var c=o.alternate;c!==null&&(c.lanes|=I),id(o.return,I,s)}function vd(o,I,s,c,u){var b=o.memoizedState;b===null?o.memoizedState={isBackwards:I,rendering:null,renderingStartTime:0,last:c,tail:s,tailMode:u}:(b.isBackwards=I,b.rendering=null,b.renderingStartTime=0,b.last=c,b.tail=s,b.tailMode=u)}function Db(o,I,s){var c=I.pendingProps,u=c.revealOrder,b=c.tail;if(hg(o,I,c.children,s),c=Vt.current,(c&2)!==0)c=c&1|2,I.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=I.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Qb(o,s,I);else if(o.tag===19)Qb(o,s,I);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===I)break e;for(;o.sibling===null;){if(o.return===null||o.return===I)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}c&=1}if(ht(Vt,c),(I.mode&1)===0)I.memoizedState=null;else switch(u){case"forwards":for(s=I.child,u=null;s!==null;)o=s.alternate,o!==null&&Js(o)===null&&(u=s),s=s.sibling;s=u,s===null?(u=I.child,I.child=null):(u=s.sibling,s.sibling=null),vd(I,!1,u,s,b);break;case"backwards":for(s=null,u=I.child,I.child=null;u!==null;){if(o=u.alternate,o!==null&&Js(o)===null){I.child=u;break}o=u.sibling,u.sibling=s,s=u,u=o}vd(I,!0,s,null,b);break;case"together":vd(I,!1,null,null,void 0);break;default:I.memoizedState=null}return I.child}function xs(o,I){(I.mode&1)===0&&o!==null&&(o.alternate=null,I.alternate=null,I.flags|=2)}function oo(o,I,s){if(o!==null&&(I.dependencies=o.dependencies),ol|=I.lanes,(s&I.childLanes)===0)return null;if(o!==null&&I.child!==o.child)throw Error(g(153));if(I.child!==null){for(o=I.child,s=Ko(o,o.pendingProps),I.child=s,s.return=I;o.sibling!==null;)o=o.sibling,s=s.sibling=Ko(o,o.pendingProps),s.return=I;s.sibling=null}return I.child}function $R(o,I,s){switch(I.tag){case 3:Tb(I),Dl();break;case 5:rb(I);break;case 1:Sg(I.type)&&ys(I);break;case 4:ad(I,I.stateNode.containerInfo);break;case 10:var c=I.type._context,u=I.memoizedProps.value;ht(Ws,c._currentValue),c._currentValue=u;break;case 13:if(c=I.memoizedState,c!==null)return c.dehydrated!==null?(ht(Vt,Vt.current&1),I.flags|=128,null):(s&I.child.childLanes)!==0?Lb(o,I,s):(ht(Vt,Vt.current&1),o=oo(o,I,s),o!==null?o.sibling:null);ht(Vt,Vt.current&1);break;case 19:if(c=(s&I.childLanes)!==0,(o.flags&128)!==0){if(c)return Db(o,I,s);I.flags|=128}if(u=I.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),ht(Vt,Vt.current),c)break;return null;case 22:case 23:return I.lanes=0,Eb(o,I,s)}return oo(o,I,s)}var jb,Yd,Pb,Ob;jb=function(o,I){for(var s=I.child;s!==null;){if(s.tag===5||s.tag===6)o.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===I)break;for(;s.sibling===null;){if(s.return===null||s.return===I)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Yd=function(){},Pb=function(o,I,s,c){var u=o.memoizedProps;if(u!==c){o=I.stateNode,gl(kn.current);var b=null;switch(s){case"input":u=He(o,u),c=He(o,c),b=[];break;case"select":u=$({},u,{value:void 0}),c=$({},c,{value:void 0}),b=[];break;case"textarea":u=le(o,u),c=le(o,c),b=[];break;default:typeof u.onClick!="function"&&typeof c.onClick=="function"&&(o.onclick=ps)}yt(s,c);var W;s=null;for(q in u)if(!c.hasOwnProperty(q)&&u.hasOwnProperty(q)&&u[q]!=null)if(q==="style"){var H=u[q];for(W in H)H.hasOwnProperty(W)&&(s||(s={}),s[W]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(l.hasOwnProperty(q)?b||(b=[]):(b=b||[]).push(q,null));for(q in c){var x=c[q];if(H=u?.[q],c.hasOwnProperty(q)&&x!==H&&(x!=null||H!=null))if(q==="style")if(H){for(W in H)!H.hasOwnProperty(W)||x&&x.hasOwnProperty(W)||(s||(s={}),s[W]="");for(W in x)x.hasOwnProperty(W)&&H[W]!==x[W]&&(s||(s={}),s[W]=x[W])}else s||(b||(b=[]),b.push(q,s)),s=x;else q==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,H=H?H.__html:void 0,x!=null&&H!==x&&(b=b||[]).push(q,x)):q==="children"?typeof x!="string"&&typeof x!="number"||(b=b||[]).push(q,""+x):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(l.hasOwnProperty(q)?(x!=null&&q==="onScroll"&&pt("scroll",o),b||H===x||(b=[])):(b=b||[]).push(q,x))}s&&(b=b||[]).push("style",s);var q=b;(I.updateQueue=q)&&(I.flags|=4)}},Ob=function(o,I,s,c){s!==c&&(I.flags|=4)};function fr(o,I){if(!Gt)switch(o.tailMode){case"hidden":I=o.tail;for(var s=null;I!==null;)I.alternate!==null&&(s=I),I=I.sibling;s===null?o.tail=null:s.sibling=null;break;case"collapsed":s=o.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?I||o.tail===null?o.tail=null:o.tail.sibling=null:c.sibling=null}}function sg(o){var I=o.alternate!==null&&o.alternate.child===o.child,s=0,c=0;if(I)for(var u=o.child;u!==null;)s|=u.lanes|u.childLanes,c|=u.subtreeFlags&14680064,c|=u.flags&14680064,u.return=o,u=u.sibling;else for(u=o.child;u!==null;)s|=u.lanes|u.childLanes,c|=u.subtreeFlags,c|=u.flags,u.return=o,u=u.sibling;return o.subtreeFlags|=c,o.childLanes=s,I}function _R(o,I,s){var c=I.pendingProps;switch(td(I),I.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sg(I),null;case 1:return Sg(I.type)&&Zs(),sg(I),null;case 3:return c=I.stateNode,ql(),bt(Bg),bt(rg),Ad(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(o===null||o.child===null)&&(Ss(I)?I.flags|=4:o===null||o.memoizedState.isDehydrated&&(I.flags&256)===0||(I.flags|=1024,hn!==null&&(Ud(hn),hn=null))),Yd(o,I),sg(I),null;case 5:cd(I);var u=gl(pr.current);if(s=I.type,o!==null&&I.stateNode!=null)Pb(o,I,s,c,u),o.ref!==I.ref&&(I.flags|=512,I.flags|=2097152);else{if(!c){if(I.stateNode===null)throw Error(g(166));return sg(I),null}if(o=gl(kn.current),Ss(I)){c=I.stateNode,s=I.type;var b=I.memoizedProps;switch(c[Xn]=I,c[dr]=b,o=(I.mode&1)!==0,s){case"dialog":pt("cancel",c),pt("close",c);break;case"iframe":case"object":case"embed":pt("load",c);break;case"video":case"audio":for(u=0;u<Cr.length;u++)pt(Cr[u],c);break;case"source":pt("error",c);break;case"img":case"image":case"link":pt("error",c),pt("load",c);break;case"details":pt("toggle",c);break;case"input":xe(c,b),pt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!b.multiple},pt("invalid",c);break;case"textarea":ke(c,b),pt("invalid",c)}yt(s,b),u=null;for(var W in b)if(b.hasOwnProperty(W)){var H=b[W];W==="children"?typeof H=="string"?c.textContent!==H&&(b.suppressHydrationWarning!==!0&&hs(c.textContent,H,o),u=["children",H]):typeof H=="number"&&c.textContent!==""+H&&(b.suppressHydrationWarning!==!0&&hs(c.textContent,H,o),u=["children",""+H]):l.hasOwnProperty(W)&&H!=null&&W==="onScroll"&&pt("scroll",c)}switch(s){case"input":de(c),pe(c,b,!0);break;case"textarea":de(c),Te(c);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(c.onclick=ps)}c=u,I.updateQueue=c,c!==null&&(I.flags|=4)}else{W=u.nodeType===9?u:u.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=ot(s)),o==="http://www.w3.org/1999/xhtml"?s==="script"?(o=W.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof c.is=="string"?o=W.createElement(s,{is:c.is}):(o=W.createElement(s),s==="select"&&(W=o,c.multiple?W.multiple=!0:c.size&&(W.size=c.size))):o=W.createElementNS(o,s),o[Xn]=I,o[dr]=c,jb(o,I,!1,!1),I.stateNode=o;e:{switch(W=jg(s,c),s){case"dialog":pt("cancel",o),pt("close",o),u=c;break;case"iframe":case"object":case"embed":pt("load",o),u=c;break;case"video":case"audio":for(u=0;u<Cr.length;u++)pt(Cr[u],o);u=c;break;case"source":pt("error",o),u=c;break;case"img":case"image":case"link":pt("error",o),pt("load",o),u=c;break;case"details":pt("toggle",o),u=c;break;case"input":xe(o,c),u=He(o,c),pt("invalid",o);break;case"option":u=c;break;case"select":o._wrapperState={wasMultiple:!!c.multiple},u=$({},c,{value:void 0}),pt("invalid",o);break;case"textarea":ke(o,c),u=le(o,c),pt("invalid",o);break;default:u=c}yt(s,u),H=u;for(b in H)if(H.hasOwnProperty(b)){var x=H[b];b==="style"?Je(o,x):b==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&fg(o,x)):b==="children"?typeof x=="string"?(s!=="textarea"||x!=="")&&Zt(o,x):typeof x=="number"&&Zt(o,""+x):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(l.hasOwnProperty(b)?x!=null&&b==="onScroll"&&pt("scroll",o):x!=null&&R(o,b,x,W))}switch(s){case"input":de(o),pe(o,c,!1);break;case"textarea":de(o),Te(o);break;case"option":c.value!=null&&o.setAttribute("value",""+Ge(c.value));break;case"select":o.multiple=!!c.multiple,b=c.value,b!=null?be(o,!!c.multiple,b,!1):c.defaultValue!=null&&be(o,!!c.multiple,c.defaultValue,!0);break;default:typeof u.onClick=="function"&&(o.onclick=ps)}switch(s){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(I.flags|=4)}I.ref!==null&&(I.flags|=512,I.flags|=2097152)}return sg(I),null;case 6:if(o&&I.stateNode!=null)Ob(o,I,o.memoizedProps,c);else{if(typeof c!="string"&&I.stateNode===null)throw Error(g(166));if(s=gl(pr.current),gl(kn.current),Ss(I)){if(c=I.stateNode,s=I.memoizedProps,c[Xn]=I,(b=c.nodeValue!==s)&&(o=Kg,o!==null))switch(o.tag){case 3:hs(c.nodeValue,s,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&hs(c.nodeValue,s,(o.mode&1)!==0)}b&&(I.flags|=4)}else c=(s.nodeType===9?s:s.ownerDocument).createTextNode(c),c[Xn]=I,I.stateNode=c}return sg(I),null;case 13:if(bt(Vt),c=I.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Gt&&xg!==null&&(I.mode&1)!==0&&(I.flags&128)===0)_p(),Dl(),I.flags|=98560,b=!1;else if(b=Ss(I),c!==null&&c.dehydrated!==null){if(o===null){if(!b)throw Error(g(318));if(b=I.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(g(317));b[Xn]=I}else Dl(),(I.flags&128)===0&&(I.memoizedState=null),I.flags|=4;sg(I),b=!1}else hn!==null&&(Ud(hn),hn=null),b=!0;if(!b)return I.flags&65536?I:null}return(I.flags&128)!==0?(I.lanes=s,I):(c=c!==null,c!==(o!==null&&o.memoizedState!==null)&&c&&(I.child.flags|=8192,(I.mode&1)!==0&&(o===null||(Vt.current&1)!==0?Ot===0&&(Ot=3):Dd())),I.updateQueue!==null&&(I.flags|=4),sg(I),null);case 4:return ql(),Yd(o,I),o===null&&ar(I.stateNode.containerInfo),sg(I),null;case 10:return rd(I.type._context),sg(I),null;case 17:return Sg(I.type)&&Zs(),sg(I),null;case 19:if(bt(Vt),b=I.memoizedState,b===null)return sg(I),null;if(c=(I.flags&128)!==0,W=b.rendering,W===null)if(c)fr(b,!1);else{if(Ot!==0||o!==null&&(o.flags&128)!==0)for(o=I.child;o!==null;){if(W=Js(o),W!==null){for(I.flags|=128,fr(b,!1),c=W.updateQueue,c!==null&&(I.updateQueue=c,I.flags|=4),I.subtreeFlags=0,c=s,s=I.child;s!==null;)b=s,o=c,b.flags&=14680066,W=b.alternate,W===null?(b.childLanes=0,b.lanes=o,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=W.childLanes,b.lanes=W.lanes,b.child=W.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=W.memoizedProps,b.memoizedState=W.memoizedState,b.updateQueue=W.updateQueue,b.type=W.type,o=W.dependencies,b.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s=s.sibling;return ht(Vt,Vt.current&1|2),I.child}o=o.sibling}b.tail!==null&&Nt()>tI&&(I.flags|=128,c=!0,fr(b,!1),I.lanes=4194304)}else{if(!c)if(o=Js(W),o!==null){if(I.flags|=128,c=!0,s=o.updateQueue,s!==null&&(I.updateQueue=s,I.flags|=4),fr(b,!0),b.tail===null&&b.tailMode==="hidden"&&!W.alternate&&!Gt)return sg(I),null}else 2*Nt()-b.renderingStartTime>tI&&s!==1073741824&&(I.flags|=128,c=!0,fr(b,!1),I.lanes=4194304);b.isBackwards?(W.sibling=I.child,I.child=W):(s=b.last,s!==null?s.sibling=W:I.child=W,b.last=W)}return b.tail!==null?(I=b.tail,b.rendering=I,b.tail=I.sibling,b.renderingStartTime=Nt(),I.sibling=null,s=Vt.current,ht(Vt,c?s&1|2:s&1),I):(sg(I),null);case 22:case 23:return Qd(),c=I.memoizedState!==null,o!==null&&o.memoizedState!==null!==c&&(I.flags|=8192),c&&(I.mode&1)!==0?(Eg&1073741824)!==0&&(sg(I),I.subtreeFlags&6&&(I.flags|=8192)):sg(I),null;case 24:return null;case 25:return null}throw Error(g(156,I.tag))}function eX(o,I){switch(td(I),I.tag){case 1:return Sg(I.type)&&Zs(),o=I.flags,o&65536?(I.flags=o&-65537|128,I):null;case 3:return ql(),bt(Bg),bt(rg),Ad(),o=I.flags,(o&65536)!==0&&(o&128)===0?(I.flags=o&-65537|128,I):null;case 5:return cd(I),null;case 13:if(bt(Vt),o=I.memoizedState,o!==null&&o.dehydrated!==null){if(I.alternate===null)throw Error(g(340));Dl()}return o=I.flags,o&65536?(I.flags=o&-65537|128,I):null;case 19:return bt(Vt),null;case 4:return ql(),null;case 10:return rd(I.type._context),null;case 22:case 23:return Qd(),null;case 24:return null;default:return null}}var Es=!1,Cg=!1,tX=typeof WeakSet=="function"?WeakSet:Set,Be=null;function _l(o,I){var s=o.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(c){Jt(o,I,c)}else s.current=null}function Hd(o,I,s){try{s()}catch(c){Jt(o,I,c)}}var qb=!1;function gX(o,I){if(Qc=Is,o=Xp(),Kc(o)){if("selectionStart"in o)var s={start:o.selectionStart,end:o.selectionEnd};else e:{s=(s=o.ownerDocument)&&s.defaultView||window;var c=s.getSelection&&s.getSelection();if(c&&c.rangeCount!==0){s=c.anchorNode;var u=c.anchorOffset,b=c.focusNode;c=c.focusOffset;try{s.nodeType,b.nodeType}catch{s=null;break e}var W=0,H=-1,x=-1,q=0,ie=0,se=o,Ie=null;t:for(;;){for(var Ze;se!==s||u!==0&&se.nodeType!==3||(H=W+u),se!==b||c!==0&&se.nodeType!==3||(x=W+c),se.nodeType===3&&(W+=se.nodeValue.length),(Ze=se.firstChild)!==null;)Ie=se,se=Ze;for(;;){if(se===o)break t;if(Ie===s&&++q===u&&(H=W),Ie===b&&++ie===c&&(x=W),(Ze=se.nextSibling)!==null)break;se=Ie,Ie=se.parentNode}se=Ze}s=H===-1||x===-1?null:{start:H,end:x}}else s=null}s=s||{start:0,end:0}}else s=null;for(Dc={focusedElem:o,selectionRange:s},Is=!1,Be=I;Be!==null;)if(I=Be,o=I.child,(I.subtreeFlags&1028)!==0&&o!==null)o.return=I,Be=o;else for(;Be!==null;){I=Be;try{var Se=I.alternate;if((I.flags&1024)!==0)switch(I.tag){case 0:case 11:case 15:break;case 1:if(Se!==null){var Ve=Se.memoizedProps,Kt=Se.memoizedState,L=I.stateNode,E=L.getSnapshotBeforeUpdate(I.elementType===I.type?Ve:pn(I.type,Ve),Kt);L.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var D=I.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(g(163))}}catch(Ae){Jt(I,I.return,Ae)}if(o=I.sibling,o!==null){o.return=I.return,Be=o;break}Be=I.return}return Se=qb,qb=!1,Se}function Br(o,I,s){var c=I.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var u=c=c.next;do{if((u.tag&o)===o){var b=u.destroy;u.destroy=void 0,b!==void 0&&Hd(I,s,b)}u=u.next}while(u!==c)}}function zs(o,I){if(I=I.updateQueue,I=I!==null?I.lastEffect:null,I!==null){var s=I=I.next;do{if((s.tag&o)===o){var c=s.create;s.destroy=c()}s=s.next}while(s!==I)}}function wd(o){var I=o.ref;if(I!==null){var s=o.stateNode;switch(o.tag){case 5:o=s;break;default:o=s}typeof I=="function"?I(o):I.current=o}}function $b(o){var I=o.alternate;I!==null&&(o.alternate=null,$b(I)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(I=o.stateNode,I!==null&&(delete I[Xn],delete I[dr],delete I[qc],delete I[KR],delete I[xR])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function _b(o){return o.tag===5||o.tag===3||o.tag===4}function eZ(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||_b(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Fd(o,I,s){var c=o.tag;if(c===5||c===6)o=o.stateNode,I?s.nodeType===8?s.parentNode.insertBefore(o,I):s.insertBefore(o,I):(s.nodeType===8?(I=s.parentNode,I.insertBefore(o,s)):(I=s,I.appendChild(o)),s=s._reactRootContainer,s!=null||I.onclick!==null||(I.onclick=ps));else if(c!==4&&(o=o.child,o!==null))for(Fd(o,I,s),o=o.sibling;o!==null;)Fd(o,I,s),o=o.sibling}function Nd(o,I,s){var c=o.tag;if(c===5||c===6)o=o.stateNode,I?s.insertBefore(o,I):s.appendChild(o);else if(c!==4&&(o=o.child,o!==null))for(Nd(o,I,s),o=o.sibling;o!==null;)Nd(o,I,s),o=o.sibling}var tg=null,bn=!1;function Yo(o,I,s){for(s=s.child;s!==null;)tZ(o,I,s),s=s.sibling}function tZ(o,I,s){if(Rn&&typeof Rn.onCommitFiberUnmount=="function")try{Rn.onCommitFiberUnmount(es,s)}catch{}switch(s.tag){case 5:Cg||_l(s,I);case 6:var c=tg,u=bn;tg=null,Yo(o,I,s),tg=c,bn=u,tg!==null&&(bn?(o=tg,s=s.stateNode,o.nodeType===8?o.parentNode.removeChild(s):o.removeChild(s)):tg.removeChild(s.stateNode));break;case 18:tg!==null&&(bn?(o=tg,s=s.stateNode,o.nodeType===8?Oc(o.parentNode,s):o.nodeType===1&&Oc(o,s),gr(o)):Oc(tg,s.stateNode));break;case 4:c=tg,u=bn,tg=s.stateNode.containerInfo,bn=!0,Yo(o,I,s),tg=c,bn=u;break;case 0:case 11:case 14:case 15:if(!Cg&&(c=s.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){u=c=c.next;do{var b=u,W=b.destroy;b=b.tag,W!==void 0&&((b&2)!==0||(b&4)!==0)&&Hd(s,I,W),u=u.next}while(u!==c)}Yo(o,I,s);break;case 1:if(!Cg&&(_l(s,I),c=s.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=s.memoizedProps,c.state=s.memoizedState,c.componentWillUnmount()}catch(H){Jt(s,I,H)}Yo(o,I,s);break;case 21:Yo(o,I,s);break;case 22:s.mode&1?(Cg=(c=Cg)||s.memoizedState!==null,Yo(o,I,s),Cg=c):Yo(o,I,s);break;default:Yo(o,I,s)}}function gZ(o){var I=o.updateQueue;if(I!==null){o.updateQueue=null;var s=o.stateNode;s===null&&(s=o.stateNode=new tX),I.forEach(function(c){var u=aX.bind(null,o,c);s.has(c)||(s.add(c),c.then(u,u))})}}function Zn(o,I){var s=I.deletions;if(s!==null)for(var c=0;c<s.length;c++){var u=s[c];try{var b=o,W=I,H=W;e:for(;H!==null;){switch(H.tag){case 5:tg=H.stateNode,bn=!1;break e;case 3:tg=H.stateNode.containerInfo,bn=!0;break e;case 4:tg=H.stateNode.containerInfo,bn=!0;break e}H=H.return}if(tg===null)throw Error(g(160));tZ(b,W,u),tg=null,bn=!1;var x=u.alternate;x!==null&&(x.return=null),u.return=null}catch(q){Jt(u,I,q)}}if(I.subtreeFlags&12854)for(I=I.child;I!==null;)nZ(I,o),I=I.sibling}function nZ(o,I){var s=o.alternate,c=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Zn(I,o),vn(o),c&4){try{Br(3,o,o.return),zs(3,o)}catch(Ve){Jt(o,o.return,Ve)}try{Br(5,o,o.return)}catch(Ve){Jt(o,o.return,Ve)}}break;case 1:Zn(I,o),vn(o),c&512&&s!==null&&_l(s,s.return);break;case 5:if(Zn(I,o),vn(o),c&512&&s!==null&&_l(s,s.return),o.flags&32){var u=o.stateNode;try{Zt(u,"")}catch(Ve){Jt(o,o.return,Ve)}}if(c&4&&(u=o.stateNode,u!=null)){var b=o.memoizedProps,W=s!==null?s.memoizedProps:b,H=o.type,x=o.updateQueue;if(o.updateQueue=null,x!==null)try{H==="input"&&b.type==="radio"&&b.name!=null&&je(u,b),jg(H,W);var q=jg(H,b);for(W=0;W<x.length;W+=2){var ie=x[W],se=x[W+1];ie==="style"?Je(u,se):ie==="dangerouslySetInnerHTML"?fg(u,se):ie==="children"?Zt(u,se):R(u,ie,se,q)}switch(H){case"input":fe(u,b);break;case"textarea":we(u,b);break;case"select":var Ie=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!b.multiple;var Ze=b.value;Ze!=null?be(u,!!b.multiple,Ze,!1):Ie!==!!b.multiple&&(b.defaultValue!=null?be(u,!!b.multiple,b.defaultValue,!0):be(u,!!b.multiple,b.multiple?[]:"",!1))}u[dr]=b}catch(Ve){Jt(o,o.return,Ve)}}break;case 6:if(Zn(I,o),vn(o),c&4){if(o.stateNode===null)throw Error(g(162));u=o.stateNode,b=o.memoizedProps;try{u.nodeValue=b}catch(Ve){Jt(o,o.return,Ve)}}break;case 3:if(Zn(I,o),vn(o),c&4&&s!==null&&s.memoizedState.isDehydrated)try{gr(I.containerInfo)}catch(Ve){Jt(o,o.return,Ve)}break;case 4:Zn(I,o),vn(o);break;case 13:Zn(I,o),vn(o),u=o.child,u.flags&8192&&(b=u.memoizedState!==null,u.stateNode.isHidden=b,!b||u.alternate!==null&&u.alternate.memoizedState!==null||(Ed=Nt())),c&4&&gZ(o);break;case 22:if(ie=s!==null&&s.memoizedState!==null,o.mode&1?(Cg=(q=Cg)||ie,Zn(I,o),Cg=q):Zn(I,o),vn(o),c&8192){if(q=o.memoizedState!==null,(o.stateNode.isHidden=q)&&!ie&&(o.mode&1)!==0)for(Be=o,ie=o.child;ie!==null;){for(se=Be=ie;Be!==null;){switch(Ie=Be,Ze=Ie.child,Ie.tag){case 0:case 11:case 14:case 15:Br(4,Ie,Ie.return);break;case 1:_l(Ie,Ie.return);var Se=Ie.stateNode;if(typeof Se.componentWillUnmount=="function"){c=Ie,s=Ie.return;try{I=c,Se.props=I.memoizedProps,Se.state=I.memoizedState,Se.componentWillUnmount()}catch(Ve){Jt(c,s,Ve)}}break;case 5:_l(Ie,Ie.return);break;case 22:if(Ie.memoizedState!==null){IZ(se);continue}}Ze!==null?(Ze.return=Ie,Be=Ze):IZ(se)}ie=ie.sibling}e:for(ie=null,se=o;;){if(se.tag===5){if(ie===null){ie=se;try{u=se.stateNode,q?(b=u.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(H=se.stateNode,x=se.memoizedProps.style,W=x!=null&&x.hasOwnProperty("display")?x.display:null,H.style.display=An("display",W))}catch(Ve){Jt(o,o.return,Ve)}}}else if(se.tag===6){if(ie===null)try{se.stateNode.nodeValue=q?"":se.memoizedProps}catch(Ve){Jt(o,o.return,Ve)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===o)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===o)break e;for(;se.sibling===null;){if(se.return===null||se.return===o)break e;ie===se&&(ie=null),se=se.return}ie===se&&(ie=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:Zn(I,o),vn(o),c&4&&gZ(o);break;case 21:break;default:Zn(I,o),vn(o)}}function vn(o){var I=o.flags;if(I&2){try{e:{for(var s=o.return;s!==null;){if(_b(s)){var c=s;break e}s=s.return}throw Error(g(160))}switch(c.tag){case 5:var u=c.stateNode;c.flags&32&&(Zt(u,""),c.flags&=-33);var b=eZ(o);Nd(o,b,u);break;case 3:case 4:var W=c.stateNode.containerInfo,H=eZ(o);Fd(o,H,W);break;default:throw Error(g(161))}}catch(x){Jt(o,o.return,x)}o.flags&=-3}I&4096&&(o.flags&=-4097)}function nX(o,I,s){Be=o,oZ(o)}function oZ(o,I,s){for(var c=(o.mode&1)!==0;Be!==null;){var u=Be,b=u.child;if(u.tag===22&&c){var W=u.memoizedState!==null||Es;if(!W){var H=u.alternate,x=H!==null&&H.memoizedState!==null||Cg;H=Es;var q=Cg;if(Es=W,(Cg=x)&&!q)for(Be=u;Be!==null;)W=Be,x=W.child,W.tag===22&&W.memoizedState!==null?rZ(u):x!==null?(x.return=W,Be=x):rZ(u);for(;b!==null;)Be=b,oZ(b),b=b.sibling;Be=u,Es=H,Cg=q}lZ(o)}else(u.subtreeFlags&8772)!==0&&b!==null?(b.return=u,Be=b):lZ(o)}}function lZ(o){for(;Be!==null;){var I=Be;if((I.flags&8772)!==0){var s=I.alternate;try{if((I.flags&8772)!==0)switch(I.tag){case 0:case 11:case 15:Cg||zs(5,I);break;case 1:var c=I.stateNode;if(I.flags&4&&!Cg)if(s===null)c.componentDidMount();else{var u=I.elementType===I.type?s.memoizedProps:pn(I.type,s.memoizedProps);c.componentDidUpdate(u,s.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var b=I.updateQueue;b!==null&&Ib(I,b,c);break;case 3:var W=I.updateQueue;if(W!==null){if(s=null,I.child!==null)switch(I.child.tag){case 5:s=I.child.stateNode;break;case 1:s=I.child.stateNode}Ib(I,W,s)}break;case 5:var H=I.stateNode;if(s===null&&I.flags&4){s=H;var x=I.memoizedProps;switch(I.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&s.focus();break;case"img":x.src&&(s.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(I.memoizedState===null){var q=I.alternate;if(q!==null){var ie=q.memoizedState;if(ie!==null){var se=ie.dehydrated;se!==null&&gr(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(g(163))}Cg||I.flags&512&&wd(I)}catch(Ie){Jt(I,I.return,Ie)}}if(I===o){Be=null;break}if(s=I.sibling,s!==null){s.return=I.return,Be=s;break}Be=I.return}}function IZ(o){for(;Be!==null;){var I=Be;if(I===o){Be=null;break}var s=I.sibling;if(s!==null){s.return=I.return,Be=s;break}Be=I.return}}function rZ(o){for(;Be!==null;){var I=Be;try{switch(I.tag){case 0:case 11:case 15:var s=I.return;try{zs(4,I)}catch(x){Jt(I,s,x)}break;case 1:var c=I.stateNode;if(typeof c.componentDidMount=="function"){var u=I.return;try{c.componentDidMount()}catch(x){Jt(I,u,x)}}var b=I.return;try{wd(I)}catch(x){Jt(I,b,x)}break;case 5:var W=I.return;try{wd(I)}catch(x){Jt(I,W,x)}}}catch(x){Jt(I,I.return,x)}if(I===o){Be=null;break}var H=I.sibling;if(H!==null){H.return=I.return,Be=H;break}Be=I.return}}var oX=Math.ceil,Ms=k.ReactCurrentDispatcher,Kd=k.ReactCurrentOwner,_g=k.ReactCurrentBatchConfig,De=0,$t=null,Ut=null,gg=0,Eg=0,eI=Ro(0),Ot=0,Sr=null,ol=0,Ts=0,xd=0,Vr=null,Wg=null,Ed=0,tI=1/0,lo=null,Us=!1,zd=null,Ho=null,Ls=!1,wo=null,Qs=0,Wr=0,Md=null,Ds=-1,js=0;function pg(){return(De&6)!==0?Nt():Ds!==-1?Ds:Ds=Nt()}function Fo(o){return(o.mode&1)===0?1:(De&2)!==0&&gg!==0?gg&-gg:zR.transition!==null?(js===0&&(js=ep()),js):(o=lt,o!==0||(o=window.event,o=o===void 0?16:sp(o.type)),o)}function yn(o,I,s,c){if(50<Wr)throw Wr=0,Md=null,Error(g(185));qI(o,s,c),((De&2)===0||o!==$t)&&(o===$t&&((De&2)===0&&(Ts|=s),Ot===4&&No(o,gg)),Rg(o,c),s===1&&De===0&&(I.mode&1)===0&&(tI=Nt()+500,Gs&&ko()))}function Rg(o,I){var s=o.callbackNode;zW(o,I);var c=ns(o,o===$t?gg:0);if(c===0)s!==null&&qh(s),o.callbackNode=null,o.callbackPriority=0;else if(I=c&-c,o.callbackPriority!==I){if(s!=null&&qh(s),I===1)o.tag===0?ER(sZ.bind(null,o)):jp(sZ.bind(null,o)),FR(function(){(De&6)===0&&ko()}),s=null;else{switch(tp(c)){case 1:s=yc;break;case 4:s=$h;break;case 16:s=_i;break;case 536870912:s=_h;break;default:s=_i}s=hZ(s,iZ.bind(null,o))}o.callbackPriority=I,o.callbackNode=s}}function iZ(o,I){if(Ds=-1,js=0,(De&6)!==0)throw Error(g(327));var s=o.callbackNode;if(gI()&&o.callbackNode!==s)return null;var c=ns(o,o===$t?gg:0);if(c===0)return null;if((c&30)!==0||(c&o.expiredLanes)!==0||I)I=Ps(o,c);else{I=c;var u=De;De|=2;var b=aZ();($t!==o||gg!==I)&&(lo=null,tI=Nt()+500,Il(o,I));do try{rX();break}catch(H){CZ(o,H)}while(!0);Id(),Ms.current=b,De=u,Ut!==null?I=0:($t=null,gg=0,I=Ot)}if(I!==0){if(I===2&&(u=Gc(o),u!==0&&(c=u,I=Td(o,u))),I===1)throw s=Sr,Il(o,0),No(o,c),Rg(o,Nt()),s;if(I===6)No(o,c);else{if(u=o.current.alternate,(c&30)===0&&!lX(u)&&(I=Ps(o,c),I===2&&(b=Gc(o),b!==0&&(c=b,I=Td(o,b))),I===1))throw s=Sr,Il(o,0),No(o,c),Rg(o,Nt()),s;switch(o.finishedWork=u,o.finishedLanes=c,I){case 0:case 1:throw Error(g(345));case 2:rl(o,Wg,lo);break;case 3:if(No(o,c),(c&130023424)===c&&(I=Ed+500-Nt(),10<I)){if(ns(o,0)!==0)break;if(u=o.suspendedLanes,(u&c)!==c){pg(),o.pingedLanes|=o.suspendedLanes&u;break}o.timeoutHandle=Pc(rl.bind(null,o,Wg,lo),I);break}rl(o,Wg,lo);break;case 4:if(No(o,c),(c&4194240)===c)break;for(I=o.eventTimes,u=-1;0<c;){var W=31-un(c);b=1<<W,W=I[W],W>u&&(u=W),c&=~b}if(c=u,c=Nt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*oX(c/1960))-c,10<c){o.timeoutHandle=Pc(rl.bind(null,o,Wg,lo),c);break}rl(o,Wg,lo);break;case 5:rl(o,Wg,lo);break;default:throw Error(g(329))}}}return Rg(o,Nt()),o.callbackNode===s?iZ.bind(null,o):null}function Td(o,I){var s=Vr;return o.current.memoizedState.isDehydrated&&(Il(o,I).flags|=256),o=Ps(o,I),o!==2&&(I=Wg,Wg=s,I!==null&&Ud(I)),o}function Ud(o){Wg===null?Wg=o:Wg.push.apply(Wg,o)}function lX(o){for(var I=o;;){if(I.flags&16384){var s=I.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var c=0;c<s.length;c++){var u=s[c],b=u.getSnapshot;u=u.value;try{if(!mn(b(),u))return!1}catch{return!1}}}if(s=I.child,I.subtreeFlags&16384&&s!==null)s.return=I,I=s;else{if(I===o)break;for(;I.sibling===null;){if(I.return===null||I.return===o)return!0;I=I.return}I.sibling.return=I.return,I=I.sibling}}return!0}function No(o,I){for(I&=~xd,I&=~Ts,o.suspendedLanes|=I,o.pingedLanes&=~I,o=o.expirationTimes;0<I;){var s=31-un(I),c=1<<s;o[s]=-1,I&=~c}}function sZ(o){if((De&6)!==0)throw Error(g(327));gI();var I=ns(o,0);if((I&1)===0)return Rg(o,Nt()),null;var s=Ps(o,I);if(o.tag!==0&&s===2){var c=Gc(o);c!==0&&(I=c,s=Td(o,c))}if(s===1)throw s=Sr,Il(o,0),No(o,I),Rg(o,Nt()),s;if(s===6)throw Error(g(345));return o.finishedWork=o.current.alternate,o.finishedLanes=I,rl(o,Wg,lo),Rg(o,Nt()),null}function Ld(o,I){var s=De;De|=1;try{return o(I)}finally{De=s,De===0&&(tI=Nt()+500,Gs&&ko())}}function ll(o){wo!==null&&wo.tag===0&&(De&6)===0&&gI();var I=De;De|=1;var s=_g.transition,c=lt;try{if(_g.transition=null,lt=1,o)return o()}finally{lt=c,_g.transition=s,De=I,(De&6)===0&&ko()}}function Qd(){Eg=eI.current,bt(eI)}function Il(o,I){o.finishedWork=null,o.finishedLanes=0;var s=o.timeoutHandle;if(s!==-1&&(o.timeoutHandle=-1,wR(s)),Ut!==null)for(s=Ut.return;s!==null;){var c=s;switch(td(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Zs();break;case 3:ql(),bt(Bg),bt(rg),Ad();break;case 5:cd(c);break;case 4:ql();break;case 13:bt(Vt);break;case 19:bt(Vt);break;case 10:rd(c.type._context);break;case 22:case 23:Qd()}s=s.return}if($t=o,Ut=o=Ko(o.current,null),gg=Eg=I,Ot=0,Sr=null,xd=Ts=ol=0,Wg=Vr=null,tl!==null){for(I=0;I<tl.length;I++)if(s=tl[I],c=s.interleaved,c!==null){s.interleaved=null;var u=c.next,b=s.pending;if(b!==null){var W=b.next;b.next=u,c.next=W}s.pending=c}tl=null}return o}function CZ(o,I){do{var s=Ut;try{if(Id(),vs.current=Fs,Ys){for(var c=Wt.memoizedState;c!==null;){var u=c.queue;u!==null&&(u.pending=null),c=c.next}Ys=!1}if(nl=0,qt=Pt=Wt=null,br=!1,Zr=0,Kd.current=null,s===null||s.return===null){Ot=1,Sr=I,Ut=null;break}e:{var b=o,W=s.return,H=s,x=I;if(I=gg,H.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var q=x,ie=H,se=ie.tag;if((ie.mode&1)===0&&(se===0||se===11||se===15)){var Ie=ie.alternate;Ie?(ie.updateQueue=Ie.updateQueue,ie.memoizedState=Ie.memoizedState,ie.lanes=Ie.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var Ze=wb(W);if(Ze!==null){Ze.flags&=-257,Fb(Ze,W,H,b,I),Ze.mode&1&&Hb(b,q,I),I=Ze,x=q;var Se=I.updateQueue;if(Se===null){var Ve=new Set;Ve.add(x),I.updateQueue=Ve}else Se.add(x);break e}else{if((I&1)===0){Hb(b,q,I),Dd();break e}x=Error(g(426))}}else if(Gt&&H.mode&1){var Kt=wb(W);if(Kt!==null){(Kt.flags&65536)===0&&(Kt.flags|=256),Fb(Kt,W,H,b,I),od($l(x,H));break e}}b=x=$l(x,H),Ot!==4&&(Ot=2),Vr===null?Vr=[b]:Vr.push(b),b=W;do{switch(b.tag){case 3:b.flags|=65536,I&=-I,b.lanes|=I;var L=vb(b,x,I);lb(b,L);break e;case 1:H=x;var E=b.type,D=b.stateNode;if((b.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Ho===null||!Ho.has(D)))){b.flags|=65536,I&=-I,b.lanes|=I;var Ae=Yb(b,H,I);lb(b,Ae);break e}}b=b.return}while(b!==null)}dZ(s)}catch(We){I=We,Ut===s&&s!==null&&(Ut=s=s.return);continue}break}while(!0)}function aZ(){var o=Ms.current;return Ms.current=Fs,o===null?Fs:o}function Dd(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),$t===null||(ol&268435455)===0&&(Ts&268435455)===0||No($t,gg)}function Ps(o,I){var s=De;De|=2;var c=aZ();($t!==o||gg!==I)&&(lo=null,Il(o,I));do try{IX();break}catch(u){CZ(o,u)}while(!0);if(Id(),De=s,Ms.current=c,Ut!==null)throw Error(g(261));return $t=null,gg=0,Ot}function IX(){for(;Ut!==null;)cZ(Ut)}function rX(){for(;Ut!==null&&!vW();)cZ(Ut)}function cZ(o){var I=mZ(o.alternate,o,Eg);o.memoizedProps=o.pendingProps,I===null?dZ(o):Ut=I,Kd.current=null}function dZ(o){var I=o;do{var s=I.alternate;if(o=I.return,(I.flags&32768)===0){if(s=_R(s,I,Eg),s!==null){Ut=s;return}}else{if(s=eX(s,I),s!==null){s.flags&=32767,Ut=s;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Ot=6,Ut=null;return}}if(I=I.sibling,I!==null){Ut=I;return}Ut=I=o}while(I!==null);Ot===0&&(Ot=5)}function rl(o,I,s){var c=lt,u=_g.transition;try{_g.transition=null,lt=1,iX(o,I,s,c)}finally{_g.transition=u,lt=c}return null}function iX(o,I,s,c){do gI();while(wo!==null);if((De&6)!==0)throw Error(g(327));s=o.finishedWork;var u=o.finishedLanes;if(s===null)return null;if(o.finishedWork=null,o.finishedLanes=0,s===o.current)throw Error(g(177));o.callbackNode=null,o.callbackPriority=0;var b=s.lanes|s.childLanes;if(MW(o,b),o===$t&&(Ut=$t=null,gg=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Ls||(Ls=!0,hZ(_i,function(){return gI(),null})),b=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||b){b=_g.transition,_g.transition=null;var W=lt;lt=1;var H=De;De|=4,Kd.current=null,gX(o,s),nZ(s,o),RR(Dc),Is=!!Qc,Dc=Qc=null,o.current=s,nX(s),YW(),De=H,lt=W,_g.transition=b}else o.current=s;if(Ls&&(Ls=!1,wo=o,Qs=u),b=o.pendingLanes,b===0&&(Ho=null),FW(s.stateNode),Rg(o,Nt()),I!==null)for(c=o.onRecoverableError,s=0;s<I.length;s++)u=I[s],c(u.value,{componentStack:u.stack,digest:u.digest});if(Us)throw Us=!1,o=zd,zd=null,o;return(Qs&1)!==0&&o.tag!==0&&gI(),b=o.pendingLanes,(b&1)!==0?o===Md?Wr++:(Wr=0,Md=o):Wr=0,ko(),null}function gI(){if(wo!==null){var o=tp(Qs),I=_g.transition,s=lt;try{if(_g.transition=null,lt=16>o?16:o,wo===null)var c=!1;else{if(o=wo,wo=null,Qs=0,(De&6)!==0)throw Error(g(331));var u=De;for(De|=4,Be=o.current;Be!==null;){var b=Be,W=b.child;if((Be.flags&16)!==0){var H=b.deletions;if(H!==null){for(var x=0;x<H.length;x++){var q=H[x];for(Be=q;Be!==null;){var ie=Be;switch(ie.tag){case 0:case 11:case 15:Br(8,ie,b)}var se=ie.child;if(se!==null)se.return=ie,Be=se;else for(;Be!==null;){ie=Be;var Ie=ie.sibling,Ze=ie.return;if($b(ie),ie===q){Be=null;break}if(Ie!==null){Ie.return=Ze,Be=Ie;break}Be=Ze}}}var Se=b.alternate;if(Se!==null){var Ve=Se.child;if(Ve!==null){Se.child=null;do{var Kt=Ve.sibling;Ve.sibling=null,Ve=Kt}while(Ve!==null)}}Be=b}}if((b.subtreeFlags&2064)!==0&&W!==null)W.return=b,Be=W;else e:for(;Be!==null;){if(b=Be,(b.flags&2048)!==0)switch(b.tag){case 0:case 11:case 15:Br(9,b,b.return)}var L=b.sibling;if(L!==null){L.return=b.return,Be=L;break e}Be=b.return}}var E=o.current;for(Be=E;Be!==null;){W=Be;var D=W.child;if((W.subtreeFlags&2064)!==0&&D!==null)D.return=W,Be=D;else e:for(W=E;Be!==null;){if(H=Be,(H.flags&2048)!==0)try{switch(H.tag){case 0:case 11:case 15:zs(9,H)}}catch(We){Jt(H,H.return,We)}if(H===W){Be=null;break e}var Ae=H.sibling;if(Ae!==null){Ae.return=H.return,Be=Ae;break e}Be=H.return}}if(De=u,ko(),Rn&&typeof Rn.onPostCommitFiberRoot=="function")try{Rn.onPostCommitFiberRoot(es,o)}catch{}c=!0}return c}finally{lt=s,_g.transition=I}}return!1}function AZ(o,I,s){I=$l(s,I),I=vb(o,I,1),o=vo(o,I,1),I=pg(),o!==null&&(qI(o,1,I),Rg(o,I))}function Jt(o,I,s){if(o.tag===3)AZ(o,o,s);else for(;I!==null;){if(I.tag===3){AZ(I,o,s);break}else if(I.tag===1){var c=I.stateNode;if(typeof I.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ho===null||!Ho.has(c))){o=$l(s,o),o=Yb(I,o,1),I=vo(I,o,1),o=pg(),I!==null&&(qI(I,1,o),Rg(I,o));break}}I=I.return}}function sX(o,I,s){var c=o.pingCache;c!==null&&c.delete(I),I=pg(),o.pingedLanes|=o.suspendedLanes&s,$t===o&&(gg&s)===s&&(Ot===4||Ot===3&&(gg&130023424)===gg&&500>Nt()-Ed?Il(o,0):xd|=s),Rg(o,I)}function uZ(o,I){I===0&&((o.mode&1)===0?I=1:(I=gs,gs<<=1,(gs&130023424)===0&&(gs=4194304)));var s=pg();o=go(o,I),o!==null&&(qI(o,I,s),Rg(o,s))}function CX(o){var I=o.memoizedState,s=0;I!==null&&(s=I.retryLane),uZ(o,s)}function aX(o,I){var s=0;switch(o.tag){case 13:var c=o.stateNode,u=o.memoizedState;u!==null&&(s=u.retryLane);break;case 19:c=o.stateNode;break;default:throw Error(g(314))}c!==null&&c.delete(I),uZ(o,s)}var mZ;mZ=function(o,I,s){if(o!==null)if(o.memoizedProps!==I.pendingProps||Bg.current)Vg=!0;else{if((o.lanes&s)===0&&(I.flags&128)===0)return Vg=!1,$R(o,I,s);Vg=(o.flags&131072)!==0}else Vg=!1,Gt&&(I.flags&1048576)!==0&&Pp(I,Bs,I.index);switch(I.lanes=0,I.tag){case 2:var c=I.type;xs(o,I),o=I.pendingProps;var u=Ul(I,rg.current);Ol(I,s),u=hd(null,I,c,o,u,s);var b=pd();return I.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(I.tag=1,I.memoizedState=null,I.updateQueue=null,Sg(c)?(b=!0,ys(I)):b=!1,I.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,Cd(I),u.updater=Ns,I.stateNode=u,u._reactInternals=I,Bd(I,c,o,s),I=Rd(null,I,c,!0,b,s)):(I.tag=0,Gt&&b&&ed(I),hg(null,I,u,s),I=I.child),I;case 16:c=I.elementType;e:{switch(xs(o,I),o=I.pendingProps,u=c._init,c=u(c._payload),I.type=c,u=I.tag=dX(c),o=pn(c,o),u){case 0:I=Wd(null,I,c,o,s);break e;case 1:I=Mb(null,I,c,o,s);break e;case 11:I=Nb(null,I,c,o,s);break e;case 14:I=Kb(null,I,c,pn(c.type,o),s);break e}throw Error(g(306,c,""))}return I;case 0:return c=I.type,u=I.pendingProps,u=I.elementType===c?u:pn(c,u),Wd(o,I,c,u,s);case 1:return c=I.type,u=I.pendingProps,u=I.elementType===c?u:pn(c,u),Mb(o,I,c,u,s);case 3:e:{if(Tb(I),o===null)throw Error(g(387));c=I.pendingProps,b=I.memoizedState,u=b.element,ob(o,I),ks(I,c,null,s);var W=I.memoizedState;if(c=W.element,b.isDehydrated)if(b={element:c,isDehydrated:!1,cache:W.cache,pendingSuspenseBoundaries:W.pendingSuspenseBoundaries,transitions:W.transitions},I.updateQueue.baseState=b,I.memoizedState=b,I.flags&256){u=$l(Error(g(423)),I),I=Ub(o,I,c,s,u);break e}else if(c!==u){u=$l(Error(g(424)),I),I=Ub(o,I,c,s,u);break e}else for(xg=Wo(I.stateNode.containerInfo.firstChild),Kg=I,Gt=!0,hn=null,s=gb(I,null,c,s),I.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Dl(),c===u){I=oo(o,I,s);break e}hg(o,I,c,s)}I=I.child}return I;case 5:return rb(I),o===null&&nd(I),c=I.type,u=I.pendingProps,b=o!==null?o.memoizedProps:null,W=u.children,jc(c,u)?W=null:b!==null&&jc(c,b)&&(I.flags|=32),zb(o,I),hg(o,I,W,s),I.child;case 6:return o===null&&nd(I),null;case 13:return Lb(o,I,s);case 4:return ad(I,I.stateNode.containerInfo),c=I.pendingProps,o===null?I.child=jl(I,null,c,s):hg(o,I,c,s),I.child;case 11:return c=I.type,u=I.pendingProps,u=I.elementType===c?u:pn(c,u),Nb(o,I,c,u,s);case 7:return hg(o,I,I.pendingProps,s),I.child;case 8:return hg(o,I,I.pendingProps.children,s),I.child;case 12:return hg(o,I,I.pendingProps.children,s),I.child;case 10:e:{if(c=I.type._context,u=I.pendingProps,b=I.memoizedProps,W=u.value,ht(Ws,c._currentValue),c._currentValue=W,b!==null)if(mn(b.value,W)){if(b.children===u.children&&!Bg.current){I=oo(o,I,s);break e}}else for(b=I.child,b!==null&&(b.return=I);b!==null;){var H=b.dependencies;if(H!==null){W=b.child;for(var x=H.firstContext;x!==null;){if(x.context===c){if(b.tag===1){x=no(-1,s&-s),x.tag=2;var q=b.updateQueue;if(q!==null){q=q.shared;var ie=q.pending;ie===null?x.next=x:(x.next=ie.next,ie.next=x),q.pending=x}}b.lanes|=s,x=b.alternate,x!==null&&(x.lanes|=s),id(b.return,s,I),H.lanes|=s;break}x=x.next}}else if(b.tag===10)W=b.type===I.type?null:b.child;else if(b.tag===18){if(W=b.return,W===null)throw Error(g(341));W.lanes|=s,H=W.alternate,H!==null&&(H.lanes|=s),id(W,s,I),W=b.sibling}else W=b.child;if(W!==null)W.return=b;else for(W=b;W!==null;){if(W===I){W=null;break}if(b=W.sibling,b!==null){b.return=W.return,W=b;break}W=W.return}b=W}hg(o,I,u.children,s),I=I.child}return I;case 9:return u=I.type,c=I.pendingProps.children,Ol(I,s),u=qg(u),c=c(u),I.flags|=1,hg(o,I,c,s),I.child;case 14:return c=I.type,u=pn(c,I.pendingProps),u=pn(c.type,u),Kb(o,I,c,u,s);case 15:return xb(o,I,I.type,I.pendingProps,s);case 17:return c=I.type,u=I.pendingProps,u=I.elementType===c?u:pn(c,u),xs(o,I),I.tag=1,Sg(c)?(o=!0,ys(I)):o=!1,Ol(I,s),kb(I,c,u),Bd(I,c,u,s),Rd(null,I,c,!0,o,s);case 19:return Db(o,I,s);case 22:return Eb(o,I,s)}throw Error(g(156,I.tag))};function hZ(o,I){return Oh(o,I)}function cX(o,I,s,c){this.tag=o,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=I,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(o,I,s,c){return new cX(o,I,s,c)}function jd(o){return o=o.prototype,!(!o||!o.isReactComponent)}function dX(o){if(typeof o=="function")return jd(o)?1:0;if(o!=null){if(o=o.$$typeof,o===z)return 11;if(o===P)return 14}return 2}function Ko(o,I){var s=o.alternate;return s===null?(s=en(o.tag,I,o.key,o.mode),s.elementType=o.elementType,s.type=o.type,s.stateNode=o.stateNode,s.alternate=o,o.alternate=s):(s.pendingProps=I,s.type=o.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=o.flags&14680064,s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,I=o.dependencies,s.dependencies=I===null?null:{lanes:I.lanes,firstContext:I.firstContext},s.sibling=o.sibling,s.index=o.index,s.ref=o.ref,s}function Os(o,I,s,c,u,b){var W=2;if(c=o,typeof o=="function")jd(o)&&(W=1);else if(typeof o=="string")W=5;else e:switch(o){case K:return il(s.children,u,b,I);case X:W=8,u|=8;break;case w:return o=en(12,s,I,u|2),o.elementType=w,o.lanes=b,o;case T:return o=en(13,s,I,u),o.elementType=T,o.lanes=b,o;case U:return o=en(19,s,I,u),o.elementType=U,o.lanes=b,o;case _:return qs(s,u,b,I);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case h:W=10;break e;case Y:W=9;break e;case z:W=11;break e;case P:W=14;break e;case O:W=16,c=null;break e}throw Error(g(130,o==null?o:typeof o,""))}return I=en(W,s,I,u),I.elementType=o,I.type=c,I.lanes=b,I}function il(o,I,s,c){return o=en(7,o,c,I),o.lanes=s,o}function qs(o,I,s,c){return o=en(22,o,c,I),o.elementType=_,o.lanes=s,o.stateNode={isHidden:!1},o}function Pd(o,I,s){return o=en(6,o,null,I),o.lanes=s,o}function Od(o,I,s){return I=en(4,o.children!==null?o.children:[],o.key,I),I.lanes=s,I.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},I}function AX(o,I,s,c,u){this.tag=I,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fc(0),this.expirationTimes=fc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fc(0),this.identifierPrefix=c,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function qd(o,I,s,c,u,b,W,H,x){return o=new AX(o,I,s,H,x),I===1?(I=1,b===!0&&(I|=8)):I=0,b=en(3,null,null,I),o.current=b,b.stateNode=o,b.memoizedState={element:c,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cd(b),o}function uX(o,I,s){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:c==null?null:""+c,children:o,containerInfo:I,implementation:s}}function pZ(o){if(!o)return Xo;o=o._reactInternals;e:{if(Oo(o)!==o||o.tag!==1)throw Error(g(170));var I=o;do{switch(I.tag){case 3:I=I.stateNode.context;break e;case 1:if(Sg(I.type)){I=I.stateNode.__reactInternalMemoizedMergedChildContext;break e}}I=I.return}while(I!==null);throw Error(g(171))}if(o.tag===1){var s=o.type;if(Sg(s))return Qp(o,s,I)}return I}function bZ(o,I,s,c,u,b,W,H,x){return o=qd(s,c,!0,o,u,b,W,H,x),o.context=pZ(null),s=o.current,c=pg(),u=Fo(s),b=no(c,u),b.callback=I??null,vo(s,b,u),o.current.lanes=u,qI(o,u,c),Rg(o,c),o}function $s(o,I,s,c){var u=I.current,b=pg(),W=Fo(u);return s=pZ(s),I.context===null?I.context=s:I.pendingContext=s,I=no(b,W),I.payload={element:o},c=c===void 0?null:c,c!==null&&(I.callback=c),o=vo(u,I,W),o!==null&&(yn(o,u,W,b),Xs(o,u,W)),W}function _s(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function ZZ(o,I){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var s=o.retryLane;o.retryLane=s!==0&&s<I?s:I}}function $d(o,I){ZZ(o,I),(o=o.alternate)&&ZZ(o,I)}function mX(){return null}var yZ=typeof reportError=="function"?reportError:function(o){console.error(o)};function _d(o){this._internalRoot=o}eC.prototype.render=_d.prototype.render=function(o){var I=this._internalRoot;if(I===null)throw Error(g(409));$s(o,I,null,null)},eC.prototype.unmount=_d.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var I=o.containerInfo;ll(function(){$s(null,o,null,null)}),I[$n]=null}};function eC(o){this._internalRoot=o}eC.prototype.unstable_scheduleHydration=function(o){if(o){var I=op();o={blockedOn:null,target:o,priority:I};for(var s=0;s<Bo.length&&I!==0&&I<Bo[s].priority;s++);Bo.splice(s,0,o),s===0&&rp(o)}};function eA(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function tC(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function GZ(){}function hX(o,I,s,c,u){if(u){if(typeof c=="function"){var b=c;c=function(){var q=_s(W);b.call(q)}}var W=bZ(I,c,o,0,null,!1,!1,"",GZ);return o._reactRootContainer=W,o[$n]=W.current,ar(o.nodeType===8?o.parentNode:o),ll(),W}for(;u=o.lastChild;)o.removeChild(u);if(typeof c=="function"){var H=c;c=function(){var q=_s(x);H.call(q)}}var x=qd(o,0,!1,null,null,!1,!1,"",GZ);return o._reactRootContainer=x,o[$n]=x.current,ar(o.nodeType===8?o.parentNode:o),ll(function(){$s(I,x,s,c)}),x}function gC(o,I,s,c,u){var b=s._reactRootContainer;if(b){var W=b;if(typeof u=="function"){var H=u;u=function(){var x=_s(W);H.call(x)}}$s(I,W,o,u)}else W=hX(s,I,o,u,c);return _s(W)}gp=function(o){switch(o.tag){case 3:var I=o.stateNode;if(I.current.memoizedState.isDehydrated){var s=OI(I.pendingLanes);s!==0&&(Bc(I,s|1),Rg(I,Nt()),(De&6)===0&&(tI=Nt()+500,ko()))}break;case 13:ll(function(){var c=go(o,1);if(c!==null){var u=pg();yn(c,o,1,u)}}),$d(o,1)}},Sc=function(o){if(o.tag===13){var I=go(o,134217728);if(I!==null){var s=pg();yn(I,o,134217728,s)}$d(o,134217728)}},np=function(o){if(o.tag===13){var I=Fo(o),s=go(o,I);if(s!==null){var c=pg();yn(s,o,I,c)}$d(o,I)}},op=function(){return lt},lp=function(o,I){var s=lt;try{return lt=o,I()}finally{lt=s}},hc=function(o,I,s){switch(I){case"input":if(fe(o,s),I=s.name,s.type==="radio"&&I!=null){for(s=o;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+I)+'][type="radio"]'),I=0;I<s.length;I++){var c=s[I];if(c!==o&&c.form===o.form){var u=bs(c);if(!u)throw Error(g(90));he(c),fe(c,u)}}}break;case"textarea":we(o,s);break;case"select":I=s.value,I!=null&&be(o,!!s.multiple,I,!1)}},Th=Ld,Uh=ll;var pX={usingClientEntryPoint:!1,Events:[Ar,Ml,bs,zh,Mh,Ld]},Rr={findFiberByHostInstance:qo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bX={bundleType:Rr.bundleType,version:Rr.version,rendererPackageName:Rr.rendererPackageName,rendererConfig:Rr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=jh(o),o===null?null:o.stateNode},findFiberByHostInstance:Rr.findFiberByHostInstance||mX,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nC.isDisabled&&nC.supportsFiber)try{es=nC.inject(bX),Rn=nC}catch{}}return Xg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pX,Xg.createPortal=function(o,I){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eA(I))throw Error(g(200));return uX(o,I,null,s)},Xg.createRoot=function(o,I){if(!eA(o))throw Error(g(299));var s=!1,c="",u=yZ;return I!=null&&(I.unstable_strictMode===!0&&(s=!0),I.identifierPrefix!==void 0&&(c=I.identifierPrefix),I.onRecoverableError!==void 0&&(u=I.onRecoverableError)),I=qd(o,1,!1,null,null,s,!1,c,u),o[$n]=I.current,ar(o.nodeType===8?o.parentNode:o),new _d(I)},Xg.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var I=o._reactInternals;if(I===void 0)throw typeof o.render=="function"?Error(g(188)):(o=Object.keys(o).join(","),Error(g(268,o)));return o=jh(I),o=o===null?null:o.stateNode,o},Xg.flushSync=function(o){return ll(o)},Xg.hydrate=function(o,I,s){if(!tC(I))throw Error(g(200));return gC(null,o,I,!0,s)},Xg.hydrateRoot=function(o,I,s){if(!eA(o))throw Error(g(405));var c=s!=null&&s.hydratedSources||null,u=!1,b="",W=yZ;if(s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(b=s.identifierPrefix),s.onRecoverableError!==void 0&&(W=s.onRecoverableError)),I=bZ(I,null,o,1,s??null,u,!1,b,W),o[$n]=I.current,ar(o),c)for(o=0;o<c.length;o++)s=c[o],u=s._getVersion,u=u(s._source),I.mutableSourceEagerHydrationData==null?I.mutableSourceEagerHydrationData=[s,u]:I.mutableSourceEagerHydrationData.push(s,u);return new eC(I)},Xg.render=function(o,I,s){if(!tC(I))throw Error(g(200));return gC(null,o,I,!1,s)},Xg.unmountComponentAtNode=function(o){if(!tC(o))throw Error(g(40));return o._reactRootContainer?(ll(function(){gC(null,null,o,!1,function(){o._reactRootContainer=null,o[$n]=null})}),!0):!1},Xg.unstable_batchedUpdates=Ld,Xg.unstable_renderSubtreeIntoContainer=function(o,I,s,c){if(!tC(s))throw Error(g(200));if(o==null||o._reactInternals===void 0)throw Error(g(38));return gC(o,I,s,!1,c)},Xg.version="18.3.1-next-f1338f8080-20240426",Xg}var kZ;function Af(){if(kZ)return nA.exports;kZ=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),nA.exports=WX(),nA.exports}var JZ;function RX(){if(JZ)return oC;JZ=1;var e=Af();return oC.createRoot=e.createRoot,oC.hydrateRoot=e.hydrateRoot,oC}var XX=RX();const kX=Ou(XX);var kr={},vZ;function JX(){if(vZ)return kr;vZ=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.parse=i,kr.serialize=d;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,g=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,l=Object.prototype.toString,r=(()=>{const p=function(){};return p.prototype=Object.create(null),p})();function i(p,B){const G=new r,y=p.length;if(y<2)return G;const S=B?.decode||A;let V=0;do{const v=p.indexOf("=",V);if(v===-1)break;const R=p.indexOf(";",V),k=R===-1?y:R;if(v>k){V=p.lastIndexOf(";",v-1)+1;continue}const J=C(p,V,v),N=a(p,v,J),K=p.slice(J,N);if(G[K]===void 0){let X=C(p,v+1,k),w=a(p,k,X);const h=S(p.slice(X,w));G[K]=h}V=k+1}while(V<y);return G}function C(p,B,G){do{const y=p.charCodeAt(B);if(y!==32&&y!==9)return B}while(++B<G);return G}function a(p,B,G){for(;B>G;){const y=p.charCodeAt(--B);if(y!==32&&y!==9)return B+1}return G}function d(p,B,G){const y=G?.encode||encodeURIComponent;if(!e.test(p))throw new TypeError(`argument name is invalid: ${p}`);const S=y(B);if(!t.test(S))throw new TypeError(`argument val is invalid: ${B}`);let V=p+"="+S;if(!G)return V;if(G.maxAge!==void 0){if(!Number.isInteger(G.maxAge))throw new TypeError(`option maxAge is invalid: ${G.maxAge}`);V+="; Max-Age="+G.maxAge}if(G.domain){if(!g.test(G.domain))throw new TypeError(`option domain is invalid: ${G.domain}`);V+="; Domain="+G.domain}if(G.path){if(!n.test(G.path))throw new TypeError(`option path is invalid: ${G.path}`);V+="; Path="+G.path}if(G.expires){if(!m(G.expires)||!Number.isFinite(G.expires.valueOf()))throw new TypeError(`option expires is invalid: ${G.expires}`);V+="; Expires="+G.expires.toUTCString()}if(G.httpOnly&&(V+="; HttpOnly"),G.secure&&(V+="; Secure"),G.partitioned&&(V+="; Partitioned"),G.priority)switch(typeof G.priority=="string"?G.priority.toLowerCase():void 0){case"low":V+="; Priority=Low";break;case"medium":V+="; Priority=Medium";break;case"high":V+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${G.priority}`)}if(G.sameSite)switch(typeof G.sameSite=="string"?G.sameSite.toLowerCase():G.sameSite){case!0:case"strict":V+="; SameSite=Strict";break;case"lax":V+="; SameSite=Lax";break;case"none":V+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${G.sameSite}`)}return V}function A(p){if(p.indexOf("%")===-1)return p;try{return decodeURIComponent(p)}catch{return p}}function m(p){return l.call(p)==="[object Date]"}return kr}JX();var YZ="popstate";function vX(e={}){function t(n,l){let{pathname:r,search:i,hash:C}=n.location;return LA("",{pathname:r,search:i,hash:C},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function g(n,l){return typeof l=="string"?l:si(l)}return HX(t,g,null,e)}function kt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Dn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function YX(){return Math.random().toString(36).substring(2,10)}function HZ(e,t){return{usr:e.state,key:e.key,idx:t}}function LA(e,t,g=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?HI(t):t,state:g,key:t&&t.key||n||YX()}}function si({pathname:e="/",search:t="",hash:g=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),g&&g!=="#"&&(e+=g.charAt(0)==="#"?g:"#"+g),e}function HI(e){let t={};if(e){let g=e.indexOf("#");g>=0&&(t.hash=e.substring(g),e=e.substring(0,g));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function HX(e,t,g,n={}){let{window:l=document.defaultView,v5Compat:r=!1}=n,i=l.history,C="POP",a=null,d=A();d==null&&(d=0,i.replaceState({...i.state,idx:d},""));function A(){return(i.state||{idx:null}).idx}function m(){C="POP";let S=A(),V=S==null?null:S-d;d=S,a&&a({action:C,location:y.location,delta:V})}function p(S,V){C="PUSH";let v=LA(y.location,S,V);d=A()+1;let R=HZ(v,d),k=y.createHref(v);try{i.pushState(R,"",k)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;l.location.assign(k)}r&&a&&a({action:C,location:y.location,delta:1})}function B(S,V){C="REPLACE";let v=LA(y.location,S,V);d=A();let R=HZ(v,d),k=y.createHref(v);i.replaceState(R,"",k),r&&a&&a({action:C,location:y.location,delta:0})}function G(S){return wX(S)}let y={get action(){return C},get location(){return e(l,i)},listen(S){if(a)throw new Error("A history only accepts one active listener");return l.addEventListener(YZ,m),a=S,()=>{l.removeEventListener(YZ,m),a=null}},createHref(S){return t(l,S)},createURL:G,encodeLocation(S){let V=G(S);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:p,replace:B,go(S){return i.go(S)}};return y}function wX(e,t=!1){let g="http://localhost";typeof window<"u"&&(g=window.location.origin!=="null"?window.location.origin:window.location.href),kt(g,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:si(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=g+n),new URL(n,g)}function uf(e,t,g="/"){return FX(e,t,g,!1)}function FX(e,t,g,n){let l=typeof t=="string"?HI(t):t,r=ao(l.pathname||"/",g);if(r==null)return null;let i=mf(e);NX(i);let C=null;for(let a=0;C==null&&a<i.length;++a){let d=jX(r);C=QX(i[a],d,n)}return C}function mf(e,t=[],g=[],n=""){let l=(r,i,C)=>{let a={relativePath:C===void 0?r.path||"":C,caseSensitive:r.caseSensitive===!0,childrenIndex:i,route:r};a.relativePath.startsWith("/")&&(kt(a.relativePath.startsWith(n),`Absolute route path "${a.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),a.relativePath=a.relativePath.slice(n.length));let d=Co([n,a.relativePath]),A=g.concat(a);r.children&&r.children.length>0&&(kt(r.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),mf(r.children,t,A,d)),!(r.path==null&&!r.index)&&t.push({path:d,score:UX(d,r.index),routesMeta:A})};return e.forEach((r,i)=>{if(r.path===""||!r.path?.includes("?"))l(r,i);else for(let C of hf(r.path))l(r,i,C)}),t}function hf(e){let t=e.split("/");if(t.length===0)return[];let[g,...n]=t,l=g.endsWith("?"),r=g.replace(/\?$/,"");if(n.length===0)return l?[r,""]:[r];let i=hf(n.join("/")),C=[];return C.push(...i.map(a=>a===""?r:[r,a].join("/"))),l&&C.push(...i),C.map(a=>e.startsWith("/")&&a===""?"/":a)}function NX(e){e.sort((t,g)=>t.score!==g.score?g.score-t.score:LX(t.routesMeta.map(n=>n.childrenIndex),g.routesMeta.map(n=>n.childrenIndex)))}var KX=/^:[\w-]+$/,xX=3,EX=2,zX=1,MX=10,TX=-2,wZ=e=>e==="*";function UX(e,t){let g=e.split("/"),n=g.length;return g.some(wZ)&&(n+=TX),t&&(n+=EX),g.filter(l=>!wZ(l)).reduce((l,r)=>l+(KX.test(r)?xX:r===""?zX:MX),n)}function LX(e,t){return e.length===t.length&&e.slice(0,-1).every((n,l)=>n===t[l])?e[e.length-1]-t[t.length-1]:0}function QX(e,t,g=!1){let{routesMeta:n}=e,l={},r="/",i=[];for(let C=0;C<n.length;++C){let a=n[C],d=C===n.length-1,A=r==="/"?t:t.slice(r.length)||"/",m=PC({path:a.relativePath,caseSensitive:a.caseSensitive,end:d},A),p=a.route;if(!m&&d&&g&&!n[n.length-1].route.index&&(m=PC({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},A)),!m)return null;Object.assign(l,m.params),i.push({params:l,pathname:Co([r,m.pathname]),pathnameBase:$X(Co([r,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(r=Co([r,m.pathnameBase]))}return i}function PC(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[g,n]=DX(e.path,e.caseSensitive,e.end),l=t.match(g);if(!l)return null;let r=l[0],i=r.replace(/(.)\/+$/,"$1"),C=l.slice(1);return{params:n.reduce((d,{paramName:A,isOptional:m},p)=>{if(A==="*"){let G=C[p]||"";i=r.slice(0,r.length-G.length).replace(/(.)\/+$/,"$1")}const B=C[p];return m&&!B?d[A]=void 0:d[A]=(B||"").replace(/%2F/g,"/"),d},{}),pathname:r,pathnameBase:i,pattern:e}}function DX(e,t=!1,g=!0){Dn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,C,a)=>(n.push({paramName:C,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):g?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),n]}function jX(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Dn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ao(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let g=t.endsWith("/")?t.length-1:t.length,n=e.charAt(g);return n&&n!=="/"?null:e.slice(g)||"/"}function PX(e,t="/"){let{pathname:g,search:n="",hash:l=""}=typeof e=="string"?HI(e):e;return{pathname:g?g.startsWith("/")?g:OX(g,t):t,search:_X(n),hash:ek(l)}}function OX(e,t){let g=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?g.length>1&&g.pop():l!=="."&&g.push(l)}),g.length>1?g.join("/"):"/"}function IA(e,t,g,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${g}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function qX(e){return e.filter((t,g)=>g===0||t.route.path&&t.route.path.length>0)}function pf(e){let t=qX(e);return t.map((g,n)=>n===t.length-1?g.pathname:g.pathnameBase)}function bf(e,t,g,n=!1){let l;typeof e=="string"?l=HI(e):(l={...e},kt(!l.pathname||!l.pathname.includes("?"),IA("?","pathname","search",l)),kt(!l.pathname||!l.pathname.includes("#"),IA("#","pathname","hash",l)),kt(!l.search||!l.search.includes("#"),IA("#","search","hash",l)));let r=e===""||l.pathname==="",i=r?"/":l.pathname,C;if(i==null)C=g;else{let m=t.length-1;if(!n&&i.startsWith("..")){let p=i.split("/");for(;p[0]==="..";)p.shift(),m-=1;l.pathname=p.join("/")}C=m>=0?t[m]:"/"}let a=PX(l,C),d=i&&i!=="/"&&i.endsWith("/"),A=(r||i===".")&&g.endsWith("/");return!a.pathname.endsWith("/")&&(d||A)&&(a.pathname+="/"),a}var Co=e=>e.join("/").replace(/\/\/+/g,"/"),$X=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_X=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ek=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function tk(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Zf=["POST","PUT","PATCH","DELETE"];new Set(Zf);var gk=["GET",...Zf];new Set(gk);var wI=f.createContext(null);wI.displayName="DataRouter";var Aa=f.createContext(null);Aa.displayName="DataRouterState";var yf=f.createContext({isTransitioning:!1});yf.displayName="ViewTransition";var nk=f.createContext(new Map);nk.displayName="Fetchers";var ok=f.createContext(null);ok.displayName="Await";var Pn=f.createContext(null);Pn.displayName="Navigation";var Xi=f.createContext(null);Xi.displayName="Location";var bo=f.createContext({outlet:null,matches:[],isDataRoute:!1});bo.displayName="Route";var qu=f.createContext(null);qu.displayName="RouteError";function lk(e,{relative:t}={}){kt(ki(),"useHref() may be used only in the context of a <Router> component.");let{basename:g,navigator:n}=f.useContext(Pn),{hash:l,pathname:r,search:i}=Ji(e,{relative:t}),C=r;return g!=="/"&&(C=r==="/"?g:Co([g,r])),n.createHref({pathname:C,search:i,hash:l})}function ki(){return f.useContext(Xi)!=null}function Xl(){return kt(ki(),"useLocation() may be used only in the context of a <Router> component."),f.useContext(Xi).location}var Gf="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ff(e){f.useContext(Pn).static||f.useLayoutEffect(e)}function Zo(){let{isDataRoute:e}=f.useContext(bo);return e?pk():Ik()}function Ik(){kt(ki(),"useNavigate() may be used only in the context of a <Router> component.");let e=f.useContext(wI),{basename:t,navigator:g}=f.useContext(Pn),{matches:n}=f.useContext(bo),{pathname:l}=Xl(),r=JSON.stringify(pf(n)),i=f.useRef(!1);return ff(()=>{i.current=!0}),f.useCallback((a,d={})=>{if(Dn(i.current,Gf),!i.current)return;if(typeof a=="number"){g.go(a);return}let A=bf(a,JSON.parse(r),l,d.relative==="path");e==null&&t!=="/"&&(A.pathname=A.pathname==="/"?t:Co([t,A.pathname])),(d.replace?g.replace:g.push)(A,d.state,d)},[t,g,r,l,e])}f.createContext(null);function Ji(e,{relative:t}={}){let{matches:g}=f.useContext(bo),{pathname:n}=Xl(),l=JSON.stringify(pf(g));return f.useMemo(()=>bf(e,JSON.parse(l),n,t==="path"),[e,l,n,t])}function rk(e,t){return Bf(e,t)}function Bf(e,t,g,n){kt(ki(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=f.useContext(Pn),{matches:r}=f.useContext(bo),i=r[r.length-1],C=i?i.params:{},a=i?i.pathname:"/",d=i?i.pathnameBase:"/",A=i&&i.route;{let V=A&&A.path||"";Sf(a,!A||V.endsWith("*")||V.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${a}" (under <Route path="${V}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${V}"> to <Route path="${V==="/"?"*":`${V}/*`}">.`)}let m=Xl(),p;if(t){let V=typeof t=="string"?HI(t):t;kt(d==="/"||V.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${V.pathname}" was given in the \`location\` prop.`),p=V}else p=m;let B=p.pathname||"/",G=B;if(d!=="/"){let V=d.replace(/^\//,"").split("/");G="/"+B.replace(/^\//,"").split("/").slice(V.length).join("/")}let y=uf(e,{pathname:G});Dn(A||y!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Dn(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=ck(y&&y.map(V=>Object.assign({},V,{params:Object.assign({},C,V.params),pathname:Co([d,l.encodeLocation?l.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?d:Co([d,l.encodeLocation?l.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),r,g,n);return t&&S?f.createElement(Xi.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},S):S}function ik(){let e=hk(),t=tk(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),g=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:n},r={padding:"2px 4px",backgroundColor:n},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=f.createElement(f.Fragment,null,f.createElement("p",null,"💿 Hey developer 👋"),f.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",f.createElement("code",{style:r},"ErrorBoundary")," or"," ",f.createElement("code",{style:r},"errorElement")," prop on your route.")),f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),g?f.createElement("pre",{style:l},g):null,i)}var sk=f.createElement(ik,null),Ck=class extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?f.createElement(bo.Provider,{value:this.props.routeContext},f.createElement(qu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ak({routeContext:e,match:t,children:g}){let n=f.useContext(wI);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),f.createElement(bo.Provider,{value:e},g)}function ck(e,t=[],g=null,n=null){if(e==null){if(!g)return null;if(g.errors)e=g.matches;else if(t.length===0&&!g.initialized&&g.matches.length>0)e=g.matches;else return null}let l=e,r=g?.errors;if(r!=null){let a=l.findIndex(d=>d.route.id&&r?.[d.route.id]!==void 0);kt(a>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(r).join(",")}`),l=l.slice(0,Math.min(l.length,a+1))}let i=!1,C=-1;if(g)for(let a=0;a<l.length;a++){let d=l[a];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(C=a),d.route.id){let{loaderData:A,errors:m}=g,p=d.route.loader&&!A.hasOwnProperty(d.route.id)&&(!m||m[d.route.id]===void 0);if(d.route.lazy||p){i=!0,C>=0?l=l.slice(0,C+1):l=[l[0]];break}}}return l.reduceRight((a,d,A)=>{let m,p=!1,B=null,G=null;g&&(m=r&&d.route.id?r[d.route.id]:void 0,B=d.route.errorElement||sk,i&&(C<0&&A===0?(Sf("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,G=null):C===A&&(p=!0,G=d.route.hydrateFallbackElement||null)));let y=t.concat(l.slice(0,A+1)),S=()=>{let V;return m?V=B:p?V=G:d.route.Component?V=f.createElement(d.route.Component,null):d.route.element?V=d.route.element:V=a,f.createElement(ak,{match:d,routeContext:{outlet:a,matches:y,isDataRoute:g!=null},children:V})};return g&&(d.route.ErrorBoundary||d.route.errorElement||A===0)?f.createElement(Ck,{location:g.location,revalidation:g.revalidation,component:B,error:m,children:S(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):S()},null)}function $u(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dk(e){let t=f.useContext(wI);return kt(t,$u(e)),t}function Ak(e){let t=f.useContext(Aa);return kt(t,$u(e)),t}function uk(e){let t=f.useContext(bo);return kt(t,$u(e)),t}function _u(e){let t=uk(e),g=t.matches[t.matches.length-1];return kt(g.route.id,`${e} can only be used on routes that contain a unique "id"`),g.route.id}function mk(){return _u("useRouteId")}function hk(){let e=f.useContext(qu),t=Ak("useRouteError"),g=_u("useRouteError");return e!==void 0?e:t.errors?.[g]}function pk(){let{router:e}=dk("useNavigate"),t=_u("useNavigate"),g=f.useRef(!1);return ff(()=>{g.current=!0}),f.useCallback(async(l,r={})=>{Dn(g.current,Gf),g.current&&(typeof l=="number"?e.navigate(l):await e.navigate(l,{fromRouteId:t,...r}))},[e,t])}var FZ={};function Sf(e,t,g){!t&&!FZ[e]&&(FZ[e]=!0,Dn(!1,g))}f.memo(bk);function bk({routes:e,future:t,state:g}){return Bf(e,void 0,g,t)}function Gn(e){kt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Zk({basename:e="/",children:t=null,location:g,navigationType:n="POP",navigator:l,static:r=!1}){kt(!ki(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),C=f.useMemo(()=>({basename:i,navigator:l,static:r,future:{}}),[i,l,r]);typeof g=="string"&&(g=HI(g));let{pathname:a="/",search:d="",hash:A="",state:m=null,key:p="default"}=g,B=f.useMemo(()=>{let G=ao(a,i);return G==null?null:{location:{pathname:G,search:d,hash:A,state:m,key:p},navigationType:n}},[i,a,d,A,m,p,n]);return Dn(B!=null,`<Router basename="${i}"> is not able to match the URL "${a}${d}${A}" because it does not start with the basename, so the <Router> won't render anything.`),B==null?null:f.createElement(Pn.Provider,{value:C},f.createElement(Xi.Provider,{children:t,value:B}))}function yk({children:e,location:t}){return rk(QA(e),t)}function QA(e,t=[]){let g=[];return f.Children.forEach(e,(n,l)=>{if(!f.isValidElement(n))return;let r=[...t,l];if(n.type===f.Fragment){g.push.apply(g,QA(n.props.children,r));return}kt(n.type===Gn,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),kt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let i={id:n.props.id||r.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=QA(n.props.children,r)),g.push(i)}),g}var VC="get",WC="application/x-www-form-urlencoded";function ua(e){return e!=null&&typeof e.tagName=="string"}function Gk(e){return ua(e)&&e.tagName.toLowerCase()==="button"}function fk(e){return ua(e)&&e.tagName.toLowerCase()==="form"}function Bk(e){return ua(e)&&e.tagName.toLowerCase()==="input"}function Sk(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Vk(e,t){return e.button===0&&(!t||t==="_self")&&!Sk(e)}var lC=null;function Wk(){if(lC===null)try{new FormData(document.createElement("form"),0),lC=!1}catch{lC=!0}return lC}var Rk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rA(e){return e!=null&&!Rk.has(e)?(Dn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${WC}"`),null):e}function Xk(e,t){let g,n,l,r,i;if(fk(e)){let C=e.getAttribute("action");n=C?ao(C,t):null,g=e.getAttribute("method")||VC,l=rA(e.getAttribute("enctype"))||WC,r=new FormData(e)}else if(Gk(e)||Bk(e)&&(e.type==="submit"||e.type==="image")){let C=e.form;if(C==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||C.getAttribute("action");if(n=a?ao(a,t):null,g=e.getAttribute("formmethod")||C.getAttribute("method")||VC,l=rA(e.getAttribute("formenctype"))||rA(C.getAttribute("enctype"))||WC,r=new FormData(C,e),!Wk()){let{name:d,type:A,value:m}=e;if(A==="image"){let p=d?`${d}.`:"";r.append(`${p}x`,"0"),r.append(`${p}y`,"0")}else d&&r.append(d,m)}}else{if(ua(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');g=VC,n=null,l=WC,i=e}return r&&l==="text/plain"&&(i=r,r=void 0),{action:n,method:g.toLowerCase(),encType:l,formData:r,body:i}}function em(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function kk(e,t){if(e.id in t)return t[e.id];try{let g=await import(e.module);return t[e.id]=g,g}catch(g){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(g),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Jk(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function vk(e,t,g){let n=await Promise.all(e.map(async l=>{let r=t.routes[l.route.id];if(r){let i=await kk(r,g);return i.links?i.links():[]}return[]}));return Fk(n.flat(1).filter(Jk).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function NZ(e,t,g,n,l,r){let i=(a,d)=>g[d]?a.route.id!==g[d].route.id:!0,C=(a,d)=>g[d].pathname!==a.pathname||g[d].route.path?.endsWith("*")&&g[d].params["*"]!==a.params["*"];return r==="assets"?t.filter((a,d)=>i(a,d)||C(a,d)):r==="data"?t.filter((a,d)=>{let A=n.routes[a.route.id];if(!A||!A.hasLoader)return!1;if(i(a,d)||C(a,d))return!0;if(a.route.shouldRevalidate){let m=a.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:g[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:a.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function Yk(e,t,{includeHydrateFallback:g}={}){return Hk(e.map(n=>{let l=t.routes[n.route.id];if(!l)return[];let r=[l.module];return l.clientActionModule&&(r=r.concat(l.clientActionModule)),l.clientLoaderModule&&(r=r.concat(l.clientLoaderModule)),g&&l.hydrateFallbackModule&&(r=r.concat(l.hydrateFallbackModule)),l.imports&&(r=r.concat(l.imports)),r}).flat(1))}function Hk(e){return[...new Set(e)]}function wk(e){let t={},g=Object.keys(e).sort();for(let n of g)t[n]=e[n];return t}function Fk(e,t){let g=new Set;return new Set(t),e.reduce((n,l)=>{let r=JSON.stringify(wk(l));return g.has(r)||(g.add(r),n.push({key:r,link:l})),n},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Nk=new Set([100,101,204,205]);function Kk(e,t){let g=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return g.pathname==="/"?g.pathname="_root.data":t&&ao(g.pathname,t)==="/"?g.pathname=`${t.replace(/\/$/,"")}/_root.data`:g.pathname=`${g.pathname.replace(/\/$/,"")}.data`,g}function Vf(){let e=f.useContext(wI);return em(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function xk(){let e=f.useContext(Aa);return em(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var tm=f.createContext(void 0);tm.displayName="FrameworkContext";function Wf(){let e=f.useContext(tm);return em(e,"You must render this element inside a <HydratedRouter> element"),e}function Ek(e,t){let g=f.useContext(tm),[n,l]=f.useState(!1),[r,i]=f.useState(!1),{onFocus:C,onBlur:a,onMouseEnter:d,onMouseLeave:A,onTouchStart:m}=t,p=f.useRef(null);f.useEffect(()=>{if(e==="render"&&i(!0),e==="viewport"){let y=V=>{V.forEach(v=>{i(v.isIntersecting)})},S=new IntersectionObserver(y,{threshold:.5});return p.current&&S.observe(p.current),()=>{S.disconnect()}}},[e]),f.useEffect(()=>{if(n){let y=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(y)}}},[n]);let B=()=>{l(!0)},G=()=>{l(!1),i(!1)};return g?e!=="intent"?[r,p,{}]:[r,p,{onFocus:Jr(C,B),onBlur:Jr(a,G),onMouseEnter:Jr(d,B),onMouseLeave:Jr(A,G),onTouchStart:Jr(m,B)}]:[!1,p,{}]}function Jr(e,t){return g=>{e&&e(g),g.defaultPrevented||t(g)}}function zk({page:e,...t}){let{router:g}=Vf(),n=f.useMemo(()=>uf(g.routes,e,g.basename),[g.routes,e,g.basename]);return n?f.createElement(Tk,{page:e,matches:n,...t}):null}function Mk(e){let{manifest:t,routeModules:g}=Wf(),[n,l]=f.useState([]);return f.useEffect(()=>{let r=!1;return vk(e,t,g).then(i=>{r||l(i)}),()=>{r=!0}},[e,t,g]),n}function Tk({page:e,matches:t,...g}){let n=Xl(),{manifest:l,routeModules:r}=Wf(),{basename:i}=Vf(),{loaderData:C,matches:a}=xk(),d=f.useMemo(()=>NZ(e,t,a,l,n,"data"),[e,t,a,l,n]),A=f.useMemo(()=>NZ(e,t,a,l,n,"assets"),[e,t,a,l,n]),m=f.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let G=new Set,y=!1;if(t.forEach(V=>{let v=l.routes[V.route.id];!v||!v.hasLoader||(!d.some(R=>R.route.id===V.route.id)&&V.route.id in C&&r[V.route.id]?.shouldRevalidate||v.hasClientLoader?y=!0:G.add(V.route.id))}),G.size===0)return[];let S=Kk(e,i);return y&&G.size>0&&S.searchParams.set("_routes",t.filter(V=>G.has(V.route.id)).map(V=>V.route.id).join(",")),[S.pathname+S.search]},[i,C,n,l,d,t,e,r]),p=f.useMemo(()=>Yk(A,l),[A,l]),B=Mk(A);return f.createElement(f.Fragment,null,m.map(G=>f.createElement("link",{key:G,rel:"prefetch",as:"fetch",href:G,...g})),p.map(G=>f.createElement("link",{key:G,rel:"modulepreload",href:G,...g})),B.map(({key:G,link:y})=>f.createElement("link",{key:G,...y})))}function Uk(...e){return t=>{e.forEach(g=>{typeof g=="function"?g(t):g!=null&&(g.current=t)})}}var Rf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Rf&&(window.__reactRouterVersion="7.6.2")}catch{}function Lk({basename:e,children:t,window:g}){let n=f.useRef();n.current==null&&(n.current=vX({window:g,v5Compat:!0}));let l=n.current,[r,i]=f.useState({action:l.action,location:l.location}),C=f.useCallback(a=>{f.startTransition(()=>i(a))},[i]);return f.useLayoutEffect(()=>l.listen(C),[l,C]),f.createElement(Zk,{basename:e,children:t,location:r.location,navigationType:r.action,navigator:l})}var Xf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kf=f.forwardRef(function({onClick:t,discover:g="render",prefetch:n="none",relative:l,reloadDocument:r,replace:i,state:C,target:a,to:d,preventScrollReset:A,viewTransition:m,...p},B){let{basename:G}=f.useContext(Pn),y=typeof d=="string"&&Xf.test(d),S,V=!1;if(typeof d=="string"&&y&&(S=d,Rf))try{let w=new URL(window.location.href),h=d.startsWith("//")?new URL(w.protocol+d):new URL(d),Y=ao(h.pathname,G);h.origin===w.origin&&Y!=null?d=Y+h.search+h.hash:V=!0}catch{Dn(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=lk(d,{relative:l}),[R,k,J]=Ek(n,p),N=Pk(d,{replace:i,state:C,target:a,preventScrollReset:A,relative:l,viewTransition:m});function K(w){t&&t(w),w.defaultPrevented||N(w)}let X=f.createElement("a",{...p,...J,href:S||v,onClick:V||r?t:K,ref:Uk(B,k),target:a,"data-discover":!y&&g==="render"?"true":void 0});return R&&!y?f.createElement(f.Fragment,null,X,f.createElement(zk,{page:v})):X});kf.displayName="Link";var Qk=f.forwardRef(function({"aria-current":t="page",caseSensitive:g=!1,className:n="",end:l=!1,style:r,to:i,viewTransition:C,children:a,...d},A){let m=Ji(i,{relative:d.relative}),p=Xl(),B=f.useContext(Aa),{navigator:G,basename:y}=f.useContext(Pn),S=B!=null&&eJ(m)&&C===!0,V=G.encodeLocation?G.encodeLocation(m).pathname:m.pathname,v=p.pathname,R=B&&B.navigation&&B.navigation.location?B.navigation.location.pathname:null;g||(v=v.toLowerCase(),R=R?R.toLowerCase():null,V=V.toLowerCase()),R&&y&&(R=ao(R,y)||R);const k=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let J=v===V||!l&&v.startsWith(V)&&v.charAt(k)==="/",N=R!=null&&(R===V||!l&&R.startsWith(V)&&R.charAt(V.length)==="/"),K={isActive:J,isPending:N,isTransitioning:S},X=J?t:void 0,w;typeof n=="function"?w=n(K):w=[n,J?"active":null,N?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let h=typeof r=="function"?r(K):r;return f.createElement(kf,{...d,"aria-current":X,className:w,ref:A,style:h,to:i,viewTransition:C},typeof a=="function"?a(K):a)});Qk.displayName="NavLink";var Dk=f.forwardRef(({discover:e="render",fetcherKey:t,navigate:g,reloadDocument:n,replace:l,state:r,method:i=VC,action:C,onSubmit:a,relative:d,preventScrollReset:A,viewTransition:m,...p},B)=>{let G=$k(),y=_k(C,{relative:d}),S=i.toLowerCase()==="get"?"get":"post",V=typeof C=="string"&&Xf.test(C),v=R=>{if(a&&a(R),R.defaultPrevented)return;R.preventDefault();let k=R.nativeEvent.submitter,J=k?.getAttribute("formmethod")||i;G(k||R.currentTarget,{fetcherKey:t,method:J,navigate:g,replace:l,state:r,relative:d,preventScrollReset:A,viewTransition:m})};return f.createElement("form",{ref:B,method:S,action:y,onSubmit:n?a:v,...p,"data-discover":!V&&e==="render"?"true":void 0})});Dk.displayName="Form";function jk(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jf(e){let t=f.useContext(wI);return kt(t,jk(e)),t}function Pk(e,{target:t,replace:g,state:n,preventScrollReset:l,relative:r,viewTransition:i}={}){let C=Zo(),a=Xl(),d=Ji(e,{relative:r});return f.useCallback(A=>{if(Vk(A,t)){A.preventDefault();let m=g!==void 0?g:si(a)===si(d);C(e,{replace:m,state:n,preventScrollReset:l,relative:r,viewTransition:i})}},[a,C,d,g,n,t,e,l,r,i])}var Ok=0,qk=()=>`__${String(++Ok)}__`;function $k(){let{router:e}=Jf("useSubmit"),{basename:t}=f.useContext(Pn),g=mk();return f.useCallback(async(n,l={})=>{let{action:r,method:i,encType:C,formData:a,body:d}=Xk(n,t);if(l.navigate===!1){let A=l.fetcherKey||qk();await e.fetch(A,g,l.action||r,{preventScrollReset:l.preventScrollReset,formData:a,body:d,formMethod:l.method||i,formEncType:l.encType||C,flushSync:l.flushSync})}else await e.navigate(l.action||r,{preventScrollReset:l.preventScrollReset,formData:a,body:d,formMethod:l.method||i,formEncType:l.encType||C,replace:l.replace,state:l.state,fromRouteId:g,flushSync:l.flushSync,viewTransition:l.viewTransition})},[e,t,g])}function _k(e,{relative:t}={}){let{basename:g}=f.useContext(Pn),n=f.useContext(bo);kt(n,"useFormAction must be used inside a RouteContext");let[l]=n.matches.slice(-1),r={...Ji(e||".",{relative:t})},i=Xl();if(e==null){r.search=i.search;let C=new URLSearchParams(r.search),a=C.getAll("index");if(a.some(A=>A==="")){C.delete("index"),a.filter(m=>m).forEach(m=>C.append("index",m));let A=C.toString();r.search=A?`?${A}`:""}}return(!e||e===".")&&l.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),g!=="/"&&(r.pathname=r.pathname==="/"?g:Co([g,r.pathname])),si(r)}function eJ(e,t={}){let g=f.useContext(yf);kt(g!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Jf("useViewTransitionState"),l=Ji(e,{relative:t.relative});if(!g.isTransitioning)return!1;let r=ao(g.currentLocation.pathname,n)||g.currentLocation.pathname,i=ao(g.nextLocation.pathname,n)||g.nextLocation.pathname;return PC(l.pathname,i)!=null||PC(l.pathname,r)!=null}[...Nk];var vf=Af();const IC=Ou(vf),KZ=e=>e,tJ=()=>{let e=KZ;return{configure(t){e=t},generate(t){return e(t)},reset(){e=KZ}}},gJ=tJ();function Vl(e,...t){const g=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(n=>g.searchParams.append("args[]",n)),`Minified MUI error #${e}; visit ${g} for the full message.`}function WI(e){if(typeof e!="string")throw new Error(Vl(7));return e.charAt(0).toUpperCase()+e.slice(1)}function Yf(e){var t,g,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(g=Yf(e[t]))&&(n&&(n+=" "),n+=g)}else for(g in e)e[g]&&(n&&(n+=" "),n+=g);return n}function Hf(){for(var e,t,g=0,n="",l=arguments.length;g<l;g++)(e=arguments[g])&&(t=Yf(e))&&(n&&(n+=" "),n+=t);return n}function nJ(e,t,g=void 0){const n={};for(const l in e){const r=e[l];let i="",C=!0;for(let a=0;a<r.length;a+=1){const d=r[a];d&&(i+=(C===!0?"":" ")+t(d),C=!1,g&&g[d]&&(i+=" "+g[d]))}n[l]=i}return n}var iA={exports:{}},It={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xZ;function oJ(){if(xZ)return It;xZ=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),i=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),a=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),B=Symbol.for("react.client.reference");function G(y){if(typeof y=="object"&&y!==null){var S=y.$$typeof;switch(S){case e:switch(y=y.type,y){case g:case l:case n:case a:case d:case p:return y;default:switch(y=y&&y.$$typeof,y){case i:case C:case m:case A:return y;case r:return y;default:return S}}case t:return S}}}return It.ContextConsumer=r,It.ContextProvider=i,It.Element=e,It.ForwardRef=C,It.Fragment=g,It.Lazy=m,It.Memo=A,It.Portal=t,It.Profiler=l,It.StrictMode=n,It.Suspense=a,It.SuspenseList=d,It.isContextConsumer=function(y){return G(y)===r},It.isContextProvider=function(y){return G(y)===i},It.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===e},It.isForwardRef=function(y){return G(y)===C},It.isFragment=function(y){return G(y)===g},It.isLazy=function(y){return G(y)===m},It.isMemo=function(y){return G(y)===A},It.isPortal=function(y){return G(y)===t},It.isProfiler=function(y){return G(y)===l},It.isStrictMode=function(y){return G(y)===n},It.isSuspense=function(y){return G(y)===a},It.isSuspenseList=function(y){return G(y)===d},It.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===g||y===l||y===n||y===a||y===d||typeof y=="object"&&y!==null&&(y.$$typeof===m||y.$$typeof===A||y.$$typeof===i||y.$$typeof===r||y.$$typeof===C||y.$$typeof===B||y.getModuleId!==void 0)},It.typeOf=G,It}var EZ;function lJ(){return EZ||(EZ=1,iA.exports=oJ()),iA.exports}var wf=lJ();function so(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Ff(e){if(f.isValidElement(e)||wf.isValidElementType(e)||!so(e))return e;const t={};return Object.keys(e).forEach(g=>{t[g]=Ff(e[g])}),t}function Ug(e,t,g={clone:!0}){const n=g.clone?{...e}:e;return so(e)&&so(t)&&Object.keys(t).forEach(l=>{f.isValidElement(t[l])||wf.isValidElementType(t[l])?n[l]=t[l]:so(t[l])&&Object.prototype.hasOwnProperty.call(e,l)&&so(e[l])?n[l]=Ug(e[l],t[l],g):g.clone?n[l]=so(t[l])?Ff(t[l]):t[l]:n[l]=t[l]}),n}function _r(e,t){return t?Ug(e,t,{clone:!1}):e}function zZ(e,t){if(!e.containerQueries)return t;const g=Object.keys(t).filter(n=>n.startsWith("@container")).sort((n,l)=>{const r=/min-width:\s*([0-9.]+)/;return+(n.match(r)?.[1]||0)-+(l.match(r)?.[1]||0)});return g.length?g.reduce((n,l)=>{const r=t[l];return delete n[l],n[l]=r,n},{...t}):t}function IJ(e,t){return t==="@"||t.startsWith("@")&&(e.some(g=>t.startsWith(`@${g}`))||!!t.match(/^@\d/))}function rJ(e,t){const g=t.match(/^@([^/]+)?\/?(.+)?$/);if(!g)return null;const[,n,l]=g,r=Number.isNaN(+n)?n||0:+n;return e.containerQueries(l).up(r)}function iJ(e){const t=(r,i)=>r.replace("@media",i?`@container ${i}`:"@container");function g(r,i){r.up=(...C)=>t(e.breakpoints.up(...C),i),r.down=(...C)=>t(e.breakpoints.down(...C),i),r.between=(...C)=>t(e.breakpoints.between(...C),i),r.only=(...C)=>t(e.breakpoints.only(...C),i),r.not=(...C)=>{const a=t(e.breakpoints.not(...C),i);return a.includes("not all and")?a.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):a}}const n={},l=r=>(g(n,r),n);return g(l),{...e,containerQueries:l}}const ma={xs:0,sm:600,md:900,lg:1200,xl:1536},MZ={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${ma[e]}px)`},sJ={containerQueries:e=>({up:t=>{let g=typeof t=="number"?t:ma[t]||t;return typeof g=="number"&&(g=`${g}px`),e?`@container ${e} (min-width:${g})`:`@container (min-width:${g})`}})};function co(e,t,g){const n=e.theme||{};if(Array.isArray(t)){const r=n.breakpoints||MZ;return t.reduce((i,C,a)=>(i[r.up(r.keys[a])]=g(t[a]),i),{})}if(typeof t=="object"){const r=n.breakpoints||MZ;return Object.keys(t).reduce((i,C)=>{if(IJ(r.keys,C)){const a=rJ(n.containerQueries?n:sJ,C);a&&(i[a]=g(t[C],C))}else if(Object.keys(r.values||ma).includes(C)){const a=r.up(C);i[a]=g(t[C],C)}else{const a=C;i[a]=t[a]}return i},{})}return g(t)}function CJ(e={}){return e.keys?.reduce((g,n)=>{const l=e.up(n);return g[l]={},g},{})||{}}function TZ(e,t){return e.reduce((g,n)=>{const l=g[n];return(!l||Object.keys(l).length===0)&&delete g[n],g},t)}function ha(e,t,g=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&g){const n=`vars.${t}`.split(".").reduce((l,r)=>l&&l[r]?l[r]:null,e);if(n!=null)return n}return t.split(".").reduce((n,l)=>n&&n[l]!=null?n[l]:null,e)}function OC(e,t,g,n=g){let l;return typeof e=="function"?l=e(g):Array.isArray(e)?l=e[g]||n:l=ha(e,g)||n,t&&(l=t(l,n,e)),l}function Et(e){const{prop:t,cssProperty:g=e.prop,themeKey:n,transform:l}=e,r=i=>{if(i[t]==null)return null;const C=i[t],a=i.theme,d=ha(a,n)||{};return co(i,C,m=>{let p=OC(d,l,m);return m===p&&typeof m=="string"&&(p=OC(d,l,`${t}${m==="default"?"":WI(m)}`,m)),g===!1?p:{[g]:p}})};return r.propTypes={},r.filterProps=[t],r}function aJ(e){const t={};return g=>(t[g]===void 0&&(t[g]=e(g)),t[g])}const cJ={m:"margin",p:"padding"},dJ={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},UZ={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},AJ=aJ(e=>{if(e.length>2)if(UZ[e])e=UZ[e];else return[e];const[t,g]=e.split(""),n=cJ[t],l=dJ[g]||"";return Array.isArray(l)?l.map(r=>n+r):[n+l]}),gm=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],nm=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...gm,...nm];function vi(e,t,g,n){const l=ha(e,t,!0)??g;return typeof l=="number"||typeof l=="string"?r=>typeof r=="string"?r:typeof l=="string"?l.startsWith("var(")&&r===0?0:l.startsWith("var(")&&r===1?l:`calc(${r} * ${l})`:l*r:Array.isArray(l)?r=>{if(typeof r=="string")return r;const i=Math.abs(r),C=l[i];return r>=0?C:typeof C=="number"?-C:typeof C=="string"&&C.startsWith("var(")?`calc(-1 * ${C})`:`-${C}`}:typeof l=="function"?l:()=>{}}function om(e){return vi(e,"spacing",8)}function Yi(e,t){return typeof t=="string"||t==null?t:e(t)}function uJ(e,t){return g=>e.reduce((n,l)=>(n[l]=Yi(t,g),n),{})}function mJ(e,t,g,n){if(!t.includes(g))return null;const l=AJ(g),r=uJ(l,n),i=e[g];return co(e,i,r)}function Nf(e,t){const g=om(e.theme);return Object.keys(e).map(n=>mJ(e,t,n,g)).reduce(_r,{})}function vt(e){return Nf(e,gm)}vt.propTypes={};vt.filterProps=gm;function Yt(e){return Nf(e,nm)}Yt.propTypes={};Yt.filterProps=nm;function pa(...e){const t=e.reduce((n,l)=>(l.filterProps.forEach(r=>{n[r]=l}),n),{}),g=n=>Object.keys(n).reduce((l,r)=>t[r]?_r(l,t[r](n)):l,{});return g.propTypes={},g.filterProps=e.reduce((n,l)=>n.concat(l.filterProps),[]),g}function ln(e){return typeof e!="number"?e:`${e}px solid`}function an(e,t){return Et({prop:e,themeKey:"borders",transform:t})}const hJ=an("border",ln),pJ=an("borderTop",ln),bJ=an("borderRight",ln),ZJ=an("borderBottom",ln),yJ=an("borderLeft",ln),GJ=an("borderColor"),fJ=an("borderTopColor"),BJ=an("borderRightColor"),SJ=an("borderBottomColor"),VJ=an("borderLeftColor"),WJ=an("outline",ln),RJ=an("outlineColor"),ba=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=vi(e.theme,"shape.borderRadius",4),g=n=>({borderRadius:Yi(t,n)});return co(e,e.borderRadius,g)}return null};ba.propTypes={};ba.filterProps=["borderRadius"];pa(hJ,pJ,bJ,ZJ,yJ,GJ,fJ,BJ,SJ,VJ,ba,WJ,RJ);const Za=e=>{if(e.gap!==void 0&&e.gap!==null){const t=vi(e.theme,"spacing",8),g=n=>({gap:Yi(t,n)});return co(e,e.gap,g)}return null};Za.propTypes={};Za.filterProps=["gap"];const ya=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=vi(e.theme,"spacing",8),g=n=>({columnGap:Yi(t,n)});return co(e,e.columnGap,g)}return null};ya.propTypes={};ya.filterProps=["columnGap"];const Ga=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=vi(e.theme,"spacing",8),g=n=>({rowGap:Yi(t,n)});return co(e,e.rowGap,g)}return null};Ga.propTypes={};Ga.filterProps=["rowGap"];const XJ=Et({prop:"gridColumn"}),kJ=Et({prop:"gridRow"}),JJ=Et({prop:"gridAutoFlow"}),vJ=Et({prop:"gridAutoColumns"}),YJ=Et({prop:"gridAutoRows"}),HJ=Et({prop:"gridTemplateColumns"}),wJ=Et({prop:"gridTemplateRows"}),FJ=Et({prop:"gridTemplateAreas"}),NJ=Et({prop:"gridArea"});pa(Za,ya,Ga,XJ,kJ,JJ,vJ,YJ,HJ,wJ,FJ,NJ);function yI(e,t){return t==="grey"?t:e}const KJ=Et({prop:"color",themeKey:"palette",transform:yI}),xJ=Et({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:yI}),EJ=Et({prop:"backgroundColor",themeKey:"palette",transform:yI});pa(KJ,xJ,EJ);function zg(e){return e<=1&&e!==0?`${e*100}%`:e}const zJ=Et({prop:"width",transform:zg}),lm=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=g=>{const n=e.theme?.breakpoints?.values?.[g]||ma[g];return n?e.theme?.breakpoints?.unit!=="px"?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:zg(g)}};return co(e,e.maxWidth,t)}return null};lm.filterProps=["maxWidth"];const MJ=Et({prop:"minWidth",transform:zg}),TJ=Et({prop:"height",transform:zg}),UJ=Et({prop:"maxHeight",transform:zg}),LJ=Et({prop:"minHeight",transform:zg});Et({prop:"size",cssProperty:"width",transform:zg});Et({prop:"size",cssProperty:"height",transform:zg});const QJ=Et({prop:"boxSizing"});pa(zJ,lm,MJ,TJ,UJ,LJ,QJ);const fa={border:{themeKey:"borders",transform:ln},borderTop:{themeKey:"borders",transform:ln},borderRight:{themeKey:"borders",transform:ln},borderBottom:{themeKey:"borders",transform:ln},borderLeft:{themeKey:"borders",transform:ln},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ln},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:ba},color:{themeKey:"palette",transform:yI},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:yI},backgroundColor:{themeKey:"palette",transform:yI},p:{style:Yt},pt:{style:Yt},pr:{style:Yt},pb:{style:Yt},pl:{style:Yt},px:{style:Yt},py:{style:Yt},padding:{style:Yt},paddingTop:{style:Yt},paddingRight:{style:Yt},paddingBottom:{style:Yt},paddingLeft:{style:Yt},paddingX:{style:Yt},paddingY:{style:Yt},paddingInline:{style:Yt},paddingInlineStart:{style:Yt},paddingInlineEnd:{style:Yt},paddingBlock:{style:Yt},paddingBlockStart:{style:Yt},paddingBlockEnd:{style:Yt},m:{style:vt},mt:{style:vt},mr:{style:vt},mb:{style:vt},ml:{style:vt},mx:{style:vt},my:{style:vt},margin:{style:vt},marginTop:{style:vt},marginRight:{style:vt},marginBottom:{style:vt},marginLeft:{style:vt},marginX:{style:vt},marginY:{style:vt},marginInline:{style:vt},marginInlineStart:{style:vt},marginInlineEnd:{style:vt},marginBlock:{style:vt},marginBlockStart:{style:vt},marginBlockEnd:{style:vt},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Za},rowGap:{style:Ga},columnGap:{style:ya},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:zg},maxWidth:{style:lm},minWidth:{transform:zg},height:{transform:zg},maxHeight:{transform:zg},minHeight:{transform:zg},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function DJ(...e){const t=e.reduce((n,l)=>n.concat(Object.keys(l)),[]),g=new Set(t);return e.every(n=>g.size===Object.keys(n).length)}function jJ(e,t){return typeof e=="function"?e(t):e}function PJ(){function e(g,n,l,r){const i={[g]:n,theme:l},C=r[g];if(!C)return{[g]:n};const{cssProperty:a=g,themeKey:d,transform:A,style:m}=C;if(n==null)return null;if(d==="typography"&&n==="inherit")return{[g]:n};const p=ha(l,d)||{};return m?m(i):co(i,n,G=>{let y=OC(p,A,G);return G===y&&typeof G=="string"&&(y=OC(p,A,`${g}${G==="default"?"":WI(G)}`,G)),a===!1?y:{[a]:y}})}function t(g){const{sx:n,theme:l={},nested:r}=g||{};if(!n)return null;const i=l.unstable_sxConfig??fa;function C(a){let d=a;if(typeof a=="function")d=a(l);else if(typeof a!="object")return a;if(!d)return null;const A=CJ(l.breakpoints),m=Object.keys(A);let p=A;return Object.keys(d).forEach(B=>{const G=jJ(d[B],l);if(G!=null)if(typeof G=="object")if(i[B])p=_r(p,e(B,G,l,i));else{const y=co({theme:l},G,S=>({[B]:S}));DJ(y,G)?p[B]=t({sx:G,theme:l,nested:!0}):p=_r(p,y)}else p=_r(p,e(B,G,l,i))}),!r&&l.modularCssLayers?{"@layer sx":zZ(l,TZ(m,p))}:zZ(l,TZ(m,p))}return Array.isArray(n)?n.map(C):C(n)}return t}const RI=PJ();RI.filterProps=["sx"];function DA(){return DA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var g=arguments[t];for(var n in g)({}).hasOwnProperty.call(g,n)&&(e[n]=g[n])}return e},DA.apply(null,arguments)}function OJ(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function qJ(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var $J=function(){function e(g){var n=this;this._insertTag=function(l){var r;n.tags.length===0?n.insertionPoint?r=n.insertionPoint.nextSibling:n.prepend?r=n.container.firstChild:r=n.before:r=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(l,r),n.tags.push(l)},this.isSpeedy=g.speedy===void 0?!0:g.speedy,this.tags=[],this.ctr=0,this.nonce=g.nonce,this.key=g.key,this.container=g.container,this.prepend=g.prepend,this.insertionPoint=g.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(qJ(this));var l=this.tags[this.tags.length-1];if(this.isSpeedy){var r=OJ(l);try{r.insertRule(n,r.cssRules.length)}catch{}}else l.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var l;return(l=n.parentNode)==null?void 0:l.removeChild(n)}),this.tags=[],this.ctr=0},e}(),ag="-ms-",qC="-moz-",qe="-webkit-",Kf="comm",Im="rule",rm="decl",_J="@import",xf="@keyframes",ev="@layer",tv=Math.abs,Ba=String.fromCharCode,gv=Object.assign;function nv(e,t){return og(e,0)^45?(((t<<2^og(e,0))<<2^og(e,1))<<2^og(e,2))<<2^og(e,3):0}function Ef(e){return e.trim()}function ov(e,t){return(e=t.exec(e))?e[0]:e}function _e(e,t,g){return e.replace(t,g)}function jA(e,t){return e.indexOf(t)}function og(e,t){return e.charCodeAt(t)|0}function Ci(e,t,g){return e.slice(t,g)}function Nn(e){return e.length}function im(e){return e.length}function rC(e,t){return t.push(e),e}function lv(e,t){return e.map(t).join("")}var Sa=1,XI=1,zf=0,Hg=0,Qt=0,FI="";function Va(e,t,g,n,l,r,i){return{value:e,root:t,parent:g,type:n,props:l,children:r,line:Sa,column:XI,length:i,return:""}}function vr(e,t){return gv(Va("",null,null,"",null,null,0),e,{length:-e.length},t)}function Iv(){return Qt}function rv(){return Qt=Hg>0?og(FI,--Hg):0,XI--,Qt===10&&(XI=1,Sa--),Qt}function Lg(){return Qt=Hg<zf?og(FI,Hg++):0,XI++,Qt===10&&(XI=1,Sa++),Qt}function Mn(){return og(FI,Hg)}function RC(){return Hg}function Hi(e,t){return Ci(FI,e,t)}function ai(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Mf(e){return Sa=XI=1,zf=Nn(FI=e),Hg=0,[]}function Tf(e){return FI="",e}function XC(e){return Ef(Hi(Hg-1,PA(e===91?e+2:e===40?e+1:e)))}function iv(e){for(;(Qt=Mn())&&Qt<33;)Lg();return ai(e)>2||ai(Qt)>3?"":" "}function sv(e,t){for(;--t&&Lg()&&!(Qt<48||Qt>102||Qt>57&&Qt<65||Qt>70&&Qt<97););return Hi(e,RC()+(t<6&&Mn()==32&&Lg()==32))}function PA(e){for(;Lg();)switch(Qt){case e:return Hg;case 34:case 39:e!==34&&e!==39&&PA(Qt);break;case 40:e===41&&PA(e);break;case 92:Lg();break}return Hg}function Cv(e,t){for(;Lg()&&e+Qt!==57;)if(e+Qt===84&&Mn()===47)break;return"/*"+Hi(t,Hg-1)+"*"+Ba(e===47?e:Lg())}function av(e){for(;!ai(Mn());)Lg();return Hi(e,Hg)}function cv(e){return Tf(kC("",null,null,null,[""],e=Mf(e),0,[0],e))}function kC(e,t,g,n,l,r,i,C,a){for(var d=0,A=0,m=i,p=0,B=0,G=0,y=1,S=1,V=1,v=0,R="",k=l,J=r,N=n,K=R;S;)switch(G=v,v=Lg()){case 40:if(G!=108&&og(K,m-1)==58){jA(K+=_e(XC(v),"&","&\f"),"&\f")!=-1&&(V=-1);break}case 34:case 39:case 91:K+=XC(v);break;case 9:case 10:case 13:case 32:K+=iv(G);break;case 92:K+=sv(RC()-1,7);continue;case 47:switch(Mn()){case 42:case 47:rC(dv(Cv(Lg(),RC()),t,g),a);break;default:K+="/"}break;case 123*y:C[d++]=Nn(K)*V;case 125*y:case 59:case 0:switch(v){case 0:case 125:S=0;case 59+A:V==-1&&(K=_e(K,/\f/g,"")),B>0&&Nn(K)-m&&rC(B>32?QZ(K+";",n,g,m-1):QZ(_e(K," ","")+";",n,g,m-2),a);break;case 59:K+=";";default:if(rC(N=LZ(K,t,g,d,A,l,C,R,k=[],J=[],m),r),v===123)if(A===0)kC(K,t,N,N,k,r,m,C,J);else switch(p===99&&og(K,3)===110?100:p){case 100:case 108:case 109:case 115:kC(e,N,N,n&&rC(LZ(e,N,N,0,0,l,C,R,l,k=[],m),J),l,J,m,C,n?k:J);break;default:kC(K,N,N,N,[""],J,0,C,J)}}d=A=B=0,y=V=1,R=K="",m=i;break;case 58:m=1+Nn(K),B=G;default:if(y<1){if(v==123)--y;else if(v==125&&y++==0&&rv()==125)continue}switch(K+=Ba(v),v*y){case 38:V=A>0?1:(K+="\f",-1);break;case 44:C[d++]=(Nn(K)-1)*V,V=1;break;case 64:Mn()===45&&(K+=XC(Lg())),p=Mn(),A=m=Nn(R=K+=av(RC())),v++;break;case 45:G===45&&Nn(K)==2&&(y=0)}}return r}function LZ(e,t,g,n,l,r,i,C,a,d,A){for(var m=l-1,p=l===0?r:[""],B=im(p),G=0,y=0,S=0;G<n;++G)for(var V=0,v=Ci(e,m+1,m=tv(y=i[G])),R=e;V<B;++V)(R=Ef(y>0?p[V]+" "+v:_e(v,/&\f/g,p[V])))&&(a[S++]=R);return Va(e,t,g,l===0?Im:C,a,d,A)}function dv(e,t,g){return Va(e,t,g,Kf,Ba(Iv()),Ci(e,2,-2),0)}function QZ(e,t,g,n){return Va(e,t,g,rm,Ci(e,0,n),Ci(e,n+1,-1),n)}function GI(e,t){for(var g="",n=im(e),l=0;l<n;l++)g+=t(e[l],l,e,t)||"";return g}function Av(e,t,g,n){switch(e.type){case ev:if(e.children.length)break;case _J:case rm:return e.return=e.return||e.value;case Kf:return"";case xf:return e.return=e.value+"{"+GI(e.children,n)+"}";case Im:e.value=e.props.join(",")}return Nn(g=GI(e.children,n))?e.return=e.value+"{"+g+"}":""}function uv(e){var t=im(e);return function(g,n,l,r){for(var i="",C=0;C<t;C++)i+=e[C](g,n,l,r)||"";return i}}function mv(e){return function(t){t.root||(t=t.return)&&e(t)}}function Uf(e){var t=Object.create(null);return function(g){return t[g]===void 0&&(t[g]=e(g)),t[g]}}var hv=function(t,g,n){for(var l=0,r=0;l=r,r=Mn(),l===38&&r===12&&(g[n]=1),!ai(r);)Lg();return Hi(t,Hg)},pv=function(t,g){var n=-1,l=44;do switch(ai(l)){case 0:l===38&&Mn()===12&&(g[n]=1),t[n]+=hv(Hg-1,g,n);break;case 2:t[n]+=XC(l);break;case 4:if(l===44){t[++n]=Mn()===58?"&\f":"",g[n]=t[n].length;break}default:t[n]+=Ba(l)}while(l=Lg());return t},bv=function(t,g){return Tf(pv(Mf(t),g))},DZ=new WeakMap,Zv=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var g=t.value,n=t.parent,l=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&g.charCodeAt(0)!==58&&!DZ.get(n))&&!l){DZ.set(t,!0);for(var r=[],i=bv(g,r),C=n.props,a=0,d=0;a<i.length;a++)for(var A=0;A<C.length;A++,d++)t.props[d]=r[a]?i[a].replace(/&\f/g,C[A]):C[A]+" "+i[a]}}},yv=function(t){if(t.type==="decl"){var g=t.value;g.charCodeAt(0)===108&&g.charCodeAt(2)===98&&(t.return="",t.value="")}};function Lf(e,t){switch(nv(e,t)){case 5103:return qe+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return qe+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return qe+e+qC+e+ag+e+e;case 6828:case 4268:return qe+e+ag+e+e;case 6165:return qe+e+ag+"flex-"+e+e;case 5187:return qe+e+_e(e,/(\w+).+(:[^]+)/,qe+"box-$1$2"+ag+"flex-$1$2")+e;case 5443:return qe+e+ag+"flex-item-"+_e(e,/flex-|-self/,"")+e;case 4675:return qe+e+ag+"flex-line-pack"+_e(e,/align-content|flex-|-self/,"")+e;case 5548:return qe+e+ag+_e(e,"shrink","negative")+e;case 5292:return qe+e+ag+_e(e,"basis","preferred-size")+e;case 6060:return qe+"box-"+_e(e,"-grow","")+qe+e+ag+_e(e,"grow","positive")+e;case 4554:return qe+_e(e,/([^-])(transform)/g,"$1"+qe+"$2")+e;case 6187:return _e(_e(_e(e,/(zoom-|grab)/,qe+"$1"),/(image-set)/,qe+"$1"),e,"")+e;case 5495:case 3959:return _e(e,/(image-set\([^]*)/,qe+"$1$`$1");case 4968:return _e(_e(e,/(.+:)(flex-)?(.*)/,qe+"box-pack:$3"+ag+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+qe+e+e;case 4095:case 3583:case 4068:case 2532:return _e(e,/(.+)-inline(.+)/,qe+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Nn(e)-1-t>6)switch(og(e,t+1)){case 109:if(og(e,t+4)!==45)break;case 102:return _e(e,/(.+:)(.+)-([^]+)/,"$1"+qe+"$2-$3$1"+qC+(og(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~jA(e,"stretch")?Lf(_e(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(og(e,t+1)!==115)break;case 6444:switch(og(e,Nn(e)-3-(~jA(e,"!important")&&10))){case 107:return _e(e,":",":"+qe)+e;case 101:return _e(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+qe+(og(e,14)===45?"inline-":"")+"box$3$1"+qe+"$2$3$1"+ag+"$2box$3")+e}break;case 5936:switch(og(e,t+11)){case 114:return qe+e+ag+_e(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return qe+e+ag+_e(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return qe+e+ag+_e(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return qe+e+ag+e+e}return e}var Gv=function(t,g,n,l){if(t.length>-1&&!t.return)switch(t.type){case rm:t.return=Lf(t.value,t.length);break;case xf:return GI([vr(t,{value:_e(t.value,"@","@"+qe)})],l);case Im:if(t.length)return lv(t.props,function(r){switch(ov(r,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return GI([vr(t,{props:[_e(r,/:(read-\w+)/,":"+qC+"$1")]})],l);case"::placeholder":return GI([vr(t,{props:[_e(r,/:(plac\w+)/,":"+qe+"input-$1")]}),vr(t,{props:[_e(r,/:(plac\w+)/,":"+qC+"$1")]}),vr(t,{props:[_e(r,/:(plac\w+)/,ag+"input-$1")]})],l)}return""})}},fv=[Gv],Bv=function(t){var g=t.key;if(g==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(y){var S=y.getAttribute("data-emotion");S.indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var l=t.stylisPlugins||fv,r={},i,C=[];i=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+g+' "]'),function(y){for(var S=y.getAttribute("data-emotion").split(" "),V=1;V<S.length;V++)r[S[V]]=!0;C.push(y)});var a,d=[Zv,yv];{var A,m=[Av,mv(function(y){A.insert(y)})],p=uv(d.concat(l,m)),B=function(S){return GI(cv(S),p)};a=function(S,V,v,R){A=v,B(S?S+"{"+V.styles+"}":V.styles),R&&(G.inserted[V.name]=!0)}}var G={key:g,sheet:new $J({key:g,container:i,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:r,registered:{},insert:a};return G.sheet.hydrate(C),G},Sv=!0;function Vv(e,t,g){var n="";return g.split(" ").forEach(function(l){e[l]!==void 0?t.push(e[l]+";"):l&&(n+=l+" ")}),n}var Qf=function(t,g,n){var l=t.key+"-"+g.name;(n===!1||Sv===!1)&&t.registered[l]===void 0&&(t.registered[l]=g.styles)},Wv=function(t,g,n){Qf(t,g,n);var l=t.key+"-"+g.name;if(t.inserted[g.name]===void 0){var r=g;do t.insert(g===r?"."+l:"",r,t.sheet,!0),r=r.next;while(r!==void 0)}};function Rv(e){for(var t=0,g,n=0,l=e.length;l>=4;++n,l-=4)g=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,g=(g&65535)*1540483477+((g>>>16)*59797<<16),g^=g>>>24,t=(g&65535)*1540483477+((g>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(l){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Xv={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},kv=/[A-Z]|^ms/g,Jv=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Df=function(t){return t.charCodeAt(1)===45},jZ=function(t){return t!=null&&typeof t!="boolean"},sA=Uf(function(e){return Df(e)?e:e.replace(kv,"-$&").toLowerCase()}),PZ=function(t,g){switch(t){case"animation":case"animationName":if(typeof g=="string")return g.replace(Jv,function(n,l,r){return Kn={name:l,styles:r,next:Kn},l})}return Xv[t]!==1&&!Df(t)&&typeof g=="number"&&g!==0?g+"px":g};function ci(e,t,g){if(g==null)return"";var n=g;if(n.__emotion_styles!==void 0)return n;switch(typeof g){case"boolean":return"";case"object":{var l=g;if(l.anim===1)return Kn={name:l.name,styles:l.styles,next:Kn},l.name;var r=g;if(r.styles!==void 0){var i=r.next;if(i!==void 0)for(;i!==void 0;)Kn={name:i.name,styles:i.styles,next:Kn},i=i.next;var C=r.styles+";";return C}return vv(e,t,g)}case"function":{if(e!==void 0){var a=Kn,d=g(e);return Kn=a,ci(e,t,d)}break}}var A=g;if(t==null)return A;var m=t[A];return m!==void 0?m:A}function vv(e,t,g){var n="";if(Array.isArray(g))for(var l=0;l<g.length;l++)n+=ci(e,t,g[l])+";";else for(var r in g){var i=g[r];if(typeof i!="object"){var C=i;t!=null&&t[C]!==void 0?n+=r+"{"+t[C]+"}":jZ(C)&&(n+=sA(r)+":"+PZ(r,C)+";")}else if(Array.isArray(i)&&typeof i[0]=="string"&&(t==null||t[i[0]]===void 0))for(var a=0;a<i.length;a++)jZ(i[a])&&(n+=sA(r)+":"+PZ(r,i[a])+";");else{var d=ci(e,t,i);switch(r){case"animation":case"animationName":{n+=sA(r)+":"+d+";";break}default:n+=r+"{"+d+"}"}}}return n}var OZ=/label:\s*([^\s;{]+)\s*(;|$)/g,Kn;function jf(e,t,g){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,l="";Kn=void 0;var r=e[0];if(r==null||r.raw===void 0)n=!1,l+=ci(g,t,r);else{var i=r;l+=i[0]}for(var C=1;C<e.length;C++)if(l+=ci(g,t,e[C]),n){var a=r;l+=a[C]}OZ.lastIndex=0;for(var d="",A;(A=OZ.exec(l))!==null;)d+="-"+A[1];var m=Rv(l)+d;return{name:m,styles:l,next:Kn}}var Yv=function(t){return t()},Hv=ii.useInsertionEffect?ii.useInsertionEffect:!1,wv=Hv||Yv,Pf=f.createContext(typeof HTMLElement<"u"?Bv({key:"css"}):null);Pf.Provider;var Fv=function(t){return f.forwardRef(function(g,n){var l=f.useContext(Pf);return t(g,l,n)})},Nv=f.createContext({}),Kv=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,xv=Uf(function(e){return Kv.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),Ev=xv,zv=function(t){return t!=="theme"},qZ=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?Ev:zv},$Z=function(t,g,n){var l;if(g){var r=g.shouldForwardProp;l=t.__emotion_forwardProp&&r?function(i){return t.__emotion_forwardProp(i)&&r(i)}:r}return typeof l!="function"&&n&&(l=t.__emotion_forwardProp),l},Mv=function(t){var g=t.cache,n=t.serialized,l=t.isStringTag;return Qf(g,n,l),wv(function(){return Wv(g,n,l)}),null},Tv=function e(t,g){var n=t.__emotion_real===t,l=n&&t.__emotion_base||t,r,i;g!==void 0&&(r=g.label,i=g.target);var C=$Z(t,g,n),a=C||qZ(l),d=!a("as");return function(){var A=arguments,m=n&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(r!==void 0&&m.push("label:"+r+";"),A[0]==null||A[0].raw===void 0)m.push.apply(m,A);else{var p=A[0];m.push(p[0]);for(var B=A.length,G=1;G<B;G++)m.push(A[G],p[G])}var y=Fv(function(S,V,v){var R=d&&S.as||l,k="",J=[],N=S;if(S.theme==null){N={};for(var K in S)N[K]=S[K];N.theme=f.useContext(Nv)}typeof S.className=="string"?k=Vv(V.registered,J,S.className):S.className!=null&&(k=S.className+" ");var X=jf(m.concat(J),V.registered,N);k+=V.key+"-"+X.name,i!==void 0&&(k+=" "+i);var w=d&&C===void 0?qZ(R):a,h={};for(var Y in S)d&&Y==="as"||w(Y)&&(h[Y]=S[Y]);return h.className=k,v&&(h.ref=v),f.createElement(f.Fragment,null,f.createElement(Mv,{cache:V,serialized:X,isStringTag:typeof R=="string"}),f.createElement(R,h))});return y.displayName=r!==void 0?r:"Styled("+(typeof l=="string"?l:l.displayName||l.name||"Component")+")",y.defaultProps=t.defaultProps,y.__emotion_real=y,y.__emotion_base=l,y.__emotion_styles=m,y.__emotion_forwardProp=C,Object.defineProperty(y,"toString",{value:function(){return"."+i}}),y.withComponent=function(S,V){var v=e(S,DA({},g,V,{shouldForwardProp:$Z(y,V,!0)}));return v.apply(void 0,m)},y}},Uv=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],OA=Tv.bind(null);Uv.forEach(function(e){OA[e]=OA(e)});function Lv(e,t){return OA(e,t)}function Qv(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const _Z=[];function yl(e){return _Z[0]=e,jf(_Z)}const Dv=e=>{const t=Object.keys(e).map(g=>({key:g,val:e[g]}))||[];return t.sort((g,n)=>g.val-n.val),t.reduce((g,n)=>({...g,[n.key]:n.val}),{})};function jv(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:g="px",step:n=5,...l}=e,r=Dv(t),i=Object.keys(r);function C(p){return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${g})`}function a(p){return`@media (max-width:${(typeof t[p]=="number"?t[p]:p)-n/100}${g})`}function d(p,B){const G=i.indexOf(B);return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${g}) and (max-width:${(G!==-1&&typeof t[i[G]]=="number"?t[i[G]]:B)-n/100}${g})`}function A(p){return i.indexOf(p)+1<i.length?d(p,i[i.indexOf(p)+1]):C(p)}function m(p){const B=i.indexOf(p);return B===0?C(i[1]):B===i.length-1?a(i[B]):d(p,i[i.indexOf(p)+1]).replace("@media","@media not all and")}return{keys:i,values:r,up:C,down:a,between:d,only:A,not:m,unit:g,...l}}const Pv={borderRadius:4};function Of(e=8,t=om({spacing:e})){if(e.mui)return e;const g=(...n)=>(n.length===0?[1]:n).map(r=>{const i=t(r);return typeof i=="number"?`${i}px`:i}).join(" ");return g.mui=!0,g}function Ov(e,t){const g=this;if(g.vars){if(!g.colorSchemes?.[e]||typeof g.getColorSchemeSelector!="function")return{};let n=g.getColorSchemeSelector(e);return n==="&"?t:((n.includes("data-")||n.includes("."))&&(n=`*:where(${n.replace(/\s*&$/,"")}) &`),{[n]:t})}return g.palette.mode===e?t:{}}function qf(e={},...t){const{breakpoints:g={},palette:n={},spacing:l,shape:r={},...i}=e,C=jv(g),a=Of(l);let d=Ug({breakpoints:C,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:a,shape:{...Pv,...r}},i);return d=iJ(d),d.applyStyles=Ov,d=t.reduce((A,m)=>Ug(A,m),d),d.unstable_sxConfig={...fa,...i?.unstable_sxConfig},d.unstable_sx=function(m){return RI({sx:m,theme:this})},d}const qv={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function $f(e,t,g="Mui"){const n=qv[t];return n?`${g}-${n}`:`${gJ.generate(e)}-${t}`}function $v(e,t,g="Mui"){const n={};return t.forEach(l=>{n[l]=$f(e,l,g)}),n}function _f(e){const{variants:t,...g}=e,n={variants:t,style:yl(g),isProcessed:!0};return n.style===g||t&&t.forEach(l=>{typeof l.style!="function"&&(l.style=yl(l.style))}),n}const _v=qf();function CA(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function ml(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function e2(e){return e?(t,g)=>g[e]:null}function t2(e,t,g){e.theme=o2(e.theme)?g:e.theme[t]||e.theme}function JC(e,t,g){const n=typeof t=="function"?t(e):t;if(Array.isArray(n))return n.flatMap(l=>JC(e,l,g));if(Array.isArray(n?.variants)){let l;if(n.isProcessed)l=g?ml(n.style,g):n.style;else{const{variants:r,...i}=n;l=g?ml(yl(i),g):i}return eB(e,n.variants,[l],g)}return n?.isProcessed?g?ml(yl(n.style),g):n.style:g?ml(yl(n),g):n}function eB(e,t,g=[],n=void 0){let l;e:for(let r=0;r<t.length;r+=1){const i=t[r];if(typeof i.props=="function"){if(l??={...e,...e.ownerState,ownerState:e.ownerState},!i.props(l))continue}else for(const C in i.props)if(e[C]!==i.props[C]&&e.ownerState?.[C]!==i.props[C])continue e;typeof i.style=="function"?(l??={...e,...e.ownerState,ownerState:e.ownerState},g.push(n?ml(yl(i.style(l)),n):i.style(l))):g.push(n?ml(yl(i.style),n):i.style)}return g}function g2(e={}){const{themeId:t,defaultTheme:g=_v,rootShouldForwardProp:n=CA,slotShouldForwardProp:l=CA}=e;function r(C){t2(C,t,g)}return(C,a={})=>{Qv(C,N=>N.filter(K=>K!==RI));const{name:d,slot:A,skipVariantsResolver:m,skipSx:p,overridesResolver:B=e2(I2(A)),...G}=a,y=d&&d.startsWith("Mui")||A?"components":"custom",S=m!==void 0?m:A&&A!=="Root"&&A!=="root"||!1,V=p||!1;let v=CA;A==="Root"||A==="root"?v=n:A?v=l:l2(C)&&(v=void 0);const R=Lv(C,{shouldForwardProp:v,label:n2(),...G}),k=N=>{if(N.__emotion_real===N)return N;if(typeof N=="function")return function(X){return JC(X,N,X.theme.modularCssLayers?y:void 0)};if(so(N)){const K=_f(N);return function(w){return K.variants?JC(w,K,w.theme.modularCssLayers?y:void 0):w.theme.modularCssLayers?ml(K.style,y):K.style}}return N},J=(...N)=>{const K=[],X=N.map(k),w=[];if(K.push(r),d&&B&&w.push(function(T){const P=T.theme.components?.[d]?.styleOverrides;if(!P)return null;const O={};for(const _ in P)O[_]=JC(T,P[_],T.theme.modularCssLayers?"theme":void 0);return B(T,O)}),d&&!S&&w.push(function(T){const P=T.theme?.components?.[d]?.variants;return P?eB(T,P,[],T.theme.modularCssLayers?"theme":void 0):null}),V||w.push(RI),Array.isArray(X[0])){const z=X.shift(),T=new Array(K.length).fill(""),U=new Array(w.length).fill("");let P;P=[...T,...z,...U],P.raw=[...T,...z.raw,...U],K.unshift(P)}const h=[...K,...X,...w],Y=R(...h);return C.muiName&&(Y.muiName=C.muiName),Y};return R.withConfig&&(J.withConfig=R.withConfig),J}}function n2(e,t){return void 0}function o2(e){for(const t in e)return!1;return!0}function l2(e){return typeof e=="string"&&e.charCodeAt(0)>96}function I2(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function qA(e,t,g=!1){const n={...t};for(const l in e)if(Object.prototype.hasOwnProperty.call(e,l)){const r=l;if(r==="components"||r==="slots")n[r]={...e[r],...n[r]};else if(r==="componentsProps"||r==="slotProps"){const i=e[r],C=t[r];if(!C)n[r]=i||{};else if(!i)n[r]=C;else{n[r]={...C};for(const a in i)if(Object.prototype.hasOwnProperty.call(i,a)){const d=a;n[r][d]=qA(i[d],C[d],g)}}}else r==="className"&&g&&t.className?n.className=Hf(e?.className,t?.className):r==="style"&&g&&t.style?n.style={...e?.style,...t?.style}:n[r]===void 0&&(n[r]=e[r])}return n}function r2(e,t=Number.MIN_SAFE_INTEGER,g=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,g))}function sm(e,t=0,g=1){return r2(e,t,g)}function i2(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let g=e.match(t);return g&&g[0].length===1&&(g=g.map(n=>n+n)),g?`rgb${g.length===4?"a":""}(${g.map((n,l)=>l<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function Uo(e){if(e.type)return e;if(e.charAt(0)==="#")return Uo(i2(e));const t=e.indexOf("("),g=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(g))throw new Error(Vl(9,e));let n=e.substring(t+1,e.length-1),l;if(g==="color"){if(n=n.split(" "),l=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(l))throw new Error(Vl(10,l))}else n=n.split(",");return n=n.map(r=>parseFloat(r)),{type:g,values:n,colorSpace:l}}const s2=e=>{const t=Uo(e);return t.values.slice(0,3).map((g,n)=>t.type.includes("hsl")&&n!==0?`${g}%`:g).join(" ")},Lr=(e,t)=>{try{return s2(e)}catch{return e}};function Wa(e){const{type:t,colorSpace:g}=e;let{values:n}=e;return t.includes("rgb")?n=n.map((l,r)=>r<3?parseInt(l,10):l):t.includes("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),t.includes("color")?n=`${g} ${n.join(" ")}`:n=`${n.join(", ")}`,`${t}(${n})`}function tB(e){e=Uo(e);const{values:t}=e,g=t[0],n=t[1]/100,l=t[2]/100,r=n*Math.min(l,1-l),i=(d,A=(d+g/30)%12)=>l-r*Math.max(Math.min(A-3,9-A,1),-1);let C="rgb";const a=[Math.round(i(0)*255),Math.round(i(8)*255),Math.round(i(4)*255)];return e.type==="hsla"&&(C+="a",a.push(t[3])),Wa({type:C,values:a})}function $A(e){e=Uo(e);let t=e.type==="hsl"||e.type==="hsla"?Uo(tB(e)).values:e.values;return t=t.map(g=>(e.type!=="color"&&(g/=255),g<=.03928?g/12.92:((g+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function C2(e,t){const g=$A(e),n=$A(t);return(Math.max(g,n)+.05)/(Math.min(g,n)+.05)}function a2(e,t){return e=Uo(e),t=sm(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Wa(e)}function iC(e,t,g){try{return a2(e,t)}catch{return e}}function Cm(e,t){if(e=Uo(e),t=sm(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let g=0;g<3;g+=1)e.values[g]*=1-t;return Wa(e)}function at(e,t,g){try{return Cm(e,t)}catch{return e}}function am(e,t){if(e=Uo(e),t=sm(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let g=0;g<3;g+=1)e.values[g]+=(255-e.values[g])*t;else if(e.type.includes("color"))for(let g=0;g<3;g+=1)e.values[g]+=(1-e.values[g])*t;return Wa(e)}function ct(e,t,g){try{return am(e,t)}catch{return e}}function c2(e,t=.15){return $A(e)>.5?Cm(e,t):am(e,t)}function sC(e,t,g){try{return c2(e,t)}catch{return e}}const d2=f.createContext(void 0);function A2(e){const{theme:t,name:g,props:n}=e;if(!t||!t.components||!t.components[g])return n;const l=t.components[g];return l.defaultProps?qA(l.defaultProps,n,t.components.mergeClassNameAndStyle):!l.styleOverrides&&!l.variants?qA(l,n,t.components.mergeClassNameAndStyle):n}function u2({props:e,name:t}){const g=f.useContext(d2);return A2({props:e,name:t,theme:{components:g}})}const e0={theme:void 0};function m2(e){let t,g;return function(l){let r=t;return(r===void 0||l.theme!==g)&&(e0.theme=l.theme,r=_f(e(e0)),t=r,g=l.theme),r}}function h2(e=""){function t(...n){if(!n.length)return"";const l=n[0];return typeof l=="string"&&!l.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${l}${t(...n.slice(1))})`:`, ${l}`}return(n,...l)=>`var(--${e?`${e}-`:""}${n}${t(...l)})`}const t0=(e,t,g,n=[])=>{let l=e;t.forEach((r,i)=>{i===t.length-1?Array.isArray(l)?l[Number(r)]=g:l&&typeof l=="object"&&(l[r]=g):l&&typeof l=="object"&&(l[r]||(l[r]=n.includes(r)?[]:{}),l=l[r])})},p2=(e,t,g)=>{function n(l,r=[],i=[]){Object.entries(l).forEach(([C,a])=>{(!g||g&&!g([...r,C]))&&a!=null&&(typeof a=="object"&&Object.keys(a).length>0?n(a,[...r,C],Array.isArray(a)?[...i,C]:i):t([...r,C],a,i))})}n(e)},b2=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>e.includes(n))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function aA(e,t){const{prefix:g,shouldSkipGeneratingVar:n}=t||{},l={},r={},i={};return p2(e,(C,a,d)=>{if((typeof a=="string"||typeof a=="number")&&(!n||!n(C,a))){const A=`--${g?`${g}-`:""}${C.join("-")}`,m=b2(C,a);Object.assign(l,{[A]:m}),t0(r,C,`var(${A})`,d),t0(i,C,`var(${A}, ${m})`,d)}},C=>C[0]==="vars"),{css:l,vars:r,varsWithDefaults:i}}function Z2(e,t={}){const{getSelector:g=S,disableCssColorScheme:n,colorSchemeSelector:l}=t,{colorSchemes:r={},components:i,defaultColorScheme:C="light",...a}=e,{vars:d,css:A,varsWithDefaults:m}=aA(a,t);let p=m;const B={},{[C]:G,...y}=r;if(Object.entries(y||{}).forEach(([R,k])=>{const{vars:J,css:N,varsWithDefaults:K}=aA(k,t);p=Ug(p,K),B[R]={css:N,vars:J}}),G){const{css:R,vars:k,varsWithDefaults:J}=aA(G,t);p=Ug(p,J),B[C]={css:R,vars:k}}function S(R,k){let J=l;if(l==="class"&&(J=".%s"),l==="data"&&(J="[data-%s]"),l?.startsWith("data-")&&!l.includes("%s")&&(J=`[${l}="%s"]`),R){if(J==="media")return e.defaultColorScheme===R?":root":{[`@media (prefers-color-scheme: ${r[R]?.palette?.mode||R})`]:{":root":k}};if(J)return e.defaultColorScheme===R?`:root, ${J.replace("%s",String(R))}`:J.replace("%s",String(R))}return":root"}return{vars:p,generateThemeVars:()=>{let R={...d};return Object.entries(B).forEach(([,{vars:k}])=>{R=Ug(R,k)}),R},generateStyleSheets:()=>{const R=[],k=e.defaultColorScheme||"light";function J(X,w){Object.keys(w).length&&R.push(typeof X=="string"?{[X]:{...w}}:X)}J(g(void 0,{...A}),A);const{[k]:N,...K}=B;if(N){const{css:X}=N,w=r[k]?.palette?.mode,h=!n&&w?{colorScheme:w,...X}:{...X};J(g(k,{...h}),h)}return Object.entries(K).forEach(([X,{css:w}])=>{const h=r[X]?.palette?.mode,Y=!n&&h?{colorScheme:h,...w}:{...w};J(g(X,{...Y}),Y)}),R}}}function y2(e){return function(g){return e==="media"?`@media (prefers-color-scheme: ${g})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${g}"] &`:e==="class"?`.${g} &`:e==="data"?`[data-${g}] &`:`${e.replace("%s",g)} &`:"&"}}const di={black:"#000",white:"#fff"},G2={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},nI={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},oI={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Yr={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},lI={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},II={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},rI={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function gB(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:di.white,default:di.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const f2=gB();function nB(){return{text:{primary:di.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:di.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const g0=nB();function n0(e,t,g,n){const l=n.light||n,r=n.dark||n*1.5;e[t]||(e.hasOwnProperty(g)?e[t]=e[g]:t==="light"?e.light=am(e.main,l):t==="dark"&&(e.dark=Cm(e.main,r)))}function B2(e="light"){return e==="dark"?{main:lI[200],light:lI[50],dark:lI[400]}:{main:lI[700],light:lI[400],dark:lI[800]}}function S2(e="light"){return e==="dark"?{main:nI[200],light:nI[50],dark:nI[400]}:{main:nI[500],light:nI[300],dark:nI[700]}}function V2(e="light"){return e==="dark"?{main:oI[500],light:oI[300],dark:oI[700]}:{main:oI[700],light:oI[400],dark:oI[800]}}function W2(e="light"){return e==="dark"?{main:II[400],light:II[300],dark:II[700]}:{main:II[700],light:II[500],dark:II[900]}}function R2(e="light"){return e==="dark"?{main:rI[400],light:rI[300],dark:rI[700]}:{main:rI[800],light:rI[500],dark:rI[900]}}function X2(e="light"){return e==="dark"?{main:Yr[400],light:Yr[300],dark:Yr[700]}:{main:"#ed6c02",light:Yr[500],dark:Yr[900]}}function cm(e){const{mode:t="light",contrastThreshold:g=3,tonalOffset:n=.2,...l}=e,r=e.primary||B2(t),i=e.secondary||S2(t),C=e.error||V2(t),a=e.info||W2(t),d=e.success||R2(t),A=e.warning||X2(t);function m(y){return C2(y,g0.text.primary)>=g?g0.text.primary:f2.text.primary}const p=({color:y,name:S,mainShade:V=500,lightShade:v=300,darkShade:R=700})=>{if(y={...y},!y.main&&y[V]&&(y.main=y[V]),!y.hasOwnProperty("main"))throw new Error(Vl(11,S?` (${S})`:"",V));if(typeof y.main!="string")throw new Error(Vl(12,S?` (${S})`:"",JSON.stringify(y.main)));return n0(y,"light",v,n),n0(y,"dark",R,n),y.contrastText||(y.contrastText=m(y.main)),y};let B;return t==="light"?B=gB():t==="dark"&&(B=nB()),Ug({common:{...di},mode:t,primary:p({color:r,name:"primary"}),secondary:p({color:i,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:p({color:C,name:"error"}),warning:p({color:A,name:"warning"}),info:p({color:a,name:"info"}),success:p({color:d,name:"success"}),grey:G2,contrastThreshold:g,getContrastText:m,augmentColor:p,tonalOffset:n,...B},l)}function k2(e){const t={};return Object.entries(e).forEach(n=>{const[l,r]=n;typeof r=="object"&&(t[l]=`${r.fontStyle?`${r.fontStyle} `:""}${r.fontVariant?`${r.fontVariant} `:""}${r.fontWeight?`${r.fontWeight} `:""}${r.fontStretch?`${r.fontStretch} `:""}${r.fontSize||""}${r.lineHeight?`/${r.lineHeight} `:""}${r.fontFamily||""}`)}),t}function J2(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function v2(e){return Math.round(e*1e5)/1e5}const o0={textTransform:"uppercase"},l0='"Roboto", "Helvetica", "Arial", sans-serif';function Y2(e,t){const{fontFamily:g=l0,fontSize:n=14,fontWeightLight:l=300,fontWeightRegular:r=400,fontWeightMedium:i=500,fontWeightBold:C=700,htmlFontSize:a=16,allVariants:d,pxToRem:A,...m}=typeof t=="function"?t(e):t,p=n/14,B=A||(S=>`${S/a*p}rem`),G=(S,V,v,R,k)=>({fontFamily:g,fontWeight:S,fontSize:B(V),lineHeight:v,...g===l0?{letterSpacing:`${v2(R/V)}em`}:{},...k,...d}),y={h1:G(l,96,1.167,-1.5),h2:G(l,60,1.2,-.5),h3:G(r,48,1.167,0),h4:G(r,34,1.235,.25),h5:G(r,24,1.334,0),h6:G(i,20,1.6,.15),subtitle1:G(r,16,1.75,.15),subtitle2:G(i,14,1.57,.1),body1:G(r,16,1.5,.15),body2:G(r,14,1.43,.15),button:G(i,14,1.75,.4,o0),caption:G(r,12,1.66,.4),overline:G(r,12,2.66,1,o0),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Ug({htmlFontSize:a,pxToRem:B,fontFamily:g,fontSize:n,fontWeightLight:l,fontWeightRegular:r,fontWeightMedium:i,fontWeightBold:C,...y},m,{clone:!1})}const H2=.2,w2=.14,F2=.12;function ft(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${H2})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${w2})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${F2})`].join(",")}const N2=["none",ft(0,2,1,-1,0,1,1,0,0,1,3,0),ft(0,3,1,-2,0,2,2,0,0,1,5,0),ft(0,3,3,-2,0,3,4,0,0,1,8,0),ft(0,2,4,-1,0,4,5,0,0,1,10,0),ft(0,3,5,-1,0,5,8,0,0,1,14,0),ft(0,3,5,-1,0,6,10,0,0,1,18,0),ft(0,4,5,-2,0,7,10,1,0,2,16,1),ft(0,5,5,-3,0,8,10,1,0,3,14,2),ft(0,5,6,-3,0,9,12,1,0,3,16,2),ft(0,6,6,-3,0,10,14,1,0,4,18,3),ft(0,6,7,-4,0,11,15,1,0,4,20,3),ft(0,7,8,-4,0,12,17,2,0,5,22,4),ft(0,7,8,-4,0,13,19,2,0,5,24,4),ft(0,7,9,-4,0,14,21,2,0,5,26,4),ft(0,8,9,-5,0,15,22,2,0,6,28,5),ft(0,8,10,-5,0,16,24,2,0,6,30,5),ft(0,8,11,-5,0,17,26,2,0,6,32,5),ft(0,9,11,-5,0,18,28,2,0,7,34,6),ft(0,9,12,-6,0,19,29,2,0,7,36,6),ft(0,10,13,-6,0,20,31,3,0,8,38,7),ft(0,10,13,-6,0,21,33,3,0,8,40,7),ft(0,10,14,-6,0,22,35,3,0,8,42,7),ft(0,11,14,-7,0,23,36,3,0,9,44,8),ft(0,11,15,-7,0,24,38,3,0,9,46,8)],K2={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},x2={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function I0(e){return`${Math.round(e)}ms`}function E2(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function z2(e){const t={...K2,...e.easing},g={...x2,...e.duration};return{getAutoHeightDuration:E2,create:(l=["all"],r={})=>{const{duration:i=g.standard,easing:C=t.easeInOut,delay:a=0,...d}=r;return(Array.isArray(l)?l:[l]).map(A=>`${A} ${typeof i=="string"?i:I0(i)} ${C} ${typeof a=="string"?a:I0(a)}`).join(",")},...e,easing:t,duration:g}}const M2={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function T2(e){return so(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function oB(e={}){const t={...e};function g(n){const l=Object.entries(n);for(let r=0;r<l.length;r++){const[i,C]=l[r];!T2(C)||i.startsWith("unstable_")?delete n[i]:so(C)&&(n[i]={...C},g(n[i]))}}return g(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function _A(e={},...t){const{breakpoints:g,mixins:n={},spacing:l,palette:r={},transitions:i={},typography:C={},shape:a,...d}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(Vl(20));const A=cm(r),m=qf(e);let p=Ug(m,{mixins:J2(m.breakpoints,n),palette:A,shadows:N2.slice(),typography:Y2(A,C),transitions:z2(i),zIndex:{...M2}});return p=Ug(p,d),p=t.reduce((B,G)=>Ug(B,G),p),p.unstable_sxConfig={...fa,...d?.unstable_sxConfig},p.unstable_sx=function(G){return RI({sx:G,theme:this})},p.toRuntimeSource=oB,p}function U2(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const L2=[...Array(25)].map((e,t)=>{if(t===0)return"none";const g=U2(t);return`linear-gradient(rgba(255 255 255 / ${g}), rgba(255 255 255 / ${g}))`});function lB(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function IB(e){return e==="dark"?L2:[]}function Q2(e){const{palette:t={mode:"light"},opacity:g,overlays:n,...l}=e,r=cm(t);return{palette:r,opacity:{...lB(r.mode),...g},overlays:n||IB(r.mode),...l}}function D2(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const j2=e=>[...[...Array(25)].map((t,g)=>`--${e?`${e}-`:""}overlays-${g}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],P2=e=>(t,g)=>{const n=e.rootSelector||":root",l=e.colorSchemeSelector;let r=l;if(l==="class"&&(r=".%s"),l==="data"&&(r="[data-%s]"),l?.startsWith("data-")&&!l.includes("%s")&&(r=`[${l}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const i={};return j2(e.cssVarPrefix).forEach(C=>{i[C]=g[C],delete g[C]}),r==="media"?{[n]:g,"@media (prefers-color-scheme: dark)":{[n]:i}}:r?{[r.replace("%s",t)]:i,[`${n}, ${r.replace("%s",t)}`]:g}:{[n]:{...g,...i}}}if(r&&r!=="media")return`${n}, ${r.replace("%s",String(t))}`}else if(t){if(r==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[n]:g}};if(r)return r.replace("%s",String(t))}return n};function O2(e,t){t.forEach(g=>{e[g]||(e[g]={})})}function te(e,t,g){!e[t]&&g&&(e[t]=g)}function Qr(e){return typeof e!="string"||!e.startsWith("hsl")?e:tB(e)}function Io(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Lr(Qr(e[t])))}function q2(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const Yn=e=>{try{return e()}catch{}},$2=(e="mui")=>h2(e);function cA(e,t,g,n){if(!t)return;t=t===!0?{}:t;const l=n==="dark"?"dark":"light";if(!g){e[n]=Q2({...t,palette:{mode:l,...t?.palette}});return}const{palette:r,...i}=_A({...g,palette:{mode:l,...t?.palette}});return e[n]={...t,palette:r,opacity:{...lB(l),...t?.opacity},overlays:t?.overlays||IB(l)},i}function _2(e={},...t){const{colorSchemes:g={light:!0},defaultColorScheme:n,disableCssColorScheme:l=!1,cssVarPrefix:r="mui",shouldSkipGeneratingVar:i=D2,colorSchemeSelector:C=g.light&&g.dark?"media":void 0,rootSelector:a=":root",...d}=e,A=Object.keys(g)[0],m=n||(g.light&&A!=="light"?"light":A),p=$2(r),{[m]:B,light:G,dark:y,...S}=g,V={...S};let v=B;if((m==="dark"&&!("dark"in g)||m==="light"&&!("light"in g))&&(v=!0),!v)throw new Error(Vl(21,m));const R=cA(V,v,d,m);G&&!V.light&&cA(V,G,void 0,"light"),y&&!V.dark&&cA(V,y,void 0,"dark");let k={defaultColorScheme:m,...R,cssVarPrefix:r,colorSchemeSelector:C,rootSelector:a,getCssVar:p,colorSchemes:V,font:{...k2(R.typography),...R.font},spacing:q2(d.spacing)};Object.keys(k.colorSchemes).forEach(w=>{const h=k.colorSchemes[w].palette,Y=z=>{const T=z.split("-"),U=T[1],P=T[2];return p(z,h[U][P])};if(h.mode==="light"&&(te(h.common,"background","#fff"),te(h.common,"onBackground","#000")),h.mode==="dark"&&(te(h.common,"background","#000"),te(h.common,"onBackground","#fff")),O2(h,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),h.mode==="light"){te(h.Alert,"errorColor",at(h.error.light,.6)),te(h.Alert,"infoColor",at(h.info.light,.6)),te(h.Alert,"successColor",at(h.success.light,.6)),te(h.Alert,"warningColor",at(h.warning.light,.6)),te(h.Alert,"errorFilledBg",Y("palette-error-main")),te(h.Alert,"infoFilledBg",Y("palette-info-main")),te(h.Alert,"successFilledBg",Y("palette-success-main")),te(h.Alert,"warningFilledBg",Y("palette-warning-main")),te(h.Alert,"errorFilledColor",Yn(()=>h.getContrastText(h.error.main))),te(h.Alert,"infoFilledColor",Yn(()=>h.getContrastText(h.info.main))),te(h.Alert,"successFilledColor",Yn(()=>h.getContrastText(h.success.main))),te(h.Alert,"warningFilledColor",Yn(()=>h.getContrastText(h.warning.main))),te(h.Alert,"errorStandardBg",ct(h.error.light,.9)),te(h.Alert,"infoStandardBg",ct(h.info.light,.9)),te(h.Alert,"successStandardBg",ct(h.success.light,.9)),te(h.Alert,"warningStandardBg",ct(h.warning.light,.9)),te(h.Alert,"errorIconColor",Y("palette-error-main")),te(h.Alert,"infoIconColor",Y("palette-info-main")),te(h.Alert,"successIconColor",Y("palette-success-main")),te(h.Alert,"warningIconColor",Y("palette-warning-main")),te(h.AppBar,"defaultBg",Y("palette-grey-100")),te(h.Avatar,"defaultBg",Y("palette-grey-400")),te(h.Button,"inheritContainedBg",Y("palette-grey-300")),te(h.Button,"inheritContainedHoverBg",Y("palette-grey-A100")),te(h.Chip,"defaultBorder",Y("palette-grey-400")),te(h.Chip,"defaultAvatarColor",Y("palette-grey-700")),te(h.Chip,"defaultIconColor",Y("palette-grey-700")),te(h.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),te(h.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),te(h.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),te(h.LinearProgress,"primaryBg",ct(h.primary.main,.62)),te(h.LinearProgress,"secondaryBg",ct(h.secondary.main,.62)),te(h.LinearProgress,"errorBg",ct(h.error.main,.62)),te(h.LinearProgress,"infoBg",ct(h.info.main,.62)),te(h.LinearProgress,"successBg",ct(h.success.main,.62)),te(h.LinearProgress,"warningBg",ct(h.warning.main,.62)),te(h.Skeleton,"bg",`rgba(${Y("palette-text-primaryChannel")} / 0.11)`),te(h.Slider,"primaryTrack",ct(h.primary.main,.62)),te(h.Slider,"secondaryTrack",ct(h.secondary.main,.62)),te(h.Slider,"errorTrack",ct(h.error.main,.62)),te(h.Slider,"infoTrack",ct(h.info.main,.62)),te(h.Slider,"successTrack",ct(h.success.main,.62)),te(h.Slider,"warningTrack",ct(h.warning.main,.62));const z=sC(h.background.default,.8);te(h.SnackbarContent,"bg",z),te(h.SnackbarContent,"color",Yn(()=>h.getContrastText(z))),te(h.SpeedDialAction,"fabHoverBg",sC(h.background.paper,.15)),te(h.StepConnector,"border",Y("palette-grey-400")),te(h.StepContent,"border",Y("palette-grey-400")),te(h.Switch,"defaultColor",Y("palette-common-white")),te(h.Switch,"defaultDisabledColor",Y("palette-grey-100")),te(h.Switch,"primaryDisabledColor",ct(h.primary.main,.62)),te(h.Switch,"secondaryDisabledColor",ct(h.secondary.main,.62)),te(h.Switch,"errorDisabledColor",ct(h.error.main,.62)),te(h.Switch,"infoDisabledColor",ct(h.info.main,.62)),te(h.Switch,"successDisabledColor",ct(h.success.main,.62)),te(h.Switch,"warningDisabledColor",ct(h.warning.main,.62)),te(h.TableCell,"border",ct(iC(h.divider,1),.88)),te(h.Tooltip,"bg",iC(h.grey[700],.92))}if(h.mode==="dark"){te(h.Alert,"errorColor",ct(h.error.light,.6)),te(h.Alert,"infoColor",ct(h.info.light,.6)),te(h.Alert,"successColor",ct(h.success.light,.6)),te(h.Alert,"warningColor",ct(h.warning.light,.6)),te(h.Alert,"errorFilledBg",Y("palette-error-dark")),te(h.Alert,"infoFilledBg",Y("palette-info-dark")),te(h.Alert,"successFilledBg",Y("palette-success-dark")),te(h.Alert,"warningFilledBg",Y("palette-warning-dark")),te(h.Alert,"errorFilledColor",Yn(()=>h.getContrastText(h.error.dark))),te(h.Alert,"infoFilledColor",Yn(()=>h.getContrastText(h.info.dark))),te(h.Alert,"successFilledColor",Yn(()=>h.getContrastText(h.success.dark))),te(h.Alert,"warningFilledColor",Yn(()=>h.getContrastText(h.warning.dark))),te(h.Alert,"errorStandardBg",at(h.error.light,.9)),te(h.Alert,"infoStandardBg",at(h.info.light,.9)),te(h.Alert,"successStandardBg",at(h.success.light,.9)),te(h.Alert,"warningStandardBg",at(h.warning.light,.9)),te(h.Alert,"errorIconColor",Y("palette-error-main")),te(h.Alert,"infoIconColor",Y("palette-info-main")),te(h.Alert,"successIconColor",Y("palette-success-main")),te(h.Alert,"warningIconColor",Y("palette-warning-main")),te(h.AppBar,"defaultBg",Y("palette-grey-900")),te(h.AppBar,"darkBg",Y("palette-background-paper")),te(h.AppBar,"darkColor",Y("palette-text-primary")),te(h.Avatar,"defaultBg",Y("palette-grey-600")),te(h.Button,"inheritContainedBg",Y("palette-grey-800")),te(h.Button,"inheritContainedHoverBg",Y("palette-grey-700")),te(h.Chip,"defaultBorder",Y("palette-grey-700")),te(h.Chip,"defaultAvatarColor",Y("palette-grey-300")),te(h.Chip,"defaultIconColor",Y("palette-grey-300")),te(h.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),te(h.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),te(h.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),te(h.LinearProgress,"primaryBg",at(h.primary.main,.5)),te(h.LinearProgress,"secondaryBg",at(h.secondary.main,.5)),te(h.LinearProgress,"errorBg",at(h.error.main,.5)),te(h.LinearProgress,"infoBg",at(h.info.main,.5)),te(h.LinearProgress,"successBg",at(h.success.main,.5)),te(h.LinearProgress,"warningBg",at(h.warning.main,.5)),te(h.Skeleton,"bg",`rgba(${Y("palette-text-primaryChannel")} / 0.13)`),te(h.Slider,"primaryTrack",at(h.primary.main,.5)),te(h.Slider,"secondaryTrack",at(h.secondary.main,.5)),te(h.Slider,"errorTrack",at(h.error.main,.5)),te(h.Slider,"infoTrack",at(h.info.main,.5)),te(h.Slider,"successTrack",at(h.success.main,.5)),te(h.Slider,"warningTrack",at(h.warning.main,.5));const z=sC(h.background.default,.98);te(h.SnackbarContent,"bg",z),te(h.SnackbarContent,"color",Yn(()=>h.getContrastText(z))),te(h.SpeedDialAction,"fabHoverBg",sC(h.background.paper,.15)),te(h.StepConnector,"border",Y("palette-grey-600")),te(h.StepContent,"border",Y("palette-grey-600")),te(h.Switch,"defaultColor",Y("palette-grey-300")),te(h.Switch,"defaultDisabledColor",Y("palette-grey-600")),te(h.Switch,"primaryDisabledColor",at(h.primary.main,.55)),te(h.Switch,"secondaryDisabledColor",at(h.secondary.main,.55)),te(h.Switch,"errorDisabledColor",at(h.error.main,.55)),te(h.Switch,"infoDisabledColor",at(h.info.main,.55)),te(h.Switch,"successDisabledColor",at(h.success.main,.55)),te(h.Switch,"warningDisabledColor",at(h.warning.main,.55)),te(h.TableCell,"border",at(iC(h.divider,1),.68)),te(h.Tooltip,"bg",iC(h.grey[700],.92))}Io(h.background,"default"),Io(h.background,"paper"),Io(h.common,"background"),Io(h.common,"onBackground"),Io(h,"divider"),Object.keys(h).forEach(z=>{const T=h[z];z!=="tonalOffset"&&T&&typeof T=="object"&&(T.main&&te(h[z],"mainChannel",Lr(Qr(T.main))),T.light&&te(h[z],"lightChannel",Lr(Qr(T.light))),T.dark&&te(h[z],"darkChannel",Lr(Qr(T.dark))),T.contrastText&&te(h[z],"contrastTextChannel",Lr(Qr(T.contrastText))),z==="text"&&(Io(h[z],"primary"),Io(h[z],"secondary")),z==="action"&&(T.active&&Io(h[z],"active"),T.selected&&Io(h[z],"selected")))})}),k=t.reduce((w,h)=>Ug(w,h),k);const J={prefix:r,disableCssColorScheme:l,shouldSkipGeneratingVar:i,getSelector:P2(k)},{vars:N,generateThemeVars:K,generateStyleSheets:X}=Z2(k,J);return k.vars=N,Object.entries(k.colorSchemes[k.defaultColorScheme]).forEach(([w,h])=>{k[w]=h}),k.generateThemeVars=K,k.generateStyleSheets=X,k.generateSpacing=function(){return Of(d.spacing,om(this))},k.getColorSchemeSelector=y2(C),k.spacing=k.generateSpacing(),k.shouldSkipGeneratingVar=i,k.unstable_sxConfig={...fa,...d?.unstable_sxConfig},k.unstable_sx=function(h){return RI({sx:h,theme:this})},k.toRuntimeSource=oB,k}function r0(e,t,g){e.colorSchemes&&g&&(e.colorSchemes[t]={...g!==!0&&g,palette:cm({...g===!0?{}:g.palette,mode:t})})}function eY(e={},...t){const{palette:g,cssVariables:n=!1,colorSchemes:l=g?void 0:{light:!0},defaultColorScheme:r=g?.mode,...i}=e,C=r||"light",a=l?.[C],d={...l,...g?{[C]:{...typeof a!="boolean"&&a,palette:g}}:void 0};if(n===!1){if(!("colorSchemes"in e))return _A(e,...t);let A=g;"palette"in e||d[C]&&(d[C]!==!0?A=d[C].palette:C==="dark"&&(A={mode:"dark"}));const m=_A({...e,palette:A},...t);return m.defaultColorScheme=C,m.colorSchemes=d,m.palette.mode==="light"&&(m.colorSchemes.light={...d.light!==!0&&d.light,palette:m.palette},r0(m,"dark",d.dark)),m.palette.mode==="dark"&&(m.colorSchemes.dark={...d.dark!==!0&&d.dark,palette:m.palette},r0(m,"light",d.light)),m}return!g&&!("light"in d)&&C==="light"&&(d.light=!0),_2({...i,colorSchemes:d,defaultColorScheme:C,...typeof n!="boolean"&&n},...t)}const tY=eY(),gY="$$material";function nY(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const oY=e=>nY(e)&&e!=="classes",lY=g2({themeId:gY,defaultTheme:tY,rootShouldForwardProp:oY}),IY=m2;function rY(e){return u2(e)}function iY(e){return $f("MuiSvgIcon",e)}$v("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const sY=e=>{const{color:t,fontSize:g,classes:n}=e,l={root:["root",t!=="inherit"&&`color${WI(t)}`,`fontSize${WI(g)}`]};return nJ(l,iY,n)},CY=lY("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,g.color!=="inherit"&&t[`color${WI(g.color)}`],t[`fontSize${WI(g.fontSize)}`]]}})(IY(({theme:e})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:e.transitions?.create?.("fill",{duration:(e.vars??e).transitions?.duration?.shorter}),variants:[{props:t=>!t.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:e.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:e.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:e.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,t])=>t&&t.main).map(([t])=>({props:{color:t},style:{color:(e.vars??e).palette?.[t]?.main}})),{props:{color:"action"},style:{color:(e.vars??e).palette?.action?.active}},{props:{color:"disabled"},style:{color:(e.vars??e).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),eu=f.forwardRef(function(t,g){const n=rY({props:t,name:"MuiSvgIcon"}),{children:l,className:r,color:i="inherit",component:C="svg",fontSize:a="medium",htmlColor:d,inheritViewBox:A=!1,titleAccess:m,viewBox:p="0 0 24 24",...B}=n,G=f.isValidElement(l)&&l.type==="svg",y={...n,color:i,component:C,fontSize:a,instanceFontSize:t.fontSize,inheritViewBox:A,viewBox:p,hasSvgAsChild:G},S={};A||(S.viewBox=p);const V=sY(y);return Z.jsxs(CY,{as:C,className:Hf(V.root,r),focusable:"false",color:d,"aria-hidden":m?void 0:!0,role:m?"img":void 0,ref:g,...S,...B,...G&&l.props,ownerState:y,children:[G?l.props.children:l,m?Z.jsx("title",{children:m}):null]})});eu.muiName="SvgIcon";function On(e,t){function g(n,l){return Z.jsx(eu,{"data-testid":void 0,ref:l,...n,children:e})}return g.muiName=eu.muiName,f.memo(f.forwardRef(g))}const aY=On(Z.jsx("path",{d:"M14.4 6 14 4H5v17h2v-7h5.6l.4 2h7V6z"}));function rB(e,t){return function(){return e.apply(t,arguments)}}const{toString:cY}=Object.prototype,{getPrototypeOf:dm}=Object,{iterator:Ra,toStringTag:iB}=Symbol,Xa=(e=>t=>{const g=cY.call(t);return e[g]||(e[g]=g.slice(8,-1).toLowerCase())})(Object.create(null)),Wn=e=>(e=e.toLowerCase(),t=>Xa(t)===e),ka=e=>t=>typeof t===e,{isArray:NI}=Array,Ai=ka("undefined");function dY(e){return e!==null&&!Ai(e)&&e.constructor!==null&&!Ai(e.constructor)&&vg(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const sB=Wn("ArrayBuffer");function AY(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&sB(e.buffer),t}const uY=ka("string"),vg=ka("function"),CB=ka("number"),Ja=e=>e!==null&&typeof e=="object",mY=e=>e===!0||e===!1,vC=e=>{if(Xa(e)!=="object")return!1;const t=dm(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(iB in e)&&!(Ra in e)},hY=Wn("Date"),pY=Wn("File"),bY=Wn("Blob"),ZY=Wn("FileList"),yY=e=>Ja(e)&&vg(e.pipe),GY=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||vg(e.append)&&((t=Xa(e))==="formdata"||t==="object"&&vg(e.toString)&&e.toString()==="[object FormData]"))},fY=Wn("URLSearchParams"),[BY,SY,VY,WY]=["ReadableStream","Request","Response","Headers"].map(Wn),RY=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function wi(e,t,{allOwnKeys:g=!1}={}){if(e===null||typeof e>"u")return;let n,l;if(typeof e!="object"&&(e=[e]),NI(e))for(n=0,l=e.length;n<l;n++)t.call(null,e[n],n,e);else{const r=g?Object.getOwnPropertyNames(e):Object.keys(e),i=r.length;let C;for(n=0;n<i;n++)C=r[n],t.call(null,e[C],C,e)}}function aB(e,t){t=t.toLowerCase();const g=Object.keys(e);let n=g.length,l;for(;n-- >0;)if(l=g[n],t===l.toLowerCase())return l;return null}const hl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,cB=e=>!Ai(e)&&e!==hl;function tu(){const{caseless:e}=cB(this)&&this||{},t={},g=(n,l)=>{const r=e&&aB(t,l)||l;vC(t[r])&&vC(n)?t[r]=tu(t[r],n):vC(n)?t[r]=tu({},n):NI(n)?t[r]=n.slice():t[r]=n};for(let n=0,l=arguments.length;n<l;n++)arguments[n]&&wi(arguments[n],g);return t}const XY=(e,t,g,{allOwnKeys:n}={})=>(wi(t,(l,r)=>{g&&vg(l)?e[r]=rB(l,g):e[r]=l},{allOwnKeys:n}),e),kY=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),JY=(e,t,g,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),g&&Object.assign(e.prototype,g)},vY=(e,t,g,n)=>{let l,r,i;const C={};if(t=t||{},e==null)return t;do{for(l=Object.getOwnPropertyNames(e),r=l.length;r-- >0;)i=l[r],(!n||n(i,e,t))&&!C[i]&&(t[i]=e[i],C[i]=!0);e=g!==!1&&dm(e)}while(e&&(!g||g(e,t))&&e!==Object.prototype);return t},YY=(e,t,g)=>{e=String(e),(g===void 0||g>e.length)&&(g=e.length),g-=t.length;const n=e.indexOf(t,g);return n!==-1&&n===g},HY=e=>{if(!e)return null;if(NI(e))return e;let t=e.length;if(!CB(t))return null;const g=new Array(t);for(;t-- >0;)g[t]=e[t];return g},wY=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&dm(Uint8Array)),FY=(e,t)=>{const n=(e&&e[Ra]).call(e);let l;for(;(l=n.next())&&!l.done;){const r=l.value;t.call(e,r[0],r[1])}},NY=(e,t)=>{let g;const n=[];for(;(g=e.exec(t))!==null;)n.push(g);return n},KY=Wn("HTMLFormElement"),xY=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(g,n,l){return n.toUpperCase()+l}),i0=(({hasOwnProperty:e})=>(t,g)=>e.call(t,g))(Object.prototype),EY=Wn("RegExp"),dB=(e,t)=>{const g=Object.getOwnPropertyDescriptors(e),n={};wi(g,(l,r)=>{let i;(i=t(l,r,e))!==!1&&(n[r]=i||l)}),Object.defineProperties(e,n)},zY=e=>{dB(e,(t,g)=>{if(vg(e)&&["arguments","caller","callee"].indexOf(g)!==-1)return!1;const n=e[g];if(vg(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+g+"'")})}})},MY=(e,t)=>{const g={},n=l=>{l.forEach(r=>{g[r]=!0})};return NI(e)?n(e):n(String(e).split(t)),g},TY=()=>{},UY=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function LY(e){return!!(e&&vg(e.append)&&e[iB]==="FormData"&&e[Ra])}const QY=e=>{const t=new Array(10),g=(n,l)=>{if(Ja(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[l]=n;const r=NI(n)?[]:{};return wi(n,(i,C)=>{const a=g(i,l+1);!Ai(a)&&(r[C]=a)}),t[l]=void 0,r}}return n};return g(e,0)},DY=Wn("AsyncFunction"),jY=e=>e&&(Ja(e)||vg(e))&&vg(e.then)&&vg(e.catch),AB=((e,t)=>e?setImmediate:t?((g,n)=>(hl.addEventListener("message",({source:l,data:r})=>{l===hl&&r===g&&n.length&&n.shift()()},!1),l=>{n.push(l),hl.postMessage(g,"*")}))(`axios@${Math.random()}`,[]):g=>setTimeout(g))(typeof setImmediate=="function",vg(hl.postMessage)),PY=typeof queueMicrotask<"u"?queueMicrotask.bind(hl):typeof process<"u"&&process.nextTick||AB,OY=e=>e!=null&&vg(e[Ra]),ee={isArray:NI,isArrayBuffer:sB,isBuffer:dY,isFormData:GY,isArrayBufferView:AY,isString:uY,isNumber:CB,isBoolean:mY,isObject:Ja,isPlainObject:vC,isReadableStream:BY,isRequest:SY,isResponse:VY,isHeaders:WY,isUndefined:Ai,isDate:hY,isFile:pY,isBlob:bY,isRegExp:EY,isFunction:vg,isStream:yY,isURLSearchParams:fY,isTypedArray:wY,isFileList:ZY,forEach:wi,merge:tu,extend:XY,trim:RY,stripBOM:kY,inherits:JY,toFlatObject:vY,kindOf:Xa,kindOfTest:Wn,endsWith:YY,toArray:HY,forEachEntry:FY,matchAll:NY,isHTMLForm:KY,hasOwnProperty:i0,hasOwnProp:i0,reduceDescriptors:dB,freezeMethods:zY,toObjectSet:MY,toCamelCase:xY,noop:TY,toFiniteNumber:UY,findKey:aB,global:hl,isContextDefined:cB,isSpecCompliantForm:LY,toJSONObject:QY,isAsyncFn:DY,isThenable:jY,setImmediate:AB,asap:PY,isIterable:OY};function ze(e,t,g,n,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),g&&(this.config=g),n&&(this.request=n),l&&(this.response=l,this.status=l.status?l.status:null)}ee.inherits(ze,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.status}}});const uB=ze.prototype,mB={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{mB[e]={value:e}});Object.defineProperties(ze,mB);Object.defineProperty(uB,"isAxiosError",{value:!0});ze.from=(e,t,g,n,l,r)=>{const i=Object.create(uB);return ee.toFlatObject(e,i,function(a){return a!==Error.prototype},C=>C!=="isAxiosError"),ze.call(i,e.message,t,g,n,l),i.cause=e,i.name=e.name,r&&Object.assign(i,r),i};const qY=null;function gu(e){return ee.isPlainObject(e)||ee.isArray(e)}function hB(e){return ee.endsWith(e,"[]")?e.slice(0,-2):e}function s0(e,t,g){return e?e.concat(t).map(function(l,r){return l=hB(l),!g&&r?"["+l+"]":l}).join(g?".":""):t}function $Y(e){return ee.isArray(e)&&!e.some(gu)}const _Y=ee.toFlatObject(ee,{},null,function(t){return/^is[A-Z]/.test(t)});function va(e,t,g){if(!ee.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,g=ee.toFlatObject(g,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,S){return!ee.isUndefined(S[y])});const n=g.metaTokens,l=g.visitor||A,r=g.dots,i=g.indexes,a=(g.Blob||typeof Blob<"u"&&Blob)&&ee.isSpecCompliantForm(t);if(!ee.isFunction(l))throw new TypeError("visitor must be a function");function d(G){if(G===null)return"";if(ee.isDate(G))return G.toISOString();if(ee.isBoolean(G))return G.toString();if(!a&&ee.isBlob(G))throw new ze("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(G)||ee.isTypedArray(G)?a&&typeof Blob=="function"?new Blob([G]):Buffer.from(G):G}function A(G,y,S){let V=G;if(G&&!S&&typeof G=="object"){if(ee.endsWith(y,"{}"))y=n?y:y.slice(0,-2),G=JSON.stringify(G);else if(ee.isArray(G)&&$Y(G)||(ee.isFileList(G)||ee.endsWith(y,"[]"))&&(V=ee.toArray(G)))return y=hB(y),V.forEach(function(R,k){!(ee.isUndefined(R)||R===null)&&t.append(i===!0?s0([y],k,r):i===null?y:y+"[]",d(R))}),!1}return gu(G)?!0:(t.append(s0(S,y,r),d(G)),!1)}const m=[],p=Object.assign(_Y,{defaultVisitor:A,convertValue:d,isVisitable:gu});function B(G,y){if(!ee.isUndefined(G)){if(m.indexOf(G)!==-1)throw Error("Circular reference detected in "+y.join("."));m.push(G),ee.forEach(G,function(V,v){(!(ee.isUndefined(V)||V===null)&&l.call(t,V,ee.isString(v)?v.trim():v,y,p))===!0&&B(V,y?y.concat(v):[v])}),m.pop()}}if(!ee.isObject(e))throw new TypeError("data must be an object");return B(e),t}function C0(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Am(e,t){this._pairs=[],e&&va(e,this,t)}const pB=Am.prototype;pB.append=function(t,g){this._pairs.push([t,g])};pB.toString=function(t){const g=t?function(n){return t.call(this,n,C0)}:C0;return this._pairs.map(function(l){return g(l[0])+"="+g(l[1])},"").join("&")};function eH(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function bB(e,t,g){if(!t)return e;const n=g&&g.encode||eH;ee.isFunction(g)&&(g={serialize:g});const l=g&&g.serialize;let r;if(l?r=l(t,g):r=ee.isURLSearchParams(t)?t.toString():new Am(t,g).toString(n),r){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}class a0{constructor(){this.handlers=[]}use(t,g,n){return this.handlers.push({fulfilled:t,rejected:g,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ee.forEach(this.handlers,function(n){n!==null&&t(n)})}}const ZB={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},tH=typeof URLSearchParams<"u"?URLSearchParams:Am,gH=typeof FormData<"u"?FormData:null,nH=typeof Blob<"u"?Blob:null,oH={isBrowser:!0,classes:{URLSearchParams:tH,FormData:gH,Blob:nH},protocols:["http","https","file","blob","url","data"]},um=typeof window<"u"&&typeof document<"u",nu=typeof navigator=="object"&&navigator||void 0,lH=um&&(!nu||["ReactNative","NativeScript","NS"].indexOf(nu.product)<0),IH=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",rH=um&&window.location.href||"http://localhost",iH=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:um,hasStandardBrowserEnv:lH,hasStandardBrowserWebWorkerEnv:IH,navigator:nu,origin:rH},Symbol.toStringTag,{value:"Module"})),Ag={...iH,...oH};function sH(e,t){return va(e,new Ag.classes.URLSearchParams,Object.assign({visitor:function(g,n,l,r){return Ag.isNode&&ee.isBuffer(g)?(this.append(n,g.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function CH(e){return ee.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function aH(e){const t={},g=Object.keys(e);let n;const l=g.length;let r;for(n=0;n<l;n++)r=g[n],t[r]=e[r];return t}function yB(e){function t(g,n,l,r){let i=g[r++];if(i==="__proto__")return!0;const C=Number.isFinite(+i),a=r>=g.length;return i=!i&&ee.isArray(l)?l.length:i,a?(ee.hasOwnProp(l,i)?l[i]=[l[i],n]:l[i]=n,!C):((!l[i]||!ee.isObject(l[i]))&&(l[i]=[]),t(g,n,l[i],r)&&ee.isArray(l[i])&&(l[i]=aH(l[i])),!C)}if(ee.isFormData(e)&&ee.isFunction(e.entries)){const g={};return ee.forEachEntry(e,(n,l)=>{t(CH(n),l,g,0)}),g}return null}function cH(e,t,g){if(ee.isString(e))try{return(t||JSON.parse)(e),ee.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(g||JSON.stringify)(e)}const Fi={transitional:ZB,adapter:["xhr","http","fetch"],transformRequest:[function(t,g){const n=g.getContentType()||"",l=n.indexOf("application/json")>-1,r=ee.isObject(t);if(r&&ee.isHTMLForm(t)&&(t=new FormData(t)),ee.isFormData(t))return l?JSON.stringify(yB(t)):t;if(ee.isArrayBuffer(t)||ee.isBuffer(t)||ee.isStream(t)||ee.isFile(t)||ee.isBlob(t)||ee.isReadableStream(t))return t;if(ee.isArrayBufferView(t))return t.buffer;if(ee.isURLSearchParams(t))return g.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let C;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return sH(t,this.formSerializer).toString();if((C=ee.isFileList(t))||n.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return va(C?{"files[]":t}:t,a&&new a,this.formSerializer)}}return r||l?(g.setContentType("application/json",!1),cH(t)):t}],transformResponse:[function(t){const g=this.transitional||Fi.transitional,n=g&&g.forcedJSONParsing,l=this.responseType==="json";if(ee.isResponse(t)||ee.isReadableStream(t))return t;if(t&&ee.isString(t)&&(n&&!this.responseType||l)){const i=!(g&&g.silentJSONParsing)&&l;try{return JSON.parse(t)}catch(C){if(i)throw C.name==="SyntaxError"?ze.from(C,ze.ERR_BAD_RESPONSE,this,null,this.response):C}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ag.classes.FormData,Blob:Ag.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ee.forEach(["delete","get","head","post","put","patch"],e=>{Fi.headers[e]={}});const dH=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),AH=e=>{const t={};let g,n,l;return e&&e.split(`
`).forEach(function(i){l=i.indexOf(":"),g=i.substring(0,l).trim().toLowerCase(),n=i.substring(l+1).trim(),!(!g||t[g]&&dH[g])&&(g==="set-cookie"?t[g]?t[g].push(n):t[g]=[n]:t[g]=t[g]?t[g]+", "+n:n)}),t},c0=Symbol("internals");function Hr(e){return e&&String(e).trim().toLowerCase()}function YC(e){return e===!1||e==null?e:ee.isArray(e)?e.map(YC):String(e)}function uH(e){const t=Object.create(null),g=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=g.exec(e);)t[n[1]]=n[2];return t}const mH=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function dA(e,t,g,n,l){if(ee.isFunction(n))return n.call(this,t,g);if(l&&(t=g),!!ee.isString(t)){if(ee.isString(n))return t.indexOf(n)!==-1;if(ee.isRegExp(n))return n.test(t)}}function hH(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,g,n)=>g.toUpperCase()+n)}function pH(e,t){const g=ee.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+g,{value:function(l,r,i){return this[n].call(this,t,l,r,i)},configurable:!0})})}let Yg=class{constructor(t){t&&this.set(t)}set(t,g,n){const l=this;function r(C,a,d){const A=Hr(a);if(!A)throw new Error("header name must be a non-empty string");const m=ee.findKey(l,A);(!m||l[m]===void 0||d===!0||d===void 0&&l[m]!==!1)&&(l[m||a]=YC(C))}const i=(C,a)=>ee.forEach(C,(d,A)=>r(d,A,a));if(ee.isPlainObject(t)||t instanceof this.constructor)i(t,g);else if(ee.isString(t)&&(t=t.trim())&&!mH(t))i(AH(t),g);else if(ee.isObject(t)&&ee.isIterable(t)){let C={},a,d;for(const A of t){if(!ee.isArray(A))throw TypeError("Object iterator must return a key-value pair");C[d=A[0]]=(a=C[d])?ee.isArray(a)?[...a,A[1]]:[a,A[1]]:A[1]}i(C,g)}else t!=null&&r(g,t,n);return this}get(t,g){if(t=Hr(t),t){const n=ee.findKey(this,t);if(n){const l=this[n];if(!g)return l;if(g===!0)return uH(l);if(ee.isFunction(g))return g.call(this,l,n);if(ee.isRegExp(g))return g.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,g){if(t=Hr(t),t){const n=ee.findKey(this,t);return!!(n&&this[n]!==void 0&&(!g||dA(this,this[n],n,g)))}return!1}delete(t,g){const n=this;let l=!1;function r(i){if(i=Hr(i),i){const C=ee.findKey(n,i);C&&(!g||dA(n,n[C],C,g))&&(delete n[C],l=!0)}}return ee.isArray(t)?t.forEach(r):r(t),l}clear(t){const g=Object.keys(this);let n=g.length,l=!1;for(;n--;){const r=g[n];(!t||dA(this,this[r],r,t,!0))&&(delete this[r],l=!0)}return l}normalize(t){const g=this,n={};return ee.forEach(this,(l,r)=>{const i=ee.findKey(n,r);if(i){g[i]=YC(l),delete g[r];return}const C=t?hH(r):String(r).trim();C!==r&&delete g[r],g[C]=YC(l),n[C]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const g=Object.create(null);return ee.forEach(this,(n,l)=>{n!=null&&n!==!1&&(g[l]=t&&ee.isArray(n)?n.join(", "):n)}),g}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,g])=>t+": "+g).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...g){const n=new this(t);return g.forEach(l=>n.set(l)),n}static accessor(t){const n=(this[c0]=this[c0]={accessors:{}}).accessors,l=this.prototype;function r(i){const C=Hr(i);n[C]||(pH(l,i),n[C]=!0)}return ee.isArray(t)?t.forEach(r):r(t),this}};Yg.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ee.reduceDescriptors(Yg.prototype,({value:e},t)=>{let g=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[g]=n}}});ee.freezeMethods(Yg);function AA(e,t){const g=this||Fi,n=t||g,l=Yg.from(n.headers);let r=n.data;return ee.forEach(e,function(C){r=C.call(g,r,l.normalize(),t?t.status:void 0)}),l.normalize(),r}function GB(e){return!!(e&&e.__CANCEL__)}function KI(e,t,g){ze.call(this,e??"canceled",ze.ERR_CANCELED,t,g),this.name="CanceledError"}ee.inherits(KI,ze,{__CANCEL__:!0});function fB(e,t,g){const n=g.config.validateStatus;!g.status||!n||n(g.status)?e(g):t(new ze("Request failed with status code "+g.status,[ze.ERR_BAD_REQUEST,ze.ERR_BAD_RESPONSE][Math.floor(g.status/100)-4],g.config,g.request,g))}function bH(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function ZH(e,t){e=e||10;const g=new Array(e),n=new Array(e);let l=0,r=0,i;return t=t!==void 0?t:1e3,function(a){const d=Date.now(),A=n[r];i||(i=d),g[l]=a,n[l]=d;let m=r,p=0;for(;m!==l;)p+=g[m++],m=m%e;if(l=(l+1)%e,l===r&&(r=(r+1)%e),d-i<t)return;const B=A&&d-A;return B?Math.round(p*1e3/B):void 0}}function yH(e,t){let g=0,n=1e3/t,l,r;const i=(d,A=Date.now())=>{g=A,l=null,r&&(clearTimeout(r),r=null),e.apply(null,d)};return[(...d)=>{const A=Date.now(),m=A-g;m>=n?i(d,A):(l=d,r||(r=setTimeout(()=>{r=null,i(l)},n-m)))},()=>l&&i(l)]}const $C=(e,t,g=3)=>{let n=0;const l=ZH(50,250);return yH(r=>{const i=r.loaded,C=r.lengthComputable?r.total:void 0,a=i-n,d=l(a),A=i<=C;n=i;const m={loaded:i,total:C,progress:C?i/C:void 0,bytes:a,rate:d||void 0,estimated:d&&C&&A?(C-i)/d:void 0,event:r,lengthComputable:C!=null,[t?"download":"upload"]:!0};e(m)},g)},d0=(e,t)=>{const g=e!=null;return[n=>t[0]({lengthComputable:g,total:e,loaded:n}),t[1]]},A0=e=>(...t)=>ee.asap(()=>e(...t)),GH=Ag.hasStandardBrowserEnv?((e,t)=>g=>(g=new URL(g,Ag.origin),e.protocol===g.protocol&&e.host===g.host&&(t||e.port===g.port)))(new URL(Ag.origin),Ag.navigator&&/(msie|trident)/i.test(Ag.navigator.userAgent)):()=>!0,fH=Ag.hasStandardBrowserEnv?{write(e,t,g,n,l,r){const i=[e+"="+encodeURIComponent(t)];ee.isNumber(g)&&i.push("expires="+new Date(g).toGMTString()),ee.isString(n)&&i.push("path="+n),ee.isString(l)&&i.push("domain="+l),r===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function BH(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function SH(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function BB(e,t,g){let n=!BH(t);return e&&(n||g==!1)?SH(e,t):t}const u0=e=>e instanceof Yg?{...e}:e;function Wl(e,t){t=t||{};const g={};function n(d,A,m,p){return ee.isPlainObject(d)&&ee.isPlainObject(A)?ee.merge.call({caseless:p},d,A):ee.isPlainObject(A)?ee.merge({},A):ee.isArray(A)?A.slice():A}function l(d,A,m,p){if(ee.isUndefined(A)){if(!ee.isUndefined(d))return n(void 0,d,m,p)}else return n(d,A,m,p)}function r(d,A){if(!ee.isUndefined(A))return n(void 0,A)}function i(d,A){if(ee.isUndefined(A)){if(!ee.isUndefined(d))return n(void 0,d)}else return n(void 0,A)}function C(d,A,m){if(m in t)return n(d,A);if(m in e)return n(void 0,d)}const a={url:r,method:r,data:r,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:C,headers:(d,A,m)=>l(u0(d),u0(A),m,!0)};return ee.forEach(Object.keys(Object.assign({},e,t)),function(A){const m=a[A]||l,p=m(e[A],t[A],A);ee.isUndefined(p)&&m!==C||(g[A]=p)}),g}const SB=e=>{const t=Wl({},e);let{data:g,withXSRFToken:n,xsrfHeaderName:l,xsrfCookieName:r,headers:i,auth:C}=t;t.headers=i=Yg.from(i),t.url=bB(BB(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),C&&i.set("Authorization","Basic "+btoa((C.username||"")+":"+(C.password?unescape(encodeURIComponent(C.password)):"")));let a;if(ee.isFormData(g)){if(Ag.hasStandardBrowserEnv||Ag.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((a=i.getContentType())!==!1){const[d,...A]=a?a.split(";").map(m=>m.trim()).filter(Boolean):[];i.setContentType([d||"multipart/form-data",...A].join("; "))}}if(Ag.hasStandardBrowserEnv&&(n&&ee.isFunction(n)&&(n=n(t)),n||n!==!1&&GH(t.url))){const d=l&&r&&fH.read(r);d&&i.set(l,d)}return t},VH=typeof XMLHttpRequest<"u",WH=VH&&function(e){return new Promise(function(g,n){const l=SB(e);let r=l.data;const i=Yg.from(l.headers).normalize();let{responseType:C,onUploadProgress:a,onDownloadProgress:d}=l,A,m,p,B,G;function y(){B&&B(),G&&G(),l.cancelToken&&l.cancelToken.unsubscribe(A),l.signal&&l.signal.removeEventListener("abort",A)}let S=new XMLHttpRequest;S.open(l.method.toUpperCase(),l.url,!0),S.timeout=l.timeout;function V(){if(!S)return;const R=Yg.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),J={data:!C||C==="text"||C==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:R,config:e,request:S};fB(function(K){g(K),y()},function(K){n(K),y()},J),S=null}"onloadend"in S?S.onloadend=V:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(V)},S.onabort=function(){S&&(n(new ze("Request aborted",ze.ECONNABORTED,e,S)),S=null)},S.onerror=function(){n(new ze("Network Error",ze.ERR_NETWORK,e,S)),S=null},S.ontimeout=function(){let k=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const J=l.transitional||ZB;l.timeoutErrorMessage&&(k=l.timeoutErrorMessage),n(new ze(k,J.clarifyTimeoutError?ze.ETIMEDOUT:ze.ECONNABORTED,e,S)),S=null},r===void 0&&i.setContentType(null),"setRequestHeader"in S&&ee.forEach(i.toJSON(),function(k,J){S.setRequestHeader(J,k)}),ee.isUndefined(l.withCredentials)||(S.withCredentials=!!l.withCredentials),C&&C!=="json"&&(S.responseType=l.responseType),d&&([p,G]=$C(d,!0),S.addEventListener("progress",p)),a&&S.upload&&([m,B]=$C(a),S.upload.addEventListener("progress",m),S.upload.addEventListener("loadend",B)),(l.cancelToken||l.signal)&&(A=R=>{S&&(n(!R||R.type?new KI(null,e,S):R),S.abort(),S=null)},l.cancelToken&&l.cancelToken.subscribe(A),l.signal&&(l.signal.aborted?A():l.signal.addEventListener("abort",A)));const v=bH(l.url);if(v&&Ag.protocols.indexOf(v)===-1){n(new ze("Unsupported protocol "+v+":",ze.ERR_BAD_REQUEST,e));return}S.send(r||null)})},RH=(e,t)=>{const{length:g}=e=e?e.filter(Boolean):[];if(t||g){let n=new AbortController,l;const r=function(d){if(!l){l=!0,C();const A=d instanceof Error?d:this.reason;n.abort(A instanceof ze?A:new KI(A instanceof Error?A.message:A))}};let i=t&&setTimeout(()=>{i=null,r(new ze(`timeout ${t} of ms exceeded`,ze.ETIMEDOUT))},t);const C=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(r):d.removeEventListener("abort",r)}),e=null)};e.forEach(d=>d.addEventListener("abort",r));const{signal:a}=n;return a.unsubscribe=()=>ee.asap(C),a}},XH=function*(e,t){let g=e.byteLength;if(g<t){yield e;return}let n=0,l;for(;n<g;)l=n+t,yield e.slice(n,l),n=l},kH=async function*(e,t){for await(const g of JH(e))yield*XH(g,t)},JH=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:g,value:n}=await t.read();if(g)break;yield n}}finally{await t.cancel()}},m0=(e,t,g,n)=>{const l=kH(e,t);let r=0,i,C=a=>{i||(i=!0,n&&n(a))};return new ReadableStream({async pull(a){try{const{done:d,value:A}=await l.next();if(d){C(),a.close();return}let m=A.byteLength;if(g){let p=r+=m;g(p)}a.enqueue(new Uint8Array(A))}catch(d){throw C(d),d}},cancel(a){return C(a),l.return()}},{highWaterMark:2})},Ya=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",VB=Ya&&typeof ReadableStream=="function",vH=Ya&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),WB=(e,...t)=>{try{return!!e(...t)}catch{return!1}},YH=VB&&WB(()=>{let e=!1;const t=new Request(Ag.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),h0=64*1024,ou=VB&&WB(()=>ee.isReadableStream(new Response("").body)),_C={stream:ou&&(e=>e.body)};Ya&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!_C[t]&&(_C[t]=ee.isFunction(e[t])?g=>g[t]():(g,n)=>{throw new ze(`Response type '${t}' is not supported`,ze.ERR_NOT_SUPPORT,n)})})})(new Response);const HH=async e=>{if(e==null)return 0;if(ee.isBlob(e))return e.size;if(ee.isSpecCompliantForm(e))return(await new Request(Ag.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(ee.isArrayBufferView(e)||ee.isArrayBuffer(e))return e.byteLength;if(ee.isURLSearchParams(e)&&(e=e+""),ee.isString(e))return(await vH(e)).byteLength},wH=async(e,t)=>{const g=ee.toFiniteNumber(e.getContentLength());return g??HH(t)},FH=Ya&&(async e=>{let{url:t,method:g,data:n,signal:l,cancelToken:r,timeout:i,onDownloadProgress:C,onUploadProgress:a,responseType:d,headers:A,withCredentials:m="same-origin",fetchOptions:p}=SB(e);d=d?(d+"").toLowerCase():"text";let B=RH([l,r&&r.toAbortSignal()],i),G;const y=B&&B.unsubscribe&&(()=>{B.unsubscribe()});let S;try{if(a&&YH&&g!=="get"&&g!=="head"&&(S=await wH(A,n))!==0){let J=new Request(t,{method:"POST",body:n,duplex:"half"}),N;if(ee.isFormData(n)&&(N=J.headers.get("content-type"))&&A.setContentType(N),J.body){const[K,X]=d0(S,$C(A0(a)));n=m0(J.body,h0,K,X)}}ee.isString(m)||(m=m?"include":"omit");const V="credentials"in Request.prototype;G=new Request(t,{...p,signal:B,method:g.toUpperCase(),headers:A.normalize().toJSON(),body:n,duplex:"half",credentials:V?m:void 0});let v=await fetch(G,p);const R=ou&&(d==="stream"||d==="response");if(ou&&(C||R&&y)){const J={};["status","statusText","headers"].forEach(w=>{J[w]=v[w]});const N=ee.toFiniteNumber(v.headers.get("content-length")),[K,X]=C&&d0(N,$C(A0(C),!0))||[];v=new Response(m0(v.body,h0,K,()=>{X&&X(),y&&y()}),J)}d=d||"text";let k=await _C[ee.findKey(_C,d)||"text"](v,e);return!R&&y&&y(),await new Promise((J,N)=>{fB(J,N,{data:k,headers:Yg.from(v.headers),status:v.status,statusText:v.statusText,config:e,request:G})})}catch(V){throw y&&y(),V&&V.name==="TypeError"&&/Load failed|fetch/i.test(V.message)?Object.assign(new ze("Network Error",ze.ERR_NETWORK,e,G),{cause:V.cause||V}):ze.from(V,V&&V.code,e,G)}}),lu={http:qY,xhr:WH,fetch:FH};ee.forEach(lu,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const p0=e=>`- ${e}`,NH=e=>ee.isFunction(e)||e===null||e===!1,RB={getAdapter:e=>{e=ee.isArray(e)?e:[e];const{length:t}=e;let g,n;const l={};for(let r=0;r<t;r++){g=e[r];let i;if(n=g,!NH(g)&&(n=lu[(i=String(g)).toLowerCase()],n===void 0))throw new ze(`Unknown adapter '${i}'`);if(n)break;l[i||"#"+r]=n}if(!n){const r=Object.entries(l).map(([C,a])=>`adapter ${C} `+(a===!1?"is not supported by the environment":"is not available in the build"));let i=t?r.length>1?`since :
`+r.map(p0).join(`
`):" "+p0(r[0]):"as no adapter specified";throw new ze("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return n},adapters:lu};function uA(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new KI(null,e)}function b0(e){return uA(e),e.headers=Yg.from(e.headers),e.data=AA.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),RB.getAdapter(e.adapter||Fi.adapter)(e).then(function(n){return uA(e),n.data=AA.call(e,e.transformResponse,n),n.headers=Yg.from(n.headers),n},function(n){return GB(n)||(uA(e),n&&n.response&&(n.response.data=AA.call(e,e.transformResponse,n.response),n.response.headers=Yg.from(n.response.headers))),Promise.reject(n)})}const XB="1.10.0",Ha={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ha[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Z0={};Ha.transitional=function(t,g,n){function l(r,i){return"[Axios v"+XB+"] Transitional option '"+r+"'"+i+(n?". "+n:"")}return(r,i,C)=>{if(t===!1)throw new ze(l(i," has been removed"+(g?" in "+g:"")),ze.ERR_DEPRECATED);return g&&!Z0[i]&&(Z0[i]=!0,console.warn(l(i," has been deprecated since v"+g+" and will be removed in the near future"))),t?t(r,i,C):!0}};Ha.spelling=function(t){return(g,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function KH(e,t,g){if(typeof e!="object")throw new ze("options must be an object",ze.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let l=n.length;for(;l-- >0;){const r=n[l],i=t[r];if(i){const C=e[r],a=C===void 0||i(C,r,e);if(a!==!0)throw new ze("option "+r+" must be "+a,ze.ERR_BAD_OPTION_VALUE);continue}if(g!==!0)throw new ze("Unknown option "+r,ze.ERR_BAD_OPTION)}}const HC={assertOptions:KH,validators:Ha},Hn=HC.validators;let Gl=class{constructor(t){this.defaults=t||{},this.interceptors={request:new a0,response:new a0}}async request(t,g){try{return await this._request(t,g)}catch(n){if(n instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const r=l.stack?l.stack.replace(/^.+\n/,""):"";try{n.stack?r&&!String(n.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+r):n.stack=r}catch{}}throw n}}_request(t,g){typeof t=="string"?(g=g||{},g.url=t):g=t||{},g=Wl(this.defaults,g);const{transitional:n,paramsSerializer:l,headers:r}=g;n!==void 0&&HC.assertOptions(n,{silentJSONParsing:Hn.transitional(Hn.boolean),forcedJSONParsing:Hn.transitional(Hn.boolean),clarifyTimeoutError:Hn.transitional(Hn.boolean)},!1),l!=null&&(ee.isFunction(l)?g.paramsSerializer={serialize:l}:HC.assertOptions(l,{encode:Hn.function,serialize:Hn.function},!0)),g.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?g.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:g.allowAbsoluteUrls=!0),HC.assertOptions(g,{baseUrl:Hn.spelling("baseURL"),withXsrfToken:Hn.spelling("withXSRFToken")},!0),g.method=(g.method||this.defaults.method||"get").toLowerCase();let i=r&&ee.merge(r.common,r[g.method]);r&&ee.forEach(["delete","get","head","post","put","patch","common"],G=>{delete r[G]}),g.headers=Yg.concat(i,r);const C=[];let a=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(g)===!1||(a=a&&y.synchronous,C.unshift(y.fulfilled,y.rejected))});const d=[];this.interceptors.response.forEach(function(y){d.push(y.fulfilled,y.rejected)});let A,m=0,p;if(!a){const G=[b0.bind(this),void 0];for(G.unshift.apply(G,C),G.push.apply(G,d),p=G.length,A=Promise.resolve(g);m<p;)A=A.then(G[m++],G[m++]);return A}p=C.length;let B=g;for(m=0;m<p;){const G=C[m++],y=C[m++];try{B=G(B)}catch(S){y.call(this,S);break}}try{A=b0.call(this,B)}catch(G){return Promise.reject(G)}for(m=0,p=d.length;m<p;)A=A.then(d[m++],d[m++]);return A}getUri(t){t=Wl(this.defaults,t);const g=BB(t.baseURL,t.url,t.allowAbsoluteUrls);return bB(g,t.params,t.paramsSerializer)}};ee.forEach(["delete","get","head","options"],function(t){Gl.prototype[t]=function(g,n){return this.request(Wl(n||{},{method:t,url:g,data:(n||{}).data}))}});ee.forEach(["post","put","patch"],function(t){function g(n){return function(r,i,C){return this.request(Wl(C||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:r,data:i}))}}Gl.prototype[t]=g(),Gl.prototype[t+"Form"]=g(!0)});let xH=class kB{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let g;this.promise=new Promise(function(r){g=r});const n=this;this.promise.then(l=>{if(!n._listeners)return;let r=n._listeners.length;for(;r-- >0;)n._listeners[r](l);n._listeners=null}),this.promise.then=l=>{let r;const i=new Promise(C=>{n.subscribe(C),r=C}).then(l);return i.cancel=function(){n.unsubscribe(r)},i},t(function(r,i,C){n.reason||(n.reason=new KI(r,i,C),g(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const g=this._listeners.indexOf(t);g!==-1&&this._listeners.splice(g,1)}toAbortSignal(){const t=new AbortController,g=n=>{t.abort(n)};return this.subscribe(g),t.signal.unsubscribe=()=>this.unsubscribe(g),t.signal}static source(){let t;return{token:new kB(function(l){t=l}),cancel:t}}};function EH(e){return function(g){return e.apply(null,g)}}function zH(e){return ee.isObject(e)&&e.isAxiosError===!0}const Iu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Iu).forEach(([e,t])=>{Iu[t]=e});function JB(e){const t=new Gl(e),g=rB(Gl.prototype.request,t);return ee.extend(g,Gl.prototype,t,{allOwnKeys:!0}),ee.extend(g,t,null,{allOwnKeys:!0}),g.create=function(l){return JB(Wl(e,l))},g}const Re=JB(Fi);Re.Axios=Gl;Re.CanceledError=KI;Re.CancelToken=xH;Re.isCancel=GB;Re.VERSION=XB;Re.toFormData=va;Re.AxiosError=ze;Re.Cancel=Re.CanceledError;Re.all=function(t){return Promise.all(t)};Re.spread=EH;Re.isAxiosError=zH;Re.mergeConfig=Wl;Re.AxiosHeaders=Yg;Re.formToJSON=e=>yB(ee.isHTMLForm(e)?new FormData(e):e);Re.getAdapter=RB.getAdapter;Re.HttpStatusCode=Iu;Re.default=Re;const{Axios:HL,AxiosError:wL,CanceledError:FL,isCancel:NL,CancelToken:KL,VERSION:xL,all:EL,Cancel:zL,isAxiosError:ML,spread:TL,toFormData:UL,AxiosHeaders:LL,HttpStatusCode:QL,formToJSON:DL,getAdapter:jL,mergeConfig:PL}=Re,MH=()=>{const[e,t]=f.useState(0),g=1e3;let n=Math.min(e/g*100,100);const l={display:"box",width:"100%",height:"20px",borderRadius:"20px",borderWidth:"2px",borderStyle:"solid",borderColor:"white",boxShadow:"0 0 5px orange",overflow:"hidden"},r={width:`${n}%`,height:"100%",backgroundColor:"#ff2400",transition:"width 0.3s ease"};return Z.jsx("div",{style:TH,children:Z.jsxs("div",{style:{margin:"1em"},children:[Z.jsxs("h3",{style:y0,children:[Z.jsx(aY,{})," Goal to Scholarship Giveaway!"]}),Z.jsx("div",{id:"bar",style:l,children:Z.jsx("div",{style:r})}),Z.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:Z.jsxs("h5",{style:{...y0},children:[" ",e," / ",g," points earned"]})})]})})},TH={backgroundColor:"white",border:"1px solid rgba(255, 4, 4, 0.3)",borderRadius:"16px",padding:"5px",width:"100%",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column"},y0={margin:0,color:"#FF5F00"};function vB(e){var t,g,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(g=vB(e[t]))&&(n&&(n+=" "),n+=g)}else for(g in e)e[g]&&(n&&(n+=" "),n+=g);return n}function Ee(){for(var e,t,g=0,n="",l=arguments.length;g<l;g++)(e=arguments[g])&&(t=vB(e))&&(n&&(n+=" "),n+=t);return n}function ui(e,t){const g={...t};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const l=n;if(l==="components"||l==="slots")g[l]={...e[l],...g[l]};else if(l==="componentsProps"||l==="slotProps"){const r=e[l],i=t[l];if(!i)g[l]=r||{};else if(!r)g[l]=i;else{g[l]={...i};for(const C in r)if(Object.prototype.hasOwnProperty.call(r,C)){const a=C;g[l][a]=ui(r[a],i[a])}}}else g[l]===void 0&&(g[l]=e[l])}return g}function it(e,t,g=void 0){const n={};for(const l in e){const r=e[l];let i="",C=!0;for(let a=0;a<r.length;a+=1){const d=r[a];d&&(i+=(C===!0?"":" ")+t(d),C=!1,g&&g[d]&&(i+=" "+g[d]))}n[l]=i}return n}function Ao(e,...t){const g=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(n=>g.searchParams.append("args[]",n)),`Minified MUI error #${e}; visit ${g} for the full message.`}function UH(e,t=Number.MIN_SAFE_INTEGER,g=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,g))}function mm(e,t=0,g=1){return UH(e,t,g)}function LH(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let g=e.match(t);return g&&g[0].length===1&&(g=g.map(n=>n+n)),g?`rgb${g.length===4?"a":""}(${g.map((n,l)=>l<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function Lo(e){if(e.type)return e;if(e.charAt(0)==="#")return Lo(LH(e));const t=e.indexOf("("),g=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(g))throw new Error(Ao(9,e));let n=e.substring(t+1,e.length-1),l;if(g==="color"){if(n=n.split(" "),l=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(l))throw new Error(Ao(10,l))}else n=n.split(",");return n=n.map(r=>parseFloat(r)),{type:g,values:n,colorSpace:l}}const QH=e=>{const t=Lo(e);return t.values.slice(0,3).map((g,n)=>t.type.includes("hsl")&&n!==0?`${g}%`:g).join(" ")},Dr=(e,t)=>{try{return QH(e)}catch{return e}};function wa(e){const{type:t,colorSpace:g}=e;let{values:n}=e;return t.includes("rgb")?n=n.map((l,r)=>r<3?parseInt(l,10):l):t.includes("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),t.includes("color")?n=`${g} ${n.join(" ")}`:n=`${n.join(", ")}`,`${t}(${n})`}function YB(e){e=Lo(e);const{values:t}=e,g=t[0],n=t[1]/100,l=t[2]/100,r=n*Math.min(l,1-l),i=(d,A=(d+g/30)%12)=>l-r*Math.max(Math.min(A-3,9-A,1),-1);let C="rgb";const a=[Math.round(i(0)*255),Math.round(i(8)*255),Math.round(i(4)*255)];return e.type==="hsla"&&(C+="a",a.push(t[3])),wa({type:C,values:a})}function ru(e){e=Lo(e);let t=e.type==="hsl"||e.type==="hsla"?Lo(YB(e)).values:e.values;return t=t.map(g=>(e.type!=="color"&&(g/=255),g<=.03928?g/12.92:((g+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function DH(e,t){const g=ru(e),n=ru(t);return(Math.max(g,n)+.05)/(Math.min(g,n)+.05)}function sn(e,t){return e=Lo(e),t=mm(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,wa(e)}function CC(e,t,g){try{return sn(e,t)}catch{return e}}function hm(e,t){if(e=Lo(e),t=mm(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let g=0;g<3;g+=1)e.values[g]*=1-t;return wa(e)}function dt(e,t,g){try{return hm(e,t)}catch{return e}}function pm(e,t){if(e=Lo(e),t=mm(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let g=0;g<3;g+=1)e.values[g]+=(255-e.values[g])*t;else if(e.type.includes("color"))for(let g=0;g<3;g+=1)e.values[g]+=(1-e.values[g])*t;return wa(e)}function At(e,t,g){try{return pm(e,t)}catch{return e}}function jH(e,t=.15){return ru(e)>.5?hm(e,t):pm(e,t)}function aC(e,t,g){try{return jH(e,t)}catch{return e}}const G0=e=>e,PH=()=>{let e=G0;return{configure(t){e=t},generate(t){return e(t)},reset(){e=G0}}},HB=PH();function Me(e){if(typeof e!="string")throw new Error(Ao(7));return e.charAt(0).toUpperCase()+e.slice(1)}function f0(...e){return e.reduce((t,g)=>g==null?t:function(...l){t.apply(this,l),g.apply(this,l)},()=>{})}var mA={exports:{}},rt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B0;function OH(){if(B0)return rt;B0=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),i=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),a=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),B=Symbol.for("react.client.reference");function G(y){if(typeof y=="object"&&y!==null){var S=y.$$typeof;switch(S){case e:switch(y=y.type,y){case g:case l:case n:case a:case d:case p:return y;default:switch(y=y&&y.$$typeof,y){case i:case C:case m:case A:return y;case r:return y;default:return S}}case t:return S}}}return rt.ContextConsumer=r,rt.ContextProvider=i,rt.Element=e,rt.ForwardRef=C,rt.Fragment=g,rt.Lazy=m,rt.Memo=A,rt.Portal=t,rt.Profiler=l,rt.StrictMode=n,rt.Suspense=a,rt.SuspenseList=d,rt.isContextConsumer=function(y){return G(y)===r},rt.isContextProvider=function(y){return G(y)===i},rt.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===e},rt.isForwardRef=function(y){return G(y)===C},rt.isFragment=function(y){return G(y)===g},rt.isLazy=function(y){return G(y)===m},rt.isMemo=function(y){return G(y)===A},rt.isPortal=function(y){return G(y)===t},rt.isProfiler=function(y){return G(y)===l},rt.isStrictMode=function(y){return G(y)===n},rt.isSuspense=function(y){return G(y)===a},rt.isSuspenseList=function(y){return G(y)===d},rt.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===g||y===l||y===n||y===a||y===d||typeof y=="object"&&y!==null&&(y.$$typeof===m||y.$$typeof===A||y.$$typeof===i||y.$$typeof===r||y.$$typeof===C||y.$$typeof===B||y.getModuleId!==void 0)},rt.typeOf=G,rt}var S0;function qH(){return S0||(S0=1,mA.exports=OH()),mA.exports}var wB=qH();function zn(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function FB(e){if(f.isValidElement(e)||wB.isValidElementType(e)||!zn(e))return e;const t={};return Object.keys(e).forEach(g=>{t[g]=FB(e[g])}),t}function mg(e,t,g={clone:!0}){const n=g.clone?{...e}:e;return zn(e)&&zn(t)&&Object.keys(t).forEach(l=>{f.isValidElement(t[l])||wB.isValidElementType(t[l])?n[l]=t[l]:zn(t[l])&&Object.prototype.hasOwnProperty.call(e,l)&&zn(e[l])?n[l]=mg(e[l],t[l],g):g.clone?n[l]=zn(t[l])?FB(t[l]):t[l]:n[l]=t[l]}),n}function ei(e,t){return t?mg(e,t,{clone:!1}):e}function $H(e,t){if(!e.containerQueries)return t;const g=Object.keys(t).filter(n=>n.startsWith("@container")).sort((n,l)=>{const r=/min-width:\s*([0-9.]+)/;return+(n.match(r)?.[1]||0)-+(l.match(r)?.[1]||0)});return g.length?g.reduce((n,l)=>{const r=t[l];return delete n[l],n[l]=r,n},{...t}):t}function _H(e,t){return t==="@"||t.startsWith("@")&&(e.some(g=>t.startsWith(`@${g}`))||!!t.match(/^@\d/))}function ew(e,t){const g=t.match(/^@([^/]+)?\/?(.+)?$/);if(!g)return null;const[,n,l]=g,r=Number.isNaN(+n)?n||0:+n;return e.containerQueries(l).up(r)}function tw(e){const t=(r,i)=>r.replace("@media",i?`@container ${i}`:"@container");function g(r,i){r.up=(...C)=>t(e.breakpoints.up(...C),i),r.down=(...C)=>t(e.breakpoints.down(...C),i),r.between=(...C)=>t(e.breakpoints.between(...C),i),r.only=(...C)=>t(e.breakpoints.only(...C),i),r.not=(...C)=>{const a=t(e.breakpoints.not(...C),i);return a.includes("not all and")?a.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):a}}const n={},l=r=>(g(n,r),n);return g(l),{...e,containerQueries:l}}const Fa={xs:0,sm:600,md:900,lg:1200,xl:1536},V0={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Fa[e]}px)`},gw={containerQueries:e=>({up:t=>{let g=typeof t=="number"?t:Fa[t]||t;return typeof g=="number"&&(g=`${g}px`),e?`@container ${e} (min-width:${g})`:`@container (min-width:${g})`}})};function uo(e,t,g){const n=e.theme||{};if(Array.isArray(t)){const r=n.breakpoints||V0;return t.reduce((i,C,a)=>(i[r.up(r.keys[a])]=g(t[a]),i),{})}if(typeof t=="object"){const r=n.breakpoints||V0;return Object.keys(t).reduce((i,C)=>{if(_H(r.keys,C)){const a=ew(n.containerQueries?n:gw,C);a&&(i[a]=g(t[C],C))}else if(Object.keys(r.values||Fa).includes(C)){const a=r.up(C);i[a]=g(t[C],C)}else{const a=C;i[a]=t[a]}return i},{})}return g(t)}function nw(e={}){return e.keys?.reduce((g,n)=>{const l=e.up(n);return g[l]={},g},{})||{}}function ow(e,t){return e.reduce((g,n)=>{const l=g[n];return(!l||Object.keys(l).length===0)&&delete g[n],g},t)}function Na(e,t,g=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&g){const n=`vars.${t}`.split(".").reduce((l,r)=>l&&l[r]?l[r]:null,e);if(n!=null)return n}return t.split(".").reduce((n,l)=>n&&n[l]!=null?n[l]:null,e)}function ea(e,t,g,n=g){let l;return typeof e=="function"?l=e(g):Array.isArray(e)?l=e[g]||n:l=Na(e,g)||n,t&&(l=t(l,n,e)),l}function zt(e){const{prop:t,cssProperty:g=e.prop,themeKey:n,transform:l}=e,r=i=>{if(i[t]==null)return null;const C=i[t],a=i.theme,d=Na(a,n)||{};return uo(i,C,m=>{let p=ea(d,l,m);return m===p&&typeof m=="string"&&(p=ea(d,l,`${t}${m==="default"?"":Me(m)}`,m)),g===!1?p:{[g]:p}})};return r.propTypes={},r.filterProps=[t],r}function lw(e){const t={};return g=>(t[g]===void 0&&(t[g]=e(g)),t[g])}const Iw={m:"margin",p:"padding"},rw={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},W0={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},iw=lw(e=>{if(e.length>2)if(W0[e])e=W0[e];else return[e];const[t,g]=e.split(""),n=Iw[t],l=rw[g]||"";return Array.isArray(l)?l.map(r=>n+r):[n+l]}),bm=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Zm=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...bm,...Zm];function Ni(e,t,g,n){const l=Na(e,t,!0)??g;return typeof l=="number"||typeof l=="string"?r=>typeof r=="string"?r:typeof l=="string"?l.startsWith("var(")&&r===0?0:l.startsWith("var(")&&r===1?l:`calc(${r} * ${l})`:l*r:Array.isArray(l)?r=>{if(typeof r=="string")return r;const i=Math.abs(r),C=l[i];return r>=0?C:typeof C=="number"?-C:typeof C=="string"&&C.startsWith("var(")?`calc(-1 * ${C})`:`-${C}`}:typeof l=="function"?l:()=>{}}function ym(e){return Ni(e,"spacing",8)}function Ki(e,t){return typeof t=="string"||t==null?t:e(t)}function sw(e,t){return g=>e.reduce((n,l)=>(n[l]=Ki(t,g),n),{})}function Cw(e,t,g,n){if(!t.includes(g))return null;const l=iw(g),r=sw(l,n),i=e[g];return uo(e,i,r)}function NB(e,t){const g=ym(e.theme);return Object.keys(e).map(n=>Cw(e,t,n,g)).reduce(ei,{})}function Ht(e){return NB(e,bm)}Ht.propTypes={};Ht.filterProps=bm;function wt(e){return NB(e,Zm)}wt.propTypes={};wt.filterProps=Zm;function Ka(...e){const t=e.reduce((n,l)=>(l.filterProps.forEach(r=>{n[r]=l}),n),{}),g=n=>Object.keys(n).reduce((l,r)=>t[r]?ei(l,t[r](n)):l,{});return g.propTypes={},g.filterProps=e.reduce((n,l)=>n.concat(l.filterProps),[]),g}function In(e){return typeof e!="number"?e:`${e}px solid`}function cn(e,t){return zt({prop:e,themeKey:"borders",transform:t})}const aw=cn("border",In),cw=cn("borderTop",In),dw=cn("borderRight",In),Aw=cn("borderBottom",In),uw=cn("borderLeft",In),mw=cn("borderColor"),hw=cn("borderTopColor"),pw=cn("borderRightColor"),bw=cn("borderBottomColor"),Zw=cn("borderLeftColor"),yw=cn("outline",In),Gw=cn("outlineColor"),xa=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Ni(e.theme,"shape.borderRadius",4),g=n=>({borderRadius:Ki(t,n)});return uo(e,e.borderRadius,g)}return null};xa.propTypes={};xa.filterProps=["borderRadius"];Ka(aw,cw,dw,Aw,uw,mw,hw,pw,bw,Zw,xa,yw,Gw);const Ea=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Ni(e.theme,"spacing",8),g=n=>({gap:Ki(t,n)});return uo(e,e.gap,g)}return null};Ea.propTypes={};Ea.filterProps=["gap"];const za=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Ni(e.theme,"spacing",8),g=n=>({columnGap:Ki(t,n)});return uo(e,e.columnGap,g)}return null};za.propTypes={};za.filterProps=["columnGap"];const Ma=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Ni(e.theme,"spacing",8),g=n=>({rowGap:Ki(t,n)});return uo(e,e.rowGap,g)}return null};Ma.propTypes={};Ma.filterProps=["rowGap"];const fw=zt({prop:"gridColumn"}),Bw=zt({prop:"gridRow"}),Sw=zt({prop:"gridAutoFlow"}),Vw=zt({prop:"gridAutoColumns"}),Ww=zt({prop:"gridAutoRows"}),Rw=zt({prop:"gridTemplateColumns"}),Xw=zt({prop:"gridTemplateRows"}),kw=zt({prop:"gridTemplateAreas"}),Jw=zt({prop:"gridArea"});Ka(Ea,za,Ma,fw,Bw,Sw,Vw,Ww,Rw,Xw,kw,Jw);function fI(e,t){return t==="grey"?t:e}const vw=zt({prop:"color",themeKey:"palette",transform:fI}),Yw=zt({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:fI}),Hw=zt({prop:"backgroundColor",themeKey:"palette",transform:fI});Ka(vw,Yw,Hw);function Mg(e){return e<=1&&e!==0?`${e*100}%`:e}const ww=zt({prop:"width",transform:Mg}),Gm=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=g=>{const n=e.theme?.breakpoints?.values?.[g]||Fa[g];return n?e.theme?.breakpoints?.unit!=="px"?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:Mg(g)}};return uo(e,e.maxWidth,t)}return null};Gm.filterProps=["maxWidth"];const Fw=zt({prop:"minWidth",transform:Mg}),Nw=zt({prop:"height",transform:Mg}),Kw=zt({prop:"maxHeight",transform:Mg}),xw=zt({prop:"minHeight",transform:Mg});zt({prop:"size",cssProperty:"width",transform:Mg});zt({prop:"size",cssProperty:"height",transform:Mg});const Ew=zt({prop:"boxSizing"});Ka(ww,Gm,Fw,Nw,Kw,xw,Ew);const xi={border:{themeKey:"borders",transform:In},borderTop:{themeKey:"borders",transform:In},borderRight:{themeKey:"borders",transform:In},borderBottom:{themeKey:"borders",transform:In},borderLeft:{themeKey:"borders",transform:In},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:In},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:xa},color:{themeKey:"palette",transform:fI},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:fI},backgroundColor:{themeKey:"palette",transform:fI},p:{style:wt},pt:{style:wt},pr:{style:wt},pb:{style:wt},pl:{style:wt},px:{style:wt},py:{style:wt},padding:{style:wt},paddingTop:{style:wt},paddingRight:{style:wt},paddingBottom:{style:wt},paddingLeft:{style:wt},paddingX:{style:wt},paddingY:{style:wt},paddingInline:{style:wt},paddingInlineStart:{style:wt},paddingInlineEnd:{style:wt},paddingBlock:{style:wt},paddingBlockStart:{style:wt},paddingBlockEnd:{style:wt},m:{style:Ht},mt:{style:Ht},mr:{style:Ht},mb:{style:Ht},ml:{style:Ht},mx:{style:Ht},my:{style:Ht},margin:{style:Ht},marginTop:{style:Ht},marginRight:{style:Ht},marginBottom:{style:Ht},marginLeft:{style:Ht},marginX:{style:Ht},marginY:{style:Ht},marginInline:{style:Ht},marginInlineStart:{style:Ht},marginInlineEnd:{style:Ht},marginBlock:{style:Ht},marginBlockStart:{style:Ht},marginBlockEnd:{style:Ht},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Ea},rowGap:{style:Ma},columnGap:{style:za},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Mg},maxWidth:{style:Gm},minWidth:{transform:Mg},height:{transform:Mg},maxHeight:{transform:Mg},minHeight:{transform:Mg},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function zw(...e){const t=e.reduce((n,l)=>n.concat(Object.keys(l)),[]),g=new Set(t);return e.every(n=>g.size===Object.keys(n).length)}function Mw(e,t){return typeof e=="function"?e(t):e}function Tw(){function e(g,n,l,r){const i={[g]:n,theme:l},C=r[g];if(!C)return{[g]:n};const{cssProperty:a=g,themeKey:d,transform:A,style:m}=C;if(n==null)return null;if(d==="typography"&&n==="inherit")return{[g]:n};const p=Na(l,d)||{};return m?m(i):uo(i,n,G=>{let y=ea(p,A,G);return G===y&&typeof G=="string"&&(y=ea(p,A,`${g}${G==="default"?"":Me(G)}`,G)),a===!1?y:{[a]:y}})}function t(g){const{sx:n,theme:l={}}=g||{};if(!n)return null;const r=l.unstable_sxConfig??xi;function i(C){let a=C;if(typeof C=="function")a=C(l);else if(typeof C!="object")return C;if(!a)return null;const d=nw(l.breakpoints),A=Object.keys(d);let m=d;return Object.keys(a).forEach(p=>{const B=Mw(a[p],l);if(B!=null)if(typeof B=="object")if(r[p])m=ei(m,e(p,B,l,r));else{const G=uo({theme:l},B,y=>({[p]:y}));zw(G,B)?m[p]=t({sx:B,theme:l}):m=ei(m,G)}else m=ei(m,e(p,B,l,r))}),$H(l,ow(A,m))}return Array.isArray(n)?n.map(i):i(n)}return t}const Rl=Tw();Rl.filterProps=["sx"];const Uw=e=>{const t={systemProps:{},otherProps:{}},g=e?.theme?.unstable_sxConfig??xi;return Object.keys(e).forEach(n=>{g[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]}),t};function fm(e){const{sx:t,...g}=e,{systemProps:n,otherProps:l}=Uw(g);let r;return Array.isArray(t)?r=[n,...t]:typeof t=="function"?r=(...i)=>{const C=t(...i);return zn(C)?{...n,...C}:n}:r={...n,...t},{...l,sx:r}}function mi(){return mi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var g=arguments[t];for(var n in g)({}).hasOwnProperty.call(g,n)&&(e[n]=g[n])}return e},mi.apply(null,arguments)}function Lw(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Qw(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Dw=function(){function e(g){var n=this;this._insertTag=function(l){var r;n.tags.length===0?n.insertionPoint?r=n.insertionPoint.nextSibling:n.prepend?r=n.container.firstChild:r=n.before:r=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(l,r),n.tags.push(l)},this.isSpeedy=g.speedy===void 0?!0:g.speedy,this.tags=[],this.ctr=0,this.nonce=g.nonce,this.key=g.key,this.container=g.container,this.prepend=g.prepend,this.insertionPoint=g.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Qw(this));var l=this.tags[this.tags.length-1];if(this.isSpeedy){var r=Lw(l);try{r.insertRule(n,r.cssRules.length)}catch{}}else l.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var l;return(l=n.parentNode)==null?void 0:l.removeChild(n)}),this.tags=[],this.ctr=0},e}(),cg="-ms-",ta="-moz-",$e="-webkit-",KB="comm",Bm="rule",Sm="decl",jw="@import",xB="@keyframes",Pw="@layer",Ow=Math.abs,Ta=String.fromCharCode,qw=Object.assign;function $w(e,t){return lg(e,0)^45?(((t<<2^lg(e,0))<<2^lg(e,1))<<2^lg(e,2))<<2^lg(e,3):0}function EB(e){return e.trim()}function _w(e,t){return(e=t.exec(e))?e[0]:e}function et(e,t,g){return e.replace(t,g)}function iu(e,t){return e.indexOf(t)}function lg(e,t){return e.charCodeAt(t)|0}function hi(e,t,g){return e.slice(t,g)}function xn(e){return e.length}function Vm(e){return e.length}function cC(e,t){return t.push(e),e}function e1(e,t){return e.map(t).join("")}var Ua=1,kI=1,zB=0,wg=0,Dt=0,xI="";function La(e,t,g,n,l,r,i){return{value:e,root:t,parent:g,type:n,props:l,children:r,line:Ua,column:kI,length:i,return:""}}function wr(e,t){return qw(La("",null,null,"",null,null,0),e,{length:-e.length},t)}function t1(){return Dt}function g1(){return Dt=wg>0?lg(xI,--wg):0,kI--,Dt===10&&(kI=1,Ua--),Dt}function Qg(){return Dt=wg<zB?lg(xI,wg++):0,kI++,Dt===10&&(kI=1,Ua++),Dt}function Tn(){return lg(xI,wg)}function wC(){return wg}function Ei(e,t){return hi(xI,e,t)}function pi(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function MB(e){return Ua=kI=1,zB=xn(xI=e),wg=0,[]}function TB(e){return xI="",e}function FC(e){return EB(Ei(wg-1,su(e===91?e+2:e===40?e+1:e)))}function n1(e){for(;(Dt=Tn())&&Dt<33;)Qg();return pi(e)>2||pi(Dt)>3?"":" "}function o1(e,t){for(;--t&&Qg()&&!(Dt<48||Dt>102||Dt>57&&Dt<65||Dt>70&&Dt<97););return Ei(e,wC()+(t<6&&Tn()==32&&Qg()==32))}function su(e){for(;Qg();)switch(Dt){case e:return wg;case 34:case 39:e!==34&&e!==39&&su(Dt);break;case 40:e===41&&su(e);break;case 92:Qg();break}return wg}function l1(e,t){for(;Qg()&&e+Dt!==57;)if(e+Dt===84&&Tn()===47)break;return"/*"+Ei(t,wg-1)+"*"+Ta(e===47?e:Qg())}function I1(e){for(;!pi(Tn());)Qg();return Ei(e,wg)}function r1(e){return TB(NC("",null,null,null,[""],e=MB(e),0,[0],e))}function NC(e,t,g,n,l,r,i,C,a){for(var d=0,A=0,m=i,p=0,B=0,G=0,y=1,S=1,V=1,v=0,R="",k=l,J=r,N=n,K=R;S;)switch(G=v,v=Qg()){case 40:if(G!=108&&lg(K,m-1)==58){iu(K+=et(FC(v),"&","&\f"),"&\f")!=-1&&(V=-1);break}case 34:case 39:case 91:K+=FC(v);break;case 9:case 10:case 13:case 32:K+=n1(G);break;case 92:K+=o1(wC()-1,7);continue;case 47:switch(Tn()){case 42:case 47:cC(i1(l1(Qg(),wC()),t,g),a);break;default:K+="/"}break;case 123*y:C[d++]=xn(K)*V;case 125*y:case 59:case 0:switch(v){case 0:case 125:S=0;case 59+A:V==-1&&(K=et(K,/\f/g,"")),B>0&&xn(K)-m&&cC(B>32?X0(K+";",n,g,m-1):X0(et(K," ","")+";",n,g,m-2),a);break;case 59:K+=";";default:if(cC(N=R0(K,t,g,d,A,l,C,R,k=[],J=[],m),r),v===123)if(A===0)NC(K,t,N,N,k,r,m,C,J);else switch(p===99&&lg(K,3)===110?100:p){case 100:case 108:case 109:case 115:NC(e,N,N,n&&cC(R0(e,N,N,0,0,l,C,R,l,k=[],m),J),l,J,m,C,n?k:J);break;default:NC(K,N,N,N,[""],J,0,C,J)}}d=A=B=0,y=V=1,R=K="",m=i;break;case 58:m=1+xn(K),B=G;default:if(y<1){if(v==123)--y;else if(v==125&&y++==0&&g1()==125)continue}switch(K+=Ta(v),v*y){case 38:V=A>0?1:(K+="\f",-1);break;case 44:C[d++]=(xn(K)-1)*V,V=1;break;case 64:Tn()===45&&(K+=FC(Qg())),p=Tn(),A=m=xn(R=K+=I1(wC())),v++;break;case 45:G===45&&xn(K)==2&&(y=0)}}return r}function R0(e,t,g,n,l,r,i,C,a,d,A){for(var m=l-1,p=l===0?r:[""],B=Vm(p),G=0,y=0,S=0;G<n;++G)for(var V=0,v=hi(e,m+1,m=Ow(y=i[G])),R=e;V<B;++V)(R=EB(y>0?p[V]+" "+v:et(v,/&\f/g,p[V])))&&(a[S++]=R);return La(e,t,g,l===0?Bm:C,a,d,A)}function i1(e,t,g){return La(e,t,g,KB,Ta(t1()),hi(e,2,-2),0)}function X0(e,t,g,n){return La(e,t,g,Sm,hi(e,0,n),hi(e,n+1,-1),n)}function BI(e,t){for(var g="",n=Vm(e),l=0;l<n;l++)g+=t(e[l],l,e,t)||"";return g}function s1(e,t,g,n){switch(e.type){case Pw:if(e.children.length)break;case jw:case Sm:return e.return=e.return||e.value;case KB:return"";case xB:return e.return=e.value+"{"+BI(e.children,n)+"}";case Bm:e.value=e.props.join(",")}return xn(g=BI(e.children,n))?e.return=e.value+"{"+g+"}":""}function C1(e){var t=Vm(e);return function(g,n,l,r){for(var i="",C=0;C<t;C++)i+=e[C](g,n,l,r)||"";return i}}function a1(e){return function(t){t.root||(t=t.return)&&e(t)}}function UB(e){var t=Object.create(null);return function(g){return t[g]===void 0&&(t[g]=e(g)),t[g]}}var c1=function(t,g,n){for(var l=0,r=0;l=r,r=Tn(),l===38&&r===12&&(g[n]=1),!pi(r);)Qg();return Ei(t,wg)},d1=function(t,g){var n=-1,l=44;do switch(pi(l)){case 0:l===38&&Tn()===12&&(g[n]=1),t[n]+=c1(wg-1,g,n);break;case 2:t[n]+=FC(l);break;case 4:if(l===44){t[++n]=Tn()===58?"&\f":"",g[n]=t[n].length;break}default:t[n]+=Ta(l)}while(l=Qg());return t},A1=function(t,g){return TB(d1(MB(t),g))},k0=new WeakMap,u1=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var g=t.value,n=t.parent,l=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&g.charCodeAt(0)!==58&&!k0.get(n))&&!l){k0.set(t,!0);for(var r=[],i=A1(g,r),C=n.props,a=0,d=0;a<i.length;a++)for(var A=0;A<C.length;A++,d++)t.props[d]=r[a]?i[a].replace(/&\f/g,C[A]):C[A]+" "+i[a]}}},m1=function(t){if(t.type==="decl"){var g=t.value;g.charCodeAt(0)===108&&g.charCodeAt(2)===98&&(t.return="",t.value="")}};function LB(e,t){switch($w(e,t)){case 5103:return $e+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return $e+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return $e+e+ta+e+cg+e+e;case 6828:case 4268:return $e+e+cg+e+e;case 6165:return $e+e+cg+"flex-"+e+e;case 5187:return $e+e+et(e,/(\w+).+(:[^]+)/,$e+"box-$1$2"+cg+"flex-$1$2")+e;case 5443:return $e+e+cg+"flex-item-"+et(e,/flex-|-self/,"")+e;case 4675:return $e+e+cg+"flex-line-pack"+et(e,/align-content|flex-|-self/,"")+e;case 5548:return $e+e+cg+et(e,"shrink","negative")+e;case 5292:return $e+e+cg+et(e,"basis","preferred-size")+e;case 6060:return $e+"box-"+et(e,"-grow","")+$e+e+cg+et(e,"grow","positive")+e;case 4554:return $e+et(e,/([^-])(transform)/g,"$1"+$e+"$2")+e;case 6187:return et(et(et(e,/(zoom-|grab)/,$e+"$1"),/(image-set)/,$e+"$1"),e,"")+e;case 5495:case 3959:return et(e,/(image-set\([^]*)/,$e+"$1$`$1");case 4968:return et(et(e,/(.+:)(flex-)?(.*)/,$e+"box-pack:$3"+cg+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+$e+e+e;case 4095:case 3583:case 4068:case 2532:return et(e,/(.+)-inline(.+)/,$e+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(xn(e)-1-t>6)switch(lg(e,t+1)){case 109:if(lg(e,t+4)!==45)break;case 102:return et(e,/(.+:)(.+)-([^]+)/,"$1"+$e+"$2-$3$1"+ta+(lg(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~iu(e,"stretch")?LB(et(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(lg(e,t+1)!==115)break;case 6444:switch(lg(e,xn(e)-3-(~iu(e,"!important")&&10))){case 107:return et(e,":",":"+$e)+e;case 101:return et(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+$e+(lg(e,14)===45?"inline-":"")+"box$3$1"+$e+"$2$3$1"+cg+"$2box$3")+e}break;case 5936:switch(lg(e,t+11)){case 114:return $e+e+cg+et(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return $e+e+cg+et(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return $e+e+cg+et(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return $e+e+cg+e+e}return e}var h1=function(t,g,n,l){if(t.length>-1&&!t.return)switch(t.type){case Sm:t.return=LB(t.value,t.length);break;case xB:return BI([wr(t,{value:et(t.value,"@","@"+$e)})],l);case Bm:if(t.length)return e1(t.props,function(r){switch(_w(r,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return BI([wr(t,{props:[et(r,/:(read-\w+)/,":"+ta+"$1")]})],l);case"::placeholder":return BI([wr(t,{props:[et(r,/:(plac\w+)/,":"+$e+"input-$1")]}),wr(t,{props:[et(r,/:(plac\w+)/,":"+ta+"$1")]}),wr(t,{props:[et(r,/:(plac\w+)/,cg+"input-$1")]})],l)}return""})}},p1=[h1],b1=function(t){var g=t.key;if(g==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(y){var S=y.getAttribute("data-emotion");S.indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var l=t.stylisPlugins||p1,r={},i,C=[];i=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+g+' "]'),function(y){for(var S=y.getAttribute("data-emotion").split(" "),V=1;V<S.length;V++)r[S[V]]=!0;C.push(y)});var a,d=[u1,m1];{var A,m=[s1,a1(function(y){A.insert(y)})],p=C1(d.concat(l,m)),B=function(S){return BI(r1(S),p)};a=function(S,V,v,R){A=v,B(S?S+"{"+V.styles+"}":V.styles),R&&(G.inserted[V.name]=!0)}}var G={key:g,sheet:new Dw({key:g,container:i,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:r,registered:{},insert:a};return G.sheet.hydrate(C),G},hA={exports:{}},nt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0;function Z1(){if(J0)return nt;J0=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,g=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,l=e?Symbol.for("react.strict_mode"):60108,r=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,C=e?Symbol.for("react.context"):60110,a=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,A=e?Symbol.for("react.forward_ref"):60112,m=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,B=e?Symbol.for("react.memo"):60115,G=e?Symbol.for("react.lazy"):60116,y=e?Symbol.for("react.block"):60121,S=e?Symbol.for("react.fundamental"):60117,V=e?Symbol.for("react.responder"):60118,v=e?Symbol.for("react.scope"):60119;function R(J){if(typeof J=="object"&&J!==null){var N=J.$$typeof;switch(N){case t:switch(J=J.type,J){case a:case d:case n:case r:case l:case m:return J;default:switch(J=J&&J.$$typeof,J){case C:case A:case G:case B:case i:return J;default:return N}}case g:return N}}}function k(J){return R(J)===d}return nt.AsyncMode=a,nt.ConcurrentMode=d,nt.ContextConsumer=C,nt.ContextProvider=i,nt.Element=t,nt.ForwardRef=A,nt.Fragment=n,nt.Lazy=G,nt.Memo=B,nt.Portal=g,nt.Profiler=r,nt.StrictMode=l,nt.Suspense=m,nt.isAsyncMode=function(J){return k(J)||R(J)===a},nt.isConcurrentMode=k,nt.isContextConsumer=function(J){return R(J)===C},nt.isContextProvider=function(J){return R(J)===i},nt.isElement=function(J){return typeof J=="object"&&J!==null&&J.$$typeof===t},nt.isForwardRef=function(J){return R(J)===A},nt.isFragment=function(J){return R(J)===n},nt.isLazy=function(J){return R(J)===G},nt.isMemo=function(J){return R(J)===B},nt.isPortal=function(J){return R(J)===g},nt.isProfiler=function(J){return R(J)===r},nt.isStrictMode=function(J){return R(J)===l},nt.isSuspense=function(J){return R(J)===m},nt.isValidElementType=function(J){return typeof J=="string"||typeof J=="function"||J===n||J===d||J===r||J===l||J===m||J===p||typeof J=="object"&&J!==null&&(J.$$typeof===G||J.$$typeof===B||J.$$typeof===i||J.$$typeof===C||J.$$typeof===A||J.$$typeof===S||J.$$typeof===V||J.$$typeof===v||J.$$typeof===y)},nt.typeOf=R,nt}var v0;function y1(){return v0||(v0=1,hA.exports=Z1()),hA.exports}var pA,Y0;function G1(){if(Y0)return pA;Y0=1;var e=y1(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},g={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},r={};r[e.ForwardRef]=n,r[e.Memo]=l;function i(G){return e.isMemo(G)?l:r[G.$$typeof]||t}var C=Object.defineProperty,a=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,A=Object.getOwnPropertyDescriptor,m=Object.getPrototypeOf,p=Object.prototype;function B(G,y,S){if(typeof y!="string"){if(p){var V=m(y);V&&V!==p&&B(G,V,S)}var v=a(y);d&&(v=v.concat(d(y)));for(var R=i(G),k=i(y),J=0;J<v.length;++J){var N=v[J];if(!g[N]&&!(S&&S[N])&&!(k&&k[N])&&!(R&&R[N])){var K=A(y,N);try{C(G,N,K)}catch{}}}}return G}return pA=B,pA}G1();var f1=!0;function QB(e,t,g){var n="";return g.split(" ").forEach(function(l){e[l]!==void 0?t.push(e[l]+";"):l&&(n+=l+" ")}),n}var Wm=function(t,g,n){var l=t.key+"-"+g.name;(n===!1||f1===!1)&&t.registered[l]===void 0&&(t.registered[l]=g.styles)},Rm=function(t,g,n){Wm(t,g,n);var l=t.key+"-"+g.name;if(t.inserted[g.name]===void 0){var r=g;do t.insert(g===r?"."+l:"",r,t.sheet,!0),r=r.next;while(r!==void 0)}};function B1(e){for(var t=0,g,n=0,l=e.length;l>=4;++n,l-=4)g=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,g=(g&65535)*1540483477+((g>>>16)*59797<<16),g^=g>>>24,t=(g&65535)*1540483477+((g>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(l){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var S1={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},V1=/[A-Z]|^ms/g,W1=/_EMO_([^_]+?)_([^]*?)_EMO_/g,DB=function(t){return t.charCodeAt(1)===45},H0=function(t){return t!=null&&typeof t!="boolean"},bA=UB(function(e){return DB(e)?e:e.replace(V1,"-$&").toLowerCase()}),w0=function(t,g){switch(t){case"animation":case"animationName":if(typeof g=="string")return g.replace(W1,function(n,l,r){return En={name:l,styles:r,next:En},l})}return S1[t]!==1&&!DB(t)&&typeof g=="number"&&g!==0?g+"px":g};function bi(e,t,g){if(g==null)return"";var n=g;if(n.__emotion_styles!==void 0)return n;switch(typeof g){case"boolean":return"";case"object":{var l=g;if(l.anim===1)return En={name:l.name,styles:l.styles,next:En},l.name;var r=g;if(r.styles!==void 0){var i=r.next;if(i!==void 0)for(;i!==void 0;)En={name:i.name,styles:i.styles,next:En},i=i.next;var C=r.styles+";";return C}return R1(e,t,g)}case"function":{if(e!==void 0){var a=En,d=g(e);return En=a,bi(e,t,d)}break}}var A=g;if(t==null)return A;var m=t[A];return m!==void 0?m:A}function R1(e,t,g){var n="";if(Array.isArray(g))for(var l=0;l<g.length;l++)n+=bi(e,t,g[l])+";";else for(var r in g){var i=g[r];if(typeof i!="object"){var C=i;t!=null&&t[C]!==void 0?n+=r+"{"+t[C]+"}":H0(C)&&(n+=bA(r)+":"+w0(r,C)+";")}else if(Array.isArray(i)&&typeof i[0]=="string"&&(t==null||t[i[0]]===void 0))for(var a=0;a<i.length;a++)H0(i[a])&&(n+=bA(r)+":"+w0(r,i[a])+";");else{var d=bi(e,t,i);switch(r){case"animation":case"animationName":{n+=bA(r)+":"+d+";";break}default:n+=r+"{"+d+"}"}}}return n}var F0=/label:\s*([^\s;{]+)\s*(;|$)/g,En;function zi(e,t,g){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,l="";En=void 0;var r=e[0];if(r==null||r.raw===void 0)n=!1,l+=bi(g,t,r);else{var i=r;l+=i[0]}for(var C=1;C<e.length;C++)if(l+=bi(g,t,e[C]),n){var a=r;l+=a[C]}F0.lastIndex=0;for(var d="",A;(A=F0.exec(l))!==null;)d+="-"+A[1];var m=B1(l)+d;return{name:m,styles:l,next:En}}var X1=function(t){return t()},jB=ii.useInsertionEffect?ii.useInsertionEffect:!1,PB=jB||X1,N0=jB||f.useLayoutEffect,OB=f.createContext(typeof HTMLElement<"u"?b1({key:"css"}):null);OB.Provider;var Xm=function(t){return f.forwardRef(function(g,n){var l=f.useContext(OB);return t(g,l,n)})},Qa=f.createContext({}),km={}.hasOwnProperty,Cu="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",k1=function(t,g){var n={};for(var l in g)km.call(g,l)&&(n[l]=g[l]);return n[Cu]=t,n},J1=function(t){var g=t.cache,n=t.serialized,l=t.isStringTag;return Wm(g,n,l),PB(function(){return Rm(g,n,l)}),null},v1=Xm(function(e,t,g){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var l=e[Cu],r=[n],i="";typeof e.className=="string"?i=QB(t.registered,r,e.className):e.className!=null&&(i=e.className+" ");var C=zi(r,void 0,f.useContext(Qa));i+=t.key+"-"+C.name;var a={};for(var d in e)km.call(e,d)&&d!=="css"&&d!==Cu&&(a[d]=e[d]);return a.className=i,g&&(a.ref=g),f.createElement(f.Fragment,null,f.createElement(J1,{cache:t,serialized:C,isStringTag:typeof l=="string"}),f.createElement(l,a))}),Y1=v1,K0=function(t,g){var n=arguments;if(g==null||!km.call(g,"css"))return f.createElement.apply(void 0,n);var l=n.length,r=new Array(l);r[0]=Y1,r[1]=k1(t,g);for(var i=2;i<l;i++)r[i]=n[i];return f.createElement.apply(null,r)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(K0||(K0={}));var H1=Xm(function(e,t){var g=e.styles,n=zi([g],void 0,f.useContext(Qa)),l=f.useRef();return N0(function(){var r=t.key+"-global",i=new t.sheet.constructor({key:r,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),C=!1,a=document.querySelector('style[data-emotion="'+r+" "+n.name+'"]');return t.sheet.tags.length&&(i.before=t.sheet.tags[0]),a!==null&&(C=!0,a.setAttribute("data-emotion",r),i.hydrate([a])),l.current=[i,C],function(){i.flush()}},[t]),N0(function(){var r=l.current,i=r[0],C=r[1];if(C){r[1]=!1;return}if(n.next!==void 0&&Rm(t,n.next,!0),i.tags.length){var a=i.tags[i.tags.length-1].nextElementSibling;i.before=a,i.flush()}t.insert("",n,i,!1)},[t,n.name]),null});function Jm(){for(var e=arguments.length,t=new Array(e),g=0;g<e;g++)t[g]=arguments[g];return zi(t)}function Mi(){var e=Jm.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var w1=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,F1=UB(function(e){return w1.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),N1=F1,K1=function(t){return t!=="theme"},x0=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?N1:K1},E0=function(t,g,n){var l;if(g){var r=g.shouldForwardProp;l=t.__emotion_forwardProp&&r?function(i){return t.__emotion_forwardProp(i)&&r(i)}:r}return typeof l!="function"&&n&&(l=t.__emotion_forwardProp),l},x1=function(t){var g=t.cache,n=t.serialized,l=t.isStringTag;return Wm(g,n,l),PB(function(){return Rm(g,n,l)}),null},E1=function e(t,g){var n=t.__emotion_real===t,l=n&&t.__emotion_base||t,r,i;g!==void 0&&(r=g.label,i=g.target);var C=E0(t,g,n),a=C||x0(l),d=!a("as");return function(){var A=arguments,m=n&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(r!==void 0&&m.push("label:"+r+";"),A[0]==null||A[0].raw===void 0)m.push.apply(m,A);else{var p=A[0];m.push(p[0]);for(var B=A.length,G=1;G<B;G++)m.push(A[G],p[G])}var y=Xm(function(S,V,v){var R=d&&S.as||l,k="",J=[],N=S;if(S.theme==null){N={};for(var K in S)N[K]=S[K];N.theme=f.useContext(Qa)}typeof S.className=="string"?k=QB(V.registered,J,S.className):S.className!=null&&(k=S.className+" ");var X=zi(m.concat(J),V.registered,N);k+=V.key+"-"+X.name,i!==void 0&&(k+=" "+i);var w=d&&C===void 0?x0(R):a,h={};for(var Y in S)d&&Y==="as"||w(Y)&&(h[Y]=S[Y]);return h.className=k,v&&(h.ref=v),f.createElement(f.Fragment,null,f.createElement(x1,{cache:V,serialized:X,isStringTag:typeof R=="string"}),f.createElement(R,h))});return y.displayName=r!==void 0?r:"Styled("+(typeof l=="string"?l:l.displayName||l.name||"Component")+")",y.defaultProps=t.defaultProps,y.__emotion_real=y,y.__emotion_base=l,y.__emotion_styles=m,y.__emotion_forwardProp=C,Object.defineProperty(y,"toString",{value:function(){return"."+i}}),y.withComponent=function(S,V){var v=e(S,mi({},g,V,{shouldForwardProp:E0(y,V,!0)}));return v.apply(void 0,m)},y}},z1=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],au=E1.bind(null);z1.forEach(function(e){au[e]=au(e)});function M1(e){return e==null||Object.keys(e).length===0}function T1(e){const{styles:t,defaultTheme:g={}}=e,n=typeof t=="function"?l=>t(M1(l)?g:l):t;return Z.jsx(H1,{styles:n})}function qB(e,t){return au(e,t)}function U1(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const z0=[];function M0(e){return z0[0]=e,zi(z0)}const L1=e=>{const t=Object.keys(e).map(g=>({key:g,val:e[g]}))||[];return t.sort((g,n)=>g.val-n.val),t.reduce((g,n)=>({...g,[n.key]:n.val}),{})};function Q1(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:g="px",step:n=5,...l}=e,r=L1(t),i=Object.keys(r);function C(p){return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${g})`}function a(p){return`@media (max-width:${(typeof t[p]=="number"?t[p]:p)-n/100}${g})`}function d(p,B){const G=i.indexOf(B);return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${g}) and (max-width:${(G!==-1&&typeof t[i[G]]=="number"?t[i[G]]:B)-n/100}${g})`}function A(p){return i.indexOf(p)+1<i.length?d(p,i[i.indexOf(p)+1]):C(p)}function m(p){const B=i.indexOf(p);return B===0?C(i[1]):B===i.length-1?a(i[B]):d(p,i[i.indexOf(p)+1]).replace("@media","@media not all and")}return{keys:i,values:r,up:C,down:a,between:d,only:A,not:m,unit:g,...l}}const D1={borderRadius:4};function $B(e=8,t=ym({spacing:e})){if(e.mui)return e;const g=(...n)=>(n.length===0?[1]:n).map(r=>{const i=t(r);return typeof i=="number"?`${i}px`:i}).join(" ");return g.mui=!0,g}function j1(e,t){const g=this;if(g.vars){if(!g.colorSchemes?.[e]||typeof g.getColorSchemeSelector!="function")return{};let n=g.getColorSchemeSelector(e);return n==="&"?t:((n.includes("data-")||n.includes("."))&&(n=`*:where(${n.replace(/\s*&$/,"")}) &`),{[n]:t})}return g.palette.mode===e?t:{}}function Da(e={},...t){const{breakpoints:g={},palette:n={},spacing:l,shape:r={},...i}=e,C=Q1(g),a=$B(l);let d=mg({breakpoints:C,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:a,shape:{...D1,...r}},i);return d=tw(d),d.applyStyles=j1,d=t.reduce((A,m)=>mg(A,m),d),d.unstable_sxConfig={...xi,...i?.unstable_sxConfig},d.unstable_sx=function(m){return Rl({sx:m,theme:this})},d}function P1(e){return Object.keys(e).length===0}function O1(e=null){const t=f.useContext(Qa);return!t||P1(t)?e:t}const q1=Da();function Ti(e=q1){return O1(e)}function $1({styles:e,themeId:t,defaultTheme:g={}}){const n=Ti(g),l=typeof e=="function"?e(t&&n[t]||n):e;return Z.jsx(T1,{styles:l})}function _1(e={}){const{themeId:t,defaultTheme:g,defaultClassName:n="MuiBox-root",generateClassName:l}=e,r=qB("div",{shouldForwardProp:C=>C!=="theme"&&C!=="sx"&&C!=="as"})(Rl);return f.forwardRef(function(a,d){const A=Ti(g),{className:m,component:p="div",...B}=fm(a);return Z.jsx(r,{as:p,ref:d,className:Ee(m,l?l(n):n),theme:t&&A[t]||A,...B})})}const eF={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function st(e,t,g="Mui"){const n=eF[t];return n?`${g}-${n}`:`${HB.generate(e)}-${t}`}function gt(e,t,g="Mui"){const n={};return t.forEach(l=>{n[l]=st(e,l,g)}),n}function _B(e){const{variants:t,...g}=e,n={variants:t,style:M0(g),isProcessed:!0};return n.style===g||t&&t.forEach(l=>{typeof l.style!="function"&&(l.style=M0(l.style))}),n}const tF=Da();function ZA(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function gF(e){return e?(t,g)=>g[e]:null}function nF(e,t,g){e.theme=lF(e.theme)?g:e.theme[t]||e.theme}function KC(e,t){const g=typeof t=="function"?t(e):t;if(Array.isArray(g))return g.flatMap(n=>KC(e,n));if(Array.isArray(g?.variants)){let n;if(g.isProcessed)n=g.style;else{const{variants:l,...r}=g;n=r}return eS(e,g.variants,[n])}return g?.isProcessed?g.style:g}function eS(e,t,g=[]){let n;e:for(let l=0;l<t.length;l+=1){const r=t[l];if(typeof r.props=="function"){if(n??={...e,...e.ownerState,ownerState:e.ownerState},!r.props(n))continue}else for(const i in r.props)if(e[i]!==r.props[i]&&e.ownerState?.[i]!==r.props[i])continue e;typeof r.style=="function"?(n??={...e,...e.ownerState,ownerState:e.ownerState},g.push(r.style(n))):g.push(r.style)}return g}function tS(e={}){const{themeId:t,defaultTheme:g=tF,rootShouldForwardProp:n=ZA,slotShouldForwardProp:l=ZA}=e;function r(C){nF(C,t,g)}return(C,a={})=>{U1(C,J=>J.filter(N=>N!==Rl));const{name:d,slot:A,skipVariantsResolver:m,skipSx:p,overridesResolver:B=gF(rF(A)),...G}=a,y=m!==void 0?m:A&&A!=="Root"&&A!=="root"||!1,S=p||!1;let V=ZA;A==="Root"||A==="root"?V=n:A?V=l:IF(C)&&(V=void 0);const v=qB(C,{shouldForwardProp:V,label:oF(),...G}),R=J=>{if(J.__emotion_real===J)return J;if(typeof J=="function")return function(K){return KC(K,J)};if(zn(J)){const N=_B(J);return N.variants?function(X){return KC(X,N)}:N.style}return J},k=(...J)=>{const N=[],K=J.map(R),X=[];if(N.push(r),d&&B&&X.push(function(z){const U=z.theme.components?.[d]?.styleOverrides;if(!U)return null;const P={};for(const O in U)P[O]=KC(z,U[O]);return B(z,P)}),d&&!y&&X.push(function(z){const U=z.theme?.components?.[d]?.variants;return U?eS(z,U):null}),S||X.push(Rl),Array.isArray(K[0])){const Y=K.shift(),z=new Array(N.length).fill(""),T=new Array(X.length).fill("");let U;U=[...z,...Y,...T],U.raw=[...z,...Y.raw,...T],N.unshift(U)}const w=[...N,...K,...X],h=v(...w);return C.muiName&&(h.muiName=C.muiName),h};return v.withConfig&&(k.withConfig=v.withConfig),k}}function oF(e,t){return void 0}function lF(e){for(const t in e)return!1;return!0}function IF(e){return typeof e=="string"&&e.charCodeAt(0)>96}function rF(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const iF=tS();function sF(e){const{theme:t,name:g,props:n}=e;return!t||!t.components||!t.components[g]||!t.components[g].defaultProps?n:ui(t.components[g].defaultProps,n)}function CF({props:e,name:t,defaultTheme:g,themeId:n}){let l=Ti(g);return n&&(l=l[n]||l),sF({theme:l,name:t,props:e})}const Qo=typeof window<"u"?f.useLayoutEffect:f.useEffect,aF=f.createContext(),cF=()=>f.useContext(aF)??!1,dF=f.createContext(void 0);function AF(e){const{theme:t,name:g,props:n}=e;if(!t||!t.components||!t.components[g])return n;const l=t.components[g];return l.defaultProps?ui(l.defaultProps,n):!l.styleOverrides&&!l.variants?ui(l,n):n}function uF({props:e,name:t}){const g=f.useContext(dF);return AF({props:e,name:t,theme:{components:g}})}const T0={theme:void 0};function mF(e){let t,g;return function(l){let r=t;return(r===void 0||l.theme!==g)&&(T0.theme=l.theme,r=_B(e(T0)),t=r,g=l.theme),r}}function hF(e=""){function t(...n){if(!n.length)return"";const l=n[0];return typeof l=="string"&&!l.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${l}${t(...n.slice(1))})`:`, ${l}`}return(n,...l)=>`var(--${e?`${e}-`:""}${n}${t(...l)})`}const U0=(e,t,g,n=[])=>{let l=e;t.forEach((r,i)=>{i===t.length-1?Array.isArray(l)?l[Number(r)]=g:l&&typeof l=="object"&&(l[r]=g):l&&typeof l=="object"&&(l[r]||(l[r]=n.includes(r)?[]:{}),l=l[r])})},pF=(e,t,g)=>{function n(l,r=[],i=[]){Object.entries(l).forEach(([C,a])=>{(!g||g&&!g([...r,C]))&&a!=null&&(typeof a=="object"&&Object.keys(a).length>0?n(a,[...r,C],Array.isArray(a)?[...i,C]:i):t([...r,C],a,i))})}n(e)},bF=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>e.includes(n))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function yA(e,t){const{prefix:g,shouldSkipGeneratingVar:n}=t||{},l={},r={},i={};return pF(e,(C,a,d)=>{if((typeof a=="string"||typeof a=="number")&&(!n||!n(C,a))){const A=`--${g?`${g}-`:""}${C.join("-")}`,m=bF(C,a);Object.assign(l,{[A]:m}),U0(r,C,`var(${A})`,d),U0(i,C,`var(${A}, ${m})`,d)}},C=>C[0]==="vars"),{css:l,vars:r,varsWithDefaults:i}}function ZF(e,t={}){const{getSelector:g=S,disableCssColorScheme:n,colorSchemeSelector:l}=t,{colorSchemes:r={},components:i,defaultColorScheme:C="light",...a}=e,{vars:d,css:A,varsWithDefaults:m}=yA(a,t);let p=m;const B={},{[C]:G,...y}=r;if(Object.entries(y||{}).forEach(([R,k])=>{const{vars:J,css:N,varsWithDefaults:K}=yA(k,t);p=mg(p,K),B[R]={css:N,vars:J}}),G){const{css:R,vars:k,varsWithDefaults:J}=yA(G,t);p=mg(p,J),B[C]={css:R,vars:k}}function S(R,k){let J=l;if(l==="class"&&(J=".%s"),l==="data"&&(J="[data-%s]"),l?.startsWith("data-")&&!l.includes("%s")&&(J=`[${l}="%s"]`),R){if(J==="media")return e.defaultColorScheme===R?":root":{[`@media (prefers-color-scheme: ${r[R]?.palette?.mode||R})`]:{":root":k}};if(J)return e.defaultColorScheme===R?`:root, ${J.replace("%s",String(R))}`:J.replace("%s",String(R))}return":root"}return{vars:p,generateThemeVars:()=>{let R={...d};return Object.entries(B).forEach(([,{vars:k}])=>{R=mg(R,k)}),R},generateStyleSheets:()=>{const R=[],k=e.defaultColorScheme||"light";function J(X,w){Object.keys(w).length&&R.push(typeof X=="string"?{[X]:{...w}}:X)}J(g(void 0,{...A}),A);const{[k]:N,...K}=B;if(N){const{css:X}=N,w=r[k]?.palette?.mode,h=!n&&w?{colorScheme:w,...X}:{...X};J(g(k,{...h}),h)}return Object.entries(K).forEach(([X,{css:w}])=>{const h=r[X]?.palette?.mode,Y=!n&&h?{colorScheme:h,...w}:{...w};J(g(X,{...Y}),Y)}),R}}}function yF(e){return function(g){return e==="media"?`@media (prefers-color-scheme: ${g})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${g}"] &`:e==="class"?`.${g} &`:e==="data"?`[data-${g}] &`:`${e.replace("%s",g)} &`:"&"}}function xC(e,t){return f.isValidElement(e)&&t.indexOf(e.type.muiName??e.type?._payload?.value?.muiName)!==-1}const GF=(e,t)=>e.filter(g=>t.includes(g)),EI=(e,t,g)=>{const n=e.keys[0];Array.isArray(t)?t.forEach((l,r)=>{g((i,C)=>{r<=e.keys.length-1&&(r===0?Object.assign(i,C):i[e.up(e.keys[r])]=C)},l)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:GF(e.keys,Object.keys(t))).forEach(r=>{if(e.keys.includes(r)){const i=t[r];i!==void 0&&g((C,a)=>{n===r?Object.assign(C,a):C[e.up(r)]=a},i)}}):(typeof t=="number"||typeof t=="string")&&g((l,r)=>{Object.assign(l,r)},t)};function ga(e){return`--Grid-${e}Spacing`}function ja(e){return`--Grid-parent-${e}Spacing`}const L0="--Grid-columns",SI="--Grid-parent-columns",fF=({theme:e,ownerState:t})=>{const g={};return EI(e.breakpoints,t.size,(n,l)=>{let r={};l==="grow"&&(r={flexBasis:0,flexGrow:1,maxWidth:"100%"}),l==="auto"&&(r={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof l=="number"&&(r={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${l} / var(${SI}) - (var(${SI}) - ${l}) * (var(${ja("column")}) / var(${SI})))`}),n(g,r)}),g},BF=({theme:e,ownerState:t})=>{const g={};return EI(e.breakpoints,t.offset,(n,l)=>{let r={};l==="auto"&&(r={marginLeft:"auto"}),typeof l=="number"&&(r={marginLeft:l===0?"0px":`calc(100% * ${l} / var(${SI}) + var(${ja("column")}) * ${l} / var(${SI}))`}),n(g,r)}),g},SF=({theme:e,ownerState:t})=>{if(!t.container)return{};const g={[L0]:12};return EI(e.breakpoints,t.columns,(n,l)=>{const r=l??12;n(g,{[L0]:r,"> *":{[SI]:r}})}),g},VF=({theme:e,ownerState:t})=>{if(!t.container)return{};const g={};return EI(e.breakpoints,t.rowSpacing,(n,l)=>{const r=typeof l=="string"?l:e.spacing?.(l);n(g,{[ga("row")]:r,"> *":{[ja("row")]:r}})}),g},WF=({theme:e,ownerState:t})=>{if(!t.container)return{};const g={};return EI(e.breakpoints,t.columnSpacing,(n,l)=>{const r=typeof l=="string"?l:e.spacing?.(l);n(g,{[ga("column")]:r,"> *":{[ja("column")]:r}})}),g},RF=({theme:e,ownerState:t})=>{if(!t.container)return{};const g={};return EI(e.breakpoints,t.direction,(n,l)=>{n(g,{flexDirection:l})}),g},XF=({ownerState:e})=>({minWidth:0,boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",...e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},gap:`var(${ga("row")}) var(${ga("column")})`}}),kF=e=>{const t=[];return Object.entries(e).forEach(([g,n])=>{n!==!1&&n!==void 0&&t.push(`grid-${g}-${String(n)}`)}),t},JF=(e,t="xs")=>{function g(n){return n===void 0?!1:typeof n=="string"&&!Number.isNaN(Number(n))||typeof n=="number"&&n>0}if(g(e))return[`spacing-${t}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const n=[];return Object.entries(e).forEach(([l,r])=>{g(r)&&n.push(`spacing-${l}-${String(r)}`)}),n}return[]},vF=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([t,g])=>`direction-${t}-${g}`):[`direction-xs-${String(e)}`];function YF(e,t){e.item!==void 0&&delete e.item,e.zeroMinWidth!==void 0&&delete e.zeroMinWidth,t.keys.forEach(g=>{e[g]!==void 0&&delete e[g]})}const HF=Da(),wF=iF("div",{name:"MuiGrid",slot:"Root"});function FF(e){return CF({props:e,name:"MuiGrid",defaultTheme:HF})}function NF(e={}){const{createStyledComponent:t=wF,useThemeProps:g=FF,useTheme:n=Ti,componentName:l="MuiGrid"}=e,r=(d,A)=>{const{container:m,direction:p,spacing:B,wrap:G,size:y}=d,S={root:["root",m&&"container",G!=="wrap"&&`wrap-xs-${String(G)}`,...vF(p),...kF(y),...m?JF(B,A.breakpoints.keys[0]):[]]};return it(S,V=>st(l,V),{})};function i(d,A,m=()=>!0){const p={};return d===null||(Array.isArray(d)?d.forEach((B,G)=>{B!==null&&m(B)&&A.keys[G]&&(p[A.keys[G]]=B)}):typeof d=="object"?Object.keys(d).forEach(B=>{const G=d[B];G!=null&&m(G)&&(p[B]=G)}):p[A.keys[0]]=d),p}const C=t(SF,WF,VF,fF,RF,XF,BF),a=f.forwardRef(function(A,m){const p=n(),B=g(A),G=fm(B);YF(G,p.breakpoints);const{className:y,children:S,columns:V=12,container:v=!1,component:R="div",direction:k="row",wrap:J="wrap",size:N={},offset:K={},spacing:X=0,rowSpacing:w=X,columnSpacing:h=X,unstable_level:Y=0,...z}=G,T=i(N,p.breakpoints,F=>F!==!1),U=i(K,p.breakpoints),P=A.columns??(Y?void 0:V),O=A.spacing??(Y?void 0:X),_=A.rowSpacing??A.spacing??(Y?void 0:w),j=A.columnSpacing??A.spacing??(Y?void 0:h),Q={...G,level:Y,columns:P,container:v,direction:k,wrap:J,spacing:O,rowSpacing:_,columnSpacing:j,size:T,offset:U},$=r(Q,p);return Z.jsx(C,{ref:m,as:R,ownerState:Q,className:Ee($.root,y),...z,children:f.Children.map(S,F=>f.isValidElement(F)&&xC(F,["Grid"])&&v&&F.props.container?f.cloneElement(F,{unstable_level:F.props?.unstable_level??Y+1}):F)})});return a.muiName="Grid",a}const Zi={black:"#000",white:"#fff"},KF={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},iI={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},sI={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Fr={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},CI={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},aI={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},cI={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function gS(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Zi.white,default:Zi.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const xF=gS();function nS(){return{text:{primary:Zi.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Zi.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const Q0=nS();function D0(e,t,g,n){const l=n.light||n,r=n.dark||n*1.5;e[t]||(e.hasOwnProperty(g)?e[t]=e[g]:t==="light"?e.light=pm(e.main,l):t==="dark"&&(e.dark=hm(e.main,r)))}function EF(e="light"){return e==="dark"?{main:CI[200],light:CI[50],dark:CI[400]}:{main:CI[700],light:CI[400],dark:CI[800]}}function zF(e="light"){return e==="dark"?{main:iI[200],light:iI[50],dark:iI[400]}:{main:iI[500],light:iI[300],dark:iI[700]}}function MF(e="light"){return e==="dark"?{main:sI[500],light:sI[300],dark:sI[700]}:{main:sI[700],light:sI[400],dark:sI[800]}}function TF(e="light"){return e==="dark"?{main:aI[400],light:aI[300],dark:aI[700]}:{main:aI[700],light:aI[500],dark:aI[900]}}function UF(e="light"){return e==="dark"?{main:cI[400],light:cI[300],dark:cI[700]}:{main:cI[800],light:cI[500],dark:cI[900]}}function LF(e="light"){return e==="dark"?{main:Fr[400],light:Fr[300],dark:Fr[700]}:{main:"#ed6c02",light:Fr[500],dark:Fr[900]}}function vm(e){const{mode:t="light",contrastThreshold:g=3,tonalOffset:n=.2,...l}=e,r=e.primary||EF(t),i=e.secondary||zF(t),C=e.error||MF(t),a=e.info||TF(t),d=e.success||UF(t),A=e.warning||LF(t);function m(y){return DH(y,Q0.text.primary)>=g?Q0.text.primary:xF.text.primary}const p=({color:y,name:S,mainShade:V=500,lightShade:v=300,darkShade:R=700})=>{if(y={...y},!y.main&&y[V]&&(y.main=y[V]),!y.hasOwnProperty("main"))throw new Error(Ao(11,S?` (${S})`:"",V));if(typeof y.main!="string")throw new Error(Ao(12,S?` (${S})`:"",JSON.stringify(y.main)));return D0(y,"light",v,n),D0(y,"dark",R,n),y.contrastText||(y.contrastText=m(y.main)),y};let B;return t==="light"?B=gS():t==="dark"&&(B=nS()),mg({common:{...Zi},mode:t,primary:p({color:r,name:"primary"}),secondary:p({color:i,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:p({color:C,name:"error"}),warning:p({color:A,name:"warning"}),info:p({color:a,name:"info"}),success:p({color:d,name:"success"}),grey:KF,contrastThreshold:g,getContrastText:m,augmentColor:p,tonalOffset:n,...B},l)}function QF(e){const t={};return Object.entries(e).forEach(n=>{const[l,r]=n;typeof r=="object"&&(t[l]=`${r.fontStyle?`${r.fontStyle} `:""}${r.fontVariant?`${r.fontVariant} `:""}${r.fontWeight?`${r.fontWeight} `:""}${r.fontStretch?`${r.fontStretch} `:""}${r.fontSize||""}${r.lineHeight?`/${r.lineHeight} `:""}${r.fontFamily||""}`)}),t}function DF(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function jF(e){return Math.round(e*1e5)/1e5}const j0={textTransform:"uppercase"},P0='"Roboto", "Helvetica", "Arial", sans-serif';function PF(e,t){const{fontFamily:g=P0,fontSize:n=14,fontWeightLight:l=300,fontWeightRegular:r=400,fontWeightMedium:i=500,fontWeightBold:C=700,htmlFontSize:a=16,allVariants:d,pxToRem:A,...m}=typeof t=="function"?t(e):t,p=n/14,B=A||(S=>`${S/a*p}rem`),G=(S,V,v,R,k)=>({fontFamily:g,fontWeight:S,fontSize:B(V),lineHeight:v,...g===P0?{letterSpacing:`${jF(R/V)}em`}:{},...k,...d}),y={h1:G(l,96,1.167,-1.5),h2:G(l,60,1.2,-.5),h3:G(r,48,1.167,0),h4:G(r,34,1.235,.25),h5:G(r,24,1.334,0),h6:G(i,20,1.6,.15),subtitle1:G(r,16,1.75,.15),subtitle2:G(i,14,1.57,.1),body1:G(r,16,1.5,.15),body2:G(r,14,1.43,.15),button:G(i,14,1.75,.4,j0),caption:G(r,12,1.66,.4),overline:G(r,12,2.66,1,j0),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return mg({htmlFontSize:a,pxToRem:B,fontFamily:g,fontSize:n,fontWeightLight:l,fontWeightRegular:r,fontWeightMedium:i,fontWeightBold:C,...y},m,{clone:!1})}const OF=.2,qF=.14,$F=.12;function Bt(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${OF})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${qF})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${$F})`].join(",")}const _F=["none",Bt(0,2,1,-1,0,1,1,0,0,1,3,0),Bt(0,3,1,-2,0,2,2,0,0,1,5,0),Bt(0,3,3,-2,0,3,4,0,0,1,8,0),Bt(0,2,4,-1,0,4,5,0,0,1,10,0),Bt(0,3,5,-1,0,5,8,0,0,1,14,0),Bt(0,3,5,-1,0,6,10,0,0,1,18,0),Bt(0,4,5,-2,0,7,10,1,0,2,16,1),Bt(0,5,5,-3,0,8,10,1,0,3,14,2),Bt(0,5,6,-3,0,9,12,1,0,3,16,2),Bt(0,6,6,-3,0,10,14,1,0,4,18,3),Bt(0,6,7,-4,0,11,15,1,0,4,20,3),Bt(0,7,8,-4,0,12,17,2,0,5,22,4),Bt(0,7,8,-4,0,13,19,2,0,5,24,4),Bt(0,7,9,-4,0,14,21,2,0,5,26,4),Bt(0,8,9,-5,0,15,22,2,0,6,28,5),Bt(0,8,10,-5,0,16,24,2,0,6,30,5),Bt(0,8,11,-5,0,17,26,2,0,6,32,5),Bt(0,9,11,-5,0,18,28,2,0,7,34,6),Bt(0,9,12,-6,0,19,29,2,0,7,36,6),Bt(0,10,13,-6,0,20,31,3,0,8,38,7),Bt(0,10,13,-6,0,21,33,3,0,8,40,7),Bt(0,10,14,-6,0,22,35,3,0,8,42,7),Bt(0,11,14,-7,0,23,36,3,0,9,44,8),Bt(0,11,15,-7,0,24,38,3,0,9,46,8)],eN={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},tN={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function O0(e){return`${Math.round(e)}ms`}function gN(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function nN(e){const t={...eN,...e.easing},g={...tN,...e.duration};return{getAutoHeightDuration:gN,create:(l=["all"],r={})=>{const{duration:i=g.standard,easing:C=t.easeInOut,delay:a=0,...d}=r;return(Array.isArray(l)?l:[l]).map(A=>`${A} ${typeof i=="string"?i:O0(i)} ${C} ${typeof a=="string"?a:O0(a)}`).join(",")},...e,easing:t,duration:g}}const oN={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function lN(e){return zn(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function oS(e={}){const t={...e};function g(n){const l=Object.entries(n);for(let r=0;r<l.length;r++){const[i,C]=l[r];!lN(C)||i.startsWith("unstable_")?delete n[i]:zn(C)&&(n[i]={...C},g(n[i]))}}return g(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function cu(e={},...t){const{breakpoints:g,mixins:n={},spacing:l,palette:r={},transitions:i={},typography:C={},shape:a,...d}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(Ao(20));const A=vm(r),m=Da(e);let p=mg(m,{mixins:DF(m.breakpoints,n),palette:A,shadows:_F.slice(),typography:PF(A,C),transitions:nN(i),zIndex:{...oN}});return p=mg(p,d),p=t.reduce((B,G)=>mg(B,G),p),p.unstable_sxConfig={...xi,...d?.unstable_sxConfig},p.unstable_sx=function(G){return Rl({sx:G,theme:this})},p.toRuntimeSource=oS,p}function du(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const IN=[...Array(25)].map((e,t)=>{if(t===0)return"none";const g=du(t);return`linear-gradient(rgba(255 255 255 / ${g}), rgba(255 255 255 / ${g}))`});function lS(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function IS(e){return e==="dark"?IN:[]}function rN(e){const{palette:t={mode:"light"},opacity:g,overlays:n,...l}=e,r=vm(t);return{palette:r,opacity:{...lS(r.mode),...g},overlays:n||IS(r.mode),...l}}function iN(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const sN=e=>[...[...Array(25)].map((t,g)=>`--${e?`${e}-`:""}overlays-${g}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],CN=e=>(t,g)=>{const n=e.rootSelector||":root",l=e.colorSchemeSelector;let r=l;if(l==="class"&&(r=".%s"),l==="data"&&(r="[data-%s]"),l?.startsWith("data-")&&!l.includes("%s")&&(r=`[${l}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const i={};return sN(e.cssVarPrefix).forEach(C=>{i[C]=g[C],delete g[C]}),r==="media"?{[n]:g,"@media (prefers-color-scheme: dark)":{[n]:i}}:r?{[r.replace("%s",t)]:i,[`${n}, ${r.replace("%s",t)}`]:g}:{[n]:{...g,...i}}}if(r&&r!=="media")return`${n}, ${r.replace("%s",String(t))}`}else if(t){if(r==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[n]:g}};if(r)return r.replace("%s",String(t))}return n};function aN(e,t){t.forEach(g=>{e[g]||(e[g]={})})}function ge(e,t,g){!e[t]&&g&&(e[t]=g)}function jr(e){return typeof e!="string"||!e.startsWith("hsl")?e:YB(e)}function ro(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Dr(jr(e[t])))}function cN(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const wn=e=>{try{return e()}catch{}},dN=(e="mui")=>hF(e);function GA(e,t,g,n){if(!t)return;t=t===!0?{}:t;const l=n==="dark"?"dark":"light";if(!g){e[n]=rN({...t,palette:{mode:l,...t?.palette}});return}const{palette:r,...i}=cu({...g,palette:{mode:l,...t?.palette}});return e[n]={...t,palette:r,opacity:{...lS(l),...t?.opacity},overlays:t?.overlays||IS(l)},i}function AN(e={},...t){const{colorSchemes:g={light:!0},defaultColorScheme:n,disableCssColorScheme:l=!1,cssVarPrefix:r="mui",shouldSkipGeneratingVar:i=iN,colorSchemeSelector:C=g.light&&g.dark?"media":void 0,rootSelector:a=":root",...d}=e,A=Object.keys(g)[0],m=n||(g.light&&A!=="light"?"light":A),p=dN(r),{[m]:B,light:G,dark:y,...S}=g,V={...S};let v=B;if((m==="dark"&&!("dark"in g)||m==="light"&&!("light"in g))&&(v=!0),!v)throw new Error(Ao(21,m));const R=GA(V,v,d,m);G&&!V.light&&GA(V,G,void 0,"light"),y&&!V.dark&&GA(V,y,void 0,"dark");let k={defaultColorScheme:m,...R,cssVarPrefix:r,colorSchemeSelector:C,rootSelector:a,getCssVar:p,colorSchemes:V,font:{...QF(R.typography),...R.font},spacing:cN(d.spacing)};Object.keys(k.colorSchemes).forEach(w=>{const h=k.colorSchemes[w].palette,Y=z=>{const T=z.split("-"),U=T[1],P=T[2];return p(z,h[U][P])};if(h.mode==="light"&&(ge(h.common,"background","#fff"),ge(h.common,"onBackground","#000")),h.mode==="dark"&&(ge(h.common,"background","#000"),ge(h.common,"onBackground","#fff")),aN(h,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),h.mode==="light"){ge(h.Alert,"errorColor",dt(h.error.light,.6)),ge(h.Alert,"infoColor",dt(h.info.light,.6)),ge(h.Alert,"successColor",dt(h.success.light,.6)),ge(h.Alert,"warningColor",dt(h.warning.light,.6)),ge(h.Alert,"errorFilledBg",Y("palette-error-main")),ge(h.Alert,"infoFilledBg",Y("palette-info-main")),ge(h.Alert,"successFilledBg",Y("palette-success-main")),ge(h.Alert,"warningFilledBg",Y("palette-warning-main")),ge(h.Alert,"errorFilledColor",wn(()=>h.getContrastText(h.error.main))),ge(h.Alert,"infoFilledColor",wn(()=>h.getContrastText(h.info.main))),ge(h.Alert,"successFilledColor",wn(()=>h.getContrastText(h.success.main))),ge(h.Alert,"warningFilledColor",wn(()=>h.getContrastText(h.warning.main))),ge(h.Alert,"errorStandardBg",At(h.error.light,.9)),ge(h.Alert,"infoStandardBg",At(h.info.light,.9)),ge(h.Alert,"successStandardBg",At(h.success.light,.9)),ge(h.Alert,"warningStandardBg",At(h.warning.light,.9)),ge(h.Alert,"errorIconColor",Y("palette-error-main")),ge(h.Alert,"infoIconColor",Y("palette-info-main")),ge(h.Alert,"successIconColor",Y("palette-success-main")),ge(h.Alert,"warningIconColor",Y("palette-warning-main")),ge(h.AppBar,"defaultBg",Y("palette-grey-100")),ge(h.Avatar,"defaultBg",Y("palette-grey-400")),ge(h.Button,"inheritContainedBg",Y("palette-grey-300")),ge(h.Button,"inheritContainedHoverBg",Y("palette-grey-A100")),ge(h.Chip,"defaultBorder",Y("palette-grey-400")),ge(h.Chip,"defaultAvatarColor",Y("palette-grey-700")),ge(h.Chip,"defaultIconColor",Y("palette-grey-700")),ge(h.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),ge(h.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),ge(h.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),ge(h.LinearProgress,"primaryBg",At(h.primary.main,.62)),ge(h.LinearProgress,"secondaryBg",At(h.secondary.main,.62)),ge(h.LinearProgress,"errorBg",At(h.error.main,.62)),ge(h.LinearProgress,"infoBg",At(h.info.main,.62)),ge(h.LinearProgress,"successBg",At(h.success.main,.62)),ge(h.LinearProgress,"warningBg",At(h.warning.main,.62)),ge(h.Skeleton,"bg",`rgba(${Y("palette-text-primaryChannel")} / 0.11)`),ge(h.Slider,"primaryTrack",At(h.primary.main,.62)),ge(h.Slider,"secondaryTrack",At(h.secondary.main,.62)),ge(h.Slider,"errorTrack",At(h.error.main,.62)),ge(h.Slider,"infoTrack",At(h.info.main,.62)),ge(h.Slider,"successTrack",At(h.success.main,.62)),ge(h.Slider,"warningTrack",At(h.warning.main,.62));const z=aC(h.background.default,.8);ge(h.SnackbarContent,"bg",z),ge(h.SnackbarContent,"color",wn(()=>h.getContrastText(z))),ge(h.SpeedDialAction,"fabHoverBg",aC(h.background.paper,.15)),ge(h.StepConnector,"border",Y("palette-grey-400")),ge(h.StepContent,"border",Y("palette-grey-400")),ge(h.Switch,"defaultColor",Y("palette-common-white")),ge(h.Switch,"defaultDisabledColor",Y("palette-grey-100")),ge(h.Switch,"primaryDisabledColor",At(h.primary.main,.62)),ge(h.Switch,"secondaryDisabledColor",At(h.secondary.main,.62)),ge(h.Switch,"errorDisabledColor",At(h.error.main,.62)),ge(h.Switch,"infoDisabledColor",At(h.info.main,.62)),ge(h.Switch,"successDisabledColor",At(h.success.main,.62)),ge(h.Switch,"warningDisabledColor",At(h.warning.main,.62)),ge(h.TableCell,"border",At(CC(h.divider,1),.88)),ge(h.Tooltip,"bg",CC(h.grey[700],.92))}if(h.mode==="dark"){ge(h.Alert,"errorColor",At(h.error.light,.6)),ge(h.Alert,"infoColor",At(h.info.light,.6)),ge(h.Alert,"successColor",At(h.success.light,.6)),ge(h.Alert,"warningColor",At(h.warning.light,.6)),ge(h.Alert,"errorFilledBg",Y("palette-error-dark")),ge(h.Alert,"infoFilledBg",Y("palette-info-dark")),ge(h.Alert,"successFilledBg",Y("palette-success-dark")),ge(h.Alert,"warningFilledBg",Y("palette-warning-dark")),ge(h.Alert,"errorFilledColor",wn(()=>h.getContrastText(h.error.dark))),ge(h.Alert,"infoFilledColor",wn(()=>h.getContrastText(h.info.dark))),ge(h.Alert,"successFilledColor",wn(()=>h.getContrastText(h.success.dark))),ge(h.Alert,"warningFilledColor",wn(()=>h.getContrastText(h.warning.dark))),ge(h.Alert,"errorStandardBg",dt(h.error.light,.9)),ge(h.Alert,"infoStandardBg",dt(h.info.light,.9)),ge(h.Alert,"successStandardBg",dt(h.success.light,.9)),ge(h.Alert,"warningStandardBg",dt(h.warning.light,.9)),ge(h.Alert,"errorIconColor",Y("palette-error-main")),ge(h.Alert,"infoIconColor",Y("palette-info-main")),ge(h.Alert,"successIconColor",Y("palette-success-main")),ge(h.Alert,"warningIconColor",Y("palette-warning-main")),ge(h.AppBar,"defaultBg",Y("palette-grey-900")),ge(h.AppBar,"darkBg",Y("palette-background-paper")),ge(h.AppBar,"darkColor",Y("palette-text-primary")),ge(h.Avatar,"defaultBg",Y("palette-grey-600")),ge(h.Button,"inheritContainedBg",Y("palette-grey-800")),ge(h.Button,"inheritContainedHoverBg",Y("palette-grey-700")),ge(h.Chip,"defaultBorder",Y("palette-grey-700")),ge(h.Chip,"defaultAvatarColor",Y("palette-grey-300")),ge(h.Chip,"defaultIconColor",Y("palette-grey-300")),ge(h.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),ge(h.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),ge(h.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),ge(h.LinearProgress,"primaryBg",dt(h.primary.main,.5)),ge(h.LinearProgress,"secondaryBg",dt(h.secondary.main,.5)),ge(h.LinearProgress,"errorBg",dt(h.error.main,.5)),ge(h.LinearProgress,"infoBg",dt(h.info.main,.5)),ge(h.LinearProgress,"successBg",dt(h.success.main,.5)),ge(h.LinearProgress,"warningBg",dt(h.warning.main,.5)),ge(h.Skeleton,"bg",`rgba(${Y("palette-text-primaryChannel")} / 0.13)`),ge(h.Slider,"primaryTrack",dt(h.primary.main,.5)),ge(h.Slider,"secondaryTrack",dt(h.secondary.main,.5)),ge(h.Slider,"errorTrack",dt(h.error.main,.5)),ge(h.Slider,"infoTrack",dt(h.info.main,.5)),ge(h.Slider,"successTrack",dt(h.success.main,.5)),ge(h.Slider,"warningTrack",dt(h.warning.main,.5));const z=aC(h.background.default,.98);ge(h.SnackbarContent,"bg",z),ge(h.SnackbarContent,"color",wn(()=>h.getContrastText(z))),ge(h.SpeedDialAction,"fabHoverBg",aC(h.background.paper,.15)),ge(h.StepConnector,"border",Y("palette-grey-600")),ge(h.StepContent,"border",Y("palette-grey-600")),ge(h.Switch,"defaultColor",Y("palette-grey-300")),ge(h.Switch,"defaultDisabledColor",Y("palette-grey-600")),ge(h.Switch,"primaryDisabledColor",dt(h.primary.main,.55)),ge(h.Switch,"secondaryDisabledColor",dt(h.secondary.main,.55)),ge(h.Switch,"errorDisabledColor",dt(h.error.main,.55)),ge(h.Switch,"infoDisabledColor",dt(h.info.main,.55)),ge(h.Switch,"successDisabledColor",dt(h.success.main,.55)),ge(h.Switch,"warningDisabledColor",dt(h.warning.main,.55)),ge(h.TableCell,"border",dt(CC(h.divider,1),.68)),ge(h.Tooltip,"bg",CC(h.grey[700],.92))}ro(h.background,"default"),ro(h.background,"paper"),ro(h.common,"background"),ro(h.common,"onBackground"),ro(h,"divider"),Object.keys(h).forEach(z=>{const T=h[z];z!=="tonalOffset"&&T&&typeof T=="object"&&(T.main&&ge(h[z],"mainChannel",Dr(jr(T.main))),T.light&&ge(h[z],"lightChannel",Dr(jr(T.light))),T.dark&&ge(h[z],"darkChannel",Dr(jr(T.dark))),T.contrastText&&ge(h[z],"contrastTextChannel",Dr(jr(T.contrastText))),z==="text"&&(ro(h[z],"primary"),ro(h[z],"secondary")),z==="action"&&(T.active&&ro(h[z],"active"),T.selected&&ro(h[z],"selected")))})}),k=t.reduce((w,h)=>mg(w,h),k);const J={prefix:r,disableCssColorScheme:l,shouldSkipGeneratingVar:i,getSelector:CN(k)},{vars:N,generateThemeVars:K,generateStyleSheets:X}=ZF(k,J);return k.vars=N,Object.entries(k.colorSchemes[k.defaultColorScheme]).forEach(([w,h])=>{k[w]=h}),k.generateThemeVars=K,k.generateStyleSheets=X,k.generateSpacing=function(){return $B(d.spacing,ym(this))},k.getColorSchemeSelector=yF(C),k.spacing=k.generateSpacing(),k.shouldSkipGeneratingVar=i,k.unstable_sxConfig={...xi,...d?.unstable_sxConfig},k.unstable_sx=function(h){return Rl({sx:h,theme:this})},k.toRuntimeSource=oS,k}function q0(e,t,g){e.colorSchemes&&g&&(e.colorSchemes[t]={...g!==!0&&g,palette:vm({...g===!0?{}:g.palette,mode:t})})}function rS(e={},...t){const{palette:g,cssVariables:n=!1,colorSchemes:l=g?void 0:{light:!0},defaultColorScheme:r=g?.mode,...i}=e,C=r||"light",a=l?.[C],d={...l,...g?{[C]:{...typeof a!="boolean"&&a,palette:g}}:void 0};if(n===!1){if(!("colorSchemes"in e))return cu(e,...t);let A=g;"palette"in e||d[C]&&(d[C]!==!0?A=d[C].palette:C==="dark"&&(A={mode:"dark"}));const m=cu({...e,palette:A},...t);return m.defaultColorScheme=C,m.colorSchemes=d,m.palette.mode==="light"&&(m.colorSchemes.light={...d.light!==!0&&d.light,palette:m.palette},q0(m,"dark",d.dark)),m.palette.mode==="dark"&&(m.colorSchemes.dark={...d.dark!==!0&&d.dark,palette:m.palette},q0(m,"light",d.light)),m}return!g&&!("light"in d)&&C==="light"&&(d.light=!0),AN({...i,colorSchemes:d,defaultColorScheme:C,...typeof n!="boolean"&&n},...t)}const Ym=rS(),Pa="$$material";function Oa(){const e=Ti(Ym);return e[Pa]||e}function uN(e){return Z.jsx($1,{...e,defaultTheme:Ym,themeId:Pa})}function iS(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const dn=e=>iS(e)&&e!=="classes",Xe=tS({themeId:Pa,defaultTheme:Ym,rootShouldForwardProp:dn});function mN(e){return function(g){return Z.jsx(uN,{styles:typeof e=="function"?n=>e({theme:n,...g}):e})}}function hN(){return fm}const Mt=mF;function ut(e){return uF(e)}function pN(e){return st("MuiSvgIcon",e)}gt("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const bN=e=>{const{color:t,fontSize:g,classes:n}=e,l={root:["root",t!=="inherit"&&`color${Me(t)}`,`fontSize${Me(g)}`]};return it(l,pN,n)},ZN=Xe("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,g.color!=="inherit"&&t[`color${Me(g.color)}`],t[`fontSize${Me(g.fontSize)}`]]}})(Mt(({theme:e})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:e.transitions?.create?.("fill",{duration:(e.vars??e).transitions?.duration?.shorter}),variants:[{props:t=>!t.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:e.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:e.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:e.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,t])=>t&&t.main).map(([t])=>({props:{color:t},style:{color:(e.vars??e).palette?.[t]?.main}})),{props:{color:"action"},style:{color:(e.vars??e).palette?.action?.active}},{props:{color:"disabled"},style:{color:(e.vars??e).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),Au=f.forwardRef(function(t,g){const n=ut({props:t,name:"MuiSvgIcon"}),{children:l,className:r,color:i="inherit",component:C="svg",fontSize:a="medium",htmlColor:d,inheritViewBox:A=!1,titleAccess:m,viewBox:p="0 0 24 24",...B}=n,G=f.isValidElement(l)&&l.type==="svg",y={...n,color:i,component:C,fontSize:a,instanceFontSize:t.fontSize,inheritViewBox:A,viewBox:p,hasSvgAsChild:G},S={};A||(S.viewBox=p);const V=bN(y);return Z.jsxs(ZN,{as:C,className:Ee(V.root,r),focusable:"false",color:d,"aria-hidden":m?void 0:!0,role:m?"img":void 0,ref:g,...S,...B,...G&&l.props,ownerState:y,children:[G?l.props.children:l,m?Z.jsx("title",{children:m}):null]})});Au.muiName="SvgIcon";function yN(e,t){function g(n,l){return Z.jsx(Au,{"data-testid":void 0,ref:l,...n,children:e})}return g.muiName=Au.muiName,f.memo(f.forwardRef(g))}function sS(e,t=166){let g;function n(...l){const r=()=>{e.apply(this,l)};clearTimeout(g),g=setTimeout(r,t)}return n.clear=()=>{clearTimeout(g)},n}function Vn(e){return e&&e.ownerDocument||document}function mo(e){return Vn(e).defaultView||window}function $0(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let _0=0;function GN(e){const[t,g]=f.useState(e),n=e||t;return f.useEffect(()=>{t==null&&(_0+=1,g(`mui-${_0}`))},[t]),n}const fN={...ii},ey=fN.useId;function Hm(e){if(ey!==void 0){const t=ey();return e??t}return GN(e)}function ty(e){const{controlled:t,default:g,name:n,state:l="value"}=e,{current:r}=f.useRef(t!==void 0),[i,C]=f.useState(g),a=r?t:i,d=f.useCallback(A=>{r||C(A)},[]);return[a,d]}function fl(e){const t=f.useRef(e);return Qo(()=>{t.current=e}),f.useRef((...g)=>(0,t.current)(...g)).current}function yg(...e){const t=f.useRef(void 0),g=f.useCallback(n=>{const l=e.map(r=>{if(r==null)return null;if(typeof r=="function"){const i=r,C=i(n);return typeof C=="function"?C:()=>{i(null)}}return r.current=n,()=>{r.current=null}});return()=>{l.forEach(r=>r?.())}},e);return f.useMemo(()=>e.every(n=>n==null)?null:n=>{t.current&&(t.current(),t.current=void 0),n!=null&&(t.current=g(n))},e)}function BN(e,t){const g=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&g>=65&&g<=90&&typeof t=="function"}function SN(e,t){if(!e)return t;function g(i,C){const a={};return Object.keys(C).forEach(d=>{BN(d,C[d])&&typeof i[d]=="function"&&(a[d]=(...A)=>{i[d](...A),C[d](...A)})}),a}if(typeof e=="function"||typeof t=="function")return i=>{const C=typeof t=="function"?t(i):t,a=typeof e=="function"?e({...i,...C}):e,d=Ee(i?.className,C?.className,a?.className),A=g(a,C);return{...C,...a,...A,...!!d&&{className:d},...C?.style&&a?.style&&{style:{...C.style,...a.style}},...C?.sx&&a?.sx&&{sx:[...Array.isArray(C.sx)?C.sx:[C.sx],...Array.isArray(a.sx)?a.sx:[a.sx]]}}};const n=t,l=g(e,n),r=Ee(n?.className,e?.className);return{...t,...e,...l,...!!r&&{className:r},...n?.style&&e?.style&&{style:{...n.style,...e.style}},...n?.sx&&e?.sx&&{sx:[...Array.isArray(n.sx)?n.sx:[n.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}function gy(e){try{return e.matches(":focus-visible")}catch{}return!1}const ny={};function CS(e,t){const g=f.useRef(ny);return g.current===ny&&(g.current=e(t)),g}class na{static create(){return new na}static use(){const t=CS(na.create).current,[g,n]=f.useState(!1);return t.shouldMount=g,t.setShouldMount=n,f.useEffect(t.mountEffect,[g]),t}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=WN(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...t){this.mount().then(()=>this.ref.current?.start(...t))}stop(...t){this.mount().then(()=>this.ref.current?.stop(...t))}pulsate(...t){this.mount().then(()=>this.ref.current?.pulsate(...t))}}function VN(){return na.use()}function WN(){let e,t;const g=new Promise((n,l)=>{e=n,t=l});return g.resolve=e,g.reject=t,g}function wm(e,t){if(e==null)return{};var g={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;g[n]=e[n]}return g}function uu(e,t){return uu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,n){return g.__proto__=n,g},uu(e,t)}function aS(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,uu(e,t)}const oy={disabled:!1},oa=Sn.createContext(null);var RN=function(t){return t.scrollTop},Pr="unmounted",dl="exited",Al="entering",uI="entered",mu="exiting",qn=function(e){aS(t,e);function t(n,l){var r;r=e.call(this,n,l)||this;var i=l,C=i&&!i.isMounting?n.enter:n.appear,a;return r.appearStatus=null,n.in?C?(a=dl,r.appearStatus=Al):a=uI:n.unmountOnExit||n.mountOnEnter?a=Pr:a=dl,r.state={status:a},r.nextCallback=null,r}t.getDerivedStateFromProps=function(l,r){var i=l.in;return i&&r.status===Pr?{status:dl}:null};var g=t.prototype;return g.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},g.componentDidUpdate=function(l){var r=null;if(l!==this.props){var i=this.state.status;this.props.in?i!==Al&&i!==uI&&(r=Al):(i===Al||i===uI)&&(r=mu)}this.updateStatus(!1,r)},g.componentWillUnmount=function(){this.cancelNextCallback()},g.getTimeouts=function(){var l=this.props.timeout,r,i,C;return r=i=C=l,l!=null&&typeof l!="number"&&(r=l.exit,i=l.enter,C=l.appear!==void 0?l.appear:i),{exit:r,enter:i,appear:C}},g.updateStatus=function(l,r){if(l===void 0&&(l=!1),r!==null)if(this.cancelNextCallback(),r===Al){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:IC.findDOMNode(this);i&&RN(i)}this.performEnter(l)}else this.performExit();else this.props.unmountOnExit&&this.state.status===dl&&this.setState({status:Pr})},g.performEnter=function(l){var r=this,i=this.props.enter,C=this.context?this.context.isMounting:l,a=this.props.nodeRef?[C]:[IC.findDOMNode(this),C],d=a[0],A=a[1],m=this.getTimeouts(),p=C?m.appear:m.enter;if(!l&&!i||oy.disabled){this.safeSetState({status:uI},function(){r.props.onEntered(d)});return}this.props.onEnter(d,A),this.safeSetState({status:Al},function(){r.props.onEntering(d,A),r.onTransitionEnd(p,function(){r.safeSetState({status:uI},function(){r.props.onEntered(d,A)})})})},g.performExit=function(){var l=this,r=this.props.exit,i=this.getTimeouts(),C=this.props.nodeRef?void 0:IC.findDOMNode(this);if(!r||oy.disabled){this.safeSetState({status:dl},function(){l.props.onExited(C)});return}this.props.onExit(C),this.safeSetState({status:mu},function(){l.props.onExiting(C),l.onTransitionEnd(i.exit,function(){l.safeSetState({status:dl},function(){l.props.onExited(C)})})})},g.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},g.safeSetState=function(l,r){r=this.setNextCallback(r),this.setState(l,r)},g.setNextCallback=function(l){var r=this,i=!0;return this.nextCallback=function(C){i&&(i=!1,r.nextCallback=null,l(C))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},g.onTransitionEnd=function(l,r){this.setNextCallback(r);var i=this.props.nodeRef?this.props.nodeRef.current:IC.findDOMNode(this),C=l==null&&!this.props.addEndListener;if(!i||C){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],d=a[0],A=a[1];this.props.addEndListener(d,A)}l!=null&&setTimeout(this.nextCallback,l)},g.render=function(){var l=this.state.status;if(l===Pr)return null;var r=this.props,i=r.children;r.in,r.mountOnEnter,r.unmountOnExit,r.appear,r.enter,r.exit,r.timeout,r.addEndListener,r.onEnter,r.onEntering,r.onEntered,r.onExit,r.onExiting,r.onExited,r.nodeRef;var C=wm(r,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Sn.createElement(oa.Provider,{value:null},typeof i=="function"?i(l,C):Sn.cloneElement(Sn.Children.only(i),C))},t}(Sn.Component);qn.contextType=oa;qn.propTypes={};function dI(){}qn.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:dI,onEntering:dI,onEntered:dI,onExit:dI,onExiting:dI,onExited:dI};qn.UNMOUNTED=Pr;qn.EXITED=dl;qn.ENTERING=Al;qn.ENTERED=uI;qn.EXITING=mu;function XN(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fm(e,t){var g=function(r){return t&&f.isValidElement(r)?t(r):r},n=Object.create(null);return e&&f.Children.map(e,function(l){return l}).forEach(function(l){n[l.key]=g(l)}),n}function kN(e,t){e=e||{},t=t||{};function g(A){return A in t?t[A]:e[A]}var n=Object.create(null),l=[];for(var r in e)r in t?l.length&&(n[r]=l,l=[]):l.push(r);var i,C={};for(var a in t){if(n[a])for(i=0;i<n[a].length;i++){var d=n[a][i];C[n[a][i]]=g(d)}C[a]=g(a)}for(i=0;i<l.length;i++)C[l[i]]=g(l[i]);return C}function pl(e,t,g){return g[t]!=null?g[t]:e.props[t]}function JN(e,t){return Fm(e.children,function(g){return f.cloneElement(g,{onExited:t.bind(null,g),in:!0,appear:pl(g,"appear",e),enter:pl(g,"enter",e),exit:pl(g,"exit",e)})})}function vN(e,t,g){var n=Fm(e.children),l=kN(t,n);return Object.keys(l).forEach(function(r){var i=l[r];if(f.isValidElement(i)){var C=r in t,a=r in n,d=t[r],A=f.isValidElement(d)&&!d.props.in;a&&(!C||A)?l[r]=f.cloneElement(i,{onExited:g.bind(null,i),in:!0,exit:pl(i,"exit",e),enter:pl(i,"enter",e)}):!a&&C&&!A?l[r]=f.cloneElement(i,{in:!1}):a&&C&&f.isValidElement(d)&&(l[r]=f.cloneElement(i,{onExited:g.bind(null,i),in:d.props.in,exit:pl(i,"exit",e),enter:pl(i,"enter",e)}))}}),l}var YN=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},HN={component:"div",childFactory:function(t){return t}},Nm=function(e){aS(t,e);function t(n,l){var r;r=e.call(this,n,l)||this;var i=r.handleExited.bind(XN(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}var g=t.prototype;return g.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},g.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(l,r){var i=r.children,C=r.handleExited,a=r.firstRender;return{children:a?JN(l,C):vN(l,i,C),firstRender:!1}},g.handleExited=function(l,r){var i=Fm(this.props.children);l.key in i||(l.props.onExited&&l.props.onExited(r),this.mounted&&this.setState(function(C){var a=mi({},C.children);return delete a[l.key],{children:a}}))},g.render=function(){var l=this.props,r=l.component,i=l.childFactory,C=wm(l,["component","childFactory"]),a=this.state.contextValue,d=YN(this.state.children).map(i);return delete C.appear,delete C.enter,delete C.exit,r===null?Sn.createElement(oa.Provider,{value:a},d):Sn.createElement(oa.Provider,{value:a},Sn.createElement(r,C,d))},t}(Sn.Component);Nm.propTypes={};Nm.defaultProps=HN;const wN=[];function FN(e){f.useEffect(e,wN)}class Km{static create(){return new Km}currentId=null;start(t,g){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,g()},t)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function cS(){const e=CS(Km.create).current;return FN(e.disposeEffect),e}function NN(e){const{className:t,classes:g,pulsate:n=!1,rippleX:l,rippleY:r,rippleSize:i,in:C,onExited:a,timeout:d}=e,[A,m]=f.useState(!1),p=Ee(t,g.ripple,g.rippleVisible,n&&g.ripplePulsate),B={width:i,height:i,top:-(i/2)+r,left:-(i/2)+l},G=Ee(g.child,A&&g.childLeaving,n&&g.childPulsate);return!C&&!A&&m(!0),f.useEffect(()=>{if(!C&&a!=null){const y=setTimeout(a,d);return()=>{clearTimeout(y)}}},[a,C,d]),Z.jsx("span",{className:p,style:B,children:Z.jsx("span",{className:G})})}const on=gt("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),hu=550,KN=80,xN=Mi`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,EN=Mi`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,zN=Mi`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,MN=Xe("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),TN=Xe(NN,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${on.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${xN};
    animation-duration: ${hu}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${on.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${on.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${on.childLeaving} {
    opacity: 0;
    animation-name: ${EN};
    animation-duration: ${hu}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${on.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${zN};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,UN=f.forwardRef(function(t,g){const n=ut({props:t,name:"MuiTouchRipple"}),{center:l=!1,classes:r={},className:i,...C}=n,[a,d]=f.useState([]),A=f.useRef(0),m=f.useRef(null);f.useEffect(()=>{m.current&&(m.current(),m.current=null)},[a]);const p=f.useRef(!1),B=cS(),G=f.useRef(null),y=f.useRef(null),S=f.useCallback(k=>{const{pulsate:J,rippleX:N,rippleY:K,rippleSize:X,cb:w}=k;d(h=>[...h,Z.jsx(TN,{classes:{ripple:Ee(r.ripple,on.ripple),rippleVisible:Ee(r.rippleVisible,on.rippleVisible),ripplePulsate:Ee(r.ripplePulsate,on.ripplePulsate),child:Ee(r.child,on.child),childLeaving:Ee(r.childLeaving,on.childLeaving),childPulsate:Ee(r.childPulsate,on.childPulsate)},timeout:hu,pulsate:J,rippleX:N,rippleY:K,rippleSize:X},A.current)]),A.current+=1,m.current=w},[r]),V=f.useCallback((k={},J={},N=()=>{})=>{const{pulsate:K=!1,center:X=l||J.pulsate,fakeElement:w=!1}=J;if(k?.type==="mousedown"&&p.current){p.current=!1;return}k?.type==="touchstart"&&(p.current=!0);const h=w?null:y.current,Y=h?h.getBoundingClientRect():{width:0,height:0,left:0,top:0};let z,T,U;if(X||k===void 0||k.clientX===0&&k.clientY===0||!k.clientX&&!k.touches)z=Math.round(Y.width/2),T=Math.round(Y.height/2);else{const{clientX:P,clientY:O}=k.touches&&k.touches.length>0?k.touches[0]:k;z=Math.round(P-Y.left),T=Math.round(O-Y.top)}if(X)U=Math.sqrt((2*Y.width**2+Y.height**2)/3),U%2===0&&(U+=1);else{const P=Math.max(Math.abs((h?h.clientWidth:0)-z),z)*2+2,O=Math.max(Math.abs((h?h.clientHeight:0)-T),T)*2+2;U=Math.sqrt(P**2+O**2)}k?.touches?G.current===null&&(G.current=()=>{S({pulsate:K,rippleX:z,rippleY:T,rippleSize:U,cb:N})},B.start(KN,()=>{G.current&&(G.current(),G.current=null)})):S({pulsate:K,rippleX:z,rippleY:T,rippleSize:U,cb:N})},[l,S,B]),v=f.useCallback(()=>{V({},{pulsate:!0})},[V]),R=f.useCallback((k,J)=>{if(B.clear(),k?.type==="touchend"&&G.current){G.current(),G.current=null,B.start(0,()=>{R(k,J)});return}G.current=null,d(N=>N.length>0?N.slice(1):N),m.current=J},[B]);return f.useImperativeHandle(g,()=>({pulsate:v,start:V,stop:R}),[v,V,R]),Z.jsx(MN,{className:Ee(on.root,r.root,i),ref:y,...C,children:Z.jsx(Nm,{component:null,exit:!0,children:a})})});function LN(e){return st("MuiButtonBase",e)}const QN=gt("MuiButtonBase",["root","disabled","focusVisible"]),DN=e=>{const{disabled:t,focusVisible:g,focusVisibleClassName:n,classes:l}=e,i=it({root:["root",t&&"disabled",g&&"focusVisible"]},LN,l);return g&&n&&(i.root+=` ${n}`),i},jN=Xe("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${QN.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),dS=f.forwardRef(function(t,g){const n=ut({props:t,name:"MuiButtonBase"}),{action:l,centerRipple:r=!1,children:i,className:C,component:a="button",disabled:d=!1,disableRipple:A=!1,disableTouchRipple:m=!1,focusRipple:p=!1,focusVisibleClassName:B,LinkComponent:G="a",onBlur:y,onClick:S,onContextMenu:V,onDragLeave:v,onFocus:R,onFocusVisible:k,onKeyDown:J,onKeyUp:N,onMouseDown:K,onMouseLeave:X,onMouseUp:w,onTouchEnd:h,onTouchMove:Y,onTouchStart:z,tabIndex:T=0,TouchRippleProps:U,touchRippleRef:P,type:O,..._}=n,j=f.useRef(null),Q=VN(),$=yg(Q.ref,P),[F,M]=f.useState(!1);d&&F&&M(!1),f.useImperativeHandle(l,()=>({focusVisible:()=>{M(!0),j.current.focus()}}),[]);const ne=Q.shouldMount&&!A&&!d;f.useEffect(()=>{F&&p&&!A&&Q.pulsate()},[A,p,F,Q]);const re=io(Q,"start",K,m),oe=io(Q,"stop",V,m),ce=io(Q,"stop",v,m),ae=io(Q,"stop",w,m),Ge=io(Q,"stop",le=>{F&&le.preventDefault(),X&&X(le)},m),me=io(Q,"start",z,m),ue=io(Q,"stop",h,m),de=io(Q,"stop",Y,m),he=io(Q,"stop",le=>{gy(le.target)||M(!1),y&&y(le)},!1),Ke=fl(le=>{j.current||(j.current=le.currentTarget),gy(le.target)&&(M(!0),k&&k(le)),R&&R(le)}),He=()=>{const le=j.current;return a&&a!=="button"&&!(le.tagName==="A"&&le.href)},xe=fl(le=>{p&&!le.repeat&&F&&le.key===" "&&Q.stop(le,()=>{Q.start(le)}),le.target===le.currentTarget&&He()&&le.key===" "&&le.preventDefault(),J&&J(le),le.target===le.currentTarget&&He()&&le.key==="Enter"&&!d&&(le.preventDefault(),S&&S(le))}),je=fl(le=>{p&&le.key===" "&&F&&!le.defaultPrevented&&Q.stop(le,()=>{Q.pulsate(le)}),N&&N(le),S&&le.target===le.currentTarget&&He()&&le.key===" "&&!le.defaultPrevented&&S(le)});let fe=a;fe==="button"&&(_.href||_.to)&&(fe=G);const pe={};fe==="button"?(pe.type=O===void 0?"button":O,pe.disabled=d):(!_.href&&!_.to&&(pe.role="button"),d&&(pe["aria-disabled"]=d));const ye=yg(g,j),Ce={...n,centerRipple:r,component:a,disabled:d,disableRipple:A,disableTouchRipple:m,focusRipple:p,tabIndex:T,focusVisible:F},be=DN(Ce);return Z.jsxs(jN,{as:fe,className:Ee(be.root,C),ownerState:Ce,onBlur:he,onClick:S,onContextMenu:oe,onFocus:Ke,onKeyDown:xe,onKeyUp:je,onMouseDown:re,onMouseLeave:Ge,onMouseUp:ae,onDragLeave:ce,onTouchEnd:ue,onTouchMove:de,onTouchStart:me,ref:ye,tabIndex:d?-1:T,type:O,...pe,..._,children:[i,ne?Z.jsx(UN,{ref:$,center:r,...U}):null]})});function io(e,t,g,n=!1){return fl(l=>(g&&g(l),n||e[t](l),!0))}function PN(e){return typeof e.main=="string"}function ON(e,t=[]){if(!PN(e))return!1;for(const g of t)if(!e.hasOwnProperty(g)||typeof e[g]!="string")return!1;return!0}function kl(e=[]){return([,t])=>t&&ON(t,e)}function qN(e){return st("MuiCircularProgress",e)}gt("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Eo=44,pu=Mi`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,bu=Mi`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,$N=typeof pu!="string"?Jm`
        animation: ${pu} 1.4s linear infinite;
      `:null,_N=typeof bu!="string"?Jm`
        animation: ${bu} 1.4s ease-in-out infinite;
      `:null,eK=e=>{const{classes:t,variant:g,color:n,disableShrink:l}=e,r={root:["root",g,`color${Me(n)}`],svg:["svg"],circle:["circle",`circle${Me(g)}`,l&&"circleDisableShrink"]};return it(r,qN,t)},tK=Xe("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,t[g.variant],t[`color${Me(g.color)}`]]}})(Mt(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:$N||{animation:`${pu} 1.4s linear infinite`}},...Object.entries(e.palette).filter(kl()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),gK=Xe("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),nK=Xe("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.circle,t[`circle${Me(g.variant)}`],g.disableShrink&&t.circleDisableShrink]}})(Mt(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:_N||{animation:`${bu} 1.4s ease-in-out infinite`}}]}))),oK=f.forwardRef(function(t,g){const n=ut({props:t,name:"MuiCircularProgress"}),{className:l,color:r="primary",disableShrink:i=!1,size:C=40,style:a,thickness:d=3.6,value:A=0,variant:m="indeterminate",...p}=n,B={...n,color:r,disableShrink:i,size:C,thickness:d,value:A,variant:m},G=eK(B),y={},S={},V={};if(m==="determinate"){const v=2*Math.PI*((Eo-d)/2);y.strokeDasharray=v.toFixed(3),V["aria-valuenow"]=Math.round(A),y.strokeDashoffset=`${((100-A)/100*v).toFixed(3)}px`,S.transform="rotate(-90deg)"}return Z.jsx(tK,{className:Ee(G.root,l),style:{width:C,height:C,...S,...a},ownerState:B,ref:g,role:"progressbar",...V,...p,children:Z.jsx(gK,{className:G.svg,ownerState:B,viewBox:`${Eo/2} ${Eo/2} ${Eo} ${Eo}`,children:Z.jsx(nK,{className:G.circle,style:y,ownerState:B,cx:Eo,cy:Eo,r:(Eo-d)/2,fill:"none",strokeWidth:d})})})});function lK(e){return st("MuiButton",e)}const sl=gt("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),IK=f.createContext({}),rK=f.createContext(void 0),iK=e=>{const{color:t,disableElevation:g,fullWidth:n,size:l,variant:r,loading:i,loadingPosition:C,classes:a}=e,d={root:["root",i&&"loading",r,`${r}${Me(t)}`,`size${Me(l)}`,`${r}Size${Me(l)}`,`color${Me(t)}`,g&&"disableElevation",n&&"fullWidth",i&&`loadingPosition${Me(C)}`],startIcon:["icon","startIcon",`iconSize${Me(l)}`],endIcon:["icon","endIcon",`iconSize${Me(l)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},A=it(d,lK,a);return{...a,...A}},AS=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],sK=Xe(dS,{shouldForwardProp:e=>dn(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,t[g.variant],t[`${g.variant}${Me(g.color)}`],t[`size${Me(g.size)}`],t[`${g.variant}Size${Me(g.size)}`],g.color==="inherit"&&t.colorInherit,g.disableElevation&&t.disableElevation,g.fullWidth&&t.fullWidth,g.loading&&t.loading]}})(Mt(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],g=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${sl.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${sl.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${sl.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${sl.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(kl()).map(([n])=>({props:{color:n},style:{"--variant-textColor":(e.vars||e).palette[n].main,"--variant-outlinedColor":(e.vars||e).palette[n].main,"--variant-outlinedBorder":e.vars?`rgba(${e.vars.palette[n].mainChannel} / 0.5)`:sn(e.palette[n].main,.5),"--variant-containedColor":(e.vars||e).palette[n].contrastText,"--variant-containedBg":(e.vars||e).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[n].dark,"--variant-textBg":e.vars?`rgba(${e.vars.palette[n].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:sn(e.palette[n].main,e.palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[n].main,"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette[n].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:sn(e.palette[n].main,e.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:g,"--variant-textBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:sn(e.palette.text.primary,e.palette.action.hoverOpacity),"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:sn(e.palette.text.primary,e.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${sl.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${sl.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${sl.loading}`]:{color:"transparent"}}}]}})),CK=Xe("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.startIcon,g.loading&&t.startIconLoadingStart,t[`iconSize${Me(g.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...AS]})),aK=Xe("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.endIcon,g.loading&&t.endIconLoadingEnd,t[`iconSize${Me(g.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...AS]})),cK=Xe("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),ly=Xe("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),tt=f.forwardRef(function(t,g){const n=f.useContext(IK),l=f.useContext(rK),r=ui(n,t),i=ut({props:r,name:"MuiButton"}),{children:C,color:a="primary",component:d="button",className:A,disabled:m=!1,disableElevation:p=!1,disableFocusRipple:B=!1,endIcon:G,focusVisibleClassName:y,fullWidth:S=!1,id:V,loading:v=null,loadingIndicator:R,loadingPosition:k="center",size:J="medium",startIcon:N,type:K,variant:X="text",...w}=i,h=Hm(V),Y=R??Z.jsx(oK,{"aria-labelledby":h,color:"inherit",size:16}),z={...i,color:a,component:d,disabled:m,disableElevation:p,disableFocusRipple:B,fullWidth:S,loading:v,loadingIndicator:Y,loadingPosition:k,size:J,type:K,variant:X},T=iK(z),U=(N||v&&k==="start")&&Z.jsx(CK,{className:T.startIcon,ownerState:z,children:N||Z.jsx(ly,{className:T.loadingIconPlaceholder,ownerState:z})}),P=(G||v&&k==="end")&&Z.jsx(aK,{className:T.endIcon,ownerState:z,children:G||Z.jsx(ly,{className:T.loadingIconPlaceholder,ownerState:z})}),O=l||"",_=typeof v=="boolean"?Z.jsx("span",{className:T.loadingWrapper,style:{display:"contents"},children:v&&Z.jsx(cK,{className:T.loadingIndicator,ownerState:z,children:Y})}):null;return Z.jsxs(sK,{ownerState:z,className:Ee(n.className,T.root,A,O),component:d,disabled:m||v,focusRipple:!B,focusVisibleClassName:Ee(T.focusVisible,y),ref:g,type:K,id:v?h:V,...w,classes:T,children:[U,k!=="end"&&_,C,k==="end"&&_,P]})}),uS=On(Z.jsx("path",{d:"M2 15.5v2h20v-2zm0-5v2h20v-2zm0-5v2h20v-2z"}));function dK(e){return typeof e=="string"}function mS(e,t,g){return e===void 0||dK(e)?t:{...t,ownerState:{...t.ownerState,...g}}}function hS(e,t=[]){if(e===void 0)return{};const g={};return Object.keys(e).filter(n=>n.match(/^on[A-Z]/)&&typeof e[n]=="function"&&!t.includes(n)).forEach(n=>{g[n]=e[n]}),g}function Iy(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(g=>!(g.match(/^on[A-Z]/)&&typeof e[g]=="function")).forEach(g=>{t[g]=e[g]}),t}function pS(e){const{getSlotProps:t,additionalProps:g,externalSlotProps:n,externalForwardedProps:l,className:r}=e;if(!t){const B=Ee(g?.className,r,l?.className,n?.className),G={...g?.style,...l?.style,...n?.style},y={...g,...l,...n};return B.length>0&&(y.className=B),Object.keys(G).length>0&&(y.style=G),{props:y,internalRef:void 0}}const i=hS({...l,...n}),C=Iy(n),a=Iy(l),d=t(i),A=Ee(d?.className,g?.className,r,l?.className,n?.className),m={...d?.style,...g?.style,...l?.style,...n?.style},p={...d,...g,...a,...C};return A.length>0&&(p.className=A),Object.keys(m).length>0&&(p.style=m),{props:p,internalRef:d.ref}}function bS(e,t,g){return typeof e=="function"?e(t,g):e}function AK(e){const{elementType:t,externalSlotProps:g,ownerState:n,skipResolvingSlotProps:l=!1,...r}=e,i=l?{}:bS(g,n),{props:C,internalRef:a}=pS({...r,externalSlotProps:i}),d=yg(a,i?.ref,e.additionalProps?.ref);return mS(t,{...C,ref:d},n)}const Zu=f.createContext({});function uK(e){return st("MuiList",e)}gt("MuiList",["root","padding","dense","subheader"]);const mK=e=>{const{classes:t,disablePadding:g,dense:n,subheader:l}=e;return it({root:["root",!g&&"padding",n&&"dense",l&&"subheader"]},uK,t)},hK=Xe("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,!g.disablePadding&&t.padding,g.dense&&t.dense,g.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),pK=f.forwardRef(function(t,g){const n=ut({props:t,name:"MuiList"}),{children:l,className:r,component:i="ul",dense:C=!1,disablePadding:a=!1,subheader:d,...A}=n,m=f.useMemo(()=>({dense:C}),[C]),p={...n,component:i,dense:C,disablePadding:a},B=mK(p);return Z.jsx(Zu.Provider,{value:m,children:Z.jsxs(hK,{as:i,className:Ee(B.root,r),ref:g,ownerState:p,...A,children:[d,l]})})});function ZS(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function fA(e,t,g){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:g?null:e.firstChild}function ry(e,t,g){return e===t?g?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:g?null:e.lastChild}function yS(e,t){if(t===void 0)return!0;let g=e.innerText;return g===void 0&&(g=e.textContent),g=g.trim().toLowerCase(),g.length===0?!1:t.repeating?g[0]===t.keys[0]:g.startsWith(t.keys.join(""))}function Nr(e,t,g,n,l,r){let i=!1,C=l(e,t,t?g:!1);for(;C;){if(C===e.firstChild){if(i)return!1;i=!0}const a=n?!1:C.disabled||C.getAttribute("aria-disabled")==="true";if(!C.hasAttribute("tabindex")||!yS(C,r)||a)C=l(e,C,g);else return C.focus(),!0}return!1}const bK=f.forwardRef(function(t,g){const{actions:n,autoFocus:l=!1,autoFocusItem:r=!1,children:i,className:C,disabledItemsFocusable:a=!1,disableListWrap:d=!1,onKeyDown:A,variant:m="selectedMenu",...p}=t,B=f.useRef(null),G=f.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Qo(()=>{l&&B.current.focus()},[l]),f.useImperativeHandle(n,()=>({adjustStyleForScrollbar:(R,{direction:k})=>{const J=!B.current.style.width;if(R.clientHeight<B.current.clientHeight&&J){const N=`${ZS(mo(R))}px`;B.current.style[k==="rtl"?"paddingLeft":"paddingRight"]=N,B.current.style.width=`calc(100% + ${N})`}return B.current}}),[]);const y=R=>{const k=B.current,J=R.key;if(R.ctrlKey||R.metaKey||R.altKey){A&&A(R);return}const K=Vn(k).activeElement;if(J==="ArrowDown")R.preventDefault(),Nr(k,K,d,a,fA);else if(J==="ArrowUp")R.preventDefault(),Nr(k,K,d,a,ry);else if(J==="Home")R.preventDefault(),Nr(k,null,d,a,fA);else if(J==="End")R.preventDefault(),Nr(k,null,d,a,ry);else if(J.length===1){const X=G.current,w=J.toLowerCase(),h=performance.now();X.keys.length>0&&(h-X.lastTime>500?(X.keys=[],X.repeating=!0,X.previousKeyMatched=!0):X.repeating&&w!==X.keys[0]&&(X.repeating=!1)),X.lastTime=h,X.keys.push(w);const Y=K&&!X.repeating&&yS(K,X);X.previousKeyMatched&&(Y||Nr(k,K,!1,a,fA,X))?R.preventDefault():X.previousKeyMatched=!1}A&&A(R)},S=yg(B,g);let V=-1;f.Children.forEach(i,(R,k)=>{if(!f.isValidElement(R)){V===k&&(V+=1,V>=i.length&&(V=-1));return}R.props.disabled||(m==="selectedMenu"&&R.props.selected||V===-1)&&(V=k),V===k&&(R.props.disabled||R.props.muiSkipListHighlight||R.type.muiSkipListHighlight)&&(V+=1,V>=i.length&&(V=-1))});const v=f.Children.map(i,(R,k)=>{if(k===V){const J={};return r&&(J.autoFocus=!0),R.props.tabIndex===void 0&&m==="selectedMenu"&&(J.tabIndex=0),f.cloneElement(R,J)}return R});return Z.jsx(pK,{role:"menu",ref:S,className:C,onKeyDown:y,tabIndex:l?0:-1,...p,children:v})});function yu(e){return typeof e=="string"}function Ui(e){return parseInt(f.version,10)>=19?e?.props?.ref||null:e?.ref||null}const GS=e=>e.scrollTop;function la(e,t){const{timeout:g,easing:n,style:l={}}=e;return{duration:l.transitionDuration??(typeof g=="number"?g:g[t.mode]||0),easing:l.transitionTimingFunction??(typeof n=="object"?n[t.mode]:n),delay:l.transitionDelay}}function Gu(e){return`scale(${e}, ${e**2})`}const ZK={entering:{opacity:1,transform:Gu(1)},entered:{opacity:1,transform:"none"}},BA=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),fu=f.forwardRef(function(t,g){const{addEndListener:n,appear:l=!0,children:r,easing:i,in:C,onEnter:a,onEntered:d,onEntering:A,onExit:m,onExited:p,onExiting:B,style:G,timeout:y="auto",TransitionComponent:S=qn,...V}=t,v=cS(),R=f.useRef(),k=Oa(),J=f.useRef(null),N=yg(J,Ui(r),g),K=P=>O=>{if(P){const _=J.current;O===void 0?P(_):P(_,O)}},X=K(A),w=K((P,O)=>{GS(P);const{duration:_,delay:j,easing:Q}=la({style:G,timeout:y,easing:i},{mode:"enter"});let $;y==="auto"?($=k.transitions.getAutoHeightDuration(P.clientHeight),R.current=$):$=_,P.style.transition=[k.transitions.create("opacity",{duration:$,delay:j}),k.transitions.create("transform",{duration:BA?$:$*.666,delay:j,easing:Q})].join(","),a&&a(P,O)}),h=K(d),Y=K(B),z=K(P=>{const{duration:O,delay:_,easing:j}=la({style:G,timeout:y,easing:i},{mode:"exit"});let Q;y==="auto"?(Q=k.transitions.getAutoHeightDuration(P.clientHeight),R.current=Q):Q=O,P.style.transition=[k.transitions.create("opacity",{duration:Q,delay:_}),k.transitions.create("transform",{duration:BA?Q:Q*.666,delay:BA?_:_||Q*.333,easing:j})].join(","),P.style.opacity=0,P.style.transform=Gu(.75),m&&m(P)}),T=K(p),U=P=>{y==="auto"&&v.start(R.current||0,P),n&&n(J.current,P)};return Z.jsx(S,{appear:l,in:C,nodeRef:J,onEnter:w,onEntered:h,onEntering:X,onExit:z,onExited:T,onExiting:Y,addEndListener:U,timeout:y==="auto"?null:y,...V,children:(P,{ownerState:O,..._})=>f.cloneElement(r,{style:{opacity:0,transform:Gu(.75),visibility:P==="exited"&&!C?"hidden":void 0,...ZK[P],...G,...r.props.style},ref:N,..._})})});fu&&(fu.muiSupportAuto=!0);function yK(e){const t=Vn(e);return t.body===e?mo(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function ti(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function iy(e){return parseInt(mo(e).getComputedStyle(e).paddingRight,10)||0}function GK(e){const g=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),n=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return g||n}function sy(e,t,g,n,l){const r=[t,g,...n];[].forEach.call(e.children,i=>{const C=!r.includes(i),a=!GK(i);C&&a&&ti(i,l)})}function SA(e,t){let g=-1;return e.some((n,l)=>t(n)?(g=l,!0):!1),g}function fK(e,t){const g=[],n=e.container;if(!t.disableScrollLock){if(yK(n)){const i=ZS(mo(n));g.push({value:n.style.paddingRight,property:"padding-right",el:n}),n.style.paddingRight=`${iy(n)+i}px`;const C=Vn(n).querySelectorAll(".mui-fixed");[].forEach.call(C,a=>{g.push({value:a.style.paddingRight,property:"padding-right",el:a}),a.style.paddingRight=`${iy(a)+i}px`})}let r;if(n.parentNode instanceof DocumentFragment)r=Vn(n).body;else{const i=n.parentElement,C=mo(n);r=i?.nodeName==="HTML"&&C.getComputedStyle(i).overflowY==="scroll"?i:n}g.push({value:r.style.overflow,property:"overflow",el:r},{value:r.style.overflowX,property:"overflow-x",el:r},{value:r.style.overflowY,property:"overflow-y",el:r}),r.style.overflow="hidden"}return()=>{g.forEach(({value:r,el:i,property:C})=>{r?i.style.setProperty(C,r):i.style.removeProperty(C)})}}function BK(e){const t=[];return[].forEach.call(e.children,g=>{g.getAttribute("aria-hidden")==="true"&&t.push(g)}),t}class SK{constructor(){this.modals=[],this.containers=[]}add(t,g){let n=this.modals.indexOf(t);if(n!==-1)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&ti(t.modalRef,!1);const l=BK(g);sy(g,t.mount,t.modalRef,l,!0);const r=SA(this.containers,i=>i.container===g);return r!==-1?(this.containers[r].modals.push(t),n):(this.containers.push({modals:[t],container:g,restore:null,hiddenSiblings:l}),n)}mount(t,g){const n=SA(this.containers,r=>r.modals.includes(t)),l=this.containers[n];l.restore||(l.restore=fK(l,g))}remove(t,g=!0){const n=this.modals.indexOf(t);if(n===-1)return n;const l=SA(this.containers,i=>i.modals.includes(t)),r=this.containers[l];if(r.modals.splice(r.modals.indexOf(t),1),this.modals.splice(n,1),r.modals.length===0)r.restore&&r.restore(),t.modalRef&&ti(t.modalRef,g),sy(r.container,t.mount,t.modalRef,r.hiddenSiblings,!1),this.containers.splice(l,1);else{const i=r.modals[r.modals.length-1];i.modalRef&&ti(i.modalRef,!1)}return n}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const VK=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function WK(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function RK(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=n=>e.ownerDocument.querySelector(`input[type="radio"]${n}`);let g=t(`[name="${e.name}"]:checked`);return g||(g=t(`[name="${e.name}"]`)),g!==e}function XK(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||RK(e))}function kK(e){const t=[],g=[];return Array.from(e.querySelectorAll(VK)).forEach((n,l)=>{const r=WK(n);r===-1||!XK(n)||(r===0?t.push(n):g.push({documentOrder:l,tabIndex:r,node:n}))}),g.sort((n,l)=>n.tabIndex===l.tabIndex?n.documentOrder-l.documentOrder:n.tabIndex-l.tabIndex).map(n=>n.node).concat(t)}function JK(){return!0}function vK(e){const{children:t,disableAutoFocus:g=!1,disableEnforceFocus:n=!1,disableRestoreFocus:l=!1,getTabbable:r=kK,isEnabled:i=JK,open:C}=e,a=f.useRef(!1),d=f.useRef(null),A=f.useRef(null),m=f.useRef(null),p=f.useRef(null),B=f.useRef(!1),G=f.useRef(null),y=yg(Ui(t),G),S=f.useRef(null);f.useEffect(()=>{!C||!G.current||(B.current=!g)},[g,C]),f.useEffect(()=>{if(!C||!G.current)return;const R=Vn(G.current);return G.current.contains(R.activeElement)||(G.current.hasAttribute("tabIndex")||G.current.setAttribute("tabIndex","-1"),B.current&&G.current.focus()),()=>{l||(m.current&&m.current.focus&&(a.current=!0,m.current.focus()),m.current=null)}},[C]),f.useEffect(()=>{if(!C||!G.current)return;const R=Vn(G.current),k=K=>{S.current=K,!(n||!i()||K.key!=="Tab")&&R.activeElement===G.current&&K.shiftKey&&(a.current=!0,A.current&&A.current.focus())},J=()=>{const K=G.current;if(K===null)return;if(!R.hasFocus()||!i()||a.current){a.current=!1;return}if(K.contains(R.activeElement)||n&&R.activeElement!==d.current&&R.activeElement!==A.current)return;if(R.activeElement!==p.current)p.current=null;else if(p.current!==null)return;if(!B.current)return;let X=[];if((R.activeElement===d.current||R.activeElement===A.current)&&(X=r(G.current)),X.length>0){const w=!!(S.current?.shiftKey&&S.current?.key==="Tab"),h=X[0],Y=X[X.length-1];typeof h!="string"&&typeof Y!="string"&&(w?Y.focus():h.focus())}else K.focus()};R.addEventListener("focusin",J),R.addEventListener("keydown",k,!0);const N=setInterval(()=>{R.activeElement&&R.activeElement.tagName==="BODY"&&J()},50);return()=>{clearInterval(N),R.removeEventListener("focusin",J),R.removeEventListener("keydown",k,!0)}},[g,n,l,i,C,r]);const V=R=>{m.current===null&&(m.current=R.relatedTarget),B.current=!0,p.current=R.target;const k=t.props.onFocus;k&&k(R)},v=R=>{m.current===null&&(m.current=R.relatedTarget),B.current=!0};return Z.jsxs(f.Fragment,{children:[Z.jsx("div",{tabIndex:C?0:-1,onFocus:v,ref:d,"data-testid":"sentinelStart"}),f.cloneElement(t,{ref:y,onFocus:V}),Z.jsx("div",{tabIndex:C?0:-1,onFocus:v,ref:A,"data-testid":"sentinelEnd"})]})}function YK(e){return typeof e=="function"?e():e}const HK=f.forwardRef(function(t,g){const{children:n,container:l,disablePortal:r=!1}=t,[i,C]=f.useState(null),a=yg(f.isValidElement(n)?Ui(n):null,g);if(Qo(()=>{r||C(YK(l)||document.body)},[l,r]),Qo(()=>{if(i&&!r)return $0(g,i),()=>{$0(g,null)}},[g,i,r]),r){if(f.isValidElement(n)){const d={ref:a};return f.cloneElement(n,d)}return n}return i&&vf.createPortal(n,i)});function dg(e,t){const{className:g,elementType:n,ownerState:l,externalForwardedProps:r,internalForwardedProps:i,shouldForwardComponentProp:C=!1,...a}=t,{component:d,slots:A={[e]:void 0},slotProps:m={[e]:void 0},...p}=r,B=A[e]||n,G=bS(m[e],l),{props:{component:y,...S},internalRef:V}=pS({className:g,...a,externalForwardedProps:e==="root"?p:void 0,externalSlotProps:G}),v=yg(V,G?.ref,t.ref),R=e==="root"?y||d:y,k=mS(B,{...e==="root"&&!d&&!A[e]&&i,...e!=="root"&&!A[e]&&i,...S,...R&&!C&&{as:R},...R&&C&&{component:R},ref:v},l);return[B,k]}const wK={entering:{opacity:1},entered:{opacity:1}},FK=f.forwardRef(function(t,g){const n=Oa(),l={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:r,appear:i=!0,children:C,easing:a,in:d,onEnter:A,onEntered:m,onEntering:p,onExit:B,onExited:G,onExiting:y,style:S,timeout:V=l,TransitionComponent:v=qn,...R}=t,k=f.useRef(null),J=yg(k,Ui(C),g),N=U=>P=>{if(U){const O=k.current;P===void 0?U(O):U(O,P)}},K=N(p),X=N((U,P)=>{GS(U);const O=la({style:S,timeout:V,easing:a},{mode:"enter"});U.style.webkitTransition=n.transitions.create("opacity",O),U.style.transition=n.transitions.create("opacity",O),A&&A(U,P)}),w=N(m),h=N(y),Y=N(U=>{const P=la({style:S,timeout:V,easing:a},{mode:"exit"});U.style.webkitTransition=n.transitions.create("opacity",P),U.style.transition=n.transitions.create("opacity",P),B&&B(U)}),z=N(G),T=U=>{r&&r(k.current,U)};return Z.jsx(v,{appear:i,in:d,nodeRef:k,onEnter:X,onEntered:w,onEntering:K,onExit:Y,onExited:z,onExiting:h,addEndListener:T,timeout:V,...R,children:(U,{ownerState:P,...O})=>f.cloneElement(C,{style:{opacity:0,visibility:U==="exited"&&!d?"hidden":void 0,...wK[U],...S,...C.props.style},ref:J,...O})})});function NK(e){return st("MuiBackdrop",e)}gt("MuiBackdrop",["root","invisible"]);const KK=e=>{const{classes:t,invisible:g}=e;return it({root:["root",g&&"invisible"]},NK,t)},xK=Xe("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,g.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),EK=f.forwardRef(function(t,g){const n=ut({props:t,name:"MuiBackdrop"}),{children:l,className:r,component:i="div",invisible:C=!1,open:a,components:d={},componentsProps:A={},slotProps:m={},slots:p={},TransitionComponent:B,transitionDuration:G,...y}=n,S={...n,component:i,invisible:C},V=KK(S),v={transition:B,root:d.Root,...p},R={...A,...m},k={slots:v,slotProps:R},[J,N]=dg("root",{elementType:xK,externalForwardedProps:k,className:Ee(V.root,r),ownerState:S}),[K,X]=dg("transition",{elementType:FK,externalForwardedProps:k,ownerState:S});return Z.jsx(K,{in:a,timeout:G,...y,...X,children:Z.jsx(J,{"aria-hidden":!0,...N,classes:V,ref:g,children:l})})});function zK(e){return typeof e=="function"?e():e}function MK(e){return e?e.props.hasOwnProperty("in"):!1}const Cy=()=>{},dC=new SK;function TK(e){const{container:t,disableEscapeKeyDown:g=!1,disableScrollLock:n=!1,closeAfterTransition:l=!1,onTransitionEnter:r,onTransitionExited:i,children:C,onClose:a,open:d,rootRef:A}=e,m=f.useRef({}),p=f.useRef(null),B=f.useRef(null),G=yg(B,A),[y,S]=f.useState(!d),V=MK(C);let v=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(v=!1);const R=()=>Vn(p.current),k=()=>(m.current.modalRef=B.current,m.current.mount=p.current,m.current),J=()=>{dC.mount(k(),{disableScrollLock:n}),B.current&&(B.current.scrollTop=0)},N=fl(()=>{const P=zK(t)||R().body;dC.add(k(),P),B.current&&J()}),K=()=>dC.isTopModal(k()),X=fl(P=>{p.current=P,P&&(d&&K()?J():B.current&&ti(B.current,v))}),w=f.useCallback(()=>{dC.remove(k(),v)},[v]);f.useEffect(()=>()=>{w()},[w]),f.useEffect(()=>{d?N():(!V||!l)&&w()},[d,w,V,l,N]);const h=P=>O=>{P.onKeyDown?.(O),!(O.key!=="Escape"||O.which===229||!K())&&(g||(O.stopPropagation(),a&&a(O,"escapeKeyDown")))},Y=P=>O=>{P.onClick?.(O),O.target===O.currentTarget&&a&&a(O,"backdropClick")};return{getRootProps:(P={})=>{const O=hS(e);delete O.onTransitionEnter,delete O.onTransitionExited;const _={...O,...P};return{role:"presentation",..._,onKeyDown:h(_),ref:G}},getBackdropProps:(P={})=>{const O=P;return{"aria-hidden":!0,...O,onClick:Y(O),open:d}},getTransitionProps:()=>{const P=()=>{S(!1),r&&r()},O=()=>{S(!0),i&&i(),l&&w()};return{onEnter:f0(P,C?.props.onEnter??Cy),onExited:f0(O,C?.props.onExited??Cy)}},rootRef:G,portalRef:X,isTopModal:K,exited:y,hasTransition:V}}function UK(e){return st("MuiModal",e)}gt("MuiModal",["root","hidden","backdrop"]);const LK=e=>{const{open:t,exited:g,classes:n}=e;return it({root:["root",!t&&g&&"hidden"],backdrop:["backdrop"]},UK,n)},QK=Xe("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,!g.open&&g.exited&&t.hidden]}})(Mt(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),DK=Xe(EK,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),Jl=f.forwardRef(function(t,g){const n=ut({name:"MuiModal",props:t}),{BackdropComponent:l=DK,BackdropProps:r,classes:i,className:C,closeAfterTransition:a=!1,children:d,container:A,component:m,components:p={},componentsProps:B={},disableAutoFocus:G=!1,disableEnforceFocus:y=!1,disableEscapeKeyDown:S=!1,disablePortal:V=!1,disableRestoreFocus:v=!1,disableScrollLock:R=!1,hideBackdrop:k=!1,keepMounted:J=!1,onClose:N,onTransitionEnter:K,onTransitionExited:X,open:w,slotProps:h={},slots:Y={},theme:z,...T}=n,U={...n,closeAfterTransition:a,disableAutoFocus:G,disableEnforceFocus:y,disableEscapeKeyDown:S,disablePortal:V,disableRestoreFocus:v,disableScrollLock:R,hideBackdrop:k,keepMounted:J},{getRootProps:P,getBackdropProps:O,getTransitionProps:_,portalRef:j,isTopModal:Q,exited:$,hasTransition:F}=TK({...U,rootRef:g}),M={...U,exited:$},ne=LK(M),re={};if(d.props.tabIndex===void 0&&(re.tabIndex="-1"),F){const{onEnter:ue,onExited:de}=_();re.onEnter=ue,re.onExited=de}const oe={slots:{root:p.Root,backdrop:p.Backdrop,...Y},slotProps:{...B,...h}},[ce,ae]=dg("root",{ref:g,elementType:QK,externalForwardedProps:{...oe,...T,component:m},getSlotProps:P,ownerState:M,className:Ee(C,ne?.root,!M.open&&M.exited&&ne?.hidden)}),[Ge,me]=dg("backdrop",{ref:r?.ref,elementType:l,externalForwardedProps:oe,shouldForwardComponentProp:!0,additionalProps:r,getSlotProps:ue=>O({...ue,onClick:de=>{ue?.onClick&&ue.onClick(de)}}),className:Ee(r?.className,ne?.backdrop),ownerState:M});return!J&&!w&&(!F||$)?null:Z.jsx(HK,{ref:j,container:A,disablePortal:V,children:Z.jsxs(ce,{...ae,children:[!k&&l?Z.jsx(Ge,{...me}):null,Z.jsx(vK,{disableEnforceFocus:y,disableAutoFocus:G,disableRestoreFocus:v,isEnabled:Q,open:w,children:f.cloneElement(d,re)})]})})});function jK(e){return st("MuiPaper",e)}gt("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const PK=e=>{const{square:t,elevation:g,variant:n,classes:l}=e,r={root:["root",n,!t&&"rounded",n==="elevation"&&`elevation${g}`]};return it(r,jK,l)},OK=Xe("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,t[g.variant],!g.square&&t.rounded,g.variant==="elevation"&&t[`elevation${g.elevation}`]]}})(Mt(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),fS=f.forwardRef(function(t,g){const n=ut({props:t,name:"MuiPaper"}),l=Oa(),{className:r,component:i="div",elevation:C=1,square:a=!1,variant:d="elevation",...A}=n,m={...n,component:i,elevation:C,square:a,variant:d},p=PK(m);return Z.jsx(OK,{as:i,ownerState:m,className:Ee(p.root,r),ref:g,...A,style:{...d==="elevation"&&{"--Paper-shadow":(l.vars||l).shadows[C],...l.vars&&{"--Paper-overlay":l.vars.overlays?.[C]},...!l.vars&&l.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${sn("#fff",du(C))}, ${sn("#fff",du(C))})`}},...A.style}})});function qK(e){return st("MuiPopover",e)}gt("MuiPopover",["root","paper"]);function ay(e,t){let g=0;return typeof t=="number"?g=t:t==="center"?g=e.height/2:t==="bottom"&&(g=e.height),g}function cy(e,t){let g=0;return typeof t=="number"?g=t:t==="center"?g=e.width/2:t==="right"&&(g=e.width),g}function dy(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function AC(e){return typeof e=="function"?e():e}const $K=e=>{const{classes:t}=e;return it({root:["root"],paper:["paper"]},qK,t)},_K=Xe(Jl,{name:"MuiPopover",slot:"Root"})({}),BS=Xe(fS,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),e9=f.forwardRef(function(t,g){const n=ut({props:t,name:"MuiPopover"}),{action:l,anchorEl:r,anchorOrigin:i={vertical:"top",horizontal:"left"},anchorPosition:C,anchorReference:a="anchorEl",children:d,className:A,container:m,elevation:p=8,marginThreshold:B=16,open:G,PaperProps:y={},slots:S={},slotProps:V={},transformOrigin:v={vertical:"top",horizontal:"left"},TransitionComponent:R,transitionDuration:k="auto",TransitionProps:J={},disableScrollLock:N=!1,...K}=n,X=f.useRef(),w={...n,anchorOrigin:i,anchorReference:a,elevation:p,marginThreshold:B,transformOrigin:v,TransitionComponent:R,transitionDuration:k,TransitionProps:J},h=$K(w),Y=f.useCallback(()=>{if(a==="anchorPosition")return C;const ue=AC(r),he=(ue&&ue.nodeType===1?ue:Vn(X.current).body).getBoundingClientRect();return{top:he.top+ay(he,i.vertical),left:he.left+cy(he,i.horizontal)}},[r,i.horizontal,i.vertical,C,a]),z=f.useCallback(ue=>({vertical:ay(ue,v.vertical),horizontal:cy(ue,v.horizontal)}),[v.horizontal,v.vertical]),T=f.useCallback(ue=>{const de={width:ue.offsetWidth,height:ue.offsetHeight},he=z(de);if(a==="none")return{top:null,left:null,transformOrigin:dy(he)};const Ke=Y();let He=Ke.top-he.vertical,xe=Ke.left-he.horizontal;const je=He+de.height,fe=xe+de.width,pe=mo(AC(r)),ye=pe.innerHeight-B,Ce=pe.innerWidth-B;if(B!==null&&He<B){const be=He-B;He-=be,he.vertical+=be}else if(B!==null&&je>ye){const be=je-ye;He-=be,he.vertical+=be}if(B!==null&&xe<B){const be=xe-B;xe-=be,he.horizontal+=be}else if(fe>Ce){const be=fe-Ce;xe-=be,he.horizontal+=be}return{top:`${Math.round(He)}px`,left:`${Math.round(xe)}px`,transformOrigin:dy(he)}},[r,a,Y,z,B]),[U,P]=f.useState(G),O=f.useCallback(()=>{const ue=X.current;if(!ue)return;const de=T(ue);de.top!==null&&ue.style.setProperty("top",de.top),de.left!==null&&(ue.style.left=de.left),ue.style.transformOrigin=de.transformOrigin,P(!0)},[T]);f.useEffect(()=>(N&&window.addEventListener("scroll",O),()=>window.removeEventListener("scroll",O)),[r,N,O]);const _=()=>{O()},j=()=>{P(!1)};f.useEffect(()=>{G&&O()}),f.useImperativeHandle(l,()=>G?{updatePosition:()=>{O()}}:null,[G,O]),f.useEffect(()=>{if(!G)return;const ue=sS(()=>{O()}),de=mo(AC(r));return de.addEventListener("resize",ue),()=>{ue.clear(),de.removeEventListener("resize",ue)}},[r,G,O]);let Q=k;const $={slots:{transition:R,...S},slotProps:{transition:J,paper:y,...V}},[F,M]=dg("transition",{elementType:fu,externalForwardedProps:$,ownerState:w,getSlotProps:ue=>({...ue,onEntering:(de,he)=>{ue.onEntering?.(de,he),_()},onExited:de=>{ue.onExited?.(de),j()}}),additionalProps:{appear:!0,in:G}});k==="auto"&&!F.muiSupportAuto&&(Q=void 0);const ne=m||(r?Vn(AC(r)).body:void 0),[re,{slots:oe,slotProps:ce,...ae}]=dg("root",{ref:g,elementType:_K,externalForwardedProps:{...$,...K},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:S.backdrop},slotProps:{backdrop:SN(typeof V.backdrop=="function"?V.backdrop(w):V.backdrop,{invisible:!0})},container:ne,open:G},ownerState:w,className:Ee(h.root,A)}),[Ge,me]=dg("paper",{ref:X,className:h.paper,elementType:BS,externalForwardedProps:$,shouldForwardComponentProp:!0,additionalProps:{elevation:p,style:U?void 0:{opacity:0}},ownerState:w});return Z.jsx(re,{...ae,...!yu(re)&&{slots:oe,slotProps:ce,disableScrollLock:N},children:Z.jsx(F,{...M,timeout:Q,children:Z.jsx(Ge,{...me,children:d})})})});function t9(e){return st("MuiMenu",e)}gt("MuiMenu",["root","paper","list"]);const g9={vertical:"top",horizontal:"right"},n9={vertical:"top",horizontal:"left"},o9=e=>{const{classes:t}=e;return it({root:["root"],paper:["paper"],list:["list"]},t9,t)},l9=Xe(e9,{shouldForwardProp:e=>dn(e)||e==="classes",name:"MuiMenu",slot:"Root"})({}),I9=Xe(BS,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),r9=Xe(bK,{name:"MuiMenu",slot:"List"})({outline:0}),xm=f.forwardRef(function(t,g){const n=ut({props:t,name:"MuiMenu"}),{autoFocus:l=!0,children:r,className:i,disableAutoFocusItem:C=!1,MenuListProps:a={},onClose:d,open:A,PaperProps:m={},PopoverClasses:p,transitionDuration:B="auto",TransitionProps:{onEntering:G,...y}={},variant:S="selectedMenu",slots:V={},slotProps:v={},...R}=n,k=cF(),J={...n,autoFocus:l,disableAutoFocusItem:C,MenuListProps:a,onEntering:G,PaperProps:m,transitionDuration:B,TransitionProps:y,variant:S},N=o9(J),K=l&&!C&&A,X=f.useRef(null),w=(Q,$)=>{X.current&&X.current.adjustStyleForScrollbar(Q,{direction:k?"rtl":"ltr"}),G&&G(Q,$)},h=Q=>{Q.key==="Tab"&&(Q.preventDefault(),d&&d(Q,"tabKeyDown"))};let Y=-1;f.Children.map(r,(Q,$)=>{f.isValidElement(Q)&&(Q.props.disabled||(S==="selectedMenu"&&Q.props.selected||Y===-1)&&(Y=$))});const z={slots:V,slotProps:{list:a,transition:y,paper:m,...v}},T=AK({elementType:V.root,externalSlotProps:v.root,ownerState:J,className:[N.root,i]}),[U,P]=dg("paper",{className:N.paper,elementType:I9,externalForwardedProps:z,shouldForwardComponentProp:!0,ownerState:J}),[O,_]=dg("list",{className:Ee(N.list,a.className),elementType:r9,shouldForwardComponentProp:!0,externalForwardedProps:z,getSlotProps:Q=>({...Q,onKeyDown:$=>{h($),Q.onKeyDown?.($)}}),ownerState:J}),j=typeof z.slotProps.transition=="function"?z.slotProps.transition(J):z.slotProps.transition;return Z.jsx(l9,{onClose:d,anchorOrigin:{vertical:"bottom",horizontal:k?"right":"left"},transformOrigin:k?g9:n9,slots:{root:V.root,paper:U,backdrop:V.backdrop,...V.transition&&{transition:V.transition}},slotProps:{root:T,paper:P,backdrop:typeof v.backdrop=="function"?v.backdrop(J):v.backdrop,transition:{...j,onEntering:(...Q)=>{w(...Q),j?.onEntering?.(...Q)}}},open:A,ref:g,transitionDuration:B,ownerState:J,...R,classes:p,children:Z.jsx(O,{actions:X,autoFocus:l&&(Y===-1||C),autoFocusItem:K,variant:S,..._,children:r})})}),Ay=gt("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),uy=gt("MuiListItemIcon",["root","alignItemsFlexStart"]);function i9(e){return st("MuiTypography",e)}gt("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const s9={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},C9=hN(),a9=e=>{const{align:t,gutterBottom:g,noWrap:n,paragraph:l,variant:r,classes:i}=e,C={root:["root",r,e.align!=="inherit"&&`align${Me(t)}`,g&&"gutterBottom",n&&"noWrap",l&&"paragraph"]};return it(C,i9,i)},c9=Xe("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,g.variant&&t[g.variant],g.align!=="inherit"&&t[`align${Me(g.align)}`],g.noWrap&&t.noWrap,g.gutterBottom&&t.gutterBottom,g.paragraph&&t.paragraph]}})(Mt(({theme:e})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([t,g])=>t!=="inherit"&&g&&typeof g=="object").map(([t,g])=>({props:{variant:t},style:g})),...Object.entries(e.palette).filter(kl()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette?.text||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${Me(t)}`},style:{color:(e.vars||e).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}))),my={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Fg=f.forwardRef(function(t,g){const{color:n,...l}=ut({props:t,name:"MuiTypography"}),r=!s9[n],i=C9({...l,...r&&{color:n}}),{align:C="inherit",className:a,component:d,gutterBottom:A=!1,noWrap:m=!1,paragraph:p=!1,variant:B="body1",variantMapping:G=my,...y}=i,S={...i,align:C,color:n,className:a,component:d,gutterBottom:A,noWrap:m,paragraph:p,variant:B,variantMapping:G},V=d||(p?"p":G[B]||my[B])||"span",v=a9(S);return Z.jsx(c9,{as:V,ref:g,className:Ee(v.root,a),...y,ownerState:S,style:{...C!=="inherit"&&{"--Typography-textAlign":C},...y.style}})}),hy=gt("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function d9(e){return st("MuiMenuItem",e)}const Kr=gt("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),A9=(e,t)=>{const{ownerState:g}=e;return[t.root,g.dense&&t.dense,g.divider&&t.divider,!g.disableGutters&&t.gutters]},u9=e=>{const{disabled:t,dense:g,divider:n,disableGutters:l,selected:r,classes:i}=e,a=it({root:["root",g&&"dense",t&&"disabled",!l&&"gutters",n&&"divider",r&&"selected"]},d9,i);return{...i,...a}},m9=Xe(dS,{shouldForwardProp:e=>dn(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:A9})(Mt(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Kr.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:sn(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Kr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:sn(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Kr.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:sn(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:sn(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${Kr.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Kr.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${Ay.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${Ay.inset}`]:{marginLeft:52},[`& .${hy.root}`]:{marginTop:0,marginBottom:0},[`& .${hy.inset}`]:{paddingLeft:36},[`& .${uy.root}`]:{minWidth:36},variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>!t.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:t})=>t.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${uy.root} svg`]:{fontSize:"1.25rem"}}}]}))),kg=f.forwardRef(function(t,g){const n=ut({props:t,name:"MuiMenuItem"}),{autoFocus:l=!1,component:r="li",dense:i=!1,divider:C=!1,disableGutters:a=!1,focusVisibleClassName:d,role:A="menuitem",tabIndex:m,className:p,...B}=n,G=f.useContext(Zu),y=f.useMemo(()=>({dense:i||G.dense||!1,disableGutters:a}),[G.dense,i,a]),S=f.useRef(null);Qo(()=>{l&&S.current&&S.current.focus()},[l]);const V={...n,dense:y.dense,divider:C,disableGutters:a},v=u9(n),R=yg(S,g);let k;return n.disabled||(k=m!==void 0?m:-1),Z.jsx(Zu.Provider,{value:y,children:Z.jsx(m9,{ref:R,role:A,tabIndex:k,component:r,focusVisibleClassName:Ee(v.focusVisible,d),className:Ee(v.root,p),...B,ownerState:V,classes:v})})}),h9=On(Z.jsx("path",{d:"m11 8.89.94 3.11h2.82l-2.27 1.62.93 3.01L11 14.79l-2.42 1.84.93-3.01L7.24 12h2.82zM8.58 10H1l6.17 4.41L4.83 22 11 17.31 17.18 22l-2.35-7.59L21 10h-7.58L11 2zm12.78 12-1.86-6.01L23.68 13h-3.44l-3.08 2.2 1.46 4.72zM17 8l-1.82-6-1.04 3.45.77 2.55z"})),p9=On(Z.jsx("path",{d:"m12 5.69 5 4.5V18h-2v-6H9v6H7v-7.81zM12 3 2 12h3v8h6v-6h2v6h6v-8h3z"})),b9=On(Z.jsx("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"})),Z9=On(Z.jsx("path",{d:"M12.22 19.85c-.18.18-.5.21-.71 0-.18-.18-.21-.5 0-.71l3.39-3.39-1.41-1.41-3.39 3.39c-.19.2-.51.19-.71 0-.21-.21-.18-.53 0-.71l3.39-3.39-1.41-1.41-3.39 3.39c-.18.18-.5.21-.71 0-.19-.19-.19-.51 0-.71l3.39-3.39-1.42-1.41-3.39 3.39c-.18.18-.5.21-.71 0-.19-.2-.19-.51 0-.71L9.52 8.4l1.87 1.86c.95.95 2.59.94 3.54 0 .98-.98.98-2.56 0-3.54l-1.86-1.86.28-.28c.78-.78 2.05-.78 2.83 0l4.24 4.24c.78.78.78 2.05 0 2.83zm9.61-6.78c1.56-1.56 1.56-4.09 0-5.66l-4.24-4.24c-1.56-1.56-4.09-1.56-5.66 0l-.28.28-.28-.28c-1.56-1.56-4.09-1.56-5.66 0L2.17 6.71C.75 8.13.62 10.34 1.77 11.9l1.45-1.45c-.39-.75-.26-1.7.37-2.33l3.54-3.54c.78-.78 2.05-.78 2.83 0l3.56 3.56c.18.18.21.5 0 .71s-.53.18-.71 0L9.52 5.57l-5.8 5.79c-.98.97-.98 2.56 0 3.54.39.39.89.63 1.42.7.07.52.3 1.02.7 1.42s.9.63 1.42.7c.07.52.3 1.02.7 1.42s.9.63 1.42.7c.07.54.31 1.03.7 1.42.47.47 1.1.73 1.77.73s1.3-.26 1.77-.73z"})),y9="http://localhost:8080",G9=()=>{const[e,t]=f.useState(0),g=localStorage.getItem("token");return f.useEffect(()=>{(async()=>{try{const l=await Re.get(`${y9}/api/points/`,{headers:{Authorization:`Bearer ${g}`}});t(l.data)}catch{console.error("couldn't get points")}})()},[]),Z.jsx(Z.Fragment,{children:Z.jsx("div",{style:{margin:0},children:Z.jsxs("h3",{style:{fontSize:"13px",color:"white",margin:0},children:[e," Embers"]})})})},Li=f.createContext(),Qi=()=>{const{logout:e}=f.useContext(Li),t=Zo(),[g,n]=f.useState(null),l=!!g,r=a=>{n(a.currentTarget)},i=a=>{n(null),t(a)},C=async a=>{try{await Re.post(`${API_URL}/api/auth/logout`)||console.error("couldn't log out"),e(),Re.defaults.headers.common.Authorization="",t(a)}catch(d){console.log(d)}};return Z.jsxs("div",{id:"nav",style:f9,children:[Z.jsxs("div",{children:[Z.jsx(tt,{id:"basic-button","aria-controls":l?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":l?"true":void 0,onClick:r,children:Z.jsx(uS,{sx:{color:"white"}})}),Z.jsxs(xm,{id:"basic-menu",anchorEl:g,open:l,onClose:i,slotProps:{list:{"aria-labelledby":"basic-button"}},children:[Z.jsxs(kg,{onClick:()=>i("/profile"),children:[" ",Z.jsx(b9,{fontSize:"small"})," Profile"]}),Z.jsxs(kg,{onClick:()=>i("/home"),children:[Z.jsx(p9,{fontSize:"small"})," Home"]}),Z.jsxs(kg,{onClick:()=>i("/rewards"),children:[" ",Z.jsx(h9,{fontSize:"small"})," Rewards"]}),Z.jsxs(kg,{onClick:()=>i("/member"),children:[" ",Z.jsx(Z9,{fontSize:"small"})," Member"]}),Z.jsx(kg,{onClick:()=>C("/"),style:{color:"red"},children:"Logout"})]})]}),Z.jsx("div",{children:Z.jsx(G9,{})})]})},f9={width:"100%",display:"flex",alignItems:"center",position:"sticky",top:0,zIndex:10,backgroundColor:"#ff2400",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",justifyContent:"space-between",padding:"10px",paddingRight:"25px"},Em=({img:e,business_name:t,onUpload:g,isSelected:n,onClick:l})=>{const r=localStorage.getItem("role"),i=f.useRef(null),[C,a]=f.useState(e||null);f.useEffect(()=>{e&&a(e)},[e]);const d=()=>{r==="vendor"&&i.current?i.current.click():l&&l()},A=m=>{const p=m.target.files[0];if(p){const B=URL.createObjectURL(p);a(B),g(p)}};return Z.jsxs("div",{style:{boxShadow:n?"0 0 10px #FF5F00":"0 0 3px #FF5F00",border:n?"3px solid #FF5F00":"none",cursor:r==="vendor"?"pointer":"default",borderRadius:"10px",padding:10,display:"flex",flexDirection:"column",alignItems:"center",width:130},onClick:d,children:[r==="vendor"&&!C?Z.jsx("div",{style:{width:"110px",height:"110px",borderRadius:"50%",backgroundColor:"lightgray",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:40},children:"+"}):Z.jsx("img",{style:{width:"110px",height:"110px",borderRadius:"50%"},src:C,alt:"vendor_img"}),Z.jsx("div",{style:{...B9,marginTop:5},children:Z.jsx("h4",{style:{color:n?"#FF5F00":"grey"},children:t})}),r==="vendor"&&Z.jsx("input",{type:"file",accept:"image/*",ref:i,style:{display:"none"},onChange:A})]})},B9={padding:0,color:"black",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",textAlign:"center",textOverflow:"ellipsis"},S9=On([Z.jsx("path",{d:"m12 12.9-2.13 2.09c-.56.56-.87 1.29-.87 2.07C9 18.68 10.35 20 12 20s3-1.32 3-2.94c0-.78-.31-1.52-.87-2.07z"},"0"),Z.jsx("path",{d:"m16 6-.44.55C14.38 8.02 12 7.19 12 5.3V2S4 6 4 13c0 2.92 1.56 5.47 3.89 6.86-.56-.79-.89-1.76-.89-2.8 0-1.32.52-2.56 1.47-3.5L12 10.1l3.53 3.47c.95.93 1.47 2.17 1.47 3.5 0 1.02-.31 1.96-.85 2.75 1.89-1.15 3.29-3.06 3.71-5.3.66-3.55-1.07-6.9-3.86-8.52"},"1")]),V9=On(Z.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"})),W9=On(Z.jsx("path",{d:"m21.41 11.41-8.83-8.83c-.37-.37-.88-.58-1.41-.58H4c-1.1 0-2 .9-2 2v7.17c0 .53.21 1.04.59 1.41l8.83 8.83c.78.78 2.05.78 2.83 0l7.17-7.17c.78-.78.78-2.04-.01-2.83M6.5 8C5.67 8 5 7.33 5 6.5S5.67 5 6.5 5 8 5.67 8 6.5 7.33 8 6.5 8"})),R9=On(Z.jsx("path",{d:"M20 4H4v2h16zm1 10v-2l-1-5H4l-1 5v2h1v6h10v-6h4v6h2v-6zm-9 4H6v-4h6z"})),X9=({rewardId:e,rewardImg:t,rewardTitle:g,rewardPrice:n})=>Z.jsxs("div",{style:k9,children:[Z.jsx("img",{style:{width:"70%",height:"70%",margin:0},src:t,alt:`${g} image`}),Z.jsx("h4",{style:py,children:g}),Z.jsxs("h4",{style:{...py,display:"flex",alignItems:"center",gap:"6px"},children:[Z.jsx(S9,{}),n," Embers"]})]}),k9={width:"100%",Height:"100%",padding:"10px",margin:0,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},py={color:"#FF5F00",margin:0,fontSize:"15px",lineHeight:1};var uC={},by;function J9(){if(by)return uC;by=1,Object.defineProperty(uC,"__esModule",{value:!0});var e=da();function t(X){return Array.prototype.slice.call(X)}function g(X,w){var h=Math.floor(X);return h===w||h+1===w?X:w}function n(){return Date.now()}function l(X,w,h){if(w="data-keen-slider-"+w,h===null)return X.removeAttribute(w);X.setAttribute(w,h||"")}function r(X,w){return w=w||document,typeof X=="function"&&(X=X(w)),Array.isArray(X)?X:typeof X=="string"?t(w.querySelectorAll(X)):X instanceof HTMLElement?[X]:X instanceof NodeList?t(X):[]}function i(X){X.raw&&(X=X.raw),X.cancelable&&!X.defaultPrevented&&X.preventDefault()}function C(X){X.raw&&(X=X.raw),X.stopPropagation&&X.stopPropagation()}function a(){var X=[];return{add:function(w,h,Y,z){w.addListener?w.addListener(Y):w.addEventListener(h,Y,z),X.push([w,h,Y,z])},input:function(w,h,Y,z){this.add(w,h,function(T){return function(U){U.nativeEvent&&(U=U.nativeEvent);var P=U.changedTouches||[],O=U.targetTouches||[],_=U.detail&&U.detail.x?U.detail:null;return T({id:_?_.identifier?_.identifier:"i":O[0]?O[0]?O[0].identifier:"e":"d",idChanged:_?_.identifier?_.identifier:"i":P[0]?P[0]?P[0].identifier:"e":"d",raw:U,x:_&&_.x?_.x:O[0]?O[0].screenX:_?_.x:U.pageX,y:_&&_.y?_.y:O[0]?O[0].screenY:_?_.y:U.pageY})}}(Y),z)},purge:function(){X.forEach(function(w){w[0].removeListener?w[0].removeListener(w[2]):w[0].removeEventListener(w[1],w[2],w[3])}),X=[]}}}function d(X,w,h){return Math.min(Math.max(X,w),h)}function A(X){return(X>0?1:0)-(X<0?1:0)||+X}function m(X){var w=X.getBoundingClientRect();return{height:g(w.height,X.offsetHeight),width:g(w.width,X.offsetWidth)}}function p(X,w,h,Y){var z=X&&X[w];return z==null?h:Y&&typeof z=="function"?z():z}function B(X){return Math.round(1e6*X)/1e6}function G(X,w){if(X===w)return!0;var h=typeof X;if(h!==typeof w)return!1;if(h!=="object"||X===null||w===null)return h==="function"&&X.toString()===w.toString();if(X.length!==w.length||Object.getOwnPropertyNames(X).length!==Object.getOwnPropertyNames(w).length)return!1;for(var Y in X)if(!G(X[Y],w[Y]))return!1;return!0}var y=function(){return y=Object.assign||function(X){for(var w,h=1,Y=arguments.length;h<Y;h++)for(var z in w=arguments[h])Object.prototype.hasOwnProperty.call(w,z)&&(X[z]=w[z]);return X},y.apply(this,arguments)};function S(X,w,h){for(var Y,z=0,T=w.length;z<T;z++)!Y&&z in w||(Y||(Y=Array.prototype.slice.call(w,0,z)),Y[z]=w[z]);return X.concat(Y||Array.prototype.slice.call(w))}function V(X){var w,h,Y,z,T,U;function P($){U||(U=$),O(!0);var F=$-U;F>Y&&(F=Y);var M=z[h];if(M[3]<F)return h++,P($);var ne=M[2],re=M[4],oe=M[0],ce=M[1]*(0,M[5])(re===0?1:(F-ne)/re);if(ce&&X.track.to(oe+ce),F<Y)return j();U=null,O(!1),_(null),X.emit("animationEnded")}function O($){w.active=$}function _($){w.targetIdx=$}function j(){var $;$=P,T=window.requestAnimationFrame($)}function Q(){var $;$=T,window.cancelAnimationFrame($),O(!1),_(null),U&&X.emit("animationStopped"),U=null}return w={active:!1,start:function($){if(Q(),X.track.details){var F=0,M=X.track.details.position;h=0,Y=0,z=$.map(function(ne){var re,oe=Number(M),ce=(re=ne.earlyExit)!==null&&re!==void 0?re:ne.duration,ae=ne.easing,Ge=ne.distance*ae(ce/ne.duration)||0;M+=Ge;var me=Y;return Y+=ce,F+=Ge,[oe,ne.distance,me,Y,ne.duration,ae]}),_(X.track.distToIdx(F)),j(),X.emit("animationStarted")}},stop:Q,targetIdx:null}}function v(X){var w,h,Y,z,T,U,P,O,_,j,Q,$,F,M,ne=1/0,re=[],oe=null,ce=0;function ae(pe){je(ce+pe)}function Ge(pe){var ye=me(ce+pe).abs;return he(ye)?ye:null}function me(pe){var ye=Math.floor(Math.abs(B(pe/h))),Ce=B((pe%h+h)%h);Ce===h&&(Ce=0);var be=A(pe),le=P.indexOf(S([],P).reduce(function(we,Te){return Math.abs(Te-Ce)<Math.abs(we-Ce)?Te:we})),ke=le;return be<0&&ye++,le===U&&(ke=0,ye+=be>0?1:-1),{abs:ke+ye*U*be,origin:le,rel:ke}}function ue(pe,ye,Ce){var be;if(ye||!He())return de(pe,Ce);if(!he(pe))return null;var le=me(Ce??ce),ke=le.abs,we=pe-le.rel,Te=ke+we;be=de(Te);var ot=de(Te-U*A(we));return(ot!==null&&Math.abs(ot)<Math.abs(be)||be===null)&&(be=ot),B(be)}function de(pe,ye){if(ye==null&&(ye=B(ce)),!he(pe)||pe===null)return null;pe=Math.round(pe);var Ce=me(ye),be=Ce.abs,le=Ce.rel,ke=Ce.origin,we=xe(pe),Te=(ye%h+h)%h,ot=P[ke],Tt=Math.floor((pe-(be-le))/U)*h;return B(ot-Te-ot+P[we]+Tt+(ke===U?h:0))}function he(pe){return Ke(pe)===pe}function Ke(pe){return d(pe,_,j)}function He(){return z.loop}function xe(pe){return(pe%U+U)%U}function je(pe){var ye;ye=pe-ce,re.push({distance:ye,timestamp:n()}),re.length>6&&(re=re.slice(-6)),ce=B(pe);var Ce=fe().abs;if(Ce!==oe){var be=oe!==null;oe=Ce,be&&X.emit("slideChanged")}}function fe(pe){var ye=pe?null:function(){if(U){var Ce=He(),be=Ce?(ce%h+h)%h:ce,le=(Ce?ce%h:ce)-T[0][2],ke=0-(le<0&&Ce?h-Math.abs(le):le),we=0,Te=me(ce),ot=Te.abs,Tt=Te.rel,Ig=T[Tt][2],fg=T.map(function(Zt,Pe){var mt=ke+we;(mt<0-Zt[0]||mt>1)&&(mt+=(Math.abs(mt)>h-1&&Ce?h:0)*A(-mt));var An=Pe-Tt,Je=A(An),Qe=An+ot;Ce&&(Je===-1&&mt>Ig&&(Qe+=U),Je===1&&mt<Ig&&(Qe-=U),Q!==null&&Qe<Q&&(mt+=h),$!==null&&Qe>$&&(mt-=h));var yt=mt+Zt[0]+Zt[1],jg=Math.max(mt>=0&&yt<=1?1:yt<0||mt>1?0:mt<0?Math.min(1,(Zt[0]+mt)/Zt[0]):(1-mt)/Zt[0],0);return we+=Zt[0]+Zt[1],{abs:Qe,distance:z.rtl?-1*mt+1-Zt[0]:mt,portion:jg,size:Zt[0]}});return ot=Ke(ot),Tt=xe(ot),{abs:Ke(ot),length:Y,max:M,maxIdx:j,min:F,minIdx:_,position:ce,progress:Ce?be/h:ce/Y,rel:Tt,slides:fg,slidesLength:h}}}();return w.details=ye,X.emit("detailsChanged"),ye}return w={absToRel:xe,add:ae,details:null,distToIdx:Ge,idxToDist:ue,init:function(pe){if(function(){if(z=X.options,T=(z.trackConfig||[]).map(function(le){return[p(le,"size",1),p(le,"spacing",0),p(le,"origin",0)]}),U=T.length){h=B(T.reduce(function(le,ke){return le+ke[0]+ke[1]},0));var Ce,be=U-1;Y=B(h+T[0][2]-T[be][0]-T[be][2]-T[be][1]),P=T.reduce(function(le,ke){if(!le)return[0];var we=T[le.length-1],Te=le[le.length-1]+(we[0]+we[2])+we[1];return Te-=ke[2],le[le.length-1]>Te&&(Te=le[le.length-1]),Te=B(Te),le.push(Te),(!Ce||Ce<Te)&&(O=le.length-1),Ce=Te,le},null),Y===0&&(O=0),P.push(B(h))}}(),!U)return fe(!0);var ye;(function(){var Ce=X.options.range,be=X.options.loop;Q=_=be?p(be,"min",-1/0):0,$=j=be?p(be,"max",ne):O;var le=p(Ce,"min",null),ke=p(Ce,"max",null);le!==null&&(_=le),ke!==null&&(j=ke),F=_===-1/0?_:X.track.idxToDist(_||0,!0,0),M=j===ne?j:ue(j,!0,0),ke===null&&($=j),p(Ce,"align",!1)&&j!==ne&&T[xe(j)][2]===0&&(M-=1-T[xe(j)][0],j=Ge(M-ce)),F=B(F),M=B(M)})(),ye=pe,Number(ye)===ye?ae(de(Ke(pe))):fe()},to:je,velocity:function(){var pe=n(),ye=re.reduce(function(Ce,be){var le=be.distance,ke=be.timestamp;return pe-ke>200||(A(le)!==A(Ce.distance)&&Ce.distance&&(Ce={distance:0,lastTimestamp:0,time:0}),Ce.time&&(Ce.distance+=le),Ce.lastTimestamp&&(Ce.time+=ke-Ce.lastTimestamp),Ce.lastTimestamp=ke),Ce},{distance:0,lastTimestamp:0,time:0});return ye.distance/ye.time||0}}}function R(X){var w,h,Y,z,T,U,P,O;function _(oe){return 2*oe}function j(oe){return d(oe,P,O)}function Q(oe){return 1-Math.pow(1-oe,3)}function $(){return Y?X.track.velocity():0}function F(){re();var oe=X.options.mode==="free-snap",ce=X.track,ae=$();z=A(ae);var Ge=X.track.details,me=[];if(ae||!oe){var ue=M(ae),de=ue.dist,he=ue.dur;if(he=_(he),de*=z,oe){var Ke=ce.idxToDist(ce.distToIdx(de),!0);Ke&&(de=Ke)}me.push({distance:de,duration:he,easing:Q});var He=Ge.position,xe=He+de;if(xe<T||xe>U){var je=xe<T?T-He:U-He,fe=0,pe=ae;if(A(je)===z){var ye=Math.min(Math.abs(je)/Math.abs(de),1),Ce=function(ke){return 1-Math.pow(1-ke,1/3)}(ye)*he;me[0].earlyExit=Ce,pe=ae*(1-ye)}else me[0].earlyExit=0,fe+=je;var be=M(pe,100),le=be.dist*z;X.options.rubberband&&(me.push({distance:le,duration:_(be.dur),easing:Q}),me.push({distance:-le+fe,duration:500,easing:Q}))}X.animator.start(me)}else X.moveToIdx(j(Ge.abs),!0,{duration:500,easing:function(ke){return 1+--ke*ke*ke*ke*ke}})}function M(oe,ce){ce===void 0&&(ce=1e3);var ae=147e-9+(oe=Math.abs(oe))/ce;return{dist:Math.pow(oe,2)/ae,dur:oe/ae}}function ne(){var oe=X.track.details;oe&&(T=oe.min,U=oe.max,P=oe.minIdx,O=oe.maxIdx)}function re(){X.animator.stop()}X.on("updated",ne),X.on("optionsChanged",ne),X.on("created",ne),X.on("dragStarted",function(){Y=!1,re(),w=h=X.track.details.abs}),X.on("dragChecked",function(){Y=!0}),X.on("dragEnded",function(){var oe=X.options.mode;oe==="snap"&&function(){var ce=X.track,ae=X.track.details,Ge=ae.position,me=A($());(Ge>U||Ge<T)&&(me=0);var ue=w+me;ae.slides[ce.absToRel(ue)].portion===0&&(ue-=me),w!==h&&(ue=h),A(ce.idxToDist(ue,!0))!==me&&(ue+=me),ue=j(ue);var de=ce.idxToDist(ue,!0);X.animator.start([{distance:de,duration:500,easing:function(he){return 1+--he*he*he*he*he}}])}(),oe!=="free"&&oe!=="free-snap"||F()}),X.on("dragged",function(){h=X.track.details.abs})}function k(X){var w,h,Y,z,T,U,P,O,_,j,Q,$,F,M,ne,re,oe,ce,ae=a();function Ge(fe){if(U&&O===fe.id){var pe=he(fe);if(_){if(!de(fe))return ue(fe);j=pe,_=!1,X.emit("dragChecked")}if(re)return j=pe;i(fe);var ye=function(be){if(oe===-1/0&&ce===1/0)return be;var le=X.track.details,ke=le.length,we=le.position,Te=d(be,oe-we,ce-we);if(ke===0)return 0;if(!X.options.rubberband)return Te;if(we<=ce&&we>=oe||we<oe&&h>0||we>ce&&h<0)return be;var ot=(we<oe?we-oe:we-ce)/ke,Tt=z*ke,Ig=Math.abs(ot*Tt),fg=Math.max(0,1-Ig/T*2);return fg*fg*be}(P(j-pe)/z*Y);h=A(ye);var Ce=X.track.details.position;(Ce>oe&&Ce<ce||Ce===oe&&h>0||Ce===ce&&h<0)&&C(fe),Q+=ye,!$&&Math.abs(Q*z)>5&&($=!0),X.track.add(ye),j=pe,X.emit("dragged")}}function me(fe){!U&&X.track.details&&X.track.details.length&&(Q=0,U=!0,$=!1,_=!0,O=fe.id,de(fe),j=he(fe),X.emit("dragStarted"))}function ue(fe){U&&O===fe.idChanged&&(U=!1,X.emit("dragEnded"))}function de(fe){var pe=Ke(),ye=pe?fe.y:fe.x,Ce=pe?fe.x:fe.y,be=F!==void 0&&M!==void 0&&Math.abs(M-Ce)<=Math.abs(F-ye);return F=ye,M=Ce,be}function he(fe){return Ke()?fe.y:fe.x}function Ke(){return X.options.vertical}function He(){z=X.size,T=Ke()?window.innerHeight:window.innerWidth;var fe=X.track.details;fe&&(oe=fe.min,ce=fe.max)}function xe(fe){$&&(C(fe),i(fe))}function je(){if(ae.purge(),X.options.drag&&!X.options.disabled){var fe;fe=X.options.dragSpeed||1,P=typeof fe=="function"?fe:function(ye){return ye*fe},Y=X.options.rtl?-1:1,He(),w=X.container,function(){var ye="data-keen-slider-clickable";r("[".concat(ye,"]:not([").concat(ye,"=false])"),w).map(function(Ce){ae.add(Ce,"dragstart",C),ae.add(Ce,"mousedown",C),ae.add(Ce,"touchstart",C)})}(),ae.add(w,"dragstart",function(ye){i(ye)}),ae.add(w,"click",xe,{capture:!0}),ae.input(w,"ksDragStart",me),ae.input(w,"ksDrag",Ge),ae.input(w,"ksDragEnd",ue),ae.input(w,"mousedown",me),ae.input(w,"mousemove",Ge),ae.input(w,"mouseleave",ue),ae.input(w,"mouseup",ue),ae.input(w,"touchstart",me,{passive:!0}),ae.input(w,"touchmove",Ge,{passive:!1}),ae.input(w,"touchend",ue),ae.input(w,"touchcancel",ue),ae.add(window,"wheel",function(ye){U&&i(ye)});var pe="data-keen-slider-scrollable";r("[".concat(pe,"]:not([").concat(pe,"=false])"),X.container).map(function(ye){return function(Ce){var be;ae.input(Ce,"touchstart",function(le){be=he(le),re=!0,ne=!0},{passive:!0}),ae.input(Ce,"touchmove",function(le){var ke=Ke(),we=ke?Ce.scrollHeight-Ce.clientHeight:Ce.scrollWidth-Ce.clientWidth,Te=be-he(le),ot=ke?Ce.scrollTop:Ce.scrollLeft,Tt=ke&&Ce.style.overflowY==="scroll"||!ke&&Ce.style.overflowX==="scroll";if(be=he(le),(Te<0&&ot>0||Te>0&&ot<we)&&ne&&Tt)return re=!0;ne=!1,i(le),re=!1}),ae.input(Ce,"touchend",function(){re=!1})}(ye)})}}X.on("updated",He),X.on("optionsChanged",je),X.on("created",je),X.on("destroyed",ae.purge)}function J(X){var w,h,Y=null;function z(F,M,ne){X.animator.active?U(F,M,ne):requestAnimationFrame(function(){return U(F,M,ne)})}function T(){z(!1,!1,h)}function U(F,M,ne){var re=0,oe=X.size,ce=X.track.details;if(ce&&w){var ae=ce.slides;w.forEach(function(Ge,me){if(F)!Y&&M&&O(Ge,null,ne),_(Ge,null,ne);else{if(!ae[me])return;var ue=ae[me].size*oe;!Y&&M&&O(Ge,ue,ne),_(Ge,ae[me].distance*oe-re,ne),re+=ue}})}}function P(F){return X.options.renderMode==="performance"?Math.round(F):F}function O(F,M,ne){var re=ne?"height":"width";M!==null&&(M=P(M)+"px"),F.style["min-"+re]=M,F.style["max-"+re]=M}function _(F,M,ne){if(M!==null){M=P(M);var re=ne?M:0;M="translate3d(".concat(ne?0:M,"px, ").concat(re,"px, 0)")}F.style.transform=M,F.style["-webkit-transform"]=M}function j(){w&&(U(!0,!0,h),w=null),X.on("detailsChanged",T,!0)}function Q(){z(!1,!0,h)}function $(){j(),h=X.options.vertical,X.options.disabled||X.options.renderMode==="custom"||(Y=p(X.options.slides,"perView",null)==="auto",X.on("detailsChanged",T),(w=X.slides).length&&Q())}X.on("created",$),X.on("optionsChanged",$),X.on("beforeOptionsChanged",function(){j()}),X.on("updated",Q),X.on("destroyed",j)}function N(X,w){return function(h){var Y,z,T,U,P,O=a();function _(de){var he;l(h.container,"reverse",(he=h.container,window.getComputedStyle(he,null).getPropertyValue("direction")!=="rtl"||de?null:"")),l(h.container,"v",h.options.vertical&&!de?"":null),l(h.container,"disabled",h.options.disabled&&!de?"":null)}function j(){Q()&&re()}function Q(){var de=null;if(U.forEach(function(Ke){Ke.matches&&(de=Ke.__media)}),de===Y)return!1;Y||h.emit("beforeOptionsChanged"),Y=de;var he=de?T.breakpoints[de]:T;return h.options=y(y({},T),he),_(),me(),ue(),ce(),!0}function $(de){var he=m(de);return(h.options.vertical?he.height:he.width)/h.size||1}function F(){return h.options.trackConfig.length}function M(de){for(var he in Y=!1,T=y(y({},w),de),O.purge(),z=h.size,U=[],T.breakpoints||[]){var Ke=window.matchMedia(he);Ke.__media=he,U.push(Ke),O.add(Ke,"change",j)}O.add(window,"orientationchange",Ge),O.add(window,"resize",ae),Q()}function ne(de){h.animator.stop();var he=h.track.details;h.track.init(de??(he?he.abs:0))}function re(de){ne(de),h.emit("optionsChanged")}function oe(de,he){if(de)return M(de),void re(he);me(),ue();var Ke=F();ce(),F()!==Ke?re(he):ne(he),h.emit("updated")}function ce(){var de=h.options.slides;if(typeof de=="function")return h.options.trackConfig=de(h.size,h.slides);for(var he=h.slides,Ke=he.length,He=typeof de=="number"?de:p(de,"number",Ke,!0),xe=[],je=p(de,"perView",1,!0),fe=p(de,"spacing",0,!0)/h.size||0,pe=je==="auto"?fe:fe/je,ye=p(de,"origin","auto"),Ce=0,be=0;be<He;be++){var le=je==="auto"?$(he[be]):1/je-fe+pe,ke=ye==="center"?.5-le/2:ye==="auto"?0:ye;xe.push({origin:ke,size:le,spacing:fe}),Ce+=le}if(Ce+=fe*(He-1),ye==="auto"&&!h.options.loop&&je!==1){var we=0;xe.map(function(Te){var ot=Ce-we;return we+=Te.size+fe,ot>=1||(Te.origin=1-ot-(Ce>1?0:1-Ce)),Te})}h.options.trackConfig=xe}function ae(){me();var de=h.size;h.options.disabled||de===z||(z=de,oe())}function Ge(){ae(),setTimeout(ae,500),setTimeout(ae,2e3)}function me(){var de=m(h.container);h.size=(h.options.vertical?de.height:de.width)||1}function ue(){h.slides=r(h.options.selector,h.container)}h.container=(P=r(X,document)).length?P[0]:null,h.destroy=function(){O.purge(),h.emit("destroyed"),_(!0)},h.prev=function(){h.moveToIdx(h.track.details.abs-1,!0)},h.next=function(){h.moveToIdx(h.track.details.abs+1,!0)},h.update=oe,M(h.options)}}var K=function(X,w,h){try{return function(Y,z){var T,U={};return T={emit:function(P){U[P]&&U[P].forEach(function(_){_(T)});var O=T.options&&T.options[P];O&&O(T)},moveToIdx:function(P,O,_){var j=T.track.idxToDist(P,O);if(j){var Q=T.options.defaultAnimation;T.animator.start([{distance:j,duration:p(_||Q,"duration",500),easing:p(_||Q,"easing",function($){return 1+--$*$*$*$*$})}])}},on:function(P,O,_){_===void 0&&(_=!1),U[P]||(U[P]=[]);var j=U[P].indexOf(O);j>-1?_&&delete U[P][j]:_||U[P].push(O)},options:Y},function(){if(T.track=v(T),T.animator=V(T),z)for(var P=0,O=z;P<O.length;P++)(0,O[P])(T);T.track.init(T.options.initial||0),T.emit("created")}(),T}(w,S([N(X,{drag:!0,mode:"snap",renderMode:"precision",rubberband:!0,selector:".keen-slider__slide"}),J,k,R],h||[],!0))}catch(Y){console.error(Y)}};return uC.useKeenSlider=function(X,w){var h=e.useRef(null),Y=e.useRef(!1),z=e.useRef(X),T=e.useCallback(function(U){U?(z.current=X,h.current=new K(U,X,w),Y.current=!1):(h.current&&h.current.destroy&&h.current.destroy(),h.current=null)},[]);return e.useEffect(function(){G(z.current,X)||(z.current=X,h.current&&h.current.update(z.current))},[X]),[T,h]},uC}var v9=J9();const Y9="http://localhost:8080",H9=({id:e})=>{const[t,g]=f.useState([]),[n,l]=f.useState(0);f.useEffect(()=>{e&&(async()=>{try{const a=await Re.get(`${Y9}/api/rewards/${e}`);g(a?.data),console.log(t[0])}catch{console.error("Could't get rewards")}})()},[e]),f.useEffect(()=>{t.length>0&&l(C=>C+1)},[t]);const r=C=>{function d(){const A=360*C.track.details.progress;C.container.style.transform=`translateZ(-300px) rotateY(${-A}deg)`}C.on("created",()=>{const A=360/C.slides.length;C.slides.forEach((m,p)=>{m.style.transform=`rotateY(${A*p}deg) translateZ(300px)`}),d()}),C.on("detailsChanged",d)},[i]=v9.useKeenSlider({loop:!0,selector:".carousel__cell",renderMode:"custom",mode:"free-snap"},[r]);return Z.jsx(Z.Fragment,{children:t.length>0?Z.jsx("div",{className:"wrapper",children:Z.jsx("div",{className:"scene",children:Z.jsx("div",{className:"carousel keen-slider",ref:i,children:t.filter(C=>C?.img).slice(0,6).map((C,a)=>Z.jsx("div",{className:`carousel__cell number-slide${a+1}`,children:Z.jsx(X9,{rewardId:C.id,rewardImg:C.img,rewardTitle:C.title,rewardPrice:C.cost})},C.id))},n)})}):Z.jsx("p",{children:"Loading rewards..."})})},zm=f.createContext(),w9=""+new URL("HeaderBackground-D5cTHpi2.jpeg",import.meta.url).href,SS=f.createContext({});function F9(e){const t=f.useRef(null);return t.current===null&&(t.current=e()),t.current}const Mm=typeof window<"u",N9=Mm?f.useLayoutEffect:f.useEffect,Tm=f.createContext(null);function Um(e,t){e.indexOf(t)===-1&&e.push(t)}function Lm(e,t){const g=e.indexOf(t);g>-1&&e.splice(g,1)}const ho=(e,t,g)=>g>t?t:g<e?e:g;let Qm=()=>{};const po={},VS=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function WS(e){return typeof e=="object"&&e!==null}const RS=e=>/^0[^.\s]+$/u.test(e);function Dm(e){let t;return()=>(t===void 0&&(t=e()),t)}const Cn=e=>e,K9=(e,t)=>g=>t(e(g)),Di=(...e)=>e.reduce(K9),yi=(e,t,g)=>{const n=t-e;return n===0?1:(g-e)/n};class jm{constructor(){this.subscriptions=[]}add(t){return Um(this.subscriptions,t),()=>Lm(this.subscriptions,t)}notify(t,g,n){const l=this.subscriptions.length;if(l)if(l===1)this.subscriptions[0](t,g,n);else for(let r=0;r<l;r++){const i=this.subscriptions[r];i&&i(t,g,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Un=e=>e*1e3,Ln=e=>e/1e3;function XS(e,t){return t?e*(1e3/t):0}const kS=(e,t,g)=>(((1-3*g+3*t)*e+(3*g-6*t))*e+3*t)*e,x9=1e-7,E9=12;function z9(e,t,g,n,l){let r,i,C=0;do i=t+(g-t)/2,r=kS(i,n,l)-e,r>0?g=i:t=i;while(Math.abs(r)>x9&&++C<E9);return i}function ji(e,t,g,n){if(e===t&&g===n)return Cn;const l=r=>z9(r,0,1,e,g);return r=>r===0||r===1?r:kS(l(r),t,n)}const JS=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,vS=e=>t=>1-e(1-t),YS=ji(.33,1.53,.69,.99),Pm=vS(YS),HS=JS(Pm),wS=e=>(e*=2)<1?.5*Pm(e):.5*(2-Math.pow(2,-10*(e-1))),Om=e=>1-Math.sin(Math.acos(e)),FS=vS(Om),NS=JS(Om),M9=ji(.42,0,1,1),T9=ji(0,0,.58,1),KS=ji(.42,0,.58,1),U9=e=>Array.isArray(e)&&typeof e[0]!="number",xS=e=>Array.isArray(e)&&typeof e[0]=="number",L9={linear:Cn,easeIn:M9,easeInOut:KS,easeOut:T9,circIn:Om,circInOut:NS,circOut:FS,backIn:Pm,backInOut:HS,backOut:YS,anticipate:wS},Q9=e=>typeof e=="string",Zy=e=>{if(xS(e)){Qm(e.length===4);const[t,g,n,l]=e;return ji(t,g,n,l)}else if(Q9(e))return L9[e];return e},mC=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],yy={value:null};function D9(e,t){let g=new Set,n=new Set,l=!1,r=!1;const i=new WeakSet;let C={delta:0,timestamp:0,isProcessing:!1},a=0;function d(m){i.has(m)&&(A.schedule(m),e()),a++,m(C)}const A={schedule:(m,p=!1,B=!1)=>{const y=B&&l?g:n;return p&&i.add(m),y.has(m)||y.add(m),m},cancel:m=>{n.delete(m),i.delete(m)},process:m=>{if(C=m,l){r=!0;return}l=!0,[g,n]=[n,g],g.forEach(d),t&&yy.value&&yy.value.frameloop[t].push(a),a=0,g.clear(),l=!1,r&&(r=!1,A.process(m))}};return A}const j9=40;function ES(e,t){let g=!1,n=!0;const l={delta:0,timestamp:0,isProcessing:!1},r=()=>g=!0,i=mC.reduce((R,k)=>(R[k]=D9(r,t?k:void 0),R),{}),{setup:C,read:a,resolveKeyframes:d,preUpdate:A,update:m,preRender:p,render:B,postRender:G}=i,y=()=>{const R=po.useManualTiming?l.timestamp:performance.now();g=!1,po.useManualTiming||(l.delta=n?1e3/60:Math.max(Math.min(R-l.timestamp,j9),1)),l.timestamp=R,l.isProcessing=!0,C.process(l),a.process(l),d.process(l),A.process(l),m.process(l),p.process(l),B.process(l),G.process(l),l.isProcessing=!1,g&&t&&(n=!1,e(y))},S=()=>{g=!0,n=!0,l.isProcessing||e(y)};return{schedule:mC.reduce((R,k)=>{const J=i[k];return R[k]=(N,K=!1,X=!1)=>(g||S(),J.schedule(N,K,X)),R},{}),cancel:R=>{for(let k=0;k<mC.length;k++)i[mC[k]].cancel(R)},state:l,steps:i}}const{schedule:St,cancel:Do,state:ng,steps:VA}=ES(typeof requestAnimationFrame<"u"?requestAnimationFrame:Cn,!0);let EC;function P9(){EC=void 0}const Jg={now:()=>(EC===void 0&&Jg.set(ng.isProcessing||po.useManualTiming?ng.timestamp:performance.now()),EC),set:e=>{EC=e,queueMicrotask(P9)}},zS=e=>t=>typeof t=="string"&&t.startsWith(e),qm=zS("--"),O9=zS("var(--"),$m=e=>O9(e)?q9.test(e.split("/*")[0].trim()):!1,q9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,zI={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Gi={...zI,transform:e=>ho(0,1,e)},hC={...zI,default:1},gi=e=>Math.round(e*1e5)/1e5,_m=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function $9(e){return e==null}const _9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,eh=(e,t)=>g=>!!(typeof g=="string"&&_9.test(g)&&g.startsWith(e)||t&&!$9(g)&&Object.prototype.hasOwnProperty.call(g,t)),MS=(e,t,g)=>n=>{if(typeof n!="string")return n;const[l,r,i,C]=n.match(_m);return{[e]:parseFloat(l),[t]:parseFloat(r),[g]:parseFloat(i),alpha:C!==void 0?parseFloat(C):1}},e5=e=>ho(0,255,e),WA={...zI,transform:e=>Math.round(e5(e))},bl={test:eh("rgb","red"),parse:MS("red","green","blue"),transform:({red:e,green:t,blue:g,alpha:n=1})=>"rgba("+WA.transform(e)+", "+WA.transform(t)+", "+WA.transform(g)+", "+gi(Gi.transform(n))+")"};function t5(e){let t="",g="",n="",l="";return e.length>5?(t=e.substring(1,3),g=e.substring(3,5),n=e.substring(5,7),l=e.substring(7,9)):(t=e.substring(1,2),g=e.substring(2,3),n=e.substring(3,4),l=e.substring(4,5),t+=t,g+=g,n+=n,l+=l),{red:parseInt(t,16),green:parseInt(g,16),blue:parseInt(n,16),alpha:l?parseInt(l,16)/255:1}}const Bu={test:eh("#"),parse:t5,transform:bl.transform},Pi=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Mo=Pi("deg"),Qn=Pi("%"),Fe=Pi("px"),g5=Pi("vh"),n5=Pi("vw"),Gy={...Qn,parse:e=>Qn.parse(e)/100,transform:e=>Qn.transform(e*100)},mI={test:eh("hsl","hue"),parse:MS("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:g,alpha:n=1})=>"hsla("+Math.round(e)+", "+Qn.transform(gi(t))+", "+Qn.transform(gi(g))+", "+gi(Gi.transform(n))+")"},Lt={test:e=>bl.test(e)||Bu.test(e)||mI.test(e),parse:e=>bl.test(e)?bl.parse(e):mI.test(e)?mI.parse(e):Bu.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?bl.transform(e):mI.transform(e),getAnimatableNone:e=>{const t=Lt.parse(e);return t.alpha=0,Lt.transform(t)}},o5=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function l5(e){return isNaN(e)&&typeof e=="string"&&(e.match(_m)?.length||0)+(e.match(o5)?.length||0)>0}const TS="number",US="color",I5="var",r5="var(",fy="${}",i5=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function fi(e){const t=e.toString(),g=[],n={color:[],number:[],var:[]},l=[];let r=0;const C=t.replace(i5,a=>(Lt.test(a)?(n.color.push(r),l.push(US),g.push(Lt.parse(a))):a.startsWith(r5)?(n.var.push(r),l.push(I5),g.push(a)):(n.number.push(r),l.push(TS),g.push(parseFloat(a))),++r,fy)).split(fy);return{values:g,split:C,indexes:n,types:l}}function LS(e){return fi(e).values}function QS(e){const{split:t,types:g}=fi(e),n=t.length;return l=>{let r="";for(let i=0;i<n;i++)if(r+=t[i],l[i]!==void 0){const C=g[i];C===TS?r+=gi(l[i]):C===US?r+=Lt.transform(l[i]):r+=l[i]}return r}}const s5=e=>typeof e=="number"?0:Lt.test(e)?Lt.getAnimatableNone(e):e;function C5(e){const t=LS(e);return QS(e)(t.map(s5))}const jo={test:l5,parse:LS,createTransformer:QS,getAnimatableNone:C5};function RA(e,t,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?e+(t-e)*6*g:g<1/2?t:g<2/3?e+(t-e)*(2/3-g)*6:e}function a5({hue:e,saturation:t,lightness:g,alpha:n}){e/=360,t/=100,g/=100;let l=0,r=0,i=0;if(!t)l=r=i=g;else{const C=g<.5?g*(1+t):g+t-g*t,a=2*g-C;l=RA(a,C,e+1/3),r=RA(a,C,e),i=RA(a,C,e-1/3)}return{red:Math.round(l*255),green:Math.round(r*255),blue:Math.round(i*255),alpha:n}}function Ia(e,t){return g=>g>0?t:e}const Rt=(e,t,g)=>e+(t-e)*g,XA=(e,t,g)=>{const n=e*e,l=g*(t*t-n)+n;return l<0?0:Math.sqrt(l)},c5=[Bu,bl,mI],d5=e=>c5.find(t=>t.test(e));function By(e){const t=d5(e);if(!t)return!1;let g=t.parse(e);return t===mI&&(g=a5(g)),g}const Sy=(e,t)=>{const g=By(e),n=By(t);if(!g||!n)return Ia(e,t);const l={...g};return r=>(l.red=XA(g.red,n.red,r),l.green=XA(g.green,n.green,r),l.blue=XA(g.blue,n.blue,r),l.alpha=Rt(g.alpha,n.alpha,r),bl.transform(l))},Su=new Set(["none","hidden"]);function A5(e,t){return Su.has(e)?g=>g<=0?e:t:g=>g>=1?t:e}function u5(e,t){return g=>Rt(e,t,g)}function th(e){return typeof e=="number"?u5:typeof e=="string"?$m(e)?Ia:Lt.test(e)?Sy:p5:Array.isArray(e)?DS:typeof e=="object"?Lt.test(e)?Sy:m5:Ia}function DS(e,t){const g=[...e],n=g.length,l=e.map((r,i)=>th(r)(r,t[i]));return r=>{for(let i=0;i<n;i++)g[i]=l[i](r);return g}}function m5(e,t){const g={...e,...t},n={};for(const l in g)e[l]!==void 0&&t[l]!==void 0&&(n[l]=th(e[l])(e[l],t[l]));return l=>{for(const r in n)g[r]=n[r](l);return g}}function h5(e,t){const g=[],n={color:0,var:0,number:0};for(let l=0;l<t.values.length;l++){const r=t.types[l],i=e.indexes[r][n[r]],C=e.values[i]??0;g[l]=C,n[r]++}return g}const p5=(e,t)=>{const g=jo.createTransformer(t),n=fi(e),l=fi(t);return n.indexes.var.length===l.indexes.var.length&&n.indexes.color.length===l.indexes.color.length&&n.indexes.number.length>=l.indexes.number.length?Su.has(e)&&!l.values.length||Su.has(t)&&!n.values.length?A5(e,t):Di(DS(h5(n,l),l.values),g):Ia(e,t)};function jS(e,t,g){return typeof e=="number"&&typeof t=="number"&&typeof g=="number"?Rt(e,t,g):th(e)(e,t)}const b5=e=>{const t=({timestamp:g})=>e(g);return{start:(g=!0)=>St.update(t,g),stop:()=>Do(t),now:()=>ng.isProcessing?ng.timestamp:Jg.now()}},PS=(e,t,g=10)=>{let n="";const l=Math.max(Math.round(t/g),2);for(let r=0;r<l;r++)n+=Math.round(e(r/(l-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},ra=2e4;function gh(e){let t=0;const g=50;let n=e.next(t);for(;!n.done&&t<ra;)t+=g,n=e.next(t);return t>=ra?1/0:t}function Z5(e,t=100,g){const n=g({...e,keyframes:[0,t]}),l=Math.min(gh(n),ra);return{type:"keyframes",ease:r=>n.next(l*r).value/t,duration:Ln(l)}}const y5=5;function OS(e,t,g){const n=Math.max(t-y5,0);return XS(g-e(n),t-n)}const Ft={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},kA=.001;function G5({duration:e=Ft.duration,bounce:t=Ft.bounce,velocity:g=Ft.velocity,mass:n=Ft.mass}){let l,r,i=1-t;i=ho(Ft.minDamping,Ft.maxDamping,i),e=ho(Ft.minDuration,Ft.maxDuration,Ln(e)),i<1?(l=d=>{const A=d*i,m=A*e,p=A-g,B=Vu(d,i),G=Math.exp(-m);return kA-p/B*G},r=d=>{const m=d*i*e,p=m*g+g,B=Math.pow(i,2)*Math.pow(d,2)*e,G=Math.exp(-m),y=Vu(Math.pow(d,2),i);return(-l(d)+kA>0?-1:1)*((p-B)*G)/y}):(l=d=>{const A=Math.exp(-d*e),m=(d-g)*e+1;return-kA+A*m},r=d=>{const A=Math.exp(-d*e),m=(g-d)*(e*e);return A*m});const C=5/e,a=B5(l,r,C);if(e=Un(e),isNaN(a))return{stiffness:Ft.stiffness,damping:Ft.damping,duration:e};{const d=Math.pow(a,2)*n;return{stiffness:d,damping:i*2*Math.sqrt(n*d),duration:e}}}const f5=12;function B5(e,t,g){let n=g;for(let l=1;l<f5;l++)n=n-e(n)/t(n);return n}function Vu(e,t){return e*Math.sqrt(1-t*t)}const S5=["duration","bounce"],V5=["stiffness","damping","mass"];function Vy(e,t){return t.some(g=>e[g]!==void 0)}function W5(e){let t={velocity:Ft.velocity,stiffness:Ft.stiffness,damping:Ft.damping,mass:Ft.mass,isResolvedFromDuration:!1,...e};if(!Vy(e,V5)&&Vy(e,S5))if(e.visualDuration){const g=e.visualDuration,n=2*Math.PI/(g*1.2),l=n*n,r=2*ho(.05,1,1-(e.bounce||0))*Math.sqrt(l);t={...t,mass:Ft.mass,stiffness:l,damping:r}}else{const g=G5(e);t={...t,...g,mass:Ft.mass},t.isResolvedFromDuration=!0}return t}function ia(e=Ft.visualDuration,t=Ft.bounce){const g=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:l}=g;const r=g.keyframes[0],i=g.keyframes[g.keyframes.length-1],C={done:!1,value:r},{stiffness:a,damping:d,mass:A,duration:m,velocity:p,isResolvedFromDuration:B}=W5({...g,velocity:-Ln(g.velocity||0)}),G=p||0,y=d/(2*Math.sqrt(a*A)),S=i-r,V=Ln(Math.sqrt(a/A)),v=Math.abs(S)<5;n||(n=v?Ft.restSpeed.granular:Ft.restSpeed.default),l||(l=v?Ft.restDelta.granular:Ft.restDelta.default);let R;if(y<1){const J=Vu(V,y);R=N=>{const K=Math.exp(-y*V*N);return i-K*((G+y*V*S)/J*Math.sin(J*N)+S*Math.cos(J*N))}}else if(y===1)R=J=>i-Math.exp(-V*J)*(S+(G+V*S)*J);else{const J=V*Math.sqrt(y*y-1);R=N=>{const K=Math.exp(-y*V*N),X=Math.min(J*N,300);return i-K*((G+y*V*S)*Math.sinh(X)+J*S*Math.cosh(X))/J}}const k={calculatedDuration:B&&m||null,next:J=>{const N=R(J);if(B)C.done=J>=m;else{let K=J===0?G:0;y<1&&(K=J===0?Un(G):OS(R,J,N));const X=Math.abs(K)<=n,w=Math.abs(i-N)<=l;C.done=X&&w}return C.value=C.done?i:N,C},toString:()=>{const J=Math.min(gh(k),ra),N=PS(K=>k.next(J*K).value,J,30);return J+"ms "+N},toTransition:()=>{}};return k}ia.applyToOptions=e=>{const t=Z5(e,100,ia);return e.ease=t.ease,e.duration=Un(t.duration),e.type="keyframes",e};function Wu({keyframes:e,velocity:t=0,power:g=.8,timeConstant:n=325,bounceDamping:l=10,bounceStiffness:r=500,modifyTarget:i,min:C,max:a,restDelta:d=.5,restSpeed:A}){const m=e[0],p={done:!1,value:m},B=X=>C!==void 0&&X<C||a!==void 0&&X>a,G=X=>C===void 0?a:a===void 0||Math.abs(C-X)<Math.abs(a-X)?C:a;let y=g*t;const S=m+y,V=i===void 0?S:i(S);V!==S&&(y=V-m);const v=X=>-y*Math.exp(-X/n),R=X=>V+v(X),k=X=>{const w=v(X),h=R(X);p.done=Math.abs(w)<=d,p.value=p.done?V:h};let J,N;const K=X=>{B(p.value)&&(J=X,N=ia({keyframes:[p.value,G(p.value)],velocity:OS(R,X,p.value),damping:l,stiffness:r,restDelta:d,restSpeed:A}))};return K(0),{calculatedDuration:null,next:X=>{let w=!1;return!N&&J===void 0&&(w=!0,k(X),K(X)),J!==void 0&&X>=J?N.next(X-J):(!w&&k(X),p)}}}function R5(e,t,g){const n=[],l=g||po.mix||jS,r=e.length-1;for(let i=0;i<r;i++){let C=l(e[i],e[i+1]);if(t){const a=Array.isArray(t)?t[i]||Cn:t;C=Di(a,C)}n.push(C)}return n}function X5(e,t,{clamp:g=!0,ease:n,mixer:l}={}){const r=e.length;if(Qm(r===t.length),r===1)return()=>t[0];if(r===2&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[r-1]&&(e=[...e].reverse(),t=[...t].reverse());const C=R5(t,n,l),a=C.length,d=A=>{if(i&&A<e[0])return t[0];let m=0;if(a>1)for(;m<e.length-2&&!(A<e[m+1]);m++);const p=yi(e[m],e[m+1],A);return C[m](p)};return g?A=>d(ho(e[0],e[r-1],A)):d}function k5(e,t){const g=e[e.length-1];for(let n=1;n<=t;n++){const l=yi(0,t,n);e.push(Rt(g,1,l))}}function J5(e){const t=[0];return k5(t,e.length-1),t}function v5(e,t){return e.map(g=>g*t)}function Y5(e,t){return e.map(()=>t||KS).splice(0,e.length-1)}function ni({duration:e=300,keyframes:t,times:g,ease:n="easeInOut"}){const l=U9(n)?n.map(Zy):Zy(n),r={done:!1,value:t[0]},i=v5(g&&g.length===t.length?g:J5(t),e),C=X5(i,t,{ease:Array.isArray(l)?l:Y5(t,l)});return{calculatedDuration:e,next:a=>(r.value=C(a),r.done=a>=e,r)}}const H5=e=>e!==null;function nh(e,{repeat:t,repeatType:g="loop"},n,l=1){const r=e.filter(H5),C=l<0||t&&g!=="loop"&&t%2===1?0:r.length-1;return!C||n===void 0?r[C]:n}const w5={decay:Wu,inertia:Wu,tween:ni,keyframes:ni,spring:ia};function qS(e){typeof e.type=="string"&&(e.type=w5[e.type])}class oh{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,g){return this.finished.then(t,g)}}const F5=e=>e/100;class lh extends oh{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:g}=this.options;g&&g.updatedAt!==Jg.now()&&this.tick(Jg.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;qS(t);const{type:g=ni,repeat:n=0,repeatDelay:l=0,repeatType:r,velocity:i=0}=t;let{keyframes:C}=t;const a=g||ni;a!==ni&&typeof C[0]!="number"&&(this.mixKeyframes=Di(F5,jS(C[0],C[1])),C=[0,100]);const d=a({...t,keyframes:C});r==="mirror"&&(this.mirroredGenerator=a({...t,keyframes:[...C].reverse(),velocity:-i})),d.calculatedDuration===null&&(d.calculatedDuration=gh(d));const{calculatedDuration:A}=d;this.calculatedDuration=A,this.resolvedDuration=A+l,this.totalDuration=this.resolvedDuration*(n+1)-l,this.generator=d}updateTime(t){const g=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=g}tick(t,g=!1){const{generator:n,totalDuration:l,mixKeyframes:r,mirroredGenerator:i,resolvedDuration:C,calculatedDuration:a}=this;if(this.startTime===null)return n.next(0);const{delay:d=0,keyframes:A,repeat:m,repeatType:p,repeatDelay:B,type:G,onUpdate:y,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-l/this.speed,this.startTime)),g?this.currentTime=t:this.updateTime(t);const V=this.currentTime-d*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?V<0:V>l;this.currentTime=Math.max(V,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=l);let R=this.currentTime,k=n;if(m){const X=Math.min(this.currentTime,l)/C;let w=Math.floor(X),h=X%1;!h&&X>=1&&(h=1),h===1&&w--,w=Math.min(w,m+1),!!(w%2)&&(p==="reverse"?(h=1-h,B&&(h-=B/C)):p==="mirror"&&(k=i)),R=ho(0,1,h)*C}const J=v?{done:!1,value:A[0]}:k.next(R);r&&(J.value=r(J.value));let{done:N}=J;!v&&a!==null&&(N=this.playbackSpeed>=0?this.currentTime>=l:this.currentTime<=0);const K=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return K&&G!==Wu&&(J.value=nh(A,this.options,S,this.speed)),y&&y(J.value),K&&this.finish(),J}then(t,g){return this.finished.then(t,g)}get duration(){return Ln(this.calculatedDuration)}get time(){return Ln(this.currentTime)}set time(t){t=Un(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Jg.now());const g=this.playbackSpeed!==t;this.playbackSpeed=t,g&&(this.time=Ln(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=b5,startTime:g}=this.options;this.driver||(this.driver=t(l=>this.tick(l))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=g??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Jg.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function N5(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Zl=e=>e*180/Math.PI,Ru=e=>{const t=Zl(Math.atan2(e[1],e[0]));return Xu(t)},K5={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Ru,rotateZ:Ru,skewX:e=>Zl(Math.atan(e[1])),skewY:e=>Zl(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Xu=e=>(e=e%360,e<0&&(e+=360),e),Wy=Ru,Ry=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Xy=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),x5={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Ry,scaleY:Xy,scale:e=>(Ry(e)+Xy(e))/2,rotateX:e=>Xu(Zl(Math.atan2(e[6],e[5]))),rotateY:e=>Xu(Zl(Math.atan2(-e[2],e[0]))),rotateZ:Wy,rotate:Wy,skewX:e=>Zl(Math.atan(e[4])),skewY:e=>Zl(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function ku(e){return e.includes("scale")?1:0}function Ju(e,t){if(!e||e==="none")return ku(t);const g=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,l;if(g)n=x5,l=g;else{const C=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=K5,l=C}if(!l)return ku(t);const r=n[t],i=l[1].split(",").map(z5);return typeof r=="function"?r(i):i[r]}const E5=(e,t)=>{const{transform:g="none"}=getComputedStyle(e);return Ju(g,t)};function z5(e){return parseFloat(e.trim())}const MI=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],TI=new Set(MI),ky=e=>e===zI||e===Fe,M5=new Set(["x","y","z"]),T5=MI.filter(e=>!M5.has(e));function U5(e){const t=[];return T5.forEach(g=>{const n=e.getValue(g);n!==void 0&&(t.push([g,n.get()]),n.set(g.startsWith("scale")?1:0))}),t}const Bl={width:({x:e},{paddingLeft:t="0",paddingRight:g="0"})=>e.max-e.min-parseFloat(t)-parseFloat(g),height:({y:e},{paddingTop:t="0",paddingBottom:g="0"})=>e.max-e.min-parseFloat(t)-parseFloat(g),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Ju(t,"x"),y:(e,{transform:t})=>Ju(t,"y")};Bl.translateX=Bl.x;Bl.translateY=Bl.y;const Sl=new Set;let vu=!1,Yu=!1,Hu=!1;function $S(){if(Yu){const e=Array.from(Sl).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),g=new Map;t.forEach(n=>{const l=U5(n);l.length&&(g.set(n,l),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const l=g.get(n);l&&l.forEach(([r,i])=>{n.getValue(r)?.set(i)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Yu=!1,vu=!1,Sl.forEach(e=>e.complete(Hu)),Sl.clear()}function _S(){Sl.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Yu=!0)})}function L5(){Hu=!0,_S(),$S(),Hu=!1}class Ih{constructor(t,g,n,l,r,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=g,this.name=n,this.motionValue=l,this.element=r,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(Sl.add(this),vu||(vu=!0,St.read(_S),St.resolveKeyframes($S))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:g,element:n,motionValue:l}=this;if(t[0]===null){const r=l?.get(),i=t[t.length-1];if(r!==void 0)t[0]=r;else if(n&&g){const C=n.readValue(g,i);C!=null&&(t[0]=C)}t[0]===void 0&&(t[0]=i),l&&r===void 0&&l.set(t[0])}N5(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Sl.delete(this)}cancel(){this.state==="scheduled"&&(Sl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Q5=e=>e.startsWith("--");function D5(e,t,g){Q5(t)?e.style.setProperty(t,g):e.style[t]=g}const j5=Dm(()=>window.ScrollTimeline!==void 0),P5={};function O5(e,t){const g=Dm(e);return()=>P5[t]??g()}const eV=O5(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Or=([e,t,g,n])=>`cubic-bezier(${e}, ${t}, ${g}, ${n})`,Jy={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Or([0,.65,.55,1]),circOut:Or([.55,0,1,.45]),backIn:Or([.31,.01,.66,-.59]),backOut:Or([.33,1.53,.69,.99])};function tV(e,t){if(e)return typeof e=="function"?eV()?PS(e,t):"ease-out":xS(e)?Or(e):Array.isArray(e)?e.map(g=>tV(g,t)||Jy.easeOut):Jy[e]}function q5(e,t,g,{delay:n=0,duration:l=300,repeat:r=0,repeatType:i="loop",ease:C="easeOut",times:a}={},d=void 0){const A={[t]:g};a&&(A.offset=a);const m=tV(C,l);Array.isArray(m)&&(A.easing=m);const p={delay:n,duration:l,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:r+1,direction:i==="reverse"?"alternate":"normal"};return d&&(p.pseudoElement=d),e.animate(A,p)}function gV(e){return typeof e=="function"&&"applyToOptions"in e}function $5({type:e,...t}){return gV(e)&&eV()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class _5 extends oh{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:g,name:n,keyframes:l,pseudoElement:r,allowFlatten:i=!1,finalKeyframe:C,onComplete:a}=t;this.isPseudoElement=!!r,this.allowFlatten=i,this.options=t,Qm(typeof t.type!="string");const d=$5(t);this.animation=q5(g,n,l,d,r),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const A=nh(l,this.options,C,this.speed);this.updateMotionValue?this.updateMotionValue(A):D5(g,n,A),this.animation.cancel()}a?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Ln(Number(t))}get time(){return Ln(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Un(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:g}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&j5()?(this.animation.timeline=t,Cn):g(this)}}const nV={anticipate:wS,backInOut:HS,circInOut:NS};function ex(e){return e in nV}function tx(e){typeof e.ease=="string"&&ex(e.ease)&&(e.ease=nV[e.ease])}const vy=10;class gx extends _5{constructor(t){tx(t),qS(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:g,onUpdate:n,onComplete:l,element:r,...i}=this.options;if(!g)return;if(t!==void 0){g.set(t);return}const C=new lh({...i,autoplay:!1}),a=Un(this.finishedTime??this.time);g.setWithVelocity(C.sample(a-vy).value,C.sample(a).value,vy),C.stop()}}const Yy=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(jo.test(e)||e==="0")&&!e.startsWith("url("));function nx(e){const t=e[0];if(e.length===1)return!0;for(let g=0;g<e.length;g++)if(e[g]!==t)return!0}function ox(e,t,g,n){const l=e[0];if(l===null)return!1;if(t==="display"||t==="visibility")return!0;const r=e[e.length-1],i=Yy(l,t),C=Yy(r,t);return!i||!C?!1:nx(e)||(g==="spring"||gV(g))&&n}function oV(e){return WS(e)&&"offsetHeight"in e}const lx=new Set(["opacity","clipPath","filter","transform"]),Ix=Dm(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function rx(e){const{motionValue:t,name:g,repeatDelay:n,repeatType:l,damping:r,type:i}=e;if(!oV(t?.owner?.current))return!1;const{onUpdate:C,transformTemplate:a}=t.owner.getProps();return Ix()&&g&&lx.has(g)&&(g!=="transform"||!a)&&!C&&!n&&l!=="mirror"&&r!==0&&i!=="inertia"}const ix=40;class sx extends oh{constructor({autoplay:t=!0,delay:g=0,type:n="keyframes",repeat:l=0,repeatDelay:r=0,repeatType:i="loop",keyframes:C,name:a,motionValue:d,element:A,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Jg.now();const p={autoplay:t,delay:g,type:n,repeat:l,repeatDelay:r,repeatType:i,name:a,motionValue:d,element:A,...m},B=A?.KeyframeResolver||Ih;this.keyframeResolver=new B(C,(G,y,S)=>this.onKeyframesResolved(G,y,p,!S),a,d,A),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,g,n,l){this.keyframeResolver=void 0;const{name:r,type:i,velocity:C,delay:a,isHandoff:d,onUpdate:A}=n;this.resolvedAt=Jg.now(),ox(t,r,i,C)||((po.instantAnimations||!a)&&A?.(nh(t,n,g)),t[0]=t[t.length-1],n.duration=0,n.repeat=0);const p={startTime:l?this.resolvedAt?this.resolvedAt-this.createdAt>ix?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:g,...n,keyframes:t},B=!d&&rx(p)?new gx({...p,element:p.motionValue.owner.current}):new lh(p);B.finished.then(()=>this.notifyFinished()).catch(Cn),this.pendingTimeline&&(this.stopTimeline=B.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=B}get finished(){return this._animation?this.animation.finished:this._finished}then(t,g){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),L5()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const Cx=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ax(e){const t=Cx.exec(e);if(!t)return[,];const[,g,n,l]=t;return[`--${g??n}`,l]}function lV(e,t,g=1){const[n,l]=ax(e);if(!n)return;const r=window.getComputedStyle(t).getPropertyValue(n);if(r){const i=r.trim();return VS(i)?parseFloat(i):i}return $m(l)?lV(l,t,g+1):l}function rh(e,t){return e?.[t]??e?.default??e}const IV=new Set(["width","height","top","left","right","bottom",...MI]),cx={test:e=>e==="auto",parse:e=>e},rV=e=>t=>t.test(e),iV=[zI,Fe,Qn,Mo,n5,g5,cx],Hy=e=>iV.find(rV(e));function dx(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||RS(e):!0}const Ax=new Set(["brightness","contrast","saturate","opacity"]);function ux(e){const[t,g]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=g.match(_m)||[];if(!n)return e;const l=g.replace(n,"");let r=Ax.has(t)?1:0;return n!==g&&(r*=100),t+"("+r+l+")"}const mx=/\b([a-z-]*)\(.*?\)/gu,wu={...jo,getAnimatableNone:e=>{const t=e.match(mx);return t?t.map(ux).join(" "):e}},wy={...zI,transform:Math.round},hx={rotate:Mo,rotateX:Mo,rotateY:Mo,rotateZ:Mo,scale:hC,scaleX:hC,scaleY:hC,scaleZ:hC,skew:Mo,skewX:Mo,skewY:Mo,distance:Fe,translateX:Fe,translateY:Fe,translateZ:Fe,x:Fe,y:Fe,z:Fe,perspective:Fe,transformPerspective:Fe,opacity:Gi,originX:Gy,originY:Gy,originZ:Fe},ih={borderWidth:Fe,borderTopWidth:Fe,borderRightWidth:Fe,borderBottomWidth:Fe,borderLeftWidth:Fe,borderRadius:Fe,radius:Fe,borderTopLeftRadius:Fe,borderTopRightRadius:Fe,borderBottomRightRadius:Fe,borderBottomLeftRadius:Fe,width:Fe,maxWidth:Fe,height:Fe,maxHeight:Fe,top:Fe,right:Fe,bottom:Fe,left:Fe,padding:Fe,paddingTop:Fe,paddingRight:Fe,paddingBottom:Fe,paddingLeft:Fe,margin:Fe,marginTop:Fe,marginRight:Fe,marginBottom:Fe,marginLeft:Fe,backgroundPositionX:Fe,backgroundPositionY:Fe,...hx,zIndex:wy,fillOpacity:Gi,strokeOpacity:Gi,numOctaves:wy},px={...ih,color:Lt,backgroundColor:Lt,outlineColor:Lt,fill:Lt,stroke:Lt,borderColor:Lt,borderTopColor:Lt,borderRightColor:Lt,borderBottomColor:Lt,borderLeftColor:Lt,filter:wu,WebkitFilter:wu},sV=e=>px[e];function CV(e,t){let g=sV(e);return g!==wu&&(g=jo),g.getAnimatableNone?g.getAnimatableNone(t):void 0}const bx=new Set(["auto","none","0"]);function Zx(e,t,g){let n=0,l;for(;n<e.length&&!l;){const r=e[n];typeof r=="string"&&!bx.has(r)&&fi(r).values.length&&(l=e[n]),n++}if(l&&g)for(const r of t)e[r]=CV(g,l)}class yx extends Ih{constructor(t,g,n,l,r){super(t,g,n,l,r,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:g,name:n}=this;if(!g||!g.current)return;super.readKeyframes();for(let a=0;a<t.length;a++){let d=t[a];if(typeof d=="string"&&(d=d.trim(),$m(d))){const A=lV(d,g.current);A!==void 0&&(t[a]=A),a===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!IV.has(n)||t.length!==2)return;const[l,r]=t,i=Hy(l),C=Hy(r);if(i!==C)if(ky(i)&&ky(C))for(let a=0;a<t.length;a++){const d=t[a];typeof d=="string"&&(t[a]=parseFloat(d))}else Bl[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:g}=this,n=[];for(let l=0;l<t.length;l++)(t[l]===null||dx(t[l]))&&n.push(l);n.length&&Zx(t,n,g)}measureInitialState(){const{element:t,unresolvedKeyframes:g,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Bl[n](t.measureViewportBox(),window.getComputedStyle(t.current)),g[0]=this.measuredOrigin;const l=g[g.length-1];l!==void 0&&t.getValue(n,l).jump(l,!1)}measureEndState(){const{element:t,name:g,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const l=t.getValue(g);l&&l.jump(this.measuredOrigin,!1);const r=n.length-1,i=n[r];n[r]=Bl[g](t.measureViewportBox(),window.getComputedStyle(t.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),this.removedTransforms?.length&&this.removedTransforms.forEach(([C,a])=>{t.getValue(C).set(a)}),this.resolveNoneKeyframes()}}function aV(e,t,g){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const l=document.querySelectorAll(e);return l?Array.from(l):[]}return Array.from(e)}const cV=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Fy=30,Gx=e=>!isNaN(parseFloat(e));class fx{constructor(t,g={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,l=!0)=>{const r=Jg.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty();l&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=g.owner}setCurrent(t){this.current=t,this.updatedAt=Jg.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Gx(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,g){this.events[t]||(this.events[t]=new jm);const n=this.events[t].add(g);return t==="change"?()=>{n(),St.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,g){this.passiveEffect=t,this.stopPassiveEffect=g}set(t,g=!0){!g||!this.passiveEffect?this.updateAndNotify(t,g):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,g,n){this.set(g),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,g=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,g&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Jg.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Fy)return 0;const g=Math.min(this.updatedAt-this.prevUpdatedAt,Fy);return XS(parseFloat(this.current)-parseFloat(this.prevFrameValue),g)}start(t){return this.stop(),new Promise(g=>{this.hasAnimated=!0,this.animation=t(g),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function JI(e,t){return new fx(e,t)}const{schedule:sh}=ES(queueMicrotask,!1),fn={x:!1,y:!1};function dV(){return fn.x||fn.y}function Bx(e){return e==="x"||e==="y"?fn[e]?null:(fn[e]=!0,()=>{fn[e]=!1}):fn.x||fn.y?null:(fn.x=fn.y=!0,()=>{fn.x=fn.y=!1})}function AV(e,t){const g=aV(e),n=new AbortController,l={passive:!0,...t,signal:n.signal};return[g,l,()=>n.abort()]}function Ny(e){return!(e.pointerType==="touch"||dV())}function Sx(e,t,g={}){const[n,l,r]=AV(e,g),i=C=>{if(!Ny(C))return;const{target:a}=C,d=t(a,C);if(typeof d!="function"||!a)return;const A=m=>{Ny(m)&&(d(m),a.removeEventListener("pointerleave",A))};a.addEventListener("pointerleave",A,l)};return n.forEach(C=>{C.addEventListener("pointerenter",i,l)}),r}const uV=(e,t)=>t?e===t?!0:uV(e,t.parentElement):!1,Ch=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Vx=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Wx(e){return Vx.has(e.tagName)||e.tabIndex!==-1}const zC=new WeakSet;function Ky(e){return t=>{t.key==="Enter"&&e(t)}}function JA(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Rx=(e,t)=>{const g=e.currentTarget;if(!g)return;const n=Ky(()=>{if(zC.has(g))return;JA(g,"down");const l=Ky(()=>{JA(g,"up")}),r=()=>JA(g,"cancel");g.addEventListener("keyup",l,t),g.addEventListener("blur",r,t)});g.addEventListener("keydown",n,t),g.addEventListener("blur",()=>g.removeEventListener("keydown",n),t)};function xy(e){return Ch(e)&&!dV()}function Xx(e,t,g={}){const[n,l,r]=AV(e,g),i=C=>{const a=C.currentTarget;if(!xy(C))return;zC.add(a);const d=t(a,C),A=(B,G)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",p),zC.has(a)&&zC.delete(a),xy(B)&&typeof d=="function"&&d(B,{success:G})},m=B=>{A(B,a===window||a===document||g.useGlobalTarget||uV(a,B.target))},p=B=>{A(B,!1)};window.addEventListener("pointerup",m,l),window.addEventListener("pointercancel",p,l)};return n.forEach(C=>{(g.useGlobalTarget?window:C).addEventListener("pointerdown",i,l),oV(C)&&(C.addEventListener("focus",d=>Rx(d,l)),!Wx(C)&&!C.hasAttribute("tabindex")&&(C.tabIndex=0))}),r}function mV(e){return WS(e)&&"ownerSVGElement"in e}function kx(e){return mV(e)&&e.tagName==="svg"}const ug=e=>!!(e&&e.getVelocity),Jx=[...iV,Lt,jo],vx=e=>Jx.find(rV(e)),hV=f.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function Yx(e=!0){const t=f.useContext(Tm);if(t===null)return[!0,null];const{isPresent:g,onExitComplete:n,register:l}=t,r=f.useId();f.useEffect(()=>{if(e)return l(r)},[e]);const i=f.useCallback(()=>e&&n&&n(r),[r,n,e]);return!g&&n?[!1,i]:[!0]}const pV=f.createContext({strict:!1}),Ey={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},vI={};for(const e in Ey)vI[e]={isEnabled:t=>Ey[e].some(g=>!!t[g])};function Hx(e){for(const t in e)vI[t]={...vI[t],...e[t]}}const wx=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function sa(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||wx.has(e)}let bV=e=>!sa(e);function Fx(e){typeof e=="function"&&(bV=t=>t.startsWith("on")?!sa(t):e(t))}try{Fx(require("@emotion/is-prop-valid").default)}catch{}function Nx(e,t,g){const n={};for(const l in e)l==="values"&&typeof e.values=="object"||(bV(l)||g===!0&&sa(l)||!t&&!sa(l)||e.draggable&&l.startsWith("onDrag"))&&(n[l]=e[l]);return n}function Kx(e){if(typeof Proxy>"u")return e;const t=new Map,g=(...n)=>e(...n);return new Proxy(g,{get:(n,l)=>l==="create"?e:(t.has(l)||t.set(l,e(l)),t.get(l))})}const qa=f.createContext({});function $a(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Bi(e){return typeof e=="string"||Array.isArray(e)}const ah=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ch=["initial",...ah];function _a(e){return $a(e.animate)||ch.some(t=>Bi(e[t]))}function ZV(e){return!!(_a(e)||e.variants)}function xx(e,t){if(_a(e)){const{initial:g,animate:n}=e;return{initial:g===!1||Bi(g)?g:void 0,animate:Bi(n)?n:void 0}}return e.inherit!==!1?t:{}}function Ex(e){const{initial:t,animate:g}=xx(e,f.useContext(qa));return f.useMemo(()=>({initial:t,animate:g}),[zy(t),zy(g)])}function zy(e){return Array.isArray(e)?e.join(" "):e}const zx=Symbol.for("motionComponentSymbol");function hI(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Mx(e,t,g){return f.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),g&&(typeof g=="function"?g(n):hI(g)&&(g.current=n))},[t])}const dh=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Tx="framerAppearId",yV="data-"+dh(Tx),GV=f.createContext({});function Ux(e,t,g,n,l){const{visualElement:r}=f.useContext(qa),i=f.useContext(pV),C=f.useContext(Tm),a=f.useContext(hV).reducedMotion,d=f.useRef(null);n=n||i.renderer,!d.current&&n&&(d.current=n(e,{visualState:t,parent:r,props:g,presenceContext:C,blockInitialAnimation:C?C.initial===!1:!1,reducedMotionConfig:a}));const A=d.current,m=f.useContext(GV);A&&!A.projection&&l&&(A.type==="html"||A.type==="svg")&&Lx(d.current,g,l,m);const p=f.useRef(!1);f.useInsertionEffect(()=>{A&&p.current&&A.update(g,C)});const B=g[yV],G=f.useRef(!!B&&!window.MotionHandoffIsComplete?.(B)&&window.MotionHasOptimisedAnimation?.(B));return N9(()=>{A&&(p.current=!0,window.MotionIsMounted=!0,A.updateFeatures(),sh.render(A.render),G.current&&A.animationState&&A.animationState.animateChanges())}),f.useEffect(()=>{A&&(!G.current&&A.animationState&&A.animationState.animateChanges(),G.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(B)}),G.current=!1))}),A}function Lx(e,t,g,n){const{layoutId:l,layout:r,drag:i,dragConstraints:C,layoutScroll:a,layoutRoot:d,layoutCrossfade:A}=t;e.projection=new g(e.latestValues,t["data-framer-portal-id"]?void 0:fV(e.parent)),e.projection.setOptions({layoutId:l,layout:r,alwaysMeasureLayout:!!i||C&&hI(C),visualElement:e,animationType:typeof r=="string"?r:"both",initialPromotionConfig:n,crossfade:A,layoutScroll:a,layoutRoot:d})}function fV(e){if(e)return e.options.allowProjection!==!1?e.projection:fV(e.parent)}function Qx({preloadedFeatures:e,createVisualElement:t,useRender:g,useVisualState:n,Component:l}){e&&Hx(e);function r(C,a){let d;const A={...f.useContext(hV),...C,layoutId:Dx(C)},{isStatic:m}=A,p=Ex(C),B=n(C,m);if(!m&&Mm){jx();const G=Px(A);d=G.MeasureLayout,p.visualElement=Ux(l,B,A,t,G.ProjectionNode)}return Z.jsxs(qa.Provider,{value:p,children:[d&&p.visualElement?Z.jsx(d,{visualElement:p.visualElement,...A}):null,g(l,C,Mx(B,p.visualElement,a),B,m,p.visualElement)]})}r.displayName=`motion.${typeof l=="string"?l:`create(${l.displayName??l.name??""})`}`;const i=f.forwardRef(r);return i[zx]=l,i}function Dx({layoutId:e}){const t=f.useContext(SS).id;return t&&e!==void 0?t+"-"+e:e}function jx(e,t){f.useContext(pV).strict}function Px(e){const{drag:t,layout:g}=vI;if(!t&&!g)return{};const n={...t,...g};return{MeasureLayout:t?.isEnabled(e)||g?.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const Si={};function Ox(e){for(const t in e)Si[t]=e[t],qm(t)&&(Si[t].isCSSVariable=!0)}function BV(e,{layout:t,layoutId:g}){return TI.has(e)||e.startsWith("origin")||(t||g!==void 0)&&(!!Si[e]||e==="opacity")}const qx={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$x=MI.length;function _x(e,t,g){let n="",l=!0;for(let r=0;r<$x;r++){const i=MI[r],C=e[i];if(C===void 0)continue;let a=!0;if(typeof C=="number"?a=C===(i.startsWith("scale")?1:0):a=parseFloat(C)===0,!a||g){const d=cV(C,ih[i]);if(!a){l=!1;const A=qx[i]||i;n+=`${A}(${d}) `}g&&(t[i]=d)}}return n=n.trim(),g?n=g(t,l?"":n):l&&(n="none"),n}function Ah(e,t,g){const{style:n,vars:l,transformOrigin:r}=e;let i=!1,C=!1;for(const a in t){const d=t[a];if(TI.has(a)){i=!0;continue}else if(qm(a)){l[a]=d;continue}else{const A=cV(d,ih[a]);a.startsWith("origin")?(C=!0,r[a]=A):n[a]=A}}if(t.transform||(i||g?n.transform=_x(t,e.transform,g):n.transform&&(n.transform="none")),C){const{originX:a="50%",originY:d="50%",originZ:A=0}=r;n.transformOrigin=`${a} ${d} ${A}`}}const uh=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function SV(e,t,g){for(const n in t)!ug(t[n])&&!BV(n,g)&&(e[n]=t[n])}function e3({transformTemplate:e},t){return f.useMemo(()=>{const g=uh();return Ah(g,t,e),Object.assign({},g.vars,g.style)},[t])}function t3(e,t){const g=e.style||{},n={};return SV(n,g,e),Object.assign(n,e3(e,t)),n}function g3(e,t){const g={},n=t3(e,t);return e.drag&&e.dragListener!==!1&&(g.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(g.tabIndex=0),g.style=n,g}const n3={offset:"stroke-dashoffset",array:"stroke-dasharray"},o3={offset:"strokeDashoffset",array:"strokeDasharray"};function l3(e,t,g=1,n=0,l=!0){e.pathLength=1;const r=l?n3:o3;e[r.offset]=Fe.transform(-n);const i=Fe.transform(t),C=Fe.transform(g);e[r.array]=`${i} ${C}`}function VV(e,{attrX:t,attrY:g,attrScale:n,pathLength:l,pathSpacing:r=1,pathOffset:i=0,...C},a,d,A){if(Ah(e,C,d),a){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:p}=e;m.transform&&(p.transform=m.transform,delete m.transform),(p.transform||m.transformOrigin)&&(p.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),p.transform&&(p.transformBox=A?.transformBox??"fill-box",delete m.transformBox),t!==void 0&&(m.x=t),g!==void 0&&(m.y=g),n!==void 0&&(m.scale=n),l!==void 0&&l3(m,l,r,i,!1)}const WV=()=>({...uh(),attrs:{}}),RV=e=>typeof e=="string"&&e.toLowerCase()==="svg";function I3(e,t,g,n){const l=f.useMemo(()=>{const r=WV();return VV(r,t,RV(n),e.transformTemplate,e.style),{...r.attrs,style:{...r.style}}},[t]);if(e.style){const r={};SV(r,e.style,e),l.style={...r,...l.style}}return l}const r3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function mh(e){return typeof e!="string"||e.includes("-")?!1:!!(r3.indexOf(e)>-1||/[A-Z]/u.test(e))}function i3(e=!1){return(g,n,l,{latestValues:r},i)=>{const a=(mh(g)?I3:g3)(n,r,i,g),d=Nx(n,typeof g=="string",e),A=g!==f.Fragment?{...d,...a,ref:l}:{},{children:m}=n,p=f.useMemo(()=>ug(m)?m.get():m,[m]);return f.createElement(g,{...A,children:p})}}function My(e){const t=[{},{}];return e?.values.forEach((g,n)=>{t[0][n]=g.get(),t[1][n]=g.getVelocity()}),t}function hh(e,t,g,n){if(typeof t=="function"){const[l,r]=My(n);t=t(g!==void 0?g:e.custom,l,r)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[l,r]=My(n);t=t(g!==void 0?g:e.custom,l,r)}return t}function MC(e){return ug(e)?e.get():e}function s3({scrapeMotionValuesFromProps:e,createRenderState:t},g,n,l){return{latestValues:C3(g,n,l,e),renderState:t()}}const XV=e=>(t,g)=>{const n=f.useContext(qa),l=f.useContext(Tm),r=()=>s3(e,t,n,l);return g?r():F9(r)};function C3(e,t,g,n){const l={},r=n(e,{});for(const p in r)l[p]=MC(r[p]);let{initial:i,animate:C}=e;const a=_a(e),d=ZV(e);t&&d&&!a&&e.inherit!==!1&&(i===void 0&&(i=t.initial),C===void 0&&(C=t.animate));let A=g?g.initial===!1:!1;A=A||i===!1;const m=A?C:i;if(m&&typeof m!="boolean"&&!$a(m)){const p=Array.isArray(m)?m:[m];for(let B=0;B<p.length;B++){const G=hh(e,p[B]);if(G){const{transitionEnd:y,transition:S,...V}=G;for(const v in V){let R=V[v];if(Array.isArray(R)){const k=A?R.length-1:0;R=R[k]}R!==null&&(l[v]=R)}for(const v in y)l[v]=y[v]}}}return l}function ph(e,t,g){const{style:n}=e,l={};for(const r in n)(ug(n[r])||t.style&&ug(t.style[r])||BV(r,e)||g?.getValue(r)?.liveStyle!==void 0)&&(l[r]=n[r]);return l}const a3={useVisualState:XV({scrapeMotionValuesFromProps:ph,createRenderState:uh})};function kV(e,t,g){const n=ph(e,t,g);for(const l in e)if(ug(e[l])||ug(t[l])){const r=MI.indexOf(l)!==-1?"attr"+l.charAt(0).toUpperCase()+l.substring(1):l;n[r]=e[l]}return n}const c3={useVisualState:XV({scrapeMotionValuesFromProps:kV,createRenderState:WV})};function d3(e,t){return function(n,{forwardMotionProps:l}={forwardMotionProps:!1}){const i={...mh(n)?c3:a3,preloadedFeatures:e,useRender:i3(l),createVisualElement:t,Component:n};return Qx(i)}}function Vi(e,t,g){const n=e.getProps();return hh(n,t,g!==void 0?g:n.custom,e)}const Fu=e=>Array.isArray(e);function A3(e,t,g){e.hasValue(t)?e.getValue(t).set(g):e.addValue(t,JI(g))}function u3(e){return Fu(e)?e[e.length-1]||0:e}function m3(e,t){const g=Vi(e,t);let{transitionEnd:n={},transition:l={},...r}=g||{};r={...r,...n};for(const i in r){const C=u3(r[i]);A3(e,i,C)}}function h3(e){return!!(ug(e)&&e.add)}function Nu(e,t){const g=e.getValue("willChange");if(h3(g))return g.add(t);if(!g&&po.WillChange){const n=new po.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function JV(e){return e.props[yV]}const p3=e=>e!==null;function b3(e,{repeat:t,repeatType:g="loop"},n){const l=e.filter(p3),r=t&&g!=="loop"&&t%2===1?0:l.length-1;return l[r]}const Z3={type:"spring",stiffness:500,damping:25,restSpeed:10},y3=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),G3={type:"keyframes",duration:.8},f3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},B3=(e,{keyframes:t})=>t.length>2?G3:TI.has(e)?e.startsWith("scale")?y3(t[1]):Z3:f3;function S3({when:e,delay:t,delayChildren:g,staggerChildren:n,staggerDirection:l,repeat:r,repeatType:i,repeatDelay:C,from:a,elapsed:d,...A}){return!!Object.keys(A).length}const bh=(e,t,g,n={},l,r)=>i=>{const C=rh(n,e)||{},a=C.delay||n.delay||0;let{elapsed:d=0}=n;d=d-Un(a);const A={keyframes:Array.isArray(g)?g:[null,g],ease:"easeOut",velocity:t.getVelocity(),...C,delay:-d,onUpdate:p=>{t.set(p),C.onUpdate&&C.onUpdate(p)},onComplete:()=>{i(),C.onComplete&&C.onComplete()},name:e,motionValue:t,element:r?void 0:l};S3(C)||Object.assign(A,B3(e,A)),A.duration&&(A.duration=Un(A.duration)),A.repeatDelay&&(A.repeatDelay=Un(A.repeatDelay)),A.from!==void 0&&(A.keyframes[0]=A.from);let m=!1;if((A.type===!1||A.duration===0&&!A.repeatDelay)&&(A.duration=0,A.delay===0&&(m=!0)),(po.instantAnimations||po.skipAnimations)&&(m=!0,A.duration=0,A.delay=0),A.allowFlatten=!C.type&&!C.ease,m&&!r&&t.get()!==void 0){const p=b3(A.keyframes,C);if(p!==void 0){St.update(()=>{A.onUpdate(p),A.onComplete()});return}}return C.isSync?new lh(A):new sx(A)};function V3({protectedKeys:e,needsAnimating:t},g){const n=e.hasOwnProperty(g)&&t[g]!==!0;return t[g]=!1,n}function vV(e,t,{delay:g=0,transitionOverride:n,type:l}={}){let{transition:r=e.getDefaultTransition(),transitionEnd:i,...C}=t;n&&(r=n);const a=[],d=l&&e.animationState&&e.animationState.getState()[l];for(const A in C){const m=e.getValue(A,e.latestValues[A]??null),p=C[A];if(p===void 0||d&&V3(d,A))continue;const B={delay:g,...rh(r||{},A)},G=m.get();if(G!==void 0&&!m.isAnimating&&!Array.isArray(p)&&p===G&&!B.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const V=JV(e);if(V){const v=window.MotionHandoffAnimation(V,A,St);v!==null&&(B.startTime=v,y=!0)}}Nu(e,A),m.start(bh(A,m,p,e.shouldReduceMotion&&IV.has(A)?{type:!1}:B,e,y));const S=m.animation;S&&a.push(S)}return i&&Promise.all(a).then(()=>{St.update(()=>{i&&m3(e,i)})}),a}function Ku(e,t,g={}){const n=Vi(e,t,g.type==="exit"?e.presenceContext?.custom:void 0);let{transition:l=e.getDefaultTransition()||{}}=n||{};g.transitionOverride&&(l=g.transitionOverride);const r=n?()=>Promise.all(vV(e,n,g)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?(a=0)=>{const{delayChildren:d=0,staggerChildren:A,staggerDirection:m}=l;return W3(e,t,a,d,A,m,g)}:()=>Promise.resolve(),{when:C}=l;if(C){const[a,d]=C==="beforeChildren"?[r,i]:[i,r];return a().then(()=>d())}else return Promise.all([r(),i(g.delay)])}function W3(e,t,g=0,n=0,l=0,r=1,i){const C=[],a=e.variantChildren.size,d=(a-1)*l,A=typeof n=="function",m=A?p=>n(p,a):r===1?(p=0)=>p*l:(p=0)=>d-p*l;return Array.from(e.variantChildren).sort(R3).forEach((p,B)=>{p.notify("AnimationStart",t),C.push(Ku(p,t,{...i,delay:g+(A?0:n)+m(B)}).then(()=>p.notify("AnimationComplete",t)))}),Promise.all(C)}function R3(e,t){return e.sortNodePosition(t)}function X3(e,t,g={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const l=t.map(r=>Ku(e,r,g));n=Promise.all(l)}else if(typeof t=="string")n=Ku(e,t,g);else{const l=typeof t=="function"?Vi(e,t,g.custom):t;n=Promise.all(vV(e,l,g))}return n.then(()=>{e.notify("AnimationComplete",t)})}function YV(e,t){if(!Array.isArray(t))return!1;const g=t.length;if(g!==e.length)return!1;for(let n=0;n<g;n++)if(t[n]!==e[n])return!1;return!0}const k3=ch.length;function HV(e){if(!e)return;if(!e.isControllingVariants){const g=e.parent?HV(e.parent)||{}:{};return e.props.initial!==void 0&&(g.initial=e.props.initial),g}const t={};for(let g=0;g<k3;g++){const n=ch[g],l=e.props[n];(Bi(l)||l===!1)&&(t[n]=l)}return t}const J3=[...ah].reverse(),v3=ah.length;function Y3(e){return t=>Promise.all(t.map(({animation:g,options:n})=>X3(e,g,n)))}function H3(e){let t=Y3(e),g=Ty(),n=!0;const l=a=>(d,A)=>{const m=Vi(e,A,a==="exit"?e.presenceContext?.custom:void 0);if(m){const{transition:p,transitionEnd:B,...G}=m;d={...d,...G,...B}}return d};function r(a){t=a(e)}function i(a){const{props:d}=e,A=HV(e.parent)||{},m=[],p=new Set;let B={},G=1/0;for(let S=0;S<v3;S++){const V=J3[S],v=g[V],R=d[V]!==void 0?d[V]:A[V],k=Bi(R),J=V===a?v.isActive:null;J===!1&&(G=S);let N=R===A[V]&&R!==d[V]&&k;if(N&&n&&e.manuallyAnimateOnMount&&(N=!1),v.protectedKeys={...B},!v.isActive&&J===null||!R&&!v.prevProp||$a(R)||typeof R=="boolean")continue;const K=w3(v.prevProp,R);let X=K||V===a&&v.isActive&&!N&&k||S>G&&k,w=!1;const h=Array.isArray(R)?R:[R];let Y=h.reduce(l(V),{});J===!1&&(Y={});const{prevResolvedValues:z={}}=v,T={...z,...Y},U=_=>{X=!0,p.has(_)&&(w=!0,p.delete(_)),v.needsAnimating[_]=!0;const j=e.getValue(_);j&&(j.liveStyle=!1)};for(const _ in T){const j=Y[_],Q=z[_];if(B.hasOwnProperty(_))continue;let $=!1;Fu(j)&&Fu(Q)?$=!YV(j,Q):$=j!==Q,$?j!=null?U(_):p.add(_):j!==void 0&&p.has(_)?U(_):v.protectedKeys[_]=!0}v.prevProp=R,v.prevResolvedValues=Y,v.isActive&&(B={...B,...Y}),n&&e.blockInitialAnimation&&(X=!1),X&&(!(N&&K)||w)&&m.push(...h.map(_=>({animation:_,options:{type:V}})))}if(p.size){const S={};if(typeof d.initial!="boolean"){const V=Vi(e,Array.isArray(d.initial)?d.initial[0]:d.initial);V&&V.transition&&(S.transition=V.transition)}p.forEach(V=>{const v=e.getBaseTarget(V),R=e.getValue(V);R&&(R.liveStyle=!0),S[V]=v??null}),m.push({animation:S})}let y=!!m.length;return n&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(y=!1),n=!1,y?t(m):Promise.resolve()}function C(a,d){if(g[a].isActive===d)return Promise.resolve();e.variantChildren?.forEach(m=>m.animationState?.setActive(a,d)),g[a].isActive=d;const A=i(a);for(const m in g)g[m].protectedKeys={};return A}return{animateChanges:i,setActive:C,setAnimateFunction:r,getState:()=>g,reset:()=>{g=Ty(),n=!0}}}function w3(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!YV(t,e):!1}function Cl(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ty(){return{animate:Cl(!0),whileInView:Cl(),whileHover:Cl(),whileTap:Cl(),whileDrag:Cl(),whileFocus:Cl(),exit:Cl()}}class Po{constructor(t){this.isMounted=!1,this.node=t}update(){}}class F3 extends Po{constructor(t){super(t),t.animationState||(t.animationState=H3(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();$a(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:g}=this.node.prevProps||{};t!==g&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let N3=0;class K3 extends Po{constructor(){super(...arguments),this.id=N3++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:g}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const l=this.node.animationState.setActive("exit",!t);g&&!t&&l.then(()=>{g(this.id)})}mount(){const{register:t,onExitComplete:g}=this.node.presenceContext||{};g&&g(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const x3={animation:{Feature:F3},exit:{Feature:K3}};function Wi(e,t,g,n={passive:!0}){return e.addEventListener(t,g,n),()=>e.removeEventListener(t,g)}function Oi(e){return{point:{x:e.pageX,y:e.pageY}}}const E3=e=>t=>Ch(t)&&e(t,Oi(t));function oi(e,t,g,n){return Wi(e,t,E3(g),n)}function wV({top:e,left:t,right:g,bottom:n}){return{x:{min:t,max:g},y:{min:e,max:n}}}function z3({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function M3(e,t){if(!t)return e;const g=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:g.y,left:g.x,bottom:n.y,right:n.x}}const FV=1e-4,T3=1-FV,U3=1+FV,NV=.01,L3=0-NV,Q3=0+NV;function Zg(e){return e.max-e.min}function D3(e,t,g){return Math.abs(e-t)<=g}function Uy(e,t,g,n=.5){e.origin=n,e.originPoint=Rt(t.min,t.max,e.origin),e.scale=Zg(g)/Zg(t),e.translate=Rt(g.min,g.max,e.origin)-e.originPoint,(e.scale>=T3&&e.scale<=U3||isNaN(e.scale))&&(e.scale=1),(e.translate>=L3&&e.translate<=Q3||isNaN(e.translate))&&(e.translate=0)}function li(e,t,g,n){Uy(e.x,t.x,g.x,n?n.originX:void 0),Uy(e.y,t.y,g.y,n?n.originY:void 0)}function Ly(e,t,g){e.min=g.min+t.min,e.max=e.min+Zg(t)}function j3(e,t,g){Ly(e.x,t.x,g.x),Ly(e.y,t.y,g.y)}function Qy(e,t,g){e.min=t.min-g.min,e.max=e.min+Zg(t)}function Ii(e,t,g){Qy(e.x,t.x,g.x),Qy(e.y,t.y,g.y)}const Dy=()=>({translate:0,scale:1,origin:0,originPoint:0}),pI=()=>({x:Dy(),y:Dy()}),jy=()=>({min:0,max:0}),xt=()=>({x:jy(),y:jy()});function nn(e){return[e("x"),e("y")]}function vA(e){return e===void 0||e===1}function xu({scale:e,scaleX:t,scaleY:g}){return!vA(e)||!vA(t)||!vA(g)}function ul(e){return xu(e)||KV(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function KV(e){return Py(e.x)||Py(e.y)}function Py(e){return e&&e!=="0%"}function Ca(e,t,g){const n=e-g,l=t*n;return g+l}function Oy(e,t,g,n,l){return l!==void 0&&(e=Ca(e,l,n)),Ca(e,g,n)+t}function Eu(e,t=0,g=1,n,l){e.min=Oy(e.min,t,g,n,l),e.max=Oy(e.max,t,g,n,l)}function xV(e,{x:t,y:g}){Eu(e.x,t.translate,t.scale,t.originPoint),Eu(e.y,g.translate,g.scale,g.originPoint)}const qy=.999999999999,$y=1.0000000000001;function P3(e,t,g,n=!1){const l=g.length;if(!l)return;t.x=t.y=1;let r,i;for(let C=0;C<l;C++){r=g[C],i=r.projectionDelta;const{visualElement:a}=r.options;a&&a.props.style&&a.props.style.display==="contents"||(n&&r.options.layoutScroll&&r.scroll&&r!==r.root&&ZI(e,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,xV(e,i)),n&&ul(r.latestValues)&&ZI(e,r.latestValues))}t.x<$y&&t.x>qy&&(t.x=1),t.y<$y&&t.y>qy&&(t.y=1)}function bI(e,t){e.min=e.min+t,e.max=e.max+t}function _y(e,t,g,n,l=.5){const r=Rt(e.min,e.max,l);Eu(e,t,g,r,n)}function ZI(e,t){_y(e.x,t.x,t.scaleX,t.scale,t.originX),_y(e.y,t.y,t.scaleY,t.scale,t.originY)}function EV(e,t){return wV(M3(e.getBoundingClientRect(),t))}function O3(e,t,g){const n=EV(e,g),{scroll:l}=t;return l&&(bI(n.x,l.offset.x),bI(n.y,l.offset.y)),n}const zV=({current:e})=>e?e.ownerDocument.defaultView:null,eG=(e,t)=>Math.abs(e-t);function q3(e,t){const g=eG(e.x,t.x),n=eG(e.y,t.y);return Math.sqrt(g**2+n**2)}class MV{constructor(t,g,{transformPagePoint:n,contextWindow:l=window,dragSnapToOrigin:r=!1,distanceThreshold:i=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=HA(this.lastMoveEventInfo,this.history),B=this.startEvent!==null,G=q3(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!B&&!G)return;const{point:y}=p,{timestamp:S}=ng;this.history.push({...y,timestamp:S});const{onStart:V,onMove:v}=this.handlers;B||(V&&V(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,p)},this.handlePointerMove=(p,B)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=YA(B,this.transformPagePoint),St.update(this.updatePoint,!0)},this.handlePointerUp=(p,B)=>{this.end();const{onEnd:G,onSessionEnd:y,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const V=HA(p.type==="pointercancel"?this.lastMoveEventInfo:YA(B,this.transformPagePoint),this.history);this.startEvent&&G&&G(p,V),y&&y(p,V)},!Ch(t))return;this.dragSnapToOrigin=r,this.handlers=g,this.transformPagePoint=n,this.distanceThreshold=i,this.contextWindow=l||window;const C=Oi(t),a=YA(C,this.transformPagePoint),{point:d}=a,{timestamp:A}=ng;this.history=[{...d,timestamp:A}];const{onSessionStart:m}=g;m&&m(t,HA(a,this.history)),this.removeListeners=Di(oi(this.contextWindow,"pointermove",this.handlePointerMove),oi(this.contextWindow,"pointerup",this.handlePointerUp),oi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Do(this.updatePoint)}}function YA(e,t){return t?{point:t(e.point)}:e}function tG(e,t){return{x:e.x-t.x,y:e.y-t.y}}function HA({point:e},t){return{point:e,delta:tG(e,TV(t)),offset:tG(e,$3(t)),velocity:_3(t,.1)}}function $3(e){return e[0]}function TV(e){return e[e.length-1]}function _3(e,t){if(e.length<2)return{x:0,y:0};let g=e.length-1,n=null;const l=TV(e);for(;g>=0&&(n=e[g],!(l.timestamp-n.timestamp>Un(t)));)g--;if(!n)return{x:0,y:0};const r=Ln(l.timestamp-n.timestamp);if(r===0)return{x:0,y:0};const i={x:(l.x-n.x)/r,y:(l.y-n.y)/r};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function eE(e,{min:t,max:g},n){return t!==void 0&&e<t?e=n?Rt(t,e,n.min):Math.max(e,t):g!==void 0&&e>g&&(e=n?Rt(g,e,n.max):Math.min(e,g)),e}function gG(e,t,g){return{min:t!==void 0?e.min+t:void 0,max:g!==void 0?e.max+g-(e.max-e.min):void 0}}function tE(e,{top:t,left:g,bottom:n,right:l}){return{x:gG(e.x,g,l),y:gG(e.y,t,n)}}function nG(e,t){let g=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([g,n]=[n,g]),{min:g,max:n}}function gE(e,t){return{x:nG(e.x,t.x),y:nG(e.y,t.y)}}function nE(e,t){let g=.5;const n=Zg(e),l=Zg(t);return l>n?g=yi(t.min,t.max-n,e.min):n>l&&(g=yi(e.min,e.max-l,t.min)),ho(0,1,g)}function oE(e,t){const g={};return t.min!==void 0&&(g.min=t.min-e.min),t.max!==void 0&&(g.max=t.max-e.min),g}const zu=.35;function lE(e=zu){return e===!1?e=0:e===!0&&(e=zu),{x:oG(e,"left","right"),y:oG(e,"top","bottom")}}function oG(e,t,g){return{min:lG(e,t),max:lG(e,g)}}function lG(e,t){return typeof e=="number"?e:e[t]||0}const IE=new WeakMap;class rE{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=xt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:g=!1,distanceThreshold:n}={}){const{presenceContext:l}=this.visualElement;if(l&&l.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),g&&this.snapToCursor(Oi(m).point)},i=(m,p)=>{const{drag:B,dragPropagation:G,onDragStart:y}=this.getProps();if(B&&!G&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Bx(B),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),nn(V=>{let v=this.getAxisMotionValue(V).get()||0;if(Qn.test(v)){const{projection:R}=this.visualElement;if(R&&R.layout){const k=R.layout.layoutBox[V];k&&(v=Zg(k)*(parseFloat(v)/100))}}this.originPoint[V]=v}),y&&St.postRender(()=>y(m,p)),Nu(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},C=(m,p)=>{this.latestPointerEvent=m,this.latestPanInfo=p;const{dragPropagation:B,dragDirectionLock:G,onDirectionLock:y,onDrag:S}=this.getProps();if(!B&&!this.openDragLock)return;const{offset:V}=p;if(G&&this.currentDirection===null){this.currentDirection=iE(V),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",p.point,V),this.updateAxis("y",p.point,V),this.visualElement.render(),S&&S(m,p)},a=(m,p)=>{this.latestPointerEvent=m,this.latestPanInfo=p,this.stop(m,p),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>nn(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:A}=this.getProps();this.panSession=new MV(t,{onSessionStart:r,onStart:i,onMove:C,onSessionEnd:a,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:A,distanceThreshold:n,contextWindow:zV(this.visualElement)})}stop(t,g){const n=t||this.latestPointerEvent,l=g||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!l||!n)return;const{velocity:i}=l;this.startAnimation(i);const{onDragEnd:C}=this.getProps();C&&St.postRender(()=>C(n,l))}cancel(){this.isDragging=!1;const{projection:t,animationState:g}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),g&&g.setActive("whileDrag",!1)}updateAxis(t,g,n){const{drag:l}=this.getProps();if(!n||!pC(t,l,this.currentDirection))return;const r=this.getAxisMotionValue(t);let i=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(i=eE(i,this.constraints[t],this.elastic[t])),r.set(i)}resolveConstraints(){const{dragConstraints:t,dragElastic:g}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,l=this.constraints;t&&hI(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=tE(n.layoutBox,t):this.constraints=!1,this.elastic=lE(g),l!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&nn(r=>{this.constraints!==!1&&this.getAxisMotionValue(r)&&(this.constraints[r]=oE(n.layoutBox[r],this.constraints[r]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:g}=this.getProps();if(!t||!hI(t))return!1;const n=t.current,{projection:l}=this.visualElement;if(!l||!l.layout)return!1;const r=O3(n,l.root,this.visualElement.getTransformPagePoint());let i=gE(l.layout.layoutBox,r);if(g){const C=g(z3(i));this.hasMutatedConstraints=!!C,C&&(i=wV(C))}return i}startAnimation(t){const{drag:g,dragMomentum:n,dragElastic:l,dragTransition:r,dragSnapToOrigin:i,onDragTransitionEnd:C}=this.getProps(),a=this.constraints||{},d=nn(A=>{if(!pC(A,g,this.currentDirection))return;let m=a&&a[A]||{};i&&(m={min:0,max:0});const p=l?200:1e6,B=l?40:1e7,G={type:"inertia",velocity:n?t[A]:0,bounceStiffness:p,bounceDamping:B,timeConstant:750,restDelta:1,restSpeed:10,...r,...m};return this.startAxisValueAnimation(A,G)});return Promise.all(d).then(C)}startAxisValueAnimation(t,g){const n=this.getAxisMotionValue(t);return Nu(this.visualElement,t),n.start(bh(t,n,0,g,this.visualElement,!1))}stopAnimation(){nn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){nn(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const g=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),l=n[g];return l||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){nn(g=>{const{drag:n}=this.getProps();if(!pC(g,n,this.currentDirection))return;const{projection:l}=this.visualElement,r=this.getAxisMotionValue(g);if(l&&l.layout){const{min:i,max:C}=l.layout.layoutBox[g];r.set(t[g]-Rt(i,C,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:g}=this.getProps(),{projection:n}=this.visualElement;if(!hI(g)||!n||!this.constraints)return;this.stopAnimation();const l={x:0,y:0};nn(i=>{const C=this.getAxisMotionValue(i);if(C&&this.constraints!==!1){const a=C.get();l[i]=nE({min:a,max:a},this.constraints[i])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),nn(i=>{if(!pC(i,t,null))return;const C=this.getAxisMotionValue(i),{min:a,max:d}=this.constraints[i];C.set(Rt(a,d,l[i]))})}addListeners(){if(!this.visualElement.current)return;IE.set(this.visualElement,this);const t=this.visualElement.current,g=oi(t,"pointerdown",a=>{const{drag:d,dragListener:A=!0}=this.getProps();d&&A&&this.start(a)}),n=()=>{const{dragConstraints:a}=this.getProps();hI(a)&&a.current&&(this.constraints=this.resolveRefConstraints())},{projection:l}=this.visualElement,r=l.addEventListener("measure",n);l&&!l.layout&&(l.root&&l.root.updateScroll(),l.updateLayout()),St.read(n);const i=Wi(window,"resize",()=>this.scalePositionWithinConstraints()),C=l.addEventListener("didUpdate",({delta:a,hasLayoutChanged:d})=>{this.isDragging&&d&&(nn(A=>{const m=this.getAxisMotionValue(A);m&&(this.originPoint[A]+=a[A].translate,m.set(m.get()+a[A].translate))}),this.visualElement.render())});return()=>{i(),g(),r(),C&&C()}}getProps(){const t=this.visualElement.getProps(),{drag:g=!1,dragDirectionLock:n=!1,dragPropagation:l=!1,dragConstraints:r=!1,dragElastic:i=zu,dragMomentum:C=!0}=t;return{...t,drag:g,dragDirectionLock:n,dragPropagation:l,dragConstraints:r,dragElastic:i,dragMomentum:C}}}function pC(e,t,g){return(t===!0||t===e)&&(g===null||g===e)}function iE(e,t=10){let g=null;return Math.abs(e.y)>t?g="y":Math.abs(e.x)>t&&(g="x"),g}class sE extends Po{constructor(t){super(t),this.removeGroupControls=Cn,this.removeListeners=Cn,this.controls=new rE(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Cn}unmount(){this.removeGroupControls(),this.removeListeners()}}const IG=e=>(t,g)=>{e&&St.postRender(()=>e(t,g))};class CE extends Po{constructor(){super(...arguments),this.removePointerDownListener=Cn}onPointerDown(t){this.session=new MV(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:zV(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:g,onPan:n,onPanEnd:l}=this.node.getProps();return{onSessionStart:IG(t),onStart:IG(g),onMove:n,onEnd:(r,i)=>{delete this.session,l&&St.postRender(()=>l(r,i))}}}mount(){this.removePointerDownListener=oi(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const TC={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function rG(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const xr={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Fe.test(e))e=parseFloat(e);else return e;const g=rG(e,t.target.x),n=rG(e,t.target.y);return`${g}% ${n}%`}},aE={correct:(e,{treeScale:t,projectionDelta:g})=>{const n=e,l=jo.parse(e);if(l.length>5)return n;const r=jo.createTransformer(e),i=typeof l[0]!="number"?1:0,C=g.x.scale*t.x,a=g.y.scale*t.y;l[0+i]/=C,l[1+i]/=a;const d=Rt(C,a,.5);return typeof l[2+i]=="number"&&(l[2+i]/=d),typeof l[3+i]=="number"&&(l[3+i]/=d),r(l)}};let iG=!1;class cE extends f.Component{componentDidMount(){const{visualElement:t,layoutGroup:g,switchLayoutGroup:n,layoutId:l}=this.props,{projection:r}=t;Ox(dE),r&&(g.group&&g.group.add(r),n&&n.register&&l&&n.register(r),iG&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),TC.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:g,visualElement:n,drag:l,isPresent:r}=this.props,{projection:i}=n;return i&&(i.isPresent=r,iG=!0,l||t.layoutDependency!==g||g===void 0||t.isPresent!==r?i.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?i.promote():i.relegate()||St.postRender(()=>{const C=i.getStack();(!C||!C.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),sh.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:g,switchLayoutGroup:n}=this.props,{projection:l}=t;l&&(l.scheduleCheckAfterUnmount(),g&&g.group&&g.group.remove(l),n&&n.deregister&&n.deregister(l))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function UV(e){const[t,g]=Yx(),n=f.useContext(SS);return Z.jsx(cE,{...e,layoutGroup:n,switchLayoutGroup:f.useContext(GV),isPresent:t,safeToRemove:g})}const dE={borderRadius:{...xr,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xr,borderTopRightRadius:xr,borderBottomLeftRadius:xr,borderBottomRightRadius:xr,boxShadow:aE};function AE(e,t,g){const n=ug(e)?e:JI(e);return n.start(bh("",n,t,g)),n.animation}const uE=(e,t)=>e.depth-t.depth;class mE{constructor(){this.children=[],this.isDirty=!1}add(t){Um(this.children,t),this.isDirty=!0}remove(t){Lm(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(uE),this.isDirty=!1,this.children.forEach(t)}}function hE(e,t){const g=Jg.now(),n=({timestamp:l})=>{const r=l-g;r>=t&&(Do(n),e(r-t))};return St.setup(n,!0),()=>Do(n)}const LV=["TopLeft","TopRight","BottomLeft","BottomRight"],pE=LV.length,sG=e=>typeof e=="string"?parseFloat(e):e,CG=e=>typeof e=="number"||Fe.test(e);function bE(e,t,g,n,l,r){l?(e.opacity=Rt(0,g.opacity??1,ZE(n)),e.opacityExit=Rt(t.opacity??1,0,yE(n))):r&&(e.opacity=Rt(t.opacity??1,g.opacity??1,n));for(let i=0;i<pE;i++){const C=`border${LV[i]}Radius`;let a=aG(t,C),d=aG(g,C);if(a===void 0&&d===void 0)continue;a||(a=0),d||(d=0),a===0||d===0||CG(a)===CG(d)?(e[C]=Math.max(Rt(sG(a),sG(d),n),0),(Qn.test(d)||Qn.test(a))&&(e[C]+="%")):e[C]=d}(t.rotate||g.rotate)&&(e.rotate=Rt(t.rotate||0,g.rotate||0,n))}function aG(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const ZE=QV(0,.5,FS),yE=QV(.5,.95,Cn);function QV(e,t,g){return n=>n<e?0:n>t?1:g(yi(e,t,n))}function cG(e,t){e.min=t.min,e.max=t.max}function tn(e,t){cG(e.x,t.x),cG(e.y,t.y)}function dG(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function AG(e,t,g,n,l){return e-=t,e=Ca(e,1/g,n),l!==void 0&&(e=Ca(e,1/l,n)),e}function GE(e,t=0,g=1,n=.5,l,r=e,i=e){if(Qn.test(t)&&(t=parseFloat(t),t=Rt(i.min,i.max,t/100)-i.min),typeof t!="number")return;let C=Rt(r.min,r.max,n);e===r&&(C-=t),e.min=AG(e.min,t,g,C,l),e.max=AG(e.max,t,g,C,l)}function uG(e,t,[g,n,l],r,i){GE(e,t[g],t[n],t[l],t.scale,r,i)}const fE=["x","scaleX","originX"],BE=["y","scaleY","originY"];function mG(e,t,g,n){uG(e.x,t,fE,g?g.x:void 0,n?n.x:void 0),uG(e.y,t,BE,g?g.y:void 0,n?n.y:void 0)}function hG(e){return e.translate===0&&e.scale===1}function DV(e){return hG(e.x)&&hG(e.y)}function pG(e,t){return e.min===t.min&&e.max===t.max}function SE(e,t){return pG(e.x,t.x)&&pG(e.y,t.y)}function bG(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function jV(e,t){return bG(e.x,t.x)&&bG(e.y,t.y)}function ZG(e){return Zg(e.x)/Zg(e.y)}function yG(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class VE{constructor(){this.members=[]}add(t){Um(this.members,t),t.scheduleRender()}remove(t){if(Lm(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const g=this.members[this.members.length-1];g&&this.promote(g)}}relegate(t){const g=this.members.findIndex(l=>t===l);if(g===0)return!1;let n;for(let l=g;l>=0;l--){const r=this.members[l];if(r.isPresent!==!1){n=r;break}}return n?(this.promote(n),!0):!1}promote(t,g){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,g&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:l}=t.options;l===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:g,resumingFrom:n}=t;g.onExitComplete&&g.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function WE(e,t,g){let n="";const l=e.x.translate/t.x,r=e.y.translate/t.y,i=g?.z||0;if((l||r||i)&&(n=`translate3d(${l}px, ${r}px, ${i}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),g){const{transformPerspective:d,rotate:A,rotateX:m,rotateY:p,skewX:B,skewY:G}=g;d&&(n=`perspective(${d}px) ${n}`),A&&(n+=`rotate(${A}deg) `),m&&(n+=`rotateX(${m}deg) `),p&&(n+=`rotateY(${p}deg) `),B&&(n+=`skewX(${B}deg) `),G&&(n+=`skewY(${G}deg) `)}const C=e.x.scale*t.x,a=e.y.scale*t.y;return(C!==1||a!==1)&&(n+=`scale(${C}, ${a})`),n||"none"}const wA=["","X","Y","Z"],RE=1e3;let XE=0;function FA(e,t,g,n){const{latestValues:l}=t;l[e]&&(g[e]=l[e],t.setStaticValue(e,0),n&&(n[e]=0))}function PV(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const g=JV(t);if(window.MotionHasOptimisedAnimation(g,"transform")){const{layout:l,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(g,"transform",St,!(l||r))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&PV(n)}function OV({attachResizeListener:e,defaultParent:t,measureScroll:g,checkIsScrollRoot:n,resetTransform:l}){return class{constructor(i={},C=t?.()){this.id=XE++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(vE),this.nodes.forEach(FE),this.nodes.forEach(NE),this.nodes.forEach(YE)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=C?C.root||C:this,this.path=C?[...C.path,C]:[],this.parent=C,this.depth=C?C.depth+1:0;for(let a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new mE)}addEventListener(i,C){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new jm),this.eventHandlers.get(i).add(C)}notifyListeners(i,...C){const a=this.eventHandlers.get(i);a&&a.notify(...C)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=mV(i)&&!kx(i),this.instance=i;const{layoutId:C,layout:a,visualElement:d}=this.options;if(d&&!d.current&&d.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(a||C)&&(this.isLayoutDirty=!0),e){let A,m=0;const p=()=>this.root.updateBlockedByResize=!1;St.read(()=>{m=window.innerWidth}),e(i,()=>{const B=window.innerWidth;B!==m&&(m=B,this.root.updateBlockedByResize=!0,A&&A(),A=hE(p,250),TC.hasAnimatedSinceResize&&(TC.hasAnimatedSinceResize=!1,this.nodes.forEach(BG)))})}C&&this.root.registerSharedNode(C,this),this.options.animate!==!1&&d&&(C||a)&&this.addEventListener("didUpdate",({delta:A,hasLayoutChanged:m,hasRelativeLayoutChanged:p,layout:B})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const G=this.options.transition||d.getDefaultTransition()||ME,{onLayoutAnimationStart:y,onLayoutAnimationComplete:S}=d.getProps(),V=!this.targetLayout||!jV(this.targetLayout,B),v=!m&&p;if(this.options.layoutRoot||this.resumeFrom||v||m&&(V||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={...rh(G,"layout"),onPlay:y,onComplete:S};(d.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(A,v)}else m||BG(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=B})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Do(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(KE),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&PV(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let A=0;A<this.path.length;A++){const m=this.path[A];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:C,layout:a}=this.options;if(C===void 0&&!a)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(GG);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(fG);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(wE),this.nodes.forEach(kE),this.nodes.forEach(JE)):this.nodes.forEach(fG),this.clearAllSnapshots();const C=Jg.now();ng.delta=ho(0,1e3/60,C-ng.timestamp),ng.timestamp=C,ng.isProcessing=!0,VA.update.process(ng),VA.preRender.process(ng),VA.render.process(ng),ng.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,sh.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(HE),this.sharedNodes.forEach(xE)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,St.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){St.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Zg(this.snapshot.measuredBox.x)&&!Zg(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let a=0;a<this.path.length;a++)this.path[a].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=xt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:C}=this.options;C&&C.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let C=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(C=!1),C&&this.instance){const a=n(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:a,offset:g(this.instance),wasRoot:this.scroll?this.scroll.isRoot:a}}}resetTransform(){if(!l)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,C=this.projectionDelta&&!DV(this.projectionDelta),a=this.getTransformTemplate(),d=a?a(this.latestValues,""):void 0,A=d!==this.prevTransformTemplateValue;i&&this.instance&&(C||ul(this.latestValues)||A)&&(l(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const C=this.measurePageBox();let a=this.removeElementScroll(C);return i&&(a=this.removeTransform(a)),TE(a),{animationId:this.root.animationId,measuredBox:C,layoutBox:a,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:i}=this.options;if(!i)return xt();const C=i.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(UE))){const{scroll:d}=this.root;d&&(bI(C.x,d.offset.x),bI(C.y,d.offset.y))}return C}removeElementScroll(i){const C=xt();if(tn(C,i),this.scroll?.wasRoot)return C;for(let a=0;a<this.path.length;a++){const d=this.path[a],{scroll:A,options:m}=d;d!==this.root&&A&&m.layoutScroll&&(A.wasRoot&&tn(C,i),bI(C.x,A.offset.x),bI(C.y,A.offset.y))}return C}applyTransform(i,C=!1){const a=xt();tn(a,i);for(let d=0;d<this.path.length;d++){const A=this.path[d];!C&&A.options.layoutScroll&&A.scroll&&A!==A.root&&ZI(a,{x:-A.scroll.offset.x,y:-A.scroll.offset.y}),ul(A.latestValues)&&ZI(a,A.latestValues)}return ul(this.latestValues)&&ZI(a,this.latestValues),a}removeTransform(i){const C=xt();tn(C,i);for(let a=0;a<this.path.length;a++){const d=this.path[a];if(!d.instance||!ul(d.latestValues))continue;xu(d.latestValues)&&d.updateSnapshot();const A=xt(),m=d.measurePageBox();tn(A,m),mG(C,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,A)}return ul(this.latestValues)&&mG(C,this.latestValues),C}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ng.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){const C=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=C.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=C.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=C.isSharedProjectionDirty);const a=!!this.resumingFrom||this!==C;if(!(i||a&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:A,layoutId:m}=this.options;if(!(!this.layout||!(A||m))){if(this.resolvedRelativeTargetAt=ng.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xt(),this.relativeTargetOrigin=xt(),Ii(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),tn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=xt(),this.targetWithTransforms=xt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),j3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):tn(this.target,this.layout.layoutBox),xV(this.target,this.targetDelta)):tn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xt(),this.relativeTargetOrigin=xt(),Ii(this.relativeTargetOrigin,this.target,p.target),tn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||xu(this.parent.latestValues)||KV(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const i=this.getLead(),C=!!this.resumingFrom||this!==i;let a=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(a=!1),C&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(a=!1),this.resolvedRelativeTargetAt===ng.timestamp&&(a=!1),a)return;const{layout:d,layoutId:A}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||A))return;tn(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,p=this.treeScale.y;P3(this.layoutCorrected,this.treeScale,this.path,C),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=xt());const{target:B}=i;if(!B){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(dG(this.prevProjectionDelta.x,this.projectionDelta.x),dG(this.prevProjectionDelta.y,this.projectionDelta.y)),li(this.projectionDelta,this.layoutCorrected,B,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==p||!yG(this.projectionDelta.x,this.prevProjectionDelta.x)||!yG(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",B))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){if(this.options.visualElement?.scheduleRender(),i){const C=this.getStack();C&&C.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=pI(),this.projectionDelta=pI(),this.projectionDeltaWithTransform=pI()}setAnimationOrigin(i,C=!1){const a=this.snapshot,d=a?a.latestValues:{},A={...this.latestValues},m=pI();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!C;const p=xt(),B=a?a.source:void 0,G=this.layout?this.layout.source:void 0,y=B!==G,S=this.getStack(),V=!S||S.members.length<=1,v=!!(y&&!V&&this.options.crossfade===!0&&!this.path.some(zE));this.animationProgress=0;let R;this.mixTargetDelta=k=>{const J=k/1e3;SG(m.x,i.x,J),SG(m.y,i.y,J),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ii(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),EE(this.relativeTarget,this.relativeTargetOrigin,p,J),R&&SE(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=xt()),tn(R,this.relativeTarget)),y&&(this.animationValues=A,bE(A,d,this.latestValues,J,v,V)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=J},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Do(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=St.update(()=>{TC.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=JI(0)),this.currentAnimation=AE(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:C=>{this.mixTargetDelta(C),i.onUpdate&&i.onUpdate(C)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(RE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:C,target:a,layout:d,latestValues:A}=i;if(!(!C||!a||!d)){if(this!==i&&this.layout&&d&&qV(this.options.animationType,this.layout.layoutBox,d.layoutBox)){a=this.target||xt();const m=Zg(this.layout.layoutBox.x);a.x.min=i.target.x.min,a.x.max=a.x.min+m;const p=Zg(this.layout.layoutBox.y);a.y.min=i.target.y.min,a.y.max=a.y.min+p}tn(C,a),ZI(C,A),li(this.projectionDeltaWithTransform,this.layoutCorrected,C,A)}}registerSharedNode(i,C){this.sharedNodes.has(i)||this.sharedNodes.set(i,new VE),this.sharedNodes.get(i).add(C);const d=C.options.initialPromotionConfig;C.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(C):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){const{layoutId:i}=this.options;return i?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:i}=this.options;return i?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:C,preserveFollowOpacity:a}={}){const d=this.getStack();d&&d.promote(this,a),i&&(this.projectionDelta=void 0,this.needsReset=!0),C&&this.setOptions({transition:C})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let C=!1;const{latestValues:a}=i;if((a.z||a.rotate||a.rotateX||a.rotateY||a.rotateZ||a.skewX||a.skewY)&&(C=!0),!C)return;const d={};a.z&&FA("z",i,d,this.animationValues);for(let A=0;A<wA.length;A++)FA(`rotate${wA[A]}`,i,d,this.animationValues),FA(`skew${wA[A]}`,i,d,this.animationValues);i.render();for(const A in d)i.setStaticValue(A,d[A]),this.animationValues&&(this.animationValues[A]=d[A]);i.scheduleRender()}applyProjectionStyles(i,C){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const a=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=MC(C?.pointerEvents)||"",i.transform=a?a(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=MC(C?.pointerEvents)||""),this.hasProjected&&!ul(this.latestValues)&&(i.transform=a?a({},""):"none",this.hasProjected=!1);return}i.visibility="";const A=d.animationValues||d.latestValues;this.applyTransformsToTarget();let m=WE(this.projectionDeltaWithTransform,this.treeScale,A);a&&(m=a(A,m)),i.transform=m;const{x:p,y:B}=this.projectionDelta;i.transformOrigin=`${p.origin*100}% ${B.origin*100}% 0`,d.animationValues?i.opacity=d===this?A.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:A.opacityExit:i.opacity=d===this?A.opacity!==void 0?A.opacity:"":A.opacityExit!==void 0?A.opacityExit:0;for(const G in Si){if(A[G]===void 0)continue;const{correct:y,applyTo:S,isCSSVariable:V}=Si[G],v=m==="none"?A[G]:y(A[G],d);if(S){const R=S.length;for(let k=0;k<R;k++)i[S[k]]=v}else V?this.options.visualElement.renderState.vars[G]=v:i[G]=v}this.options.layoutId&&(i.pointerEvents=d===this?MC(C?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>i.currentAnimation?.stop()),this.root.nodes.forEach(GG),this.root.sharedNodes.clear()}}}function kE(e){e.updateLayout()}function JE(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:g,measuredBox:n}=e.layout,{animationType:l}=e.options,r=t.source!==e.layout.source;l==="size"?nn(A=>{const m=r?t.measuredBox[A]:t.layoutBox[A],p=Zg(m);m.min=g[A].min,m.max=m.min+p}):qV(l,t.layoutBox,g)&&nn(A=>{const m=r?t.measuredBox[A]:t.layoutBox[A],p=Zg(g[A]);m.max=m.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[A].max=e.relativeTarget[A].min+p)});const i=pI();li(i,g,t.layoutBox);const C=pI();r?li(C,e.applyTransform(n,!0),t.measuredBox):li(C,g,t.layoutBox);const a=!DV(i);let d=!1;if(!e.resumeFrom){const A=e.getClosestProjectingParent();if(A&&!A.resumeFrom){const{snapshot:m,layout:p}=A;if(m&&p){const B=xt();Ii(B,t.layoutBox,m.layoutBox);const G=xt();Ii(G,g,p.layoutBox),jV(B,G)||(d=!0),A.options.layoutRoot&&(e.relativeTarget=G,e.relativeTargetOrigin=B,e.relativeParent=A)}}}e.notifyListeners("didUpdate",{layout:g,snapshot:t,delta:C,layoutDelta:i,hasLayoutChanged:a,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:g}=e.options;g&&g()}e.options.transition=void 0}function vE(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function YE(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function HE(e){e.clearSnapshot()}function GG(e){e.clearMeasurements()}function fG(e){e.isLayoutDirty=!1}function wE(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function BG(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function FE(e){e.resolveTargetDelta()}function NE(e){e.calcProjection()}function KE(e){e.resetSkewAndRotation()}function xE(e){e.removeLeadSnapshot()}function SG(e,t,g){e.translate=Rt(t.translate,0,g),e.scale=Rt(t.scale,1,g),e.origin=t.origin,e.originPoint=t.originPoint}function VG(e,t,g,n){e.min=Rt(t.min,g.min,n),e.max=Rt(t.max,g.max,n)}function EE(e,t,g,n){VG(e.x,t.x,g.x,n),VG(e.y,t.y,g.y,n)}function zE(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const ME={duration:.45,ease:[.4,0,.1,1]},WG=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),RG=WG("applewebkit/")&&!WG("chrome/")?Math.round:Cn;function XG(e){e.min=RG(e.min),e.max=RG(e.max)}function TE(e){XG(e.x),XG(e.y)}function qV(e,t,g){return e==="position"||e==="preserve-aspect"&&!D3(ZG(t),ZG(g),.2)}function UE(e){return e!==e.root&&e.scroll?.wasRoot}const LE=OV({attachResizeListener:(e,t)=>Wi(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),NA={current:void 0},$V=OV({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!NA.current){const e=new LE({});e.mount(window),e.setOptions({layoutScroll:!0}),NA.current=e}return NA.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),QE={pan:{Feature:CE},drag:{Feature:sE,ProjectionNode:$V,MeasureLayout:UV}};function kG(e,t,g){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",g==="Start");const l="onHover"+g,r=n[l];r&&St.postRender(()=>r(t,Oi(t)))}class DE extends Po{mount(){const{current:t}=this.node;t&&(this.unmount=Sx(t,(g,n)=>(kG(this.node,n,"Start"),l=>kG(this.node,l,"End"))))}unmount(){}}class jE extends Po{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Di(Wi(this.node.current,"focus",()=>this.onFocus()),Wi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function JG(e,t,g){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",g==="Start");const l="onTap"+(g==="End"?"":g),r=n[l];r&&St.postRender(()=>r(t,Oi(t)))}class PE extends Po{mount(){const{current:t}=this.node;t&&(this.unmount=Xx(t,(g,n)=>(JG(this.node,n,"Start"),(l,{success:r})=>JG(this.node,l,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Mu=new WeakMap,KA=new WeakMap,OE=e=>{const t=Mu.get(e.target);t&&t(e)},qE=e=>{e.forEach(OE)};function $E({root:e,...t}){const g=e||document;KA.has(g)||KA.set(g,{});const n=KA.get(g),l=JSON.stringify(t);return n[l]||(n[l]=new IntersectionObserver(qE,{root:e,...t})),n[l]}function _E(e,t,g){const n=$E(t);return Mu.set(e,g),n.observe(e),()=>{Mu.delete(e),n.unobserve(e)}}const ez={some:0,all:1};class tz extends Po{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:g,margin:n,amount:l="some",once:r}=t,i={root:g?g.current:void 0,rootMargin:n,threshold:typeof l=="number"?l:ez[l]},C=a=>{const{isIntersecting:d}=a;if(this.isInView===d||(this.isInView=d,r&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:A,onViewportLeave:m}=this.node.getProps(),p=d?A:m;p&&p(a)};return _E(this.node.current,i,C)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:g}=this.node;["amount","margin","root"].some(gz(t,g))&&this.startObserver()}unmount(){}}function gz({viewport:e={}},{viewport:t={}}={}){return g=>e[g]!==t[g]}const nz={inView:{Feature:tz},tap:{Feature:PE},focus:{Feature:jE},hover:{Feature:DE}},oz={layout:{ProjectionNode:$V,MeasureLayout:UV}},Tu={current:null},_V={current:!1};function lz(){if(_V.current=!0,!!Mm)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Tu.current=e.matches;e.addEventListener("change",t),t()}else Tu.current=!1}const Iz=new WeakMap;function rz(e,t,g){for(const n in t){const l=t[n],r=g[n];if(ug(l))e.addValue(n,l);else if(ug(r))e.addValue(n,JI(l,{owner:e}));else if(r!==l)if(e.hasValue(n)){const i=e.getValue(n);i.liveStyle===!0?i.jump(l):i.hasAnimated||i.set(l)}else{const i=e.getStaticValue(n);e.addValue(n,JI(i!==void 0?i:l,{owner:e}))}}for(const n in g)t[n]===void 0&&e.removeValue(n);return t}const vG=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class iz{scrapeMotionValuesFromProps(t,g,n){return{}}constructor({parent:t,props:g,presenceContext:n,reducedMotionConfig:l,blockInitialAnimation:r,visualState:i},C={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ih,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Jg.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,St.render(this.render,!1,!0))};const{latestValues:a,renderState:d}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=g.initial?{...a}:{},this.renderState=d,this.parent=t,this.props=g,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=l,this.options=C,this.blockInitialAnimation=!!r,this.isControllingVariants=_a(g),this.isVariantNode=ZV(g),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:A,...m}=this.scrapeMotionValuesFromProps(g,{},this);for(const p in m){const B=m[p];a[p]!==void 0&&ug(B)&&B.set(a[p],!1)}}mount(t){this.current=t,Iz.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((g,n)=>this.bindToMotionValue(n,g)),_V.current||lz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Tu.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Do(this.notifyUpdate),Do(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const g=this.features[t];g&&(g.unmount(),g.isMounted=!1)}this.current=null}bindToMotionValue(t,g){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=TI.has(t);n&&this.onBindTransform&&this.onBindTransform();const l=g.on("change",C=>{this.latestValues[t]=C,this.props.onUpdate&&St.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),r=g.on("renderRequest",this.scheduleRender);let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,g)),this.valueSubscriptions.set(t,()=>{l(),r(),i&&i(),g.owner&&g.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in vI){const g=vI[t];if(!g)continue;const{isEnabled:n,Feature:l}=g;if(!this.features[t]&&l&&n(this.props)&&(this.features[t]=new l(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):xt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,g){this.latestValues[t]=g}update(t,g){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=g;for(let n=0;n<vG.length;n++){const l=vG[n];this.propEventSubscriptions[l]&&(this.propEventSubscriptions[l](),delete this.propEventSubscriptions[l]);const r="on"+l,i=t[r];i&&(this.propEventSubscriptions[l]=this.on(l,i))}this.prevMotionValues=rz(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const g=this.getClosestVariantNode();if(g)return g.variantChildren&&g.variantChildren.add(t),()=>g.variantChildren.delete(t)}addValue(t,g){const n=this.values.get(t);g!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,g),this.values.set(t,g),this.latestValues[t]=g.get())}removeValue(t){this.values.delete(t);const g=this.valueSubscriptions.get(t);g&&(g(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,g){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&g!==void 0&&(n=JI(g===null?void 0:g,{owner:this}),this.addValue(t,n)),n}readValue(t,g){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(VS(n)||RS(n))?n=parseFloat(n):!vx(n)&&jo.test(g)&&(n=CV(t,g)),this.setBaseTarget(t,ug(n)?n.get():n)),ug(n)?n.get():n}setBaseTarget(t,g){this.baseTarget[t]=g}getBaseTarget(t){const{initial:g}=this.props;let n;if(typeof g=="string"||typeof g=="object"){const r=hh(this.props,g,this.presenceContext?.custom);r&&(n=r[t])}if(g&&n!==void 0)return n;const l=this.getBaseTargetFromProps(this.props,t);return l!==void 0&&!ug(l)?l:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,g){return this.events[t]||(this.events[t]=new jm),this.events[t].add(g)}notify(t,...g){this.events[t]&&this.events[t].notify(...g)}}class eW extends iz{constructor(){super(...arguments),this.KeyframeResolver=yx}sortInstanceNodePosition(t,g){return t.compareDocumentPosition(g)&2?1:-1}getBaseTargetFromProps(t,g){return t.style?t.style[g]:void 0}removeValueFromRenderState(t,{vars:g,style:n}){delete g[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ug(t)&&(this.childSubscription=t.on("change",g=>{this.current&&(this.current.textContent=`${g}`)}))}}function tW(e,{style:t,vars:g},n,l){const r=e.style;let i;for(i in t)r[i]=t[i];l?.applyProjectionStyles(r,n);for(i in g)r.setProperty(i,g[i])}function sz(e){return window.getComputedStyle(e)}class Cz extends eW{constructor(){super(...arguments),this.type="html",this.renderInstance=tW}readValueFromInstance(t,g){if(TI.has(g))return this.projection?.isProjecting?ku(g):E5(t,g);{const n=sz(t),l=(qm(g)?n.getPropertyValue(g):n[g])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(t,{transformPagePoint:g}){return EV(t,g)}build(t,g,n){Ah(t,g,n.transformTemplate)}scrapeMotionValuesFromProps(t,g,n){return ph(t,g,n)}}const gW=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function az(e,t,g,n){tW(e,t,void 0,n);for(const l in t.attrs)e.setAttribute(gW.has(l)?l:dh(l),t.attrs[l])}class cz extends eW{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=xt}getBaseTargetFromProps(t,g){return t[g]}readValueFromInstance(t,g){if(TI.has(g)){const n=sV(g);return n&&n.default||0}return g=gW.has(g)?g:dh(g),t.getAttribute(g)}scrapeMotionValuesFromProps(t,g,n){return kV(t,g,n)}build(t,g,n){VV(t,g,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,g,n,l){az(t,g,n,l)}mount(t){this.isSVGTag=RV(t.tagName),super.mount(t)}}const dz=(e,t)=>mh(e)?new cz(t):new Cz(t,{allowProjection:e!==f.Fragment}),Az=d3({...x3,...nz,...QE,...oz},dz),uz=Kx(Az),mz={some:0,all:1};function hz(e,t,{root:g,margin:n,amount:l="some"}={}){const r=aV(e),i=new WeakMap,C=d=>{d.forEach(A=>{const m=i.get(A.target);if(A.isIntersecting!==!!m)if(A.isIntersecting){const p=t(A.target,A);typeof p=="function"?i.set(A.target,p):a.unobserve(A.target)}else typeof m=="function"&&(m(A),i.delete(A.target))})},a=new IntersectionObserver(C,{root:g,rootMargin:n,threshold:typeof l=="number"?l:mz[l]});return r.forEach(d=>a.observe(d)),()=>a.disconnect()}function pz(e,{root:t,margin:g,amount:n,once:l=!1,initial:r=!1}={}){const[i,C]=f.useState(r);return f.useEffect(()=>{if(!e.current||l&&i)return;const a=()=>(C(!0),l?void 0:()=>C(!1)),d={root:t&&t.current||void 0,margin:g,amount:n};return hz(e.current,a,d)},[t,e,g,l,n]),i}const bz=({title:e,description:t,cost:g,img:n,num:l})=>{const r=l%2===0,i=f.useRef(null),C=pz(i,{once:!0}),a={opacity:C?1:0,y:C?0:20,transition:{duration:.6,ease:"easeOut"}};return Z.jsx(Z.Fragment,{children:Z.jsx(uz.div,{ref:i,animate:a,children:r?Z.jsxs("div",{style:{...YG},children:[Z.jsx("img",{src:n,alt:e,style:HG}),Z.jsxs("div",{style:wG,children:[Z.jsx("h3",{style:{margin:0},children:e}),Z.jsx("p",{style:{margin:0},children:t})]})]}):Z.jsxs("div",{style:{...YG},children:[Z.jsxs("div",{style:wG,children:[Z.jsx("h3",{style:{margin:0},children:e}),Z.jsx("p",{style:{margin:0},children:t})]}),Z.jsx("img",{src:n,alt:e,style:HG})]})})})},YG={display:"flex",flexDirection:"row",alignItems:"center",width:"90%",height:"150px",padding:"10px",color:"white",backgroundColor:"#FF5F00",borderWidth:"2px",borderRadius:"5px",borderColor:"#ff2400",borderStyle:"solid",gap:"10px"},HG={width:"150px",height:"150px",objectFit:"cover",borderRadius:"8px"},wG={width:"200px",display:"flex",flexDirection:"column"},FG="http://localhost:8080",Zz=()=>{const e=Zo(),[t,g]=f.useState([]),[n,l]=f.useState([]),{selectedVendorId:r,setSelectedVendorId:i,handleVendorClick:C}=f.useContext(zm);f.useEffect(()=>{(async()=>{try{const A=await Re.get(`${FG}/api/vendor/all`);if(A.data){const m=A.data;g(m),i(p=>p||m[0]?.id)}}catch(A){console.log("No vendors received",A)}})()},[]),f.useEffect(()=>{(async()=>{try{const m=(await Re.get(`${FG}/api/activities/retrieve`))?.data;l(m),console.log(n)}catch{console.log("couldn't fetch activities")}})()},[]);const a="flex-container"+(t.length===3?" three-items":"");return Z.jsxs("div",{id:"superContainer",style:yz,children:[Z.jsx(Qi,{}),Z.jsx("div",{style:fz,children:Z.jsxs("div",{style:Bz,children:[Z.jsx("h2",{style:Gz,children:"Earn Points. Get Rewards. Power Your Community."}),Z.jsx("h5",{style:NG,children:"Join activities, scan QR codes, and redeem discounts at local vendors."}),Z.jsx(tt,{onClick:()=>e("/profile"),variant:"contained",sx:{backgroundColor:"#ff2400",color:"white",marginTop:"10px",fontWeight:600},children:"Profile"}),Z.jsx("h5",{style:NG,children:"Check out your profile!"})]})}),Z.jsx("div",{style:{width:"90%",marginTop:"1em"},children:Z.jsx(MH,{})}),Z.jsxs("div",{children:[Z.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:Z.jsx("h1",{style:{...xA,fontSize:"30px"},children:"Meet the Vendors..."})}),Z.jsx("div",{className:a,children:t.map(d=>Z.jsx(Em,{img:d?.img,business_name:d?.business_name,onClick:()=>C(d?.id),isSelected:r===d?.id},d?.id))}),Z.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:Z.jsx("h1",{style:{...xA,fontSize:"20px"},children:"And Their Rewards!"})}),Z.jsx("div",{style:{padding:"10px"},children:Z.jsx(H9,{id:r})}),Z.jsx("br",{})]}),Z.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:Z.jsx("h1",{style:{...xA,fontSize:"30px"},children:"See what's happening!"})}),Z.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",padding:"10px",gap:"10px"},children:n.map((d,A)=>Z.jsx(bz,{title:d?.title,description:d?.description,cost:d?.cost,img:d?.img,num:A+1},d?.id))})]})},yz={position:"relative",width:"100%",overflowX:"hidden",margin:"0 auto",display:"flex",color:"black",flexDirection:"column",alignItems:"center",margin:0},Gz={margin:0,fontSize:30,lineHeight:1,color:"white",textShadow:`
    -1px -1px 0 #FF5F00,  
     1px -1px 0 #FF5F00,
    -1px  1px 0 #FF5F00,
     1px  1px 0 #FF5F00
  `},xA={color:"#FF5F00"},NG={margin:0,fontSize:17,lineHeight:1,color:"white",textShadow:`
    -1px -1px 0 #FF5F00,  
     1px -1px 0 #FF5F00,
    -1px  1px 0 #FF5F00,
     1px  1px 0 #FF5F00
  `},fz={position:"relative",margin:"0 auto",display:"flex",color:"White",padding:"10px",gap:"15em",flexDirection:"column",backgroundColor:"white",backgroundImage:`url(${w9})`,backgroundSize:"cover",backgroundPosition:"center",alignItems:"center"},Bz={marginTop:"2em",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"8px",padding:"10px"},Sz=gt("MuiBox",["root"]),Vz=rS(),Gg=_1({themeId:Pa,defaultTheme:Vz,defaultClassName:Sz.root,generateClassName:HB.generate});function bC(e){return parseInt(e,10)||0}const Wz={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function Rz(e){for(const t in e)return!1;return!0}function KG(e){return Rz(e)||e.outerHeightStyle===0&&!e.overflowing}const Xz=f.forwardRef(function(t,g){const{onChange:n,maxRows:l,minRows:r=1,style:i,value:C,...a}=t,{current:d}=f.useRef(C!=null),A=f.useRef(null),m=yg(g,A),p=f.useRef(null),B=f.useRef(null),G=f.useCallback(()=>{const R=A.current,k=B.current;if(!R||!k)return;const N=mo(R).getComputedStyle(R);if(N.width==="0px")return{outerHeightStyle:0,overflowing:!1};k.style.width=N.width,k.value=R.value||t.placeholder||"x",k.value.slice(-1)===`
`&&(k.value+=" ");const K=N.boxSizing,X=bC(N.paddingBottom)+bC(N.paddingTop),w=bC(N.borderBottomWidth)+bC(N.borderTopWidth),h=k.scrollHeight;k.value="x";const Y=k.scrollHeight;let z=h;r&&(z=Math.max(Number(r)*Y,z)),l&&(z=Math.min(Number(l)*Y,z)),z=Math.max(z,Y);const T=z+(K==="border-box"?X+w:0),U=Math.abs(z-h)<=1;return{outerHeightStyle:T,overflowing:U}},[l,r,t.placeholder]),y=fl(()=>{const R=A.current,k=G();if(!R||!k||KG(k))return!1;const J=k.outerHeightStyle;return p.current!=null&&p.current!==J}),S=f.useCallback(()=>{const R=A.current,k=G();if(!R||!k||KG(k))return;const J=k.outerHeightStyle;p.current!==J&&(p.current=J,R.style.height=`${J}px`),R.style.overflow=k.overflowing?"hidden":""},[G]),V=f.useRef(-1);Qo(()=>{const R=sS(S),k=A?.current;if(!k)return;const J=mo(k);J.addEventListener("resize",R);let N;return typeof ResizeObserver<"u"&&(N=new ResizeObserver(()=>{y()&&(N.unobserve(k),cancelAnimationFrame(V.current),S(),V.current=requestAnimationFrame(()=>{N.observe(k)}))}),N.observe(k)),()=>{R.clear(),cancelAnimationFrame(V.current),J.removeEventListener("resize",R),N&&N.disconnect()}},[G,S,y]),Qo(()=>{S()});const v=R=>{d||S();const k=R.target,J=k.value.length,N=k.value.endsWith(`
`),K=k.selectionStart===J;N&&K&&k.setSelectionRange(J,J),n&&n(R)};return Z.jsxs(f.Fragment,{children:[Z.jsx("textarea",{value:C,onChange:v,ref:m,rows:r,style:i,...a}),Z.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:B,tabIndex:-1,style:{...Wz.shadow,...i,paddingTop:0,paddingBottom:0}})]})});function UI({props:e,states:t,muiFormControl:g}){return t.reduce((n,l)=>(n[l]=e[l],g&&typeof e[l]>"u"&&(n[l]=g[l]),n),{})}const Zh=f.createContext(void 0);function LI(){return f.useContext(Zh)}function xG(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function aa(e,t=!1){return e&&(xG(e.value)&&e.value!==""||t&&xG(e.defaultValue)&&e.defaultValue!=="")}function kz(e){return e.startAdornment}function Jz(e){return st("MuiInputBase",e)}const YI=gt("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var EG;const ec=(e,t)=>{const{ownerState:g}=e;return[t.root,g.formControl&&t.formControl,g.startAdornment&&t.adornedStart,g.endAdornment&&t.adornedEnd,g.error&&t.error,g.size==="small"&&t.sizeSmall,g.multiline&&t.multiline,g.color&&t[`color${Me(g.color)}`],g.fullWidth&&t.fullWidth,g.hiddenLabel&&t.hiddenLabel]},tc=(e,t)=>{const{ownerState:g}=e;return[t.input,g.size==="small"&&t.inputSizeSmall,g.multiline&&t.inputMultiline,g.type==="search"&&t.inputTypeSearch,g.startAdornment&&t.inputAdornedStart,g.endAdornment&&t.inputAdornedEnd,g.hiddenLabel&&t.inputHiddenLabel]},vz=e=>{const{classes:t,color:g,disabled:n,error:l,endAdornment:r,focused:i,formControl:C,fullWidth:a,hiddenLabel:d,multiline:A,readOnly:m,size:p,startAdornment:B,type:G}=e,y={root:["root",`color${Me(g)}`,n&&"disabled",l&&"error",a&&"fullWidth",i&&"focused",C&&"formControl",p&&p!=="medium"&&`size${Me(p)}`,A&&"multiline",B&&"adornedStart",r&&"adornedEnd",d&&"hiddenLabel",m&&"readOnly"],input:["input",n&&"disabled",G==="search"&&"inputTypeSearch",A&&"inputMultiline",p==="small"&&"inputSizeSmall",d&&"inputHiddenLabel",B&&"inputAdornedStart",r&&"inputAdornedEnd",m&&"readOnly"]};return it(y,Jz,t)},gc=Xe("div",{name:"MuiInputBase",slot:"Root",overridesResolver:ec})(Mt(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${YI.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:g})=>t.multiline&&g==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),nc=Xe("input",{name:"MuiInputBase",slot:"Input",overridesResolver:tc})(Mt(({theme:e})=>{const t=e.palette.mode==="light",g={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},n={opacity:"0 !important"},l=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":g,"&::-moz-placeholder":g,"&::-ms-input-placeholder":g,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${YI.formControl} &`]:{"&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus::-webkit-input-placeholder":l,"&:focus::-moz-placeholder":l,"&:focus::-ms-input-placeholder":l},[`&.${YI.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:r})=>!r.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:r})=>r.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),zG=mN({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),yh=f.forwardRef(function(t,g){const n=ut({props:t,name:"MuiInputBase"}),{"aria-describedby":l,autoComplete:r,autoFocus:i,className:C,color:a,components:d={},componentsProps:A={},defaultValue:m,disabled:p,disableInjectingGlobalStyles:B,endAdornment:G,error:y,fullWidth:S=!1,id:V,inputComponent:v="input",inputProps:R={},inputRef:k,margin:J,maxRows:N,minRows:K,multiline:X=!1,name:w,onBlur:h,onChange:Y,onClick:z,onFocus:T,onKeyDown:U,onKeyUp:P,placeholder:O,readOnly:_,renderSuffix:j,rows:Q,size:$,slotProps:F={},slots:M={},startAdornment:ne,type:re="text",value:oe,...ce}=n,ae=R.value!=null?R.value:oe,{current:Ge}=f.useRef(ae!=null),me=f.useRef(),ue=f.useCallback(Pe=>{},[]),de=yg(me,k,R.ref,ue),[he,Ke]=f.useState(!1),He=LI(),xe=UI({props:n,muiFormControl:He,states:["color","disabled","error","hiddenLabel","size","required","filled"]});xe.focused=He?He.focused:he,f.useEffect(()=>{!He&&p&&he&&(Ke(!1),h&&h())},[He,p,he,h]);const je=He&&He.onFilled,fe=He&&He.onEmpty,pe=f.useCallback(Pe=>{aa(Pe)?je&&je():fe&&fe()},[je,fe]);Qo(()=>{Ge&&pe({value:ae})},[ae,pe,Ge]);const ye=Pe=>{T&&T(Pe),R.onFocus&&R.onFocus(Pe),He&&He.onFocus?He.onFocus(Pe):Ke(!0)},Ce=Pe=>{h&&h(Pe),R.onBlur&&R.onBlur(Pe),He&&He.onBlur?He.onBlur(Pe):Ke(!1)},be=(Pe,...mt)=>{if(!Ge){const An=Pe.target||me.current;if(An==null)throw new Error(Ao(1));pe({value:An.value})}R.onChange&&R.onChange(Pe,...mt),Y&&Y(Pe,...mt)};f.useEffect(()=>{pe(me.current)},[]);const le=Pe=>{me.current&&Pe.currentTarget===Pe.target&&me.current.focus(),z&&z(Pe)};let ke=v,we=R;X&&ke==="input"&&(Q?we={type:void 0,minRows:Q,maxRows:Q,...we}:we={type:void 0,maxRows:N,minRows:K,...we},ke=Xz);const Te=Pe=>{pe(Pe.animationName==="mui-auto-fill-cancel"?me.current:{value:"x"})};f.useEffect(()=>{He&&He.setAdornedStart(!!ne)},[He,ne]);const ot={...n,color:xe.color||"primary",disabled:xe.disabled,endAdornment:G,error:xe.error,focused:xe.focused,formControl:He,fullWidth:S,hiddenLabel:xe.hiddenLabel,multiline:X,size:xe.size,startAdornment:ne,type:re},Tt=vz(ot),Ig=M.root||d.Root||gc,fg=F.root||A.root||{},Zt=M.input||d.Input||nc;return we={...we,...F.input??A.input},Z.jsxs(f.Fragment,{children:[!B&&typeof zG=="function"&&(EG||(EG=Z.jsx(zG,{}))),Z.jsxs(Ig,{...fg,ref:g,onClick:le,...ce,...!yu(Ig)&&{ownerState:{...ot,...fg.ownerState}},className:Ee(Tt.root,fg.className,C,_&&"MuiInputBase-readOnly"),children:[ne,Z.jsx(Zh.Provider,{value:null,children:Z.jsx(Zt,{"aria-invalid":xe.error,"aria-describedby":l,autoComplete:r,autoFocus:i,defaultValue:m,disabled:xe.disabled,id:V,onAnimationStart:Te,name:w,placeholder:O,readOnly:_,required:xe.required,rows:Q,value:ae,onKeyDown:U,onKeyUp:P,type:re,...we,...!yu(Zt)&&{as:ke,ownerState:{...ot,...we.ownerState}},ref:de,className:Ee(Tt.input,we.className,_&&"MuiInputBase-readOnly"),onBlur:Ce,onChange:be,onFocus:ye})}),G,j?j({...xe,startAdornment:ne}):null]})]})});function Yz(e){return st("MuiInput",e)}const Er={...YI,...gt("MuiInput",["root","underline","input"])},Hz=e=>{const{classes:t,disableUnderline:g}=e,l=it({root:["root",!g&&"underline"],input:["input"]},Yz,t);return{...t,...l}},wz=Xe(gc,{shouldForwardProp:e=>dn(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[...ec(e,t),!g.disableUnderline&&t.underline]}})(Mt(({theme:e})=>{let g=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(g=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:n})=>n.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:n})=>!n.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Er.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Er.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${g}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Er.disabled}, .${Er.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${g}`}},[`&.${Er.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(kl()).map(([n])=>({props:{color:n,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[n].main}`}}}))]}})),Fz=Xe(nc,{name:"MuiInput",slot:"Input",overridesResolver:tc})({}),Gh=f.forwardRef(function(t,g){const n=ut({props:t,name:"MuiInput"}),{disableUnderline:l=!1,components:r={},componentsProps:i,fullWidth:C=!1,inputComponent:a="input",multiline:d=!1,slotProps:A,slots:m={},type:p="text",...B}=n,G=Hz(n),S={root:{ownerState:{disableUnderline:l}}},V=A??i?mg(A??i,S):S,v=m.root??r.Root??wz,R=m.input??r.Input??Fz;return Z.jsx(yh,{slots:{root:v,input:R},slotProps:V,fullWidth:C,inputComponent:a,multiline:d,ref:g,type:p,...B,classes:G})});Gh.muiName="Input";function Nz(e){return st("MuiFilledInput",e)}const al={...YI,...gt("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},Kz=e=>{const{classes:t,disableUnderline:g,startAdornment:n,endAdornment:l,size:r,hiddenLabel:i,multiline:C}=e,a={root:["root",!g&&"underline",n&&"adornedStart",l&&"adornedEnd",r==="small"&&`size${Me(r)}`,i&&"hiddenLabel",C&&"multiline"],input:["input"]},d=it(a,Nz,t);return{...t,...d}},xz=Xe(gc,{shouldForwardProp:e=>dn(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[...ec(e,t),!g.disableUnderline&&t.underline]}})(Mt(({theme:e})=>{const t=e.palette.mode==="light",g=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",n=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",l=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",r=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:n,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:l,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:n}},[`&.${al.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:n},[`&.${al.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:r},variants:[{props:({ownerState:i})=>!i.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${al.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${al.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:g}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${al.disabled}, .${al.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${al.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(kl()).map(([i])=>({props:{disableUnderline:!1,color:i},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[i]?.main}`}}})),{props:({ownerState:i})=>i.startAdornment,style:{paddingLeft:12}},{props:({ownerState:i})=>i.endAdornment,style:{paddingRight:12}},{props:({ownerState:i})=>i.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:i,size:C})=>i.multiline&&C==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:i})=>i.multiline&&i.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:i})=>i.multiline&&i.hiddenLabel&&i.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),Ez=Xe(nc,{name:"MuiFilledInput",slot:"Input",overridesResolver:tc})(Mt(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),fh=f.forwardRef(function(t,g){const n=ut({props:t,name:"MuiFilledInput"}),{disableUnderline:l=!1,components:r={},componentsProps:i,fullWidth:C=!1,hiddenLabel:a,inputComponent:d="input",multiline:A=!1,slotProps:m,slots:p={},type:B="text",...G}=n,y={...n,disableUnderline:l,fullWidth:C,inputComponent:d,multiline:A,type:B},S=Kz(n),V={root:{ownerState:y},input:{ownerState:y}},v=m??i?mg(V,m??i):V,R=p.root??r.Root??xz,k=p.input??r.Input??Ez;return Z.jsx(yh,{slots:{root:R,input:k},slotProps:v,fullWidth:C,inputComponent:d,multiline:A,ref:g,type:B,...G,classes:S})});fh.muiName="Input";var MG;const zz=Xe("fieldset",{shouldForwardProp:dn})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Mz=Xe("legend",{shouldForwardProp:dn})(Mt(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function Tz(e){const{children:t,classes:g,className:n,label:l,notched:r,...i}=e,C=l!=null&&l!=="",a={...e,notched:r,withLabel:C};return Z.jsx(zz,{"aria-hidden":!0,className:n,ownerState:a,...i,children:Z.jsx(Mz,{ownerState:a,children:C?Z.jsx("span",{children:l}):MG||(MG=Z.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"}))})})}function Uz(e){return st("MuiOutlinedInput",e)}const Fn={...YI,...gt("MuiOutlinedInput",["root","notchedOutline","input"])},Lz=e=>{const{classes:t}=e,n=it({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Uz,t);return{...t,...n}},Qz=Xe(gc,{shouldForwardProp:e=>dn(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:ec})(Mt(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${Fn.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${Fn.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${Fn.focused} .${Fn.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(kl()).map(([g])=>({props:{color:g},style:{[`&.${Fn.focused} .${Fn.notchedOutline}`]:{borderColor:(e.vars||e).palette[g].main}}})),{props:{},style:{[`&.${Fn.error} .${Fn.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${Fn.disabled} .${Fn.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:g})=>g.startAdornment,style:{paddingLeft:14}},{props:({ownerState:g})=>g.endAdornment,style:{paddingRight:14}},{props:({ownerState:g})=>g.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:g,size:n})=>g.multiline&&n==="small",style:{padding:"8.5px 14px"}}]}})),Dz=Xe(Tz,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(Mt(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}})),jz=Xe(nc,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:tc})(Mt(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),Bh=f.forwardRef(function(t,g){const n=ut({props:t,name:"MuiOutlinedInput"}),{components:l={},fullWidth:r=!1,inputComponent:i="input",label:C,multiline:a=!1,notched:d,slots:A={},slotProps:m={},type:p="text",...B}=n,G=Lz(n),y=LI(),S=UI({props:n,muiFormControl:y,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),V={...n,color:S.color||"primary",disabled:S.disabled,error:S.error,focused:S.focused,formControl:y,fullWidth:r,hiddenLabel:S.hiddenLabel,multiline:a,size:S.size,type:p},v=A.root??l.Root??Qz,R=A.input??l.Input??jz,[k,J]=dg("notchedOutline",{elementType:Dz,className:G.notchedOutline,shouldForwardComponentProp:!0,ownerState:V,externalForwardedProps:{slots:A,slotProps:m},additionalProps:{label:C!=null&&C!==""&&S.required?Z.jsxs(f.Fragment,{children:[C," ","*"]}):C}});return Z.jsx(yh,{slots:{root:v,input:R},slotProps:m,renderSuffix:N=>Z.jsx(k,{...J,notched:typeof d<"u"?d:!!(N.startAdornment||N.filled||N.focused)}),fullWidth:r,inputComponent:i,multiline:a,ref:g,type:p,...B,classes:{...G,notchedOutline:null}})});Bh.muiName="Input";function Pz(e){return st("MuiFormLabel",e)}const ri=gt("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Oz=e=>{const{classes:t,color:g,focused:n,disabled:l,error:r,filled:i,required:C}=e,a={root:["root",`color${Me(g)}`,l&&"disabled",r&&"error",i&&"filled",n&&"focused",C&&"required"],asterisk:["asterisk",r&&"error"]};return it(a,Pz,t)},qz=Xe("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,g.color==="secondary"&&t.colorSecondary,g.filled&&t.filled]}})(Mt(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(kl()).map(([t])=>({props:{color:t},style:{[`&.${ri.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${ri.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${ri.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),$z=Xe("span",{name:"MuiFormLabel",slot:"Asterisk"})(Mt(({theme:e})=>({[`&.${ri.error}`]:{color:(e.vars||e).palette.error.main}}))),_z=f.forwardRef(function(t,g){const n=ut({props:t,name:"MuiFormLabel"}),{children:l,className:r,color:i,component:C="label",disabled:a,error:d,filled:A,focused:m,required:p,...B}=n,G=LI(),y=UI({props:n,muiFormControl:G,states:["color","required","focused","disabled","error","filled"]}),S={...n,color:y.color||"primary",component:C,disabled:y.disabled,error:y.error,filled:y.filled,focused:y.focused,required:y.required},V=Oz(S);return Z.jsxs(qz,{as:C,ownerState:S,className:Ee(V.root,r),ref:g,...B,children:[l,y.required&&Z.jsxs($z,{ownerState:S,"aria-hidden":!0,className:V.asterisk,children:[" ","*"]})]})});function eM(e){return st("MuiInputLabel",e)}gt("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const tM=e=>{const{classes:t,formControl:g,size:n,shrink:l,disableAnimation:r,variant:i,required:C}=e,a={root:["root",g&&"formControl",!r&&"animated",l&&"shrink",n&&n!=="medium"&&`size${Me(n)}`,i],asterisk:[C&&"asterisk"]},d=it(a,eM,t);return{...t,...d}},gM=Xe(_z,{shouldForwardProp:e=>dn(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[{[`& .${ri.asterisk}`]:t.asterisk},t.root,g.formControl&&t.formControl,g.size==="small"&&t.sizeSmall,g.shrink&&t.shrink,!g.disableAnimation&&t.animated,g.focused&&t.focused,t[g.variant]]}})(Mt(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:g})=>t==="filled"&&g.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:g,size:n})=>t==="filled"&&g.shrink&&n==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:g})=>t==="outlined"&&g.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),nW=f.forwardRef(function(t,g){const n=ut({name:"MuiInputLabel",props:t}),{disableAnimation:l=!1,margin:r,shrink:i,variant:C,className:a,...d}=n,A=LI();let m=i;typeof m>"u"&&A&&(m=A.filled||A.focused||A.adornedStart);const p=UI({props:n,muiFormControl:A,states:["size","variant","required","focused"]}),B={...n,disableAnimation:l,formControl:A,shrink:m,size:p.size,variant:p.variant,required:p.required,focused:p.focused},G=tM(B);return Z.jsx(gM,{"data-shrink":m,ref:g,className:Ee(G.root,a),...d,ownerState:B,classes:G})});function nM(e){return st("MuiFormControl",e)}gt("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const oM=e=>{const{classes:t,margin:g,fullWidth:n}=e,l={root:["root",g!=="none"&&`margin${Me(g)}`,n&&"fullWidth"]};return it(l,nM,t)},lM=Xe("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,t[`margin${Me(g.margin)}`],g.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),oW=f.forwardRef(function(t,g){const n=ut({props:t,name:"MuiFormControl"}),{children:l,className:r,color:i="primary",component:C="div",disabled:a=!1,error:d=!1,focused:A,fullWidth:m=!1,hiddenLabel:p=!1,margin:B="none",required:G=!1,size:y="medium",variant:S="outlined",...V}=n,v={...n,color:i,component:C,disabled:a,error:d,fullWidth:m,hiddenLabel:p,margin:B,required:G,size:y,variant:S},R=oM(v),[k,J]=f.useState(()=>{let P=!1;return l&&f.Children.forEach(l,O=>{if(!xC(O,["Input","Select"]))return;const _=xC(O,["Select"])?O.props.input:O;_&&kz(_.props)&&(P=!0)}),P}),[N,K]=f.useState(()=>{let P=!1;return l&&f.Children.forEach(l,O=>{xC(O,["Input","Select"])&&(aa(O.props,!0)||aa(O.props.inputProps,!0))&&(P=!0)}),P}),[X,w]=f.useState(!1);a&&X&&w(!1);const h=A!==void 0&&!a?A:X;let Y;f.useRef(!1);const z=f.useCallback(()=>{K(!0)},[]),T=f.useCallback(()=>{K(!1)},[]),U=f.useMemo(()=>({adornedStart:k,setAdornedStart:J,color:i,disabled:a,error:d,filled:N,focused:h,fullWidth:m,hiddenLabel:p,size:y,onBlur:()=>{w(!1)},onFocus:()=>{w(!0)},onEmpty:T,onFilled:z,registerEffect:Y,required:G,variant:S}),[k,i,a,d,N,h,m,p,Y,T,z,G,y,S]);return Z.jsx(Zh.Provider,{value:U,children:Z.jsx(lM,{as:C,ownerState:v,className:Ee(R.root,r),ref:g,...V,children:l})})});function IM(e){return st("MuiFormHelperText",e)}const TG=gt("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var UG;const rM=e=>{const{classes:t,contained:g,size:n,disabled:l,error:r,filled:i,focused:C,required:a}=e,d={root:["root",l&&"disabled",r&&"error",n&&`size${Me(n)}`,g&&"contained",C&&"focused",i&&"filled",a&&"required"]};return it(d,IM,t)},iM=Xe("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,g.size&&t[`size${Me(g.size)}`],g.contained&&t.contained,g.filled&&t.filled]}})(Mt(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${TG.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${TG.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),sM=f.forwardRef(function(t,g){const n=ut({props:t,name:"MuiFormHelperText"}),{children:l,className:r,component:i="p",disabled:C,error:a,filled:d,focused:A,margin:m,required:p,variant:B,...G}=n,y=LI(),S=UI({props:n,muiFormControl:y,states:["variant","size","disabled","error","filled","focused","required"]}),V={...n,component:i,contained:S.variant==="filled"||S.variant==="outlined",variant:S.variant,size:S.size,disabled:S.disabled,error:S.error,filled:S.filled,focused:S.focused,required:S.required};delete V.ownerState;const v=rM(V);return Z.jsx(iM,{as:i,className:Ee(v.root,r),ref:g,...G,ownerState:V,children:l===" "?UG||(UG=Z.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):l})});function CM(e){return st("MuiNativeSelect",e)}const Sh=gt("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),aM=e=>{const{classes:t,variant:g,disabled:n,multiple:l,open:r,error:i}=e,C={select:["select",g,n&&"disabled",l&&"multiple",i&&"error"],icon:["icon",`icon${Me(g)}`,r&&"iconOpen",n&&"disabled"]};return it(C,CM,t)},lW=Xe("select")(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${Sh.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),cM=Xe(lW,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:dn,overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.select,t[g.variant],g.error&&t.error,{[`&.${Sh.multiple}`]:t.multiple}]}})({}),IW=Xe("svg")(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${Sh.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),dM=Xe(IW,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.icon,g.variant&&t[`icon${Me(g.variant)}`],g.open&&t.iconOpen]}})({}),AM=f.forwardRef(function(t,g){const{className:n,disabled:l,error:r,IconComponent:i,inputRef:C,variant:a="standard",...d}=t,A={...t,disabled:l,variant:a,error:r},m=aM(A);return Z.jsxs(f.Fragment,{children:[Z.jsx(cM,{ownerState:A,className:Ee(m.select,n),disabled:l,ref:C||g,...d}),t.multiple?null:Z.jsx(dM,{as:i,ownerState:A,className:m.icon})]})});function rW(e){return st("MuiSelect",e)}const zr=gt("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var LG;const uM=Xe(lW,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[{[`&.${zr.select}`]:t.select},{[`&.${zr.select}`]:t[g.variant]},{[`&.${zr.error}`]:t.error},{[`&.${zr.multiple}`]:t.multiple}]}})({[`&.${zr.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),mM=Xe(IW,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.icon,g.variant&&t[`icon${Me(g.variant)}`],g.open&&t.iconOpen]}})({}),hM=Xe("input",{shouldForwardProp:e=>iS(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function QG(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function pM(e){return e==null||typeof e=="string"&&!e.trim()}const bM=e=>{const{classes:t,variant:g,disabled:n,multiple:l,open:r,error:i}=e,C={select:["select",g,n&&"disabled",l&&"multiple",i&&"error"],icon:["icon",`icon${Me(g)}`,r&&"iconOpen",n&&"disabled"],nativeInput:["nativeInput"]};return it(C,rW,t)},ZM=f.forwardRef(function(t,g){const{"aria-describedby":n,"aria-label":l,autoFocus:r,autoWidth:i,children:C,className:a,defaultOpen:d,defaultValue:A,disabled:m,displayEmpty:p,error:B=!1,IconComponent:G,inputRef:y,labelId:S,MenuProps:V={},multiple:v,name:R,onBlur:k,onChange:J,onClose:N,onFocus:K,onOpen:X,open:w,readOnly:h,renderValue:Y,required:z,SelectDisplayProps:T={},tabIndex:U,type:P,value:O,variant:_="standard",...j}=t,[Q,$]=ty({controlled:O,default:A,name:"Select"}),[F,M]=ty({controlled:w,default:d,name:"Select"}),ne=f.useRef(null),re=f.useRef(null),[oe,ce]=f.useState(null),{current:ae}=f.useRef(w!=null),[Ge,me]=f.useState(),ue=yg(g,y),de=f.useCallback(Je=>{re.current=Je,Je&&ce(Je)},[]),he=oe?.parentNode;f.useImperativeHandle(ue,()=>({focus:()=>{re.current.focus()},node:ne.current,value:Q}),[Q]),f.useEffect(()=>{d&&F&&oe&&!ae&&(me(i?null:he.clientWidth),re.current.focus())},[oe,i]),f.useEffect(()=>{r&&re.current.focus()},[r]),f.useEffect(()=>{if(!S)return;const Je=Vn(re.current).getElementById(S);if(Je){const Qe=()=>{getSelection().isCollapsed&&re.current.focus()};return Je.addEventListener("click",Qe),()=>{Je.removeEventListener("click",Qe)}}},[S]);const Ke=(Je,Qe)=>{Je?X&&X(Qe):N&&N(Qe),ae||(me(i?null:he.clientWidth),M(Je))},He=Je=>{Je.button===0&&(Je.preventDefault(),re.current.focus(),Ke(!0,Je))},xe=Je=>{Ke(!1,Je)},je=f.Children.toArray(C),fe=Je=>{const Qe=je.find(yt=>yt.props.value===Je.target.value);Qe!==void 0&&($(Qe.props.value),J&&J(Je,Qe))},pe=Je=>Qe=>{let yt;if(Qe.currentTarget.hasAttribute("tabindex")){if(v){yt=Array.isArray(Q)?Q.slice():[];const jg=Q.indexOf(Je.props.value);jg===-1?yt.push(Je.props.value):yt.splice(jg,1)}else yt=Je.props.value;if(Je.props.onClick&&Je.props.onClick(Qe),Q!==yt&&($(yt),J)){const jg=Qe.nativeEvent||Qe,vl=new jg.constructor(jg.type,jg);Object.defineProperty(vl,"target",{writable:!0,value:{value:yt,name:R}}),J(vl,Je)}v||Ke(!1,Qe)}},ye=Je=>{h||[" ","ArrowUp","ArrowDown","Enter"].includes(Je.key)&&(Je.preventDefault(),Ke(!0,Je))},Ce=oe!==null&&F,be=Je=>{!Ce&&k&&(Object.defineProperty(Je,"target",{writable:!0,value:{value:Q,name:R}}),k(Je))};delete j["aria-invalid"];let le,ke;const we=[];let Te=!1;(aa({value:Q})||p)&&(Y?le=Y(Q):Te=!0);const ot=je.map(Je=>{if(!f.isValidElement(Je))return null;let Qe;if(v){if(!Array.isArray(Q))throw new Error(Ao(2));Qe=Q.some(yt=>QG(yt,Je.props.value)),Qe&&Te&&we.push(Je.props.children)}else Qe=QG(Q,Je.props.value),Qe&&Te&&(ke=Je.props.children);return f.cloneElement(Je,{"aria-selected":Qe?"true":"false",onClick:pe(Je),onKeyUp:yt=>{yt.key===" "&&yt.preventDefault(),Je.props.onKeyUp&&Je.props.onKeyUp(yt)},role:"option",selected:Qe,value:void 0,"data-value":Je.props.value})});Te&&(v?we.length===0?le=null:le=we.reduce((Je,Qe,yt)=>(Je.push(Qe),yt<we.length-1&&Je.push(", "),Je),[]):le=ke);let Tt=Ge;!i&&ae&&oe&&(Tt=he.clientWidth);let Ig;typeof U<"u"?Ig=U:Ig=m?null:0;const fg=T.id||(R?`mui-component-select-${R}`:void 0),Zt={...t,variant:_,value:Q,open:Ce,error:B},Pe=bM(Zt),mt={...V.PaperProps,...V.slotProps?.paper},An=Hm();return Z.jsxs(f.Fragment,{children:[Z.jsx(uM,{as:"div",ref:de,tabIndex:Ig,role:"combobox","aria-controls":Ce?An:void 0,"aria-disabled":m?"true":void 0,"aria-expanded":Ce?"true":"false","aria-haspopup":"listbox","aria-label":l,"aria-labelledby":[S,fg].filter(Boolean).join(" ")||void 0,"aria-describedby":n,"aria-required":z?"true":void 0,"aria-invalid":B?"true":void 0,onKeyDown:ye,onMouseDown:m||h?null:He,onBlur:be,onFocus:K,...T,ownerState:Zt,className:Ee(T.className,Pe.select,a),id:fg,children:pM(le)?LG||(LG=Z.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):le}),Z.jsx(hM,{"aria-invalid":B,value:Array.isArray(Q)?Q.join(","):Q,name:R,ref:ne,"aria-hidden":!0,onChange:fe,tabIndex:-1,disabled:m,className:Pe.nativeInput,autoFocus:r,required:z,...j,ownerState:Zt}),Z.jsx(mM,{as:G,className:Pe.icon,ownerState:Zt}),Z.jsx(xm,{id:`menu-${R||""}`,anchorEl:he,open:Ce,onClose:xe,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...V,slotProps:{...V.slotProps,list:{"aria-labelledby":S,role:"listbox","aria-multiselectable":v?"true":void 0,disableListWrap:!0,id:An,...V.MenuListProps},paper:{...mt,style:{minWidth:Tt,...mt!=null?mt.style:null}}},children:ot})]})}),yM=yN(Z.jsx("path",{d:"M7 10l5 5 5-5z"})),GM=e=>{const{classes:t}=e,n=it({root:["root"]},rW,t);return{...t,...n}},Vh={name:"MuiSelect",slot:"Root",shouldForwardProp:e=>dn(e)&&e!=="variant"},fM=Xe(Gh,Vh)(""),BM=Xe(Bh,Vh)(""),SM=Xe(fh,Vh)(""),Wh=f.forwardRef(function(t,g){const n=ut({name:"MuiSelect",props:t}),{autoWidth:l=!1,children:r,classes:i={},className:C,defaultOpen:a=!1,displayEmpty:d=!1,IconComponent:A=yM,id:m,input:p,inputProps:B,label:G,labelId:y,MenuProps:S,multiple:V=!1,native:v=!1,onClose:R,onOpen:k,open:J,renderValue:N,SelectDisplayProps:K,variant:X="outlined",...w}=n,h=v?AM:ZM,Y=LI(),z=UI({props:n,muiFormControl:Y,states:["variant","error"]}),T=z.variant||X,U={...n,variant:T,classes:i},P=GM(U),{root:O,..._}=P,j=p||{standard:Z.jsx(fM,{ownerState:U}),outlined:Z.jsx(BM,{label:G,ownerState:U}),filled:Z.jsx(SM,{ownerState:U})}[T],Q=yg(g,Ui(j));return Z.jsx(f.Fragment,{children:f.cloneElement(j,{inputComponent:h,inputProps:{children:r,error:z.error,IconComponent:A,variant:T,type:void 0,multiple:V,...v?{id:m}:{autoWidth:l,defaultOpen:a,displayEmpty:d,labelId:y,MenuProps:S,onClose:R,onOpen:k,open:J,renderValue:N,SelectDisplayProps:{id:m,...K}},...B,classes:B?mg(_,B.classes):_,...p?p.props.inputProps:{}},...(V&&v||d)&&T==="outlined"?{notched:!0}:{},ref:Q,className:Ee(j.props.className,C,P.root),...!p&&{variant:T},...w})})});Wh.muiName="Select";function VM(e){return st("MuiTextField",e)}gt("MuiTextField",["root"]);const WM={standard:Gh,filled:fh,outlined:Bh},RM=e=>{const{classes:t}=e;return it({root:["root"]},VM,t)},XM=Xe(oW,{name:"MuiTextField",slot:"Root"})({}),Xt=f.forwardRef(function(t,g){const n=ut({props:t,name:"MuiTextField"}),{autoComplete:l,autoFocus:r=!1,children:i,className:C,color:a="primary",defaultValue:d,disabled:A=!1,error:m=!1,FormHelperTextProps:p,fullWidth:B=!1,helperText:G,id:y,InputLabelProps:S,inputProps:V,InputProps:v,inputRef:R,label:k,maxRows:J,minRows:N,multiline:K=!1,name:X,onBlur:w,onChange:h,onFocus:Y,placeholder:z,required:T=!1,rows:U,select:P=!1,SelectProps:O,slots:_={},slotProps:j={},type:Q,value:$,variant:F="outlined",...M}=n,ne={...n,autoFocus:r,color:a,disabled:A,error:m,fullWidth:B,multiline:K,required:T,select:P,variant:F},re=RM(ne),oe=Hm(y),ce=G&&oe?`${oe}-helper-text`:void 0,ae=k&&oe?`${oe}-label`:void 0,Ge=WM[F],me={slots:_,slotProps:{input:v,inputLabel:S,htmlInput:V,formHelperText:p,select:O,...j}},ue={},de=me.slotProps.inputLabel;F==="outlined"&&(de&&typeof de.shrink<"u"&&(ue.notched=de.shrink),ue.label=k),P&&((!O||!O.native)&&(ue.id=void 0),ue["aria-describedby"]=void 0);const[he,Ke]=dg("root",{elementType:XM,shouldForwardComponentProp:!0,externalForwardedProps:{...me,...M},ownerState:ne,className:Ee(re.root,C),ref:g,additionalProps:{disabled:A,error:m,fullWidth:B,required:T,color:a,variant:F}}),[He,xe]=dg("input",{elementType:Ge,externalForwardedProps:me,additionalProps:ue,ownerState:ne}),[je,fe]=dg("inputLabel",{elementType:nW,externalForwardedProps:me,ownerState:ne}),[pe,ye]=dg("htmlInput",{elementType:"input",externalForwardedProps:me,ownerState:ne}),[Ce,be]=dg("formHelperText",{elementType:sM,externalForwardedProps:me,ownerState:ne}),[le,ke]=dg("select",{elementType:Wh,externalForwardedProps:me,ownerState:ne}),we=Z.jsx(He,{"aria-describedby":ce,autoComplete:l,autoFocus:r,defaultValue:d,fullWidth:B,multiline:K,name:X,rows:U,maxRows:J,minRows:N,type:Q,value:$,id:oe,inputRef:R,onBlur:w,onChange:h,onFocus:Y,placeholder:z,inputProps:ye,slots:{input:_.htmlInput?pe:void 0},...xe});return Z.jsxs(he,{...Ke,children:[k!=null&&k!==""&&Z.jsx(je,{htmlFor:oe,id:ae,...fe,children:k}),P?Z.jsx(le,{"aria-describedby":ce,id:oe,labelId:ae,value:$,input:we,...ke,children:i}):we,G&&Z.jsx(Ce,{id:ce,...be,children:G})]})}),kM="http://localhost:8080",JM=async e=>{try{return(await Re.post(`${kM}/api/auth/login`,e)).data}catch(t){throw console.error("Login failed",t),t}},vM=()=>{const e=Zo(),[t,g]=f.useState([]),[n,l]=f.useState([]),[r,i]=f.useState([]),C={email:t,password:n},a=async d=>{i("");try{const A=await JM(d);localStorage.setItem("token",A.token),localStorage.setItem("role","user"),g(""),l(""),A&&e("/home")}catch(A){console.error("login failed",A),i(A.message||"Log in failed")}};return Z.jsxs("div",{style:YM,children:[Z.jsxs("div",{children:[Z.jsx("h1",{style:{...DG,fontSize:"30px",margin:0},children:"Log In to Your Account"}),Z.jsx("center",{children:Z.jsx("h3",{style:{...DG,margin:0},children:"Enter the Block Party"})})]}),Z.jsx("div",{style:HM,children:Z.jsxs(Gg,{component:"section",sx:{p:2,border:1,borderRadius:2},style:wM,children:[Z.jsx(Xt,{id:"outlined-basic",label:"Email",variant:"outlined",onChange:d=>g(d.target.value),value:t}),Z.jsx("br",{}),Z.jsx(Xt,{id:"outlined-password-input",label:"Password",type:"password",autoComplete:"current-password",onChange:d=>l(d.target.value),value:n}),Z.jsx("br",{}),Z.jsx(tt,{variant:"contained",sx:{color:"white",backgroundColor:"#ff2400"},onClick:()=>a(C),children:"Submit"}),Z.jsx(tt,{size:"small",sx:{color:"#ff2400"},onClick:()=>e("/register"),children:"Register"}),r&&Z.jsx("p",{style:{color:"red",marginTop:"10px"},children:r})]})})]})},YM={position:"relative",width:"100vw",height:"100vh",margin:"0 auto",display:"flex",gap:"50px",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"#FF5F00"},HM={position:"relative",margin:"0 auto",display:"flex",justifyContent:"center",alignItems:"center"},wM={display:"flex",flexDirection:"column",gap:"5px",padding:"32px",background:"#fff",borderRadius:"8px",boxShadow:"0 0 10px rgba(0,0,0,0.1)",borderWidth:"3px",borderColor:"#ff2400",width:"300px"},DG={color:"white",textShadow:`
    -1px -1px 0 #ff2400,  
     1px -1px 0 #ff2400,
    -1px  1px 0 #ff2400,
     1px  1px 0 #ff2400
  `},FM="http://localhost:8080",NM=async e=>{try{const g=(await Re.post(`${FM}/api/auth/register`,e)).data;return localStorage.setItem("token",g.token),g}catch(t){throw console.error("register failed",t),t}},KM=()=>{const e=Zo(),[t,g]=f.useState(""),[n,l]=f.useState(""),[r,i]=f.useState(""),[C,a]=f.useState(""),[d,A]=f.useState(""),m={first_name:t,last_name:n,email:r,password:C},p=async()=>{A("");try{const B=await NM(m);localStorage.setItem("token",B.token),i(""),a(""),g(""),l(""),console.log("data: "+B),B&&e("/home")}catch(B){console.error("Registration failed",B),A(B.response?.data?.message)}};return Z.jsxs("div",{style:xM,children:[Z.jsxs("div",{children:[Z.jsx("h1",{style:{...jG,fontSize:"30px",margin:0},children:"Register an Account"}),Z.jsx("center",{children:Z.jsx("h3",{style:{...jG,margin:0},children:"Welcome to the Block Party!"})})]}),Z.jsx("div",{style:EM,children:Z.jsxs(Gg,{component:"section",sx:{p:2,border:1,borderRadius:2},style:zM,children:[Z.jsx(Xt,{id:"outlined-basic",label:"First Name",variant:"outlined",onChange:B=>g(B.target.value),value:t}),Z.jsx("br",{}),Z.jsx(Xt,{id:"outlined-basic",label:"Last Name",variant:"outlined",onChange:B=>l(B.target.value),value:n}),Z.jsx("br",{}),Z.jsx(Xt,{id:"outlined-basic",label:"Email",variant:"outlined",onChange:B=>i(B.target.value),value:r}),Z.jsx("br",{}),Z.jsx(Xt,{id:"outlined-password-input",label:"Password",type:"password",autoComplete:"current-password",onChange:B=>a(B.target.value),value:C}),Z.jsx("br",{}),Z.jsx(tt,{variant:"contained",sx:{color:"white",backgroundColor:"#ff2400"},onClick:()=>p(),children:"Submit"}),Z.jsx(tt,{size:"small",sx:{color:"#ff2400"},onClick:()=>e("/"),children:"Log in"}),d&&Z.jsx("p",{style:{color:"red",marginTop:"10px"},children:d})]})})]})},xM={position:"relative",width:"100vw",height:"100vh",margin:"0 auto",color:"white",display:"flex",gap:"50px",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"#FF5F00"},EM={position:"relative",margin:"0 auto",display:"flex",justifyContent:"center",alignItems:"center"},zM={display:"flex",flexDirection:"column",gap:"5px",padding:"32px",background:"#fff",borderRadius:"8px",borderWidth:"3px",borderColor:"#ff2400",width:"300px"},jG={textShadow:`
    -1px -1px 0 #ff2400,  
     1px -1px 0 #ff2400,
    -1px  1px 0 #ff2400,
     1px  1px 0 #ff2400
  `},MM={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:250,bgcolor:"background.paper",color:"black",borderRadius:"5px",boxShadow:24,p:4,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"};function TM(){const[e,t]=f.useState(!1),g=()=>t(!0),n=()=>{t(!1)},[l,r]=f.useState(""),{memberPasscodeValidationClick:i}=f.useContext(Li);localStorage.getItem("role");const[C,a]=f.useState(""),d=async()=>{a("");try{await i(l),n()}catch{a("Invalid passcode. Please try again.")}};return Z.jsxs("div",{children:[Z.jsx(tt,{onClick:g,variant:"contained",sx:{backgroundColor:"#ff2400",color:"white",marginTop:"10px",fontWeight:600},children:"Unlock"}),Z.jsx(Jl,{open:e,onClose:n,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Z.jsxs(Gg,{sx:MM,children:[Z.jsx(Fg,{sx:{marginBottom:"10px"},id:"modal-modal-title",variant:"h6",component:"h2",children:"Enter Passcode"}),Z.jsx(Xt,{onChange:A=>r(A.target.value),id:"outlined-basic",label:"passcode",variant:"outlined"}),Z.jsx(tt,{onClick:d,variant:"contained",sx:{backgroundColor:"#ff2400",color:"white",marginTop:"12px",fontWeight:600},children:"Submit"}),C&&Z.jsx(Fg,{color:"error",sx:{mt:1},children:C})]})})]})}const UM=()=>Z.jsxs("div",{style:LM,children:[Z.jsx("div",{style:{position:"absolute",top:"5px",left:"10px"},children:Z.jsx(Qi,{})}),Z.jsx("h1",{style:{fontSize:"20px"},children:"This page is for members only"}),Z.jsx(V9,{fontSize:"large",sx:{marginTop:"10px"}}),Z.jsx(TM,{})]}),LM={minHeight:"100vh",width:"100%",display:"flex",color:"white",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"10px",boxSizing:"border-box",background:"linear-gradient(135deg, rgba(255,127,50,0.95), rgba(230,92,0,0.9))"};function QM(e){return st("MuiCard",e)}gt("MuiCard",["root"]);const DM=e=>{const{classes:t}=e;return it({root:["root"]},QM,t)},jM=Xe(fS,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),Rh=f.forwardRef(function(t,g){const n=ut({props:t,name:"MuiCard"}),{className:l,raised:r=!1,...i}=n,C={...n,raised:r},a=DM(C);return Z.jsx(jM,{className:Ee(a.root,l),elevation:r?8:void 0,ref:g,ownerState:C,...i})});function PM(e){return st("MuiCardContent",e)}gt("MuiCardContent",["root"]);const OM=e=>{const{classes:t}=e;return it({root:["root"]},PM,t)},qM=Xe("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),Xh=f.forwardRef(function(t,g){const n=ut({props:t,name:"MuiCardContent"}),{className:l,component:r="div",...i}=n,C={...n,component:r},a=OM(C);return Z.jsx(qM,{as:r,className:Ee(a.root,l),ownerState:C,ref:g,...i})});function $M(e){return st("MuiCardMedia",e)}gt("MuiCardMedia",["root","media","img"]);const _M=e=>{const{classes:t,isMediaComponent:g,isImageComponent:n}=e;return it({root:["root",g&&"media",n&&"img"]},$M,t)},eT=Xe("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e,{isMediaComponent:n,isImageComponent:l}=g;return[t.root,n&&t.media,l&&t.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),tT=["video","audio","picture","iframe","img"],gT=["picture","img"],kh=f.forwardRef(function(t,g){const n=ut({props:t,name:"MuiCardMedia"}),{children:l,className:r,component:i="div",image:C,src:a,style:d,...A}=n,m=tT.includes(i),p=!m&&C?{backgroundImage:`url("${C}")`,...d}:d,B={...n,component:i,isMediaComponent:m,isImageComponent:gT.includes(i)},G=_M(B);return Z.jsx(eT,{className:Ee(G.root,r),as:i,role:!m&&C?"img":void 0,ref:g,style:p,ownerState:B,src:m?C||a:void 0,...A,children:l})}),Tg=NF({createStyledComponent:Xe("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:g}=e;return[t.root,g.container&&t.container]}}),componentName:"MuiGrid",useThemeProps:e=>ut({props:e,name:"MuiGrid"}),useTheme:Oa}),nT=({activities:e,onCardClick:t,isSelected:g})=>Z.jsx(Tg,{container:!0,spacing:2,children:e.map((n,l)=>Z.jsx("div",{style:{padding:"2px"},children:Z.jsx(Tg,{item:!0,xs:2,sm:2,md:2,children:Z.jsxs(Rh,{sx:{maxWidth:150,borderRadius:3,cursor:"pointer",boxShadow:g===n.id?"0 0 10px #FF5F00":"0 0 3px #FF5F00",border:g===n.id?"3px solid #FF5F00":"none"},onClick:()=>t(n),children:[Z.jsx(kh,{component:"img",height:"100",image:n.img,alt:n.title}),Z.jsxs(Xh,{children:[Z.jsx(Fg,{variant:"h6",sx:{fontSize:"20px"},component:"div",children:n.title}),Z.jsxs(Fg,{variant:"body2",color:"text.secondary",children:["Points: ",n.points]})]})]})},l)}))}),PG="http://localhost:8080",oT={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:350,bgcolor:"background.paper",color:"black",borderRadius:"5px",boxShadow:24,p:4,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},lT=({user:e,handleUserRefresh:t})=>{const[g,n]=f.useState([]),[l,r]=f.useState(null),[i,C]=f.useState(!1),a=()=>C(!0),d=()=>{C(!1)};f.useEffect(()=>{(async()=>{try{const S=(await Re.get(`${PG}/api/activities/retrieve`))?.data;n(S)}catch{console.log("couldn't fetch activities")}})()},[]);const[A,m]=f.useState(""),p=async()=>{const G={user_id:e?.id,activity_id:l?.id};try{const y=Re.post(`${PG}/api/activities/complete`,G);t(),d()}catch(y){console.log("error ocurred",y)}},B=G=>{r(G)};return Z.jsxs("div",{children:[Z.jsx(tt,{disabled:!e,onClick:a,variant:"contained",sx:{backgroundColor:"#ff2400",color:"white",marginTop:"10px",fontWeight:600},children:"Pay"}),Z.jsx(Jl,{open:i,onClose:d,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Z.jsxs(Gg,{sx:oT,children:[Z.jsx(Fg,{sx:{marginBottom:"10px"},id:"modal-modal-title",variant:"h6",component:"h2",children:"Which Activity?"}),Z.jsx(nT,{activities:g,onCardClick:B,isSelected:l?.id}),Z.jsxs(tt,{onClick:p,variant:"contained",sx:{backgroundColor:"#ff2400",color:"white",marginTop:"12px",fontWeight:600},children:[" Pay ",l?.points]}),A&&Z.jsx(Fg,{color:"error",sx:{mt:1},children:A})]})})]})};function Ri(e){"@babel/helpers - typeof";return Ri=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ri(e)}function IT(e,t){if(Ri(e)!="object"||!e)return e;var g=e[Symbol.toPrimitive];if(g!==void 0){var n=g.call(e,t);if(Ri(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rT(e){var t=IT(e,"string");return Ri(t)=="symbol"?t:t+""}function iT(e,t,g){return(t=rT(t))in e?Object.defineProperty(e,t,{value:g,enumerable:!0,configurable:!0,writable:!0}):e[t]=g,e}function sT(e){if(Array.isArray(e))return e}function CT(e,t){var g=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(g!=null){var n,l,r,i,C=[],a=!0,d=!1;try{if(r=(g=g.call(e)).next,t!==0)for(;!(a=(n=r.call(g)).done)&&(C.push(n.value),C.length!==t);a=!0);}catch(A){d=!0,l=A}finally{try{if(!a&&g.return!=null&&(i=g.return(),Object(i)!==i))return}finally{if(d)throw l}}return C}}function OG(e,t){(t==null||t>e.length)&&(t=e.length);for(var g=0,n=Array(t);g<t;g++)n[g]=e[g];return n}function aT(e,t){if(e){if(typeof e=="string")return OG(e,t);var g={}.toString.call(e).slice(8,-1);return g==="Object"&&e.constructor&&(g=e.constructor.name),g==="Map"||g==="Set"?Array.from(e):g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?OG(e,t):void 0}}function cT(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dT(e,t){return sT(e)||CT(e,t)||aT(e,t)||cT()}function AT(e,t){if(e==null)return{};var g,n,l=wm(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)g=r[n],t.indexOf(g)===-1&&{}.propertyIsEnumerable.call(e,g)&&(l[g]=e[g])}return l}var iW={exports:{}},Ct={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eg=typeof Symbol=="function"&&Symbol.for,Jh=eg?Symbol.for("react.element"):60103,vh=eg?Symbol.for("react.portal"):60106,oc=eg?Symbol.for("react.fragment"):60107,lc=eg?Symbol.for("react.strict_mode"):60108,Ic=eg?Symbol.for("react.profiler"):60114,rc=eg?Symbol.for("react.provider"):60109,ic=eg?Symbol.for("react.context"):60110,Yh=eg?Symbol.for("react.async_mode"):60111,sc=eg?Symbol.for("react.concurrent_mode"):60111,Cc=eg?Symbol.for("react.forward_ref"):60112,ac=eg?Symbol.for("react.suspense"):60113,uT=eg?Symbol.for("react.suspense_list"):60120,cc=eg?Symbol.for("react.memo"):60115,dc=eg?Symbol.for("react.lazy"):60116,mT=eg?Symbol.for("react.block"):60121,hT=eg?Symbol.for("react.fundamental"):60117,pT=eg?Symbol.for("react.responder"):60118,bT=eg?Symbol.for("react.scope"):60119;function Dg(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Jh:switch(e=e.type,e){case Yh:case sc:case oc:case Ic:case lc:case ac:return e;default:switch(e=e&&e.$$typeof,e){case ic:case Cc:case dc:case cc:case rc:return e;default:return t}}case vh:return t}}}function sW(e){return Dg(e)===sc}Ct.AsyncMode=Yh;Ct.ConcurrentMode=sc;Ct.ContextConsumer=ic;Ct.ContextProvider=rc;Ct.Element=Jh;Ct.ForwardRef=Cc;Ct.Fragment=oc;Ct.Lazy=dc;Ct.Memo=cc;Ct.Portal=vh;Ct.Profiler=Ic;Ct.StrictMode=lc;Ct.Suspense=ac;Ct.isAsyncMode=function(e){return sW(e)||Dg(e)===Yh};Ct.isConcurrentMode=sW;Ct.isContextConsumer=function(e){return Dg(e)===ic};Ct.isContextProvider=function(e){return Dg(e)===rc};Ct.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Jh};Ct.isForwardRef=function(e){return Dg(e)===Cc};Ct.isFragment=function(e){return Dg(e)===oc};Ct.isLazy=function(e){return Dg(e)===dc};Ct.isMemo=function(e){return Dg(e)===cc};Ct.isPortal=function(e){return Dg(e)===vh};Ct.isProfiler=function(e){return Dg(e)===Ic};Ct.isStrictMode=function(e){return Dg(e)===lc};Ct.isSuspense=function(e){return Dg(e)===ac};Ct.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===oc||e===sc||e===Ic||e===lc||e===ac||e===uT||typeof e=="object"&&e!==null&&(e.$$typeof===dc||e.$$typeof===cc||e.$$typeof===rc||e.$$typeof===ic||e.$$typeof===Cc||e.$$typeof===hT||e.$$typeof===pT||e.$$typeof===bT||e.$$typeof===mT)};Ct.typeOf=Dg;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var qG=Object.getOwnPropertySymbols,ZT=Object.prototype.hasOwnProperty,yT=Object.prototype.propertyIsEnumerable;function GT(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function fT(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},g=0;g<10;g++)t["_"+String.fromCharCode(g)]=g;var n=Object.getOwnPropertyNames(t).map(function(r){return t[r]});if(n.join("")!=="0123456789")return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(r){l[r]=r}),Object.keys(Object.assign({},l)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}fT();var BT="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ST=BT;Function.call.bind(Object.prototype.hasOwnProperty);var VT=ST;function CW(){}function aW(){}aW.resetWarningCache=CW;var WT=function(){function e(n,l,r,i,C,a){if(a!==VT){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var g={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:aW,resetWarningCache:CW};return g.PropTypes=g,g};iW.exports=WT();var AI=iW.exports;function RT(e,t){var g=atob(e);return g}function XT(e,t,g){var n=RT(e),l=n.indexOf(`
`,10)+1,r=n.substring(l)+"",i=new Blob([r],{type:"application/javascript"});return URL.createObjectURL(i)}function kT(e,t,g){var n;return function(r){return n=n||XT(e),new Worker(n,r)}}var JT=kT("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg=="),vT=["constraints","onError","onLoad","onScan","resolution","qrArea"];function $G(e,t){var g=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),g.push.apply(g,n)}return g}function _G(e){for(var t=1;t<arguments.length;t++){var g=arguments[t]!=null?arguments[t]:{};t%2?$G(Object(g),!0).forEach(function(n){iT(e,n,g[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(g)):$G(Object(g)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(g,n))})}return e}var YT=function(){return new JT},ef=function(t){t&&(t.getVideoTracks&&t.getAudioTracks?(t.getVideoTracks().forEach(function(g){t.removeTrack(g),g.stop()}),t.getAudioTracks().forEach(function(g){t.removeTrack(g),g.stop()})):t.stop())},Hh=function(t){var g=t.constraints,n=t.onError,l=t.onLoad,r=t.onScan,i=t.resolution,C=t.qrArea,a=AT(t,vT),d=f.useRef(null),A=f.useRef(null),m=f.useRef(document.createElement("canvas")),p=f.useRef(null),B=f.useRef(),G=f.useState(null),y=dT(G,2),S=y[0],V=y[1],v=f.useRef(!1),R=f.useRef();f.useEffect(function(){R.current=YT();var K=R.current;return K.onmessage=function(X){r&&r(X.data?_G(_G({},X.data),{},{canvas:m.current}):null),v.current=!1},function(){K.terminate()}},[r]);var k=JSON.stringify(C),J=f.useCallback(function(){var K=JSON.parse(k),X=R.current,w=A.current&&A.current.readyState===A.current.HAVE_ENOUGH_DATA;if(!v.current&&w){v.current=!0;var h=A.current.videoWidth,Y=A.current.videoHeight,z=h>Y?h:Y,T=Math.floor(i/z*100)/100;Y=Math.floor(T*Y),h=Math.floor(T*h),m.current.width=h,m.current.height=Y,p.current=m.current.getContext("2d"),p.current.drawImage(A.current,0,0,h,Y);var U;K&&K.length===2&&K[0]>0&&K[1]>0?U=p.current.getImageData(Math.floor((h-K[0])/2),Math.floor((Y-K[1])/2),K[0],K[1]):U=p.current.getImageData(0,0,h,Y),X.postMessage(U)}B.current=requestAnimationFrame(J)},[i,k]),N=JSON.stringify(g);return f.useEffect(function(){var K=JSON.parse(N),X=!0;return navigator.mediaDevices.getUserMedia(K).then(function(w){if(!X)ef(w);else{d.current=w;try{A.current&&(A.current.srcObject=w,A.current.setAttribute("playsinline",!0))}catch{V(window.URL.createObjectURL(w))}l&&l(),B.current=requestAnimationFrame(J)}}).catch(function(w){return X?n(w):null}),function(){cancelAnimationFrame(B.current),X=!1,ef(d.current),S&&window.URL.revokeObjectURL(S)}},[J,N,n,l,S]),f.createElement("video",mi({autoPlay:!0,playsInline:!0,src:S,ref:A},a))};Hh.propTypes={constraints:AI.object,onError:AI.func.isRequired,onLoad:AI.func,onScan:AI.func.isRequired,resolution:AI.number,qrArea:AI.array};Hh.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]};const HT="http://localhost:8080",wT=()=>{const[e,t]=f.useState("No result"),[g,n]=f.useState(null),[l,r]=f.useState(!1),i=f.useRef(!1),C=async A=>{if(!A||i.current)return;const m=A?.text;if(m)try{const p=await Re.post(`${HT}/api/user/scan`,{qr_code:m});p?.data&&(i.current=!0,r(!1),n(p?.data.user),console.log("User found:",p.data));return}catch{console.error("Couldn't find user");return}},a=()=>{n(null),i.current=!1,r(A=>!A),console.log("Scanner toggled",i)},d=()=>{n(null)};return Z.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Z.jsx(Gg,{component:"section",sx:{border:1,borderRadius:2},style:{...FT,backgroundColor:l?"transparent":"grey"},children:l?Z.jsx(Hh,{delay:300,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"8px"},onError:A=>console.error("QR Scan error",A),onScan:A=>{A&&!i.current&&C(A)},constraints:{facingMode:"environment"}}):Z.jsx(Fg,{variant:"body1",sx:{color:"white",textAlign:"center",px:2},children:"Tap below to activate your camera and scan a user’s QR code."})}),Z.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",gap:"1em"},children:[Z.jsx(tt,{variant:"contained",sx:{mt:2,backgroundColor:l?"orange":"#ff2400"},onClick:a,children:l?"Stop Scanner":"Activate Scanner"}),Z.jsx(lT,{user:g,handleUserRefresh:d})]}),g&&Z.jsx("div",{style:{marginTop:16},children:Z.jsxs(Fg,{variant:"h6",children:["User Found: ",g?.first_name," ",g?.last_name]})})]})},FT={display:"flex",flexDirection:"column",gap:"5px",background:"#fff",borderRadius:"8px",borderWidth:"3px",borderColor:"#ff2400",color:"white",width:"90vw",maxWidth:"400px",aspectRatio:"1"},tf="http://localhost:8080",NT=()=>{const[e,t]=f.useState(""),[g,n]=f.useState(""),[l,r]=f.useState(""),[i,C]=f.useState(""),[a,d]=f.useState(null),[A,m]=f.useState(""),p=G=>{const y=G.target.files[0];y&&(C(y),d(URL.createObjectURL(y)))},B=async()=>{if(!e||!g||!l||!i){m("All fields including image are required.");return}m("");let G="";console.log("this is the preview: "+a);try{const y=new FormData;if(y.append("image",i),G=(await Re.post(`${tf}/api/upload`,y,{headers:{"Content-Type":"multipart/form-data"}}))?.data?.imageUrl,!G)throw new Error("No image URL returned from server");console.log("Uploaded Image URL:",G)}catch(y){console.error("Upload failed",y);return}try{const y={title:e,description:g,points:l,img:G};if(!(await Re.post(`${tf}/api/activities/create`,y)).ok)throw new Error("Failed to submit activity");alert("Activity submitted!")}catch{console.log("Error occured while creating activities")}t(""),n(""),C(""),r("")};return Z.jsx(Z.Fragment,{children:Z.jsx("div",{style:KT,children:Z.jsxs(Gg,{component:"section",sx:{p:2,border:1,borderRadius:2},style:xT,children:[Z.jsx(Xt,{id:"outlined-basic",label:"Title",variant:"outlined",onChange:G=>t(G.target.value),value:e}),Z.jsx("br",{}),Z.jsx(Xt,{id:"outlined-basic",label:"Description",variant:"outlined",onChange:G=>n(G.target.value),value:g}),Z.jsx("br",{}),Z.jsx(Xt,{id:"outlined-basic",label:"points",variant:"outlined",onChange:G=>r(G.target.value),value:l}),Z.jsx("br",{}),Z.jsx("input",{type:"file",accept:"image/*",onChange:p}),Z.jsx("br",{}),a&&Z.jsx("img",{src:a,alt:"Preview",style:{width:"100%",marginTop:"10px"}}),Z.jsx(tt,{variant:"contained",sx:{color:"white",backgroundColor:"#ff2400"},onClick:()=>B(),children:"Submit"}),Z.jsx("br",{}),A&&Z.jsx("p",{style:{color:"red",marginTop:"10px"},children:A})]})})})},KT={position:"relative",margin:"0 auto",display:"flex",justifyContent:"center",alignItems:"center"},xT={display:"flex",flexDirection:"column",gap:"5px",padding:"32px",background:"#fff",borderRadius:"8px",borderWidth:"3px",borderColor:"#ff2400",width:"300px"},gf="http://localhost:8080",ET=()=>{const[e,t]=f.useState(""),[g,n]=f.useState(""),[l,r]=f.useState(""),[i,C]=f.useState(""),[a,d]=f.useState(""),[A,m]=f.useState(""),[p,B]=f.useState(null),[G,y]=f.useState(""),S=v=>{const R=v.target.files[0];R&&(m(R),B(URL.createObjectURL(R)))},V=async()=>{if(!g||!l||!i||!a||!A){y("All fields including image are required.");return}y("");let v="";try{const k=e,J=encodeURIComponent(k);console.log(k);const N=await Re.get(`${gf}/api/vendor/find/${J}`);console.log("Vendor data:",N.data),v=N.data.id}catch{console.error("Unable to get vendor");return}let R="";console.log("this is the preview: "+p);try{const k=new FormData;if(k.append("image",A),R=(await Re.post(`${gf}/api/upload`,k,{headers:{"Content-Type":"multipart/form-data"}}))?.data?.imageUrl,!R)throw new Error("No image URL returned from server");console.log("Uploaded Image URL:",R)}catch(k){console.error("Upload failed",k);return}try{const k={vendor_id:v,title:g,cost:l,quantity:i,UsdPrice:a,img:R};console.log(k);const J=await Re.post("/api/rewards/create",k);if(J.status!==200&&J.status!==201)throw new Error("Failed to submit reward");alert("Reward submitted!")}catch{console.error("Error occured while creating rewards")}t(""),n(""),m(""),r(""),C(""),d("")};return Z.jsx(Z.Fragment,{children:Z.jsx("div",{style:zT,children:Z.jsxs(Gg,{component:"section",sx:{p:2,border:1,borderRadius:2},style:MT,children:[Z.jsx(Xt,{id:"outlined-basic",label:"Business Name",variant:"outlined",onChange:v=>t(v.target.value),value:e}),Z.jsx("br",{}),Z.jsx(Xt,{id:"outlined-basic",label:"Title",variant:"outlined",onChange:v=>n(v.target.value),value:g}),Z.jsx("br",{}),Z.jsx(Xt,{id:"outlined-basic",label:"cost",variant:"outlined",onChange:v=>r(v.target.value),value:l}),Z.jsx("br",{}),Z.jsx(Xt,{id:"outlined-basic",label:"quantity",variant:"outlined",onChange:v=>C(v.target.value),value:i}),Z.jsx("br",{}),Z.jsx(Xt,{id:"outlined-basic",label:"UsdPrice",variant:"outlined",onChange:v=>d(v.target.value),value:a}),Z.jsx("br",{}),Z.jsx("input",{type:"file",accept:"image/*",onChange:S}),Z.jsx("br",{}),p&&Z.jsx("img",{src:p,alt:"Preview",style:{width:"100%",marginTop:"10px"}}),Z.jsx(tt,{variant:"contained",sx:{color:"white",backgroundColor:"#ff2400"},onClick:()=>V(),children:"Submit"}),Z.jsx("br",{}),G&&Z.jsx("p",{style:{color:"red",marginTop:"10px"},children:G})]})})})},zT={position:"relative",margin:"0 auto",display:"flex",justifyContent:"center",alignItems:"center"},MT={display:"flex",flexDirection:"column",gap:"5px",padding:"32px",background:"#fff",borderRadius:"8px",borderWidth:"3px",borderColor:"#ff2400",width:"300px"},TT=()=>{const{isMember:e}=f.useContext(Li),[t,g]=f.useState(!0),n=l=>{g(l!=="reward")};return Z.jsx(Z.Fragment,{children:e?Z.jsxs("div",{style:UT,children:[Z.jsx(Qi,{}),Z.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Z.jsx("h1",{children:"Scan"}),Z.jsx("div",{children:Z.jsx(wT,{})})]}),Z.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Z.jsx("h1",{children:"Create"}),Z.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:"1em"},children:[Z.jsx(tt,{onClick:()=>n("activity"),variant:"contained",sx:{backgroundColor:"#ff2400",color:"white",marginTop:".3em",fontWeight:600},children:"Activity"}),Z.jsx("p1",{children:"or"}),Z.jsx(tt,{onClick:()=>n("reward"),variant:"contained",sx:{backgroundColor:"#ff2400",color:"white",marginTop:".2em",fontWeight:600},children:"Reward"})]})]}),t?Z.jsx(NT,{}):Z.jsx(ET,{})]}):Z.jsx("div",{children:Z.jsx(UM,{})})})},UT={position:"relative",width:"100%",minHeight:"100vh",overflowX:"hidden",margin:"0 auto",display:"flex",color:"black",flexDirection:"column",alignItems:"center",gap:"2em"},nf="http://localhost:8080",cW=({order_number:e,discount:t,first_name:g,last_name:n,reward_id:l,vendor_id:r,code:i})=>{const[C,a]=f.useState(null),[d,A]=f.useState(null),[m,p]=f.useState(null),[B,G]=f.useState(null);return f.useEffect(()=>{(async()=>{try{const S=await Re.get(`${nf}/api/vendor/id/${r}`);a(S?.data)}catch(S){console.log("No vendor found",S)}})()},[]),f.useEffect(()=>{(async()=>{try{const S=await Re.get(`${nf}/api/rewards/id/${l}`);A(S?.data);const V=S?.data.cost,R=V*(1-t/100)/100,k=V-R*100;G("$"+R),p(k)}catch(S){console.log("No reward found",S.message)}})()},[]),Z.jsxs("div",{style:{...LT,display:"flex",flexDirection:"row"},children:[Z.jsxs("div",{id:"left-side",style:{...cl,width:"50%"},children:[Z.jsxs("h1",{style:{margin:0},children:["#",String(e).padStart(3,"0")]}),Z.jsxs("h2",{style:{marginTop:0,fontSize:30},children:[t,"% Discount"]}),Z.jsxs("div",{style:{...cl,...Mr,padding:0},children:[Z.jsx("h4",{style:gn,children:"Embers spent: "}),Z.jsxs("p",{style:gn,children:[m," Embers"]})]}),Z.jsxs("div",{style:{...cl,...Mr,padding:0},children:[Z.jsx("h4",{style:gn,children:"Remaining USD:"}),Z.jsx("p",{style:gn,children:B})]})]}),Z.jsxs("div",{id:"right-side",style:{...cl,width:"50%",gap:"0.5em"},children:[Z.jsxs("div",{style:{...cl,...Mr},children:[Z.jsx("h4",{style:gn,children:"Owner of Discount:"}),Z.jsxs("p",{style:gn,children:[g," ",n]})]}),Z.jsxs("div",{style:{...cl,...Mr},children:[Z.jsx("h4",{style:gn,children:"Item:"}),Z.jsx("p",{style:gn,children:d?.title})]}),Z.jsxs("div",{style:{...cl,...Mr},children:[Z.jsx("h4",{style:gn,children:"Vendor:"}),Z.jsx("p",{style:gn,children:C?.business_name})]}),Z.jsxs("div",{children:[Z.jsx("h2",{style:gn,children:"Code:"}),Z.jsx("h3",{style:{...gn,textAlign:"center",backgroundColor:"lightgrey"},children:i})]})]})]})},LT={width:"90%",border:"3px, solid, red",padding:"1em"},cl={display:"flex",flexDirection:"column"},Mr={justifyContent:"flex-start",alignItems:"flex-start"},gn={margin:0,padding:0,textAlign:"left",fontSize:17};class qr extends Error{}qr.prototype.name="InvalidTokenError";function QT(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,g)=>{let n=g.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function DT(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return QT(t)}catch{return atob(t)}}function ca(e,t){if(typeof e!="string")throw new qr("Invalid token specified: must be a string");t||(t={});const g=t.header===!0?0:1,n=e.split(".")[g];if(typeof n!="string")throw new qr(`Invalid token specified: missing part #${g+1}`);let l;try{l=DT(n)}catch(r){throw new qr(`Invalid token specified: invalid base64 for part #${g+1} (${r.message})`)}try{return JSON.parse(l)}catch(r){throw new qr(`Invalid token specified: invalid json for part #${g+1} (${r.message})`)}}const jn=Object.create(null);jn.open="0";jn.close="1";jn.ping="2";jn.pong="3";jn.message="4";jn.upgrade="5";jn.noop="6";const UC=Object.create(null);Object.keys(jn).forEach(e=>{UC[jn[e]]=e});const Uu={type:"error",data:"parser error"},dW=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",AW=typeof ArrayBuffer=="function",uW=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,wh=({type:e,data:t},g,n)=>dW&&t instanceof Blob?g?n(t):of(t,n):AW&&(t instanceof ArrayBuffer||uW(t))?g?n(t):of(new Blob([t]),n):n(jn[e]+(t||"")),of=(e,t)=>{const g=new FileReader;return g.onload=function(){const n=g.result.split(",")[1];t("b"+(n||""))},g.readAsDataURL(e)};function lf(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let EA;function jT(e,t){if(dW&&e.data instanceof Blob)return e.data.arrayBuffer().then(lf).then(t);if(AW&&(e.data instanceof ArrayBuffer||uW(e.data)))return t(lf(e.data));wh(e,!1,g=>{EA||(EA=new TextEncoder),t(EA.encode(g))})}const If="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$r=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<If.length;e++)$r[If.charCodeAt(e)]=e;const PT=e=>{let t=e.length*.75,g=e.length,n,l=0,r,i,C,a;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const d=new ArrayBuffer(t),A=new Uint8Array(d);for(n=0;n<g;n+=4)r=$r[e.charCodeAt(n)],i=$r[e.charCodeAt(n+1)],C=$r[e.charCodeAt(n+2)],a=$r[e.charCodeAt(n+3)],A[l++]=r<<2|i>>4,A[l++]=(i&15)<<4|C>>2,A[l++]=(C&3)<<6|a&63;return d},OT=typeof ArrayBuffer=="function",Fh=(e,t)=>{if(typeof e!="string")return{type:"message",data:mW(e,t)};const g=e.charAt(0);return g==="b"?{type:"message",data:qT(e.substring(1),t)}:UC[g]?e.length>1?{type:UC[g],data:e.substring(1)}:{type:UC[g]}:Uu},qT=(e,t)=>{if(OT){const g=PT(e);return mW(g,t)}else return{base64:!0,data:e}},mW=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},hW="",$T=(e,t)=>{const g=e.length,n=new Array(g);let l=0;e.forEach((r,i)=>{wh(r,!1,C=>{n[i]=C,++l===g&&t(n.join(hW))})})},_T=(e,t)=>{const g=e.split(hW),n=[];for(let l=0;l<g.length;l++){const r=Fh(g[l],t);if(n.push(r),r.type==="error")break}return n};function eU(){return new TransformStream({transform(e,t){jT(e,g=>{const n=g.length;let l;if(n<126)l=new Uint8Array(1),new DataView(l.buffer).setUint8(0,n);else if(n<65536){l=new Uint8Array(3);const r=new DataView(l.buffer);r.setUint8(0,126),r.setUint16(1,n)}else{l=new Uint8Array(9);const r=new DataView(l.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(l[0]|=128),t.enqueue(l),t.enqueue(g)})}})}let zA;function ZC(e){return e.reduce((t,g)=>t+g.length,0)}function yC(e,t){if(e[0].length===t)return e.shift();const g=new Uint8Array(t);let n=0;for(let l=0;l<t;l++)g[l]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),g}function tU(e,t){zA||(zA=new TextDecoder);const g=[];let n=0,l=-1,r=!1;return new TransformStream({transform(i,C){for(g.push(i);;){if(n===0){if(ZC(g)<1)break;const a=yC(g,1);r=(a[0]&128)===128,l=a[0]&127,l<126?n=3:l===126?n=1:n=2}else if(n===1){if(ZC(g)<2)break;const a=yC(g,2);l=new DataView(a.buffer,a.byteOffset,a.length).getUint16(0),n=3}else if(n===2){if(ZC(g)<8)break;const a=yC(g,8),d=new DataView(a.buffer,a.byteOffset,a.length),A=d.getUint32(0);if(A>Math.pow(2,21)-1){C.enqueue(Uu);break}l=A*Math.pow(2,32)+d.getUint32(4),n=3}else{if(ZC(g)<l)break;const a=yC(g,l);C.enqueue(Fh(r?a:zA.decode(a),t)),n=0}if(l===0||l>e){C.enqueue(Uu);break}}}})}const pW=4;function jt(e){if(e)return gU(e)}function gU(e){for(var t in jt.prototype)e[t]=jt.prototype[t];return e}jt.prototype.on=jt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};jt.prototype.once=function(e,t){function g(){this.off(e,g),t.apply(this,arguments)}return g.fn=t,this.on(e,g),this};jt.prototype.off=jt.prototype.removeListener=jt.prototype.removeAllListeners=jt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var g=this._callbacks["$"+e];if(!g)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,l=0;l<g.length;l++)if(n=g[l],n===t||n.fn===t){g.splice(l,1);break}return g.length===0&&delete this._callbacks["$"+e],this};jt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),g=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(g){g=g.slice(0);for(var n=0,l=g.length;n<l;++n)g[n].apply(this,t)}return this};jt.prototype.emitReserved=jt.prototype.emit;jt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};jt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Ac=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,g)=>g(t,0),rn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),nU="arraybuffer";function bW(e,...t){return t.reduce((g,n)=>(e.hasOwnProperty(n)&&(g[n]=e[n]),g),{})}const oU=rn.setTimeout,lU=rn.clearTimeout;function uc(e,t){t.useNativeTimers?(e.setTimeoutFn=oU.bind(rn),e.clearTimeoutFn=lU.bind(rn)):(e.setTimeoutFn=rn.setTimeout.bind(rn),e.clearTimeoutFn=rn.clearTimeout.bind(rn))}const IU=1.33;function rU(e){return typeof e=="string"?iU(e):Math.ceil((e.byteLength||e.size)*IU)}function iU(e){let t=0,g=0;for(let n=0,l=e.length;n<l;n++)t=e.charCodeAt(n),t<128?g+=1:t<2048?g+=2:t<55296||t>=57344?g+=3:(n++,g+=4);return g}function ZW(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function sU(e){let t="";for(let g in e)e.hasOwnProperty(g)&&(t.length&&(t+="&"),t+=encodeURIComponent(g)+"="+encodeURIComponent(e[g]));return t}function CU(e){let t={},g=e.split("&");for(let n=0,l=g.length;n<l;n++){let r=g[n].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}class aU extends Error{constructor(t,g,n){super(t),this.description=g,this.context=n,this.type="TransportError"}}class Nh extends jt{constructor(t){super(),this.writable=!1,uc(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,g,n){return super.emitReserved("error",new aU(t,g,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const g=Fh(t,this.socket.binaryType);this.onPacket(g)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,g={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(g)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const g=sU(t);return g.length?"?"+g:""}}class cU extends Nh{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const g=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||g()})),this.writable||(n++,this.once("drain",function(){--n||g()}))}else g()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const g=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};_T(t,this.socket.binaryType).forEach(g),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,$T(t,g=>{this.doWrite(g,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",g=this.query||{};return this.opts.timestampRequests!==!1&&(g[this.opts.timestampParam]=ZW()),!this.supportsBinary&&!g.sid&&(g.b64=1),this.createUri(t,g)}}let yW=!1;try{yW=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const dU=yW;function AU(){}class uU extends cU{constructor(t){if(super(t),typeof location<"u"){const g=location.protocol==="https:";let n=location.port;n||(n=g?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,g){const n=this.request({method:"POST",data:t});n.on("success",g),n.on("error",(l,r)=>{this.onError("xhr post error",l,r)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(g,n)=>{this.onError("xhr poll error",g,n)}),this.pollXhr=t}}let VI=class LC extends jt{constructor(t,g,n){super(),this.createRequest=t,uc(this,n),this._opts=n,this._method=n.method||"GET",this._uri=g,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const g=bW(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");g.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(g);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let l in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(l)&&n.setRequestHeader(l,this._opts.extraHeaders[l])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var l;n.readyState===3&&((l=this._opts.cookieJar)===null||l===void 0||l.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(l){this.setTimeoutFn(()=>{this._onError(l)},0);return}typeof document<"u"&&(this._index=LC.requestsCount++,LC.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=AU,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete LC.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};VI.requestsCount=0;VI.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",rf);else if(typeof addEventListener=="function"){const e="onpagehide"in rn?"pagehide":"unload";addEventListener(e,rf,!1)}}function rf(){for(let e in VI.requests)VI.requests.hasOwnProperty(e)&&VI.requests[e].abort()}const mU=function(){const e=GW({xdomain:!1});return e&&e.responseType!==null}();class hU extends uU{constructor(t){super(t);const g=t&&t.forceBase64;this.supportsBinary=mU&&!g}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new VI(GW,this.uri(),t)}}function GW(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||dU))return new XMLHttpRequest}catch{}if(!t)try{return new rn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const fW=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class pU extends Nh{get name(){return"websocket"}doOpen(){const t=this.uri(),g=this.opts.protocols,n=fW?{}:bW(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,g,n)}catch(l){return this.emitReserved("error",l)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let g=0;g<t.length;g++){const n=t[g],l=g===t.length-1;wh(n,this.supportsBinary,r=>{try{this.doWrite(n,r)}catch{}l&&Ac(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",g=this.query||{};return this.opts.timestampRequests&&(g[this.opts.timestampParam]=ZW()),this.supportsBinary||(g.b64=1),this.createUri(t,g)}}const MA=rn.WebSocket||rn.MozWebSocket;class bU extends pU{createSocket(t,g,n){return fW?new MA(t,g,n):g?new MA(t,g):new MA(t)}doWrite(t,g){this.ws.send(g)}}class ZU extends Nh{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const g=tU(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(g).getReader(),l=eU();l.readable.pipeTo(t.writable),this._writer=l.writable.getWriter();const r=()=>{n.read().then(({done:C,value:a})=>{C||(this.onPacket(a),r())}).catch(C=>{})};r();const i={type:"open"};this.query.sid&&(i.data=`{"sid":"${this.query.sid}"}`),this._writer.write(i).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let g=0;g<t.length;g++){const n=t[g],l=g===t.length-1;this._writer.write(n).then(()=>{l&&Ac(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const yU={websocket:bU,webtransport:ZU,polling:hU},GU=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,fU=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Lu(e){if(e.length>8e3)throw"URI too long";const t=e,g=e.indexOf("["),n=e.indexOf("]");g!=-1&&n!=-1&&(e=e.substring(0,g)+e.substring(g,n).replace(/:/g,";")+e.substring(n,e.length));let l=GU.exec(e||""),r={},i=14;for(;i--;)r[fU[i]]=l[i]||"";return g!=-1&&n!=-1&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=BU(r,r.path),r.queryKey=SU(r,r.query),r}function BU(e,t){const g=/\/{2,9}/g,n=t.replace(g,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function SU(e,t){const g={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,l,r){l&&(g[l]=r)}),g}const Qu=typeof addEventListener=="function"&&typeof removeEventListener=="function",QC=[];Qu&&addEventListener("offline",()=>{QC.forEach(e=>e())},!1);class To extends jt{constructor(t,g){if(super(),this.binaryType=nU,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(g=t,t=null),t){const n=Lu(t);g.hostname=n.host,g.secure=n.protocol==="https"||n.protocol==="wss",g.port=n.port,n.query&&(g.query=n.query)}else g.host&&(g.hostname=Lu(g.host).host);uc(this,g),this.secure=g.secure!=null?g.secure:typeof location<"u"&&location.protocol==="https:",g.hostname&&!g.port&&(g.port=this.secure?"443":"80"),this.hostname=g.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=g.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},g.transports.forEach(n=>{const l=n.prototype.name;this.transports.push(l),this._transportsByName[l]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},g),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=CU(this.opts.query)),Qu&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},QC.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const g=Object.assign({},this.opts.query);g.EIO=pW,g.transport=t,this.id&&(g.sid=this.id);const n=Object.assign({},this.opts,{query:g,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&To.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const g=this.createTransport(t);g.open(),this.setTransport(g)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",g=>this._onClose("transport close",g))}onOpen(){this.readyState="open",To.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const g=new Error("server error");g.code=t.data,this._onError(g);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let g=1;for(let n=0;n<this.writeBuffer.length;n++){const l=this.writeBuffer[n].data;if(l&&(g+=rU(l)),n>0&&g>this._maxPayload)return this.writeBuffer.slice(0,n);g+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Ac(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,g,n){return this._sendPacket("message",t,g,n),this}send(t,g,n){return this._sendPacket("message",t,g,n),this}_sendPacket(t,g,n,l){if(typeof g=="function"&&(l=g,g=void 0),typeof n=="function"&&(l=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const r={type:t,data:g,options:n};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),l&&this.once("flush",l),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},g=()=>{this.off("upgrade",g),this.off("upgradeError",g),t()},n=()=>{this.once("upgrade",g),this.once("upgradeError",g)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(To.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,g){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Qu&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=QC.indexOf(this._offlineEventListener);n!==-1&&QC.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,g),this.writeBuffer=[],this._prevBufferLen=0}}}To.protocol=pW;class VU extends To{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let g=this.createTransport(t),n=!1;To.priorWebsocketSuccess=!1;const l=()=>{n||(g.send([{type:"ping",data:"probe"}]),g.once("packet",m=>{if(!n)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",g),!g)return;To.priorWebsocketSuccess=g.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(A(),this.setTransport(g),g.send([{type:"upgrade"}]),this.emitReserved("upgrade",g),g=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=g.name,this.emitReserved("upgradeError",p)}}))};function r(){n||(n=!0,A(),g.close(),g=null)}const i=m=>{const p=new Error("probe error: "+m);p.transport=g.name,r(),this.emitReserved("upgradeError",p)};function C(){i("transport closed")}function a(){i("socket closed")}function d(m){g&&m.name!==g.name&&r()}const A=()=>{g.removeListener("open",l),g.removeListener("error",i),g.removeListener("close",C),this.off("close",a),this.off("upgrading",d)};g.once("open",l),g.once("error",i),g.once("close",C),this.once("close",a),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||g.open()},200):g.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const g=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&g.push(t[n]);return g}}let WU=class extends VU{constructor(t,g={}){const n=typeof t=="object"?t:g;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(l=>yU[l]).filter(l=>!!l)),super(t,n)}};function RU(e,t="",g){let n=e;g=g||typeof location<"u"&&location,e==null&&(e=g.protocol+"//"+g.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=g.protocol+e:e=g.host+e),/^(https?|wss?):\/\//.test(e)||(typeof g<"u"?e=g.protocol+"//"+e:e="https://"+e),n=Lu(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const r=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+r+":"+n.port+t,n.href=n.protocol+"://"+r+(g&&g.port===n.port?"":":"+n.port),n}const XU=typeof ArrayBuffer=="function",kU=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,BW=Object.prototype.toString,JU=typeof Blob=="function"||typeof Blob<"u"&&BW.call(Blob)==="[object BlobConstructor]",vU=typeof File=="function"||typeof File<"u"&&BW.call(File)==="[object FileConstructor]";function Kh(e){return XU&&(e instanceof ArrayBuffer||kU(e))||JU&&e instanceof Blob||vU&&e instanceof File}function DC(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let g=0,n=e.length;g<n;g++)if(DC(e[g]))return!0;return!1}if(Kh(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return DC(e.toJSON(),!0);for(const g in e)if(Object.prototype.hasOwnProperty.call(e,g)&&DC(e[g]))return!0;return!1}function YU(e){const t=[],g=e.data,n=e;return n.data=Du(g,t),n.attachments=t.length,{packet:n,buffers:t}}function Du(e,t){if(!e)return e;if(Kh(e)){const g={_placeholder:!0,num:t.length};return t.push(e),g}else if(Array.isArray(e)){const g=new Array(e.length);for(let n=0;n<e.length;n++)g[n]=Du(e[n],t);return g}else if(typeof e=="object"&&!(e instanceof Date)){const g={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(g[n]=Du(e[n],t));return g}return e}function HU(e,t){return e.data=ju(e.data,t),delete e.attachments,e}function ju(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let g=0;g<e.length;g++)e[g]=ju(e[g],t);else if(typeof e=="object")for(const g in e)Object.prototype.hasOwnProperty.call(e,g)&&(e[g]=ju(e[g],t));return e}const wU=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],FU=5;var Le;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Le||(Le={}));class NU{constructor(t){this.replacer=t}encode(t){return(t.type===Le.EVENT||t.type===Le.ACK)&&DC(t)?this.encodeAsBinary({type:t.type===Le.EVENT?Le.BINARY_EVENT:Le.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let g=""+t.type;return(t.type===Le.BINARY_EVENT||t.type===Le.BINARY_ACK)&&(g+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(g+=t.nsp+","),t.id!=null&&(g+=t.id),t.data!=null&&(g+=JSON.stringify(t.data,this.replacer)),g}encodeAsBinary(t){const g=YU(t),n=this.encodeAsString(g.packet),l=g.buffers;return l.unshift(n),l}}function sf(e){return Object.prototype.toString.call(e)==="[object Object]"}class xh extends jt{constructor(t){super(),this.reviver=t}add(t){let g;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");g=this.decodeString(t);const n=g.type===Le.BINARY_EVENT;n||g.type===Le.BINARY_ACK?(g.type=n?Le.EVENT:Le.ACK,this.reconstructor=new KU(g),g.attachments===0&&super.emitReserved("decoded",g)):super.emitReserved("decoded",g)}else if(Kh(t)||t.base64)if(this.reconstructor)g=this.reconstructor.takeBinaryData(t),g&&(this.reconstructor=null,super.emitReserved("decoded",g));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let g=0;const n={type:Number(t.charAt(0))};if(Le[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Le.BINARY_EVENT||n.type===Le.BINARY_ACK){const r=g+1;for(;t.charAt(++g)!=="-"&&g!=t.length;);const i=t.substring(r,g);if(i!=Number(i)||t.charAt(g)!=="-")throw new Error("Illegal attachments");n.attachments=Number(i)}if(t.charAt(g+1)==="/"){const r=g+1;for(;++g&&!(t.charAt(g)===","||g===t.length););n.nsp=t.substring(r,g)}else n.nsp="/";const l=t.charAt(g+1);if(l!==""&&Number(l)==l){const r=g+1;for(;++g;){const i=t.charAt(g);if(i==null||Number(i)!=i){--g;break}if(g===t.length)break}n.id=Number(t.substring(r,g+1))}if(t.charAt(++g)){const r=this.tryParse(t.substr(g));if(xh.isPayloadValid(n.type,r))n.data=r;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,g){switch(t){case Le.CONNECT:return sf(g);case Le.DISCONNECT:return g===void 0;case Le.CONNECT_ERROR:return typeof g=="string"||sf(g);case Le.EVENT:case Le.BINARY_EVENT:return Array.isArray(g)&&(typeof g[0]=="number"||typeof g[0]=="string"&&wU.indexOf(g[0])===-1);case Le.ACK:case Le.BINARY_ACK:return Array.isArray(g)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class KU{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const g=HU(this.reconPack,this.buffers);return this.finishedReconstruction(),g}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const xU=Object.freeze(Object.defineProperty({__proto__:null,Decoder:xh,Encoder:NU,get PacketType(){return Le},protocol:FU},Symbol.toStringTag,{value:"Module"}));function Bn(e,t,g){return e.on(t,g),function(){e.off(t,g)}}const EU=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class SW extends jt{constructor(t,g,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=g,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Bn(t,"open",this.onopen.bind(this)),Bn(t,"packet",this.onpacket.bind(this)),Bn(t,"error",this.onerror.bind(this)),Bn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...g){var n,l,r;if(EU.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(g.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(g),this;const i={type:Le.EVENT,data:g};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof g[g.length-1]=="function"){const A=this.ids++,m=g.pop();this._registerAckCallback(A,m),i.id=A}const C=(l=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||l===void 0?void 0:l.writable,a=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!C||(a?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(t,g){var n;const l=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(l===void 0){this.acks[t]=g;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let C=0;C<this.sendBuffer.length;C++)this.sendBuffer[C].id===t&&this.sendBuffer.splice(C,1);g.call(this,new Error("operation has timed out"))},l),i=(...C)=>{this.io.clearTimeoutFn(r),g.apply(this,C)};i.withError=!0,this.acks[t]=i}emitWithAck(t,...g){return new Promise((n,l)=>{const r=(i,C)=>i?l(i):n(C);r.withError=!0,g.push(r),this.emit(t,...g)})}_addToQueue(t){let g;typeof t[t.length-1]=="function"&&(g=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((l,...r)=>n!==this._queue[0]?void 0:(l!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),g&&g(l)):(this._queue.shift(),g&&g(null,...r)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const g=this._queue[0];g.pending&&!t||(g.pending=!0,g.tryCount++,this.flags=g.flags,this.emit.apply(this,g.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Le.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,g){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,g),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Le.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Le.EVENT:case Le.BINARY_EVENT:this.onevent(t);break;case Le.ACK:case Le.BINARY_ACK:this.onack(t);break;case Le.DISCONNECT:this.ondisconnect();break;case Le.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const g=t.data||[];t.id!=null&&g.push(this.ack(t.id)),this.connected?this.emitEvent(g):this.receiveBuffer.push(Object.freeze(g))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const g=this._anyListeners.slice();for(const n of g)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const g=this;let n=!1;return function(...l){n||(n=!0,g.packet({type:Le.ACK,id:t,data:l}))}}onack(t){const g=this.acks[t.id];typeof g=="function"&&(delete this.acks[t.id],g.withError&&t.data.unshift(null),g.apply(this,t.data))}onconnect(t,g){this.id=t,this.recovered=g&&this._pid===g,this._pid=g,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Le.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const g=this._anyListeners;for(let n=0;n<g.length;n++)if(t===g[n])return g.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const g=this._anyOutgoingListeners;for(let n=0;n<g.length;n++)if(t===g[n])return g.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const g=this._anyOutgoingListeners.slice();for(const n of g)n.apply(this,t.data)}}}function QI(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}QI.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),g=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-g:e+g}return Math.min(e,this.max)|0};QI.prototype.reset=function(){this.attempts=0};QI.prototype.setMin=function(e){this.ms=e};QI.prototype.setMax=function(e){this.max=e};QI.prototype.setJitter=function(e){this.jitter=e};class Pu extends jt{constructor(t,g){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(g=t,t=void 0),g=g||{},g.path=g.path||"/socket.io",this.opts=g,uc(this,g),this.reconnection(g.reconnection!==!1),this.reconnectionAttempts(g.reconnectionAttempts||1/0),this.reconnectionDelay(g.reconnectionDelay||1e3),this.reconnectionDelayMax(g.reconnectionDelayMax||5e3),this.randomizationFactor((n=g.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new QI({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(g.timeout==null?2e4:g.timeout),this._readyState="closed",this.uri=t;const l=g.parser||xU;this.encoder=new l.Encoder,this.decoder=new l.Decoder,this._autoConnect=g.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var g;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(g=this.backoff)===null||g===void 0||g.setMin(t),this)}randomizationFactor(t){var g;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(g=this.backoff)===null||g===void 0||g.setJitter(t),this)}reconnectionDelayMax(t){var g;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(g=this.backoff)===null||g===void 0||g.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new WU(this.uri,this.opts);const g=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const l=Bn(g,"open",function(){n.onopen(),t&&t()}),r=C=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",C),t?t(C):this.maybeReconnectOnOpen()},i=Bn(g,"error",r);if(this._timeout!==!1){const C=this._timeout,a=this.setTimeoutFn(()=>{l(),r(new Error("timeout")),g.close()},C);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}return this.subs.push(l),this.subs.push(i),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Bn(t,"ping",this.onping.bind(this)),Bn(t,"data",this.ondata.bind(this)),Bn(t,"error",this.onerror.bind(this)),Bn(t,"close",this.onclose.bind(this)),Bn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(g){this.onclose("parse error",g)}}ondecoded(t){Ac(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,g){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new SW(this,t,g),this.nsps[t]=n),n}_destroy(t){const g=Object.keys(this.nsps);for(const n of g)if(this.nsps[n].active)return;this._close()}_packet(t){const g=this.encoder.encode(t);for(let n=0;n<g.length;n++)this.engine.write(g[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,g){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,g),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const g=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(l=>{l?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",l)):t.onreconnect()}))},g);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Tr={};function jC(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const g=RU(e,t.path||"/socket.io"),n=g.source,l=g.id,r=g.path,i=Tr[l]&&r in Tr[l].nsps,C=t.forceNew||t["force new connection"]||t.multiplex===!1||i;let a;return C?a=new Pu(n,t):(Tr[l]||(Tr[l]=new Pu(n,t)),a=Tr[l]),g.query&&!t.query&&(t.query=g.queryKey),a.socket(g.path,t)}Object.assign(jC,{Manager:Pu,Socket:SW,io:jC,connect:jC});const bg=jC("http://localhost:8080",{auth:{token:localStorage.getItem("token")},transports:["websocket"]}),zU=()=>{const[e,t]=f.useState(!1),[g,n]=f.useState(null),[l,r]=f.useState([]),[i,C]=f.useState(null),a=localStorage.getItem("token");f.useEffect(()=>{(async()=>{try{const m=await Re.get("/api/user/me",{headers:{Authorization:`Bearer ${a}`}});n(m.data);const p=await Re.get("/api/rewards/coupon",{headers:{Authorization:`Bearer ${a}`}});r(p.data)}catch(m){console.log("Error fetching profile data:",m)}})()},[]),f.useEffect(()=>{if(!a)return;let A;try{A=ca(a)}catch(B){console.error("Invalid token",B);return}const m=A?.id;if(!m){console.warn("User ID missing in token");return}const p=()=>{console.log("connected"),bg.emit("register_user",{userId:m})};bg.on("connect",p),bg.on("registered_user",({userId:B})=>{console.log(`User ${B} has joined`)}),bg.on("join_receipt_room",({room:B})=>{const G={room:B,role:"user"};console.log(G.room,G.role),bg.emit("request_join_receipt_room",G)}),bg.on("show_receipt",B=>{C(B),console.log(B)}),i&&console.log(i)},[]),f.useEffect(()=>{i&&(console.log("Receipt received:",i),t(!0))},[i]);const d=()=>{t(!1),C(null)};return Z.jsx(Z.Fragment,{children:Z.jsxs("div",{style:{...Cf,color:"black"},children:[Z.jsx(Qi,{}),Z.jsx("h1",{style:{color:"black",fontSize:"35px"},children:" Profile "}),Z.jsx("div",{style:MU,children:Z.jsx("img",{style:{width:"100%"},src:g?.qr_url,alt:""})}),Z.jsx(Jl,{open:!!i,onClose:()=>d,children:Z.jsxs(Gg,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,width:300},children:[Z.jsx("h2",{style:{marginTop:0},children:"Receipt"}),Z.jsxs("p",{children:[Z.jsx("strong",{children:"Order:"})," ",i?.order_number]}),Z.jsxs("p",{children:[Z.jsx("strong",{children:"Customer:"})," ",i?.user_name]}),Z.jsxs("p",{children:[Z.jsx("strong",{children:"Vendor Business:"})," ",i?.business_name]}),Z.jsxs("p",{children:[Z.jsx("strong",{children:"Vendor Name:"})," ",i?.vendor_name]}),Z.jsxs("p",{children:[Z.jsx("strong",{children:"Title:"})," ",i?.reward_title]}),Z.jsxs("p",{children:[Z.jsx("strong",{children:"Embers Spent:"})," ",i?.spent]}),Z.jsxs("p",{children:[Z.jsx("strong",{children:"Remaining Price"})," ",i?.remaining_USD]}),Z.jsx("button",{onClick:()=>C(null),children:"Close"})]})}),l?.length>0?Z.jsx(Z.Fragment,{children:Z.jsxs("div",{style:Cf,children:[Z.jsx("h2",{style:{textAlign:"center"},children:"Purchased Rewards"}),Z.jsx("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",padding:"10px",gap:"10px"},children:l.filter(A=>A?.status==="pending").map((A,m)=>Z.jsx(cW,{order_number:A?.order_number,discount:A?.discount,first_name:g?.first_name,last_name:g?.last_name,reward_id:A?.reward_id,vendor_id:A?.vendor_id,code:A?.code},A?.id))})]})}):Z.jsx("div",{style:{color:"black"},children:Z.jsx("center",{children:Z.jsx("h3",{children:"No Coupons Have Been Purchased Yet"})})})]})})},Cf={width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},MU={width:250,height:250,border:"2px, solid, red",borderRadius:"5px"},TU=({handleChange:e})=>{const[t,g]=f.useState(""),n=l=>{const r=l.target.value;g(r),e(r)};return Z.jsx(Gg,{sx:{minWidth:100},children:Z.jsxs(oW,{fullWidth:!0,children:[Z.jsx(nW,{id:"demo-simple-select-label",children:"Size"}),Z.jsxs(Wh,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:t,label:"size",onChange:l=>n(l),children:[Z.jsx(kg,{value:"xs",children:"XS"}),Z.jsx(kg,{value:"s",children:"S"}),Z.jsx(kg,{value:"m",children:"M"}),Z.jsx(kg,{value:"l",children:"L"}),Z.jsx(kg,{value:"xl",children:"XL"}),Z.jsx(kg,{value:"xxl",children:"XXL"})]})]})})};function UU(e,t=1e3){const[g,n]=f.useState(e);return f.useEffect(()=>{const l=g,r=e-l,i=Math.round(t/16);let C=0;const a=()=>{C++;const d=C/i,A=Math.round(l+r*d);n(A),C<i&&requestAnimationFrame(a)};a()},[e]),g}const TA="http://localhost:8080",LU={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:370,bgcolor:"background.paper",color:"black",borderRadius:"5px",boxShadow:24,p:4,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"1em"},QU=({id:e,img:t,rewardTitle:g,quantity:n,cost:l,usdPrice:r,vendor_id:i})=>{const C=Zo(),[a,d]=f.useState(null),[A,m]=f.useState(null),[p,B]=f.useState(null),[G,y]=f.useState(`$${r}`),[S,V]=f.useState(null),[v,R]=f.useState(null),[k,J]=f.useState(null),[N,K]=f.useState(null),[X,w]=f.useState(!1),[h,Y]=f.useState(!1),z=()=>{w(!1),Y(!0)},T=()=>{Y(!1),V(null),B(null),y(`$${r}`)},U=localStorage.getItem("token"),P=p?A-p:A,O=UU(P);f.useEffect(()=>{(async()=>{try{const ne=await Re.get(`${TA}/api/user/me`,{headers:{Authorization:`Bearer ${U}`}});ne?.data&&d(ne?.data),console.log(ne?.data)}catch(ne){console.log("couldn't fetch user",ne)}})()},[]),f.useEffect(()=>{(async()=>{try{const re=(await Re.get(`${TA}/api/points/`,{headers:{Authorization:`Bearer ${U}`}}))?.data;m(re)}catch{console.log("couldn't fetch points")}})()},[]);const[_,j]=f.useState(""),Q=async()=>{let M=e,ne=S,re=p;console.log(v);try{let oe=await Re.put(`${TA}/api/rewards/purchase`,{reward_id:M,size:ne,cost:re,discount:v},{headers:{Authorization:`Bearer ${U}`}});w(!0),J(oe?.data.code),K(oe?.data.order_number),console.log(oe?.data)}catch(oe){console.log("error ocurred",oe)}},$=M=>{V(M)},F=M=>{const ne=Number(M),re=l*(1-ne/100)/100,oe=l-re*100;R(ne),y("$"+re),B(oe)};return Z.jsxs("div",{children:[Z.jsx(tt,{onClick:z,variant:"contained",sx:{backgroundColor:"#ff2400",color:"white",marginTop:"10px",fontWeight:600},children:"View"}),Z.jsx(Jl,{open:h,onClose:T,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Z.jsx(Gg,{sx:LU,children:X?Z.jsx(Z.Fragment,{children:Z.jsxs("div",{style:{...Ur,textAlign:"center"},children:[Z.jsx("h3",{children:"Your Discount Has Been Purchased!"}),Z.jsx(cW,{order_number:N,discount:v,first_name:a?.first_name,last_name:a?.last_name,reward_id:e,title:g,vendor_id:i,code:k}),Z.jsx(tt,{onClick:()=>C("/profile"),variant:"contained",sx:{backgroundColor:"#ff2400",color:"white",marginTop:"10px",fontWeight:600},children:"Profile"}),Z.jsx("p1",{children:"Please head to your profile to see all purchased rewards!"})]})}):Z.jsxs(Z.Fragment,{children:[Z.jsxs("div",{id:"full-containter",style:{width:"100%",display:"flex",flexDirection:"row",gap:"3em"},children:[Z.jsxs("div",{id:"left-container",style:{...Ur,justifyContent:"start"},children:[Z.jsx("img",{src:t,alt:"",style:{maxWidth:150}}),Z.jsxs("div",{style:{...Ur,justifyContent:"center"},children:[Z.jsx("p",{style:fC,children:g}),Z.jsxs("p",{children:["Quantity: ",n]}),Z.jsx(TU,{handleChange:$})]})]}),Z.jsxs("div",{id:"right-container",style:{...Ur,width:"100%"},children:[Z.jsx("div",{style:{marginTop:"auto"},children:Z.jsxs(Gg,{sx:{width:"100%",...Ur},children:[Z.jsx(Fg,{sx:{width:"100%",marginLeft:"auto",textAlign:"center",fontSize:25,marginBottom:"10px"},id:"modal-modal-title",variant:"h8",component:"h2",children:"Purchase a Discount!"}),Z.jsxs(Tg,{container:!0,rowSpacing:2,columnSpacing:{xs:12,sm:8,md:8},children:[Z.jsx(Tg,{size:3,children:Z.jsx("div",{children:Z.jsx(tt,{disabled:!S,variant:"contained",name:"10",sx:GC,onClick:M=>F(M.target.name),children:"10%"})})}),Z.jsx(Tg,{size:3,children:Z.jsx("div",{children:Z.jsx(tt,{disabled:!S,variant:"contained",name:"20",sx:GC,onClick:M=>F(M.target.name),children:"20%"})})}),Z.jsx(Tg,{size:3,children:Z.jsx("div",{children:Z.jsx(tt,{disabled:!S,variant:"contained",name:"50",sx:GC,onClick:M=>F(M.target.name),children:"50%"})})}),Z.jsx(Tg,{size:3,children:Z.jsx("div",{children:Z.jsx(tt,{disabled:!S,variant:"contained",name:"100",sx:GC,onClick:M=>F(M.target.name),children:"100%"})})})]})]})}),Z.jsxs("div",{style:{marginTop:"auto",paddingTop:"20px"},children:[Z.jsxs("h1",{style:{...fC,color:O<=0?"red":"black"},children:["Ember Balance: ",O]}),Z.jsxs("h1",{style:fC,children:["USD Cost: ",G," "]}),Z.jsxs("h1",{style:fC,children:["Embers Cost: ",p]})]})]})]}),Z.jsxs(tt,{disabled:!v,onClick:Q,variant:"contained",sx:{backgroundColor:"#ff2400",color:"white",marginTop:"2em",fontWeight:600},children:[" Pay ",p]}),_&&Z.jsx(Fg,{color:"error",sx:{mt:1},children:_})]})})})]})},GC={backgroundColor:"#ff2400",color:"white",marginTop:"10px",fontWeight:600},fC={margin:0,overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-word",lineHeight:"1.1",fontSize:"15px",fontWeight:"bold"},Ur={display:"flex",flexDirection:"column"},DU="http://localhost:8080",jU=({id:e})=>{const[t,g]=f.useState([]);return console.log(e),f.useEffect(()=>{e&&(async()=>{try{const l=await Re.get(`${DU}/api/rewards/${e}`);g(l?.data),console.log(t[0])}catch{console.error("Could't get rewards")}})()},[e]),Z.jsx(Tg,{container:!0,spacing:4,justifyContent:"center",children:t.map((n,l)=>Z.jsx(Tg,{sx:UA,item:!0,xs:"auto",sm:6,md:6,children:Z.jsxs(Rh,{sx:{...UA,padding:".5em",width:150,height:230,borderRadius:3,cursor:"pointer",boxShadow:"0 0 3px #FF5F00"},children:[Z.jsx(kh,{component:"img",height:"100",image:n?.img,alt:n?.title}),Z.jsxs(Xh,{sx:{...UA,paddingTop:"1em",gap:3},children:[Z.jsx(Fg,{variant:"h6",sx:PU,component:"div",children:n?.title}),Z.jsx(QU,{id:n.id,img:n?.img,rewardTitle:n?.title,quantity:n?.quantity,cost:n?.cost,size:n?.size,usdPrice:n?.UsdPrice,vendor_id:e})]})]})},l))})},UA={margin:0,padding:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},PU={margin:0,fontSize:"",overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-word",lineHeight:"1.1",fontSize:"15px",fontWeight:"bold"},OU="http://localhost:8080",qU=()=>{const[e,t]=f.useState([]),[g,n]=f.useState(null),{selectedVendorId:l,setSelectedVendorId:r,handleVendorClick:i}=f.useContext(zm),C="flex-container"+(e.length===3?" three-items":"");f.useEffect(()=>{(async()=>{try{const A=await Re.get(`${OU}/api/vendor/all`);if(A.data){const m=A.data;t(m),r(p=>p||m[0]?.id)}}catch(A){console.log("No vendors received",A)}})()},[]);const a=d=>{console.log("Reward selected:",d),n(d)};return Z.jsx(Z.Fragment,{children:Z.jsxs("div",{style:af,children:[Z.jsx(Qi,{}),Z.jsxs("div",{children:[Z.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:Z.jsx("h1",{style:{...$U,fontSize:"30px"},children:"Purchase Rewards!"})}),Z.jsx("div",{className:C,children:e.map(d=>Z.jsx(Em,{img:d?.img,business_name:d?.business_name,onClick:()=>i(d?.id),isSelected:l===d.id},d?.id))}),Z.jsx("div",{style:{...af,margin:0,padding:"1em"},children:Z.jsx(jU,{handleCardClick:a,isSelected:g?.id,id:l})})]})]})})},$U={color:"#FF5F00"},af={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},_U="http://localhost:8080",eL=async e=>{try{const g=(await Re.post(`${_U}/api/vendor/register`,e)).data;return localStorage.setItem("token",g.token),g}catch(t){throw console.error("register failed",t),t}},tL=()=>{const e=Zo(),[t,g]=f.useState(""),[n,l]=f.useState(""),[r,i]=f.useState(""),[C,a]=f.useState(""),[d,A]=f.useState(""),[m,p]=f.useState(""),B={business_name:t,first_name:n,last_name:r,email:C,password:d},G=async()=>{p("");try{const y=await eL(B);localStorage.setItem("token",y.token),localStorage.setItem("role","vendor"),g(""),a(""),A(""),l(""),i(""),console.log("data: "+y),y&&e("/vendor/store")}catch(y){console.error("Registration failed",y),p(y.response?.data?.message)}};return Z.jsxs("div",{style:gL,children:[Z.jsxs("div",{children:[Z.jsx("h1",{style:{...cf,fontSize:"30px",margin:0},children:"Register Your Business"}),Z.jsx("center",{children:Z.jsx("h3",{style:{...cf,margin:0},children:"Welcome to the Block Party!"})})]}),Z.jsx("div",{style:nL,children:Z.jsxs(Gg,{component:"section",sx:{p:2,border:1,borderRadius:2},style:oL,children:[Z.jsx(Xt,{id:"outlined-basic",label:"Business Name",variant:"outlined",onChange:y=>g(y.target.value),value:t}),Z.jsx("br",{}),Z.jsx(Xt,{id:"outlined-basic",label:"First Name",variant:"outlined",onChange:y=>l(y.target.value),value:n}),Z.jsx("br",{}),Z.jsx(Xt,{id:"outlined-basic",label:"Last Name",variant:"outlined",onChange:y=>i(y.target.value),value:r}),Z.jsx("br",{}),Z.jsx(Xt,{id:"outlined-basic",label:"Email",variant:"outlined",onChange:y=>a(y.target.value),value:C}),Z.jsx("br",{}),Z.jsx(Xt,{id:"outlined-password-input",label:"Password",type:"password",autoComplete:"current-password",onChange:y=>A(y.target.value),value:d}),Z.jsx("br",{}),Z.jsx(tt,{variant:"contained",sx:{color:"white",backgroundColor:"#ff2400"},onClick:()=>G(),children:"Submit"}),Z.jsx(tt,{size:"small",sx:{color:"#ff2400"},onClick:()=>e("/vendor/login"),children:"Log in"}),m&&Z.jsx("p",{style:{color:"red",marginTop:"10px"},children:m})]})})]})},gL={position:"relative",width:"100vw",height:"100vh",margin:"0 auto",color:"white",display:"flex",gap:"50px",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"#FF5F00"},nL={position:"relative",margin:"0 auto",display:"flex",justifyContent:"center",alignItems:"center"},oL={display:"flex",flexDirection:"column",gap:"5px",padding:"32px",background:"#fff",borderRadius:"8px",borderWidth:"3px",borderColor:"#ff2400",width:"300px"},cf={textShadow:`
        -1px -1px 0 #ff2400,  
        1px -1px 0 #ff2400,
        -1px  1px 0 #ff2400,
        1px  1px 0 #ff2400
    `},lL="http://localhost:8080",IL=async e=>{try{return(await Re.post(`${lL}/api/vendor/login`,e)).data}catch(t){throw console.error("Login failed",t),t}},rL=()=>{const e=Zo(),[t,g]=f.useState([]),[n,l]=f.useState([]),[r,i]=f.useState([]),C={email:t,password:n},a=async d=>{i("");try{const A=await IL(d);localStorage.setItem("token",A.token),localStorage.setItem("role","vendor"),g(""),l(""),A&&e("/vendor/store")}catch(A){console.error("login failed",A),i(A.message||"Log in failed")}};return Z.jsxs("div",{style:iL,children:[Z.jsxs("div",{children:[Z.jsx("h1",{style:{...df,fontSize:"30px",margin:0},children:"Log In to Your Business"}),Z.jsx("center",{children:Z.jsx("h3",{style:{...df,margin:0},children:"Enter the Block Party"})})]}),Z.jsx("div",{style:sL,children:Z.jsxs(Gg,{component:"section",sx:{p:2,border:1,borderRadius:2},style:CL,children:[Z.jsx(Xt,{id:"outlined-basic",label:"Email",variant:"outlined",onChange:d=>g(d.target.value),value:t}),Z.jsx("br",{}),Z.jsx(Xt,{id:"outlined-password-input",label:"Password",type:"password",autoComplete:"current-password",onChange:d=>l(d.target.value),value:n}),Z.jsx("br",{}),Z.jsx(tt,{variant:"contained",sx:{color:"white",backgroundColor:"#ff2400"},onClick:()=>a(C),children:"Submit"}),Z.jsx(tt,{size:"small",sx:{color:"#ff2400"},onClick:()=>e("/vendor/register"),children:"Register"}),r&&Z.jsx("p",{style:{color:"red",marginTop:"10px"},children:r})]})})]})},iL={position:"relative",width:"100vw",height:"100vh",margin:"0 auto",display:"flex",gap:"50px",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"#FF5F00"},sL={position:"relative",margin:"0 auto",display:"flex",justifyContent:"center",alignItems:"center"},CL={display:"flex",flexDirection:"column",gap:"5px",padding:"32px",background:"#fff",borderRadius:"8px",boxShadow:"0 0 10px rgba(0,0,0,0.1)",borderWidth:"3px",borderColor:"#ff2400",width:"300px"},df={color:"white",textShadow:`
    -1px -1px 0 #ff2400,  
     1px -1px 0 #ff2400,
    -1px  1px 0 #ff2400,
     1px  1px 0 #ff2400
  `},aL="http://localhost:8080",VW=()=>{const{logout:e}=f.useContext(Li),t=Zo(),[g,n]=f.useState(null),l=!!g,r=a=>{n(a.currentTarget)},i=a=>{n(null),t(a)},C=async a=>{try{await Re.post(`${aL}/api/auth/logout`)||console.error("couldn't log out"),e(),Re.defaults.headers.common.Authorization="",t(a)}catch(d){console.log(d)}};return Z.jsx("div",{id:"nav",style:cL,children:Z.jsxs("div",{children:[Z.jsx(tt,{id:"basic-button","aria-controls":l?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":l?"true":void 0,onClick:r,children:Z.jsx(uS,{sx:{color:"white"}})}),Z.jsxs(xm,{id:"basic-menu",anchorEl:g,open:l,onClose:()=>i(),slotProps:{list:{"aria-labelledby":"basic-button"}},children:[Z.jsxs(kg,{onClick:()=>i("/vendor/store"),children:[Z.jsx(R9,{fontSize:"small"})," Store"]}),Z.jsxs(kg,{onClick:()=>i("/vendor/rewards"),children:[" ",Z.jsx(W9,{fontSize:"small"})," Purchased Rewards"]}),Z.jsx(kg,{onClick:()=>C("/vendor/login"),style:{color:"red"},children:"Logout"})]})]})})},cL={width:"100%",display:"flex",alignItems:"center",position:"sticky",top:0,zIndex:10,backgroundColor:"#ff2400",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",justifyContent:"space-between"},dL="http://localhost:8080",AL=({id:e})=>{const t=["xs","s","m","l","xl","xxl"],[g,n]=f.useState(null),l=a=>n(a),r=()=>n(null),i=async a=>{try{const d={reward_id:e,sizeKey:a,value:!1},A=await Re.put(`${dL}/api/rewards/update/size`,d);console.log("Updated size:",A.data),r()}catch(d){console.error("Error updating size",d)}},C={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:250,bgcolor:"background.paper",color:"black",borderRadius:"5px",boxShadow:24,p:4,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center"};return Z.jsx(Tg,{container:!0,rowSpacing:1,columnSpacing:{xs:2,sm:8,md:8},children:t.map(a=>Z.jsxs(Tg,{item:!0,xs:4,children:[" ",Z.jsx(tt,{variant:"contained",sx:{backgroundColor:"#ff2400",color:"white",marginTop:"10px",fontWeight:600},onClick:()=>l(a),children:a.toUpperCase()}),Z.jsx(Jl,{open:g===a,onClose:r,children:Z.jsxs(Gg,{sx:C,children:[Z.jsxs(Fg,{variant:"h6",component:"h2",sx:{marginBottom:"1em",color:"black"},children:["Are you sure you want to disable ",a.toUpperCase(),"?"]}),Z.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"1em"},children:[Z.jsx(tt,{onClick:()=>i(a),variant:"contained",sx:{backgroundColor:"#ff2400",color:"white",fontWeight:600},children:"Yes"}),Z.jsx(tt,{onClick:r,variant:"outlined",sx:{fontWeight:600},children:"Cancel"})]})]})})]},a))})},BC="http://localhost:8080",uL=()=>{const[e,t]=f.useState(null),[g,n]=f.useState(null);f.useEffect(()=>{(async()=>{const C=localStorage.getItem("token");try{const a=await Re.get(`${BC}/api/vendor/`,{headers:{Authorization:`Bearer ${C}`}});t(a?.data),console.log(a?.data)}catch{console.error("Unable to get vendor");return}})()},[]),f.useEffect(()=>{(async()=>{try{if(e?.id){const C=await Re.get(`${BC}/api/rewards/${e?.id}`);n(C?.data)}console.log(e?.id)}catch{console.error("Could't get rewards")}})()},[e?.id]);const l=async i=>{let C="";console.log("this is the preview: "+i);try{const a=new FormData;if(a.append("image",i),C=(await Re.post(`${BC}/api/upload`,a,{headers:{"Content-Type":"multipart/form-data"}}))?.data?.imageUrl,!C)throw new Error("No image URL returned from server");console.log("Uploaded Image URL:",C)}catch(a){console.error("Upload failed",a);return}try{const a={img:C};console.log(a);const d=await Re.put(`${BC}/api/vendor/${e.id}/image`,a);if(d.status!==200&&d.status!==201)throw new Error("Failed to set image");alert("Image set!")}catch{console.error("Error occured while setting image")}};return Z.jsxs("div",{style:mL,children:[Z.jsx(VW,{}),Z.jsx("h2",{style:{...hL,color:"black",textAlign:"center"},children:"Click to set an image for your business"}),Z.jsx("div",{className:"flex-container",children:Z.jsx(Em,{img:e?.img,business_name:e?.business_name,onUpload:l})}),Z.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Z.jsx(Tg,{container:!0,spacing:3,style:{marginTop:"2em",maxWidth:"90%"},children:g?.map((i,C)=>Z.jsx(Tg,{item:!0,xs:12,sm:6,md:4,children:Z.jsxs(Rh,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"1em",borderRadius:3,boxShadow:"0 0 5px #FF5F00",minHeight:120,gap:2},children:[Z.jsx(kh,{component:"img",image:i?.img,alt:i?.title,sx:{width:100,height:100,objectFit:"cover",borderRadius:2}}),Z.jsxs(Xh,{sx:{flex:1,padding:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},children:[Z.jsx(Fg,{variant:"subtitle1",sx:{fontWeight:600},children:i?.title}),Z.jsxs(Fg,{variant:"body2",sx:{marginBottom:1},children:["Quantity: ",i?.quantity]}),Z.jsx(AL,{id:i?.id})]})]})},C))})})]})},mL={width:"100vw"},hL={display:"flex",alignItems:"center",justifyContent:"center"},pL="http://localhost:8080",bL=({order_number:e,first_name:t,last_name:g,title:n,size:l,discount:r,cost:i})=>{const[C,a]=f.useState(null),d=i*(1-r/100)/100,A=async()=>{try{const m=await Re.put(`${pL}/api/rewards/redeem`,{code:C});console.log(m?.message)}catch(m){console.log("error:",m.message)}};return Z.jsxs("div",{style:ZL,children:[Z.jsxs("div",{style:yL,children:[Z.jsxs("h3",{style:GL,children:["Order: #",String(e).padStart(3,"0")]}),Z.jsxs("div",{style:SC,children:[Z.jsx("h3",{style:zo,children:"Name:"}),Z.jsxs("p",{style:zo,children:[t," ",g]})]}),Z.jsxs("div",{style:SC,children:[Z.jsx("h3",{style:zo,children:"Item:"}),Z.jsx("p",{style:zo,children:n})]}),Z.jsxs("div",{children:[Z.jsxs("div",{style:SC,children:[Z.jsx("h3",{style:zo,children:"Discounted Price:"}),Z.jsxs("p",{style:zo,children:["$",d]})]}),Z.jsxs("div",{style:SC,children:[Z.jsx("h3",{style:zo,children:"Size: "}),Z.jsx("p",{style:zo,children:l?.toUpperCase()})]})]})]}),Z.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Z.jsx(Xt,{onChange:m=>a(m.target.value),id:"outlined-basic",label:"code",variant:"outlined"}),Z.jsx(tt,{onClick:A,variant:"contained",sx:{backgroundColor:"#ff2400",color:"white",marginTop:"12px",fontWeight:600},children:"Submit"})]})]})},ZL={width:250,borderRadius:"5px",color:"black",padding:15,border:"3px solid #FF5F00",radius:"15px",marginBottom:"1rem"},SC={display:"flex",flexDirection:"row",gap:"2px"},yL={justifyContent:"flex-start",alignItems:"flex-start",fontSize:25,marginTop:0,marginBottom:10,padding:0},zo={margin:0,padding:0,textAlign:"left",fontSize:17},GL={marginTop:0,marginBottom:5,padding:0,textAlign:"center",fontSize:20},fL="http://localhost:8080",BL=()=>{const[e,t]=f.useState(!1),[g,n]=f.useState([]),[l,r]=f.useState(null),i=f.useRef(new Set),C=localStorage.getItem("token");f.useEffect(()=>{if(!C)return;let d;try{d=ca(C)}catch(p){console.error("Invalid token",p);return}const A=d?.id;if(!A){console.warn("Vendor ID missing in token");return}const m=()=>{console.log("connected"),bg.emit("register_vendor",{vendorId:A})};return bg.on("connect",m),bg.on("registered_vendor",({vendorId:p})=>{bg.emit("join_vendor_room",{vendorId:p})}),bg.on("new_coupon",p=>{i.current.has(p?.order_number)||(i.current.add(p?.order_number),console.log("live coupon:",p),n(B=>[...B,p]))}),bg.on("join_receipt_room",({room:p})=>{const B={room:p,role:"vendor"};bg.emit("request_join_receipt_room",B)}),bg.on("show_receipt",p=>{r(p),console.log(p)}),()=>{bg.off("connect",m)}},[C]),f.useEffect(()=>{l&&(console.log("Receipt received:",l),t(!0))},[l]);const a=()=>{t(!1),r(null)};return f.useEffect(()=>{if(!C||l!==null)return;(async()=>{try{const A=await Re.get(`${fL}/api/rewards/vendor/coupon`,{headers:{Authorization:`Bearer ${C}`}});n(A?.data),console.log("coupons",A?.data)}catch(A){console.log("Error fetching profile data:",A)}})()},[C,l]),Z.jsxs("div",{style:SL,children:[Z.jsx(VW,{}),Z.jsx("h1",{style:{color:"black",textAlign:"center",fontSize:32},children:"Discounted Rewards"}),Z.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Z.jsx(Jl,{open:!!l,onClose:()=>a,children:Z.jsx(Gg,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,width:300},children:Z.jsxs("div",{style:{marginTop:0,color:"black"},children:[Z.jsx("h2",{style:{marginTop:0,color:"black"},children:"Receipt"}),Z.jsxs("p",{children:[Z.jsx("strong",{children:"Order:"})," ",l?.order_number]}),Z.jsxs("p",{children:[Z.jsx("strong",{children:"Customer:"})," ",l?.user_name]}),Z.jsxs("p",{children:[Z.jsx("strong",{children:"Vendor Business:"})," ",l?.business_name]}),Z.jsxs("p",{children:[Z.jsx("strong",{children:"Vendor Name:"})," ",l?.vendor_name]}),Z.jsxs("p",{children:[Z.jsx("strong",{children:"Title:"})," ",l?.reward_title]}),Z.jsxs("p",{children:[Z.jsx("strong",{children:"Embers Spent:"})," ",l?.spent]}),Z.jsxs("p",{children:[Z.jsx("strong",{children:"Remaining Price"})," ",l?.remaining_USD]}),Z.jsx("button",{onClick:()=>r(null),children:"Close"})]})})}),g?.filter(d=>d.status==="pending").map((d,A)=>Z.jsx(bL,{order_number:d?.order_number,first_name:d?.first_name,last_name:d?.last_name,title:d?.reward_title,size:d?.size,discount:d?.discount,cost:d?.cost},A))]})]})},SL={width:"100vw"};function VL(){return Z.jsx(Lk,{children:Z.jsxs(yk,{children:[Z.jsx(Gn,{path:"/vendor/rewards",element:Z.jsx(BL,{})}),Z.jsx(Gn,{path:"/vendor/store",element:Z.jsx(uL,{})}),Z.jsx(Gn,{path:"/vendor/login",element:Z.jsx(rL,{})}),Z.jsx(Gn,{path:"/vendor/register",element:Z.jsx(tL,{})}),Z.jsx(Gn,{path:"/member",element:Z.jsx(TT,{})}),Z.jsx(Gn,{path:"/rewards",element:Z.jsx(qU,{})}),Z.jsx(Gn,{path:"/profile",element:Z.jsx(zU,{})}),Z.jsx(Gn,{path:"/home",element:Z.jsx(Zz,{})}),Z.jsx(Gn,{path:"/",element:Z.jsx(vM,{})}),Z.jsx(Gn,{path:"/register",element:Z.jsx(KM,{})})]})})}const WL="http://localhost:8080",RL=({children:e})=>{const[t,g]=f.useState(null),[n,l]=f.useState(()=>localStorage.getItem("isMember")==="true"),[r,i]=f.useState(()=>localStorage.getItem("isAdmin")==="true"),[C,a]=f.useState(()=>localStorage.getItem("userRole")||null);f.useEffect(()=>{const p=localStorage.getItem("token");if(p)try{const B=ca(p);g(B)}catch(B){console.error("Invalid token:",B),localStorage.removeItem("token"),g(null)}},[]);const d=async p=>{try{const B=await Re.post(`${WL}/api/validate`,{passcode:p});console.log("ran"),B?.data?.valid&&(B.data.role==="member"&&(l(!0),localStorage.setItem("isMember","true")),B.data.role==="admin"&&(i(!0),localStorage.setItem("isAdmin","true")),a(B.data.role),localStorage.setItem("userRole",B.data.role),console.log("User role:",B.data.role))}catch(B){console.error("Validation error",B),alert("Something went wrong.")}},A=p=>{localStorage.setItem("token",p);const B=ca(p);g(B)},m=()=>{localStorage.removeItem("token"),localStorage.removeItem("isMember"),localStorage.removeItem("isAdmin"),localStorage.removeItem("userRole"),localStorage.removeItem("role"),l(!1),i(!1),a(null),g(null)};return Z.jsx(Li.Provider,{value:{user:t,login:A,logout:m,isMember:n,isAdmin:r,userRole:C,memberPasscodeValidationClick:d},children:e})},XL=({children:e})=>{const[t,g]=f.useState(null),n=l=>{g(l)};return Z.jsx(zm.Provider,{value:{selectedVendorId:t,setSelectedVendorId:g,handleVendorClick:n},children:e})},kL=f.createContext(),JL=({children:e})=>Z.jsx(kL.Provider,{value:{},children:e});kX.createRoot(document.getElementById("root")).render(Z.jsx(RL,{children:Z.jsx(Sn.StrictMode,{children:Z.jsx(JL,{children:Z.jsx(XL,{children:Z.jsx(VL,{})})})})}));
